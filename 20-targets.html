<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Partie 20 Organiser un projet avec targets | Introduction à R et au tidyverse</title>
  <meta name="description" content="Une introduction à R et aux extensions du tidyverse" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Partie 20 Organiser un projet avec targets | Introduction à R et au tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Une introduction à R et aux extensions du tidyverse" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Partie 20 Organiser un projet avec targets | Introduction à R et au tidyverse" />
  
  <meta name="twitter:description" content="Une introduction à R et aux extensions du tidyverse" />
  

<meta name="author" content="Julien Barnier" />


<meta name="date" content="2021-10-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="19-programmer-tidyverse.html"/>
<link rel="next" href="21-ressources.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Introduction à R et au <em>tidyverse</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>À propos de ce document</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-presentation.html"><a href="01-presentation.html"><i class="fa fa-check"></i><b>1</b> Présentation</a><ul>
<li class="chapter" data-level="1.1" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-de-r"><i class="fa fa-check"></i><b>1.1</b> À propos de R</a></li>
<li class="chapter" data-level="1.2" data-path="01-presentation.html"><a href="01-presentation.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> À propos de RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-du-tidyverse"><i class="fa fa-check"></i><b>1.3</b> À propos du <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.4" data-path="01-presentation.html"><a href="01-presentation.html#structure-du-document"><i class="fa fa-check"></i><b>1.4</b> Structure du document</a></li>
<li class="chapter" data-level="1.5" data-path="01-presentation.html"><a href="01-presentation.html#prérequis"><i class="fa fa-check"></i><b>1.5</b> Prérequis</a></li>
</ul></li>
<li class="part"><span><b>I Introduction à R</b></span></li>
<li class="chapter" data-level="2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html"><i class="fa fa-check"></i><b>2</b> Prise en main</a><ul>
<li class="chapter" data-level="2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#la-console"><i class="fa fa-check"></i><b>2.1</b> La console</a><ul>
<li class="chapter" data-level="2.1.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#linvite-de-commandes"><i class="fa fa-check"></i><b>2.1.1</b> L’invite de commandes</a></li>
<li class="chapter" data-level="2.1.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#précisions-concernant-la-saisie-des-commandes"><i class="fa fa-check"></i><b>2.1.2</b> Précisions concernant la saisie des commandes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets"><i class="fa fa-check"></i><b>2.2</b> Objets</a><ul>
<li class="chapter" data-level="2.2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets-simples"><i class="fa fa-check"></i><b>2.2.1</b> Objets simples</a></li>
<li class="chapter" data-level="2.2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#introvecteurs"><i class="fa fa-check"></i><b>2.2.2</b> Vecteurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#fonctions"><i class="fa fa-check"></i><b>2.3</b> Fonctions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#principe"><i class="fa fa-check"></i><b>2.3.1</b> Principe</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#arguments"><i class="fa fa-check"></i><b>2.3.2</b> Arguments</a></li>
<li class="chapter" data-level="2.3.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#aide-sur-une-fonction"><i class="fa fa-check"></i><b>2.3.3</b> Aide sur une fonction</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#regrouper-ses-commandes-dans-des-scripts"><i class="fa fa-check"></i><b>2.4</b> Regrouper ses commandes dans des scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#commentaires"><i class="fa fa-check"></i><b>2.4.1</b> Commentaires</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#packages"><i class="fa fa-check"></i><b>2.5</b> Installer et charger des extensions (<em>packages</em>)</a></li>
<li class="chapter" data-level="2.6" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#exercices"><i class="fa fa-check"></i><b>2.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-premier_travail.html"><a href="03-premier_travail.html"><i class="fa fa-check"></i><b>3</b> Premier travail avec des données</a><ul>
<li class="chapter" data-level="3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#jeu-de-données-dexemple"><i class="fa fa-check"></i><b>3.1</b> Jeu de données d’exemple</a></li>
<li class="chapter" data-level="3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#tableau-de-données-data-frame"><i class="fa fa-check"></i><b>3.2</b> Tableau de données (<em>data frame</em>)</a><ul>
<li class="chapter" data-level="3.2.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#structure-du-tableau"><i class="fa fa-check"></i><b>3.2.1</b> Structure du tableau</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#accéder-aux-variables-dun-tableau"><i class="fa fa-check"></i><b>3.2.2</b> Accéder aux variables d’un tableau</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#créer-une-nouvelle-variable"><i class="fa fa-check"></i><b>3.2.3</b> Créer une nouvelle variable</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyse-univariée"><i class="fa fa-check"></i><b>3.3</b> Analyse univariée</a><ul>
<li class="chapter" data-level="3.3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-quantitative"><i class="fa fa-check"></i><b>3.3.1</b> Analyser une variable quantitative</a></li>
<li class="chapter" data-level="3.3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-qualitative"><i class="fa fa-check"></i><b>3.3.2</b> Analyser une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="03-premier_travail.html"><a href="03-premier_travail.html#exercices-1"><i class="fa fa-check"></i><b>3.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-bivarie.html"><a href="04-bivarie.html"><i class="fa fa-check"></i><b>4</b> Analyse bivariée</a><ul>
<li class="chapter" data-level="4.1" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-qualitatives"><i class="fa fa-check"></i><b>4.1</b> Croisement de deux variables qualitatives</a><ul>
<li class="chapter" data-level="4.1.1" data-path="04-bivarie.html"><a href="04-bivarie.html#tableaux-croisés"><i class="fa fa-check"></i><b>4.1.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="4.1.2" data-path="04-bivarie.html"><a href="04-bivarie.html#test-du-χ²"><i class="fa fa-check"></i><b>4.1.2</b> Test du χ²</a></li>
<li class="chapter" data-level="4.1.3" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-1"><i class="fa fa-check"></i><b>4.1.3</b> Représentation graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-dune-variable-quantitative-et-dune-variable-qualitative"><i class="fa fa-check"></i><b>4.2</b> Croisement d’une variable quantitative et d’une variable qualitative</a><ul>
<li class="chapter" data-level="4.2.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-2"><i class="fa fa-check"></i><b>4.2.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.2.2" data-path="04-bivarie.html"><a href="04-bivarie.html#tapply"><i class="fa fa-check"></i><b>4.2.2</b> Calculs d’indicateurs</a></li>
<li class="chapter" data-level="4.2.3" data-path="04-bivarie.html"><a href="04-bivarie.html#tests-statistiques"><i class="fa fa-check"></i><b>4.2.3</b> Tests statistiques</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-quantitatives"><i class="fa fa-check"></i><b>4.3</b> Croisement de deux variables quantitatives</a><ul>
<li class="chapter" data-level="4.3.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-3"><i class="fa fa-check"></i><b>4.3.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.3.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calcul-dindicateurs"><i class="fa fa-check"></i><b>4.3.2</b> Calcul d’indicateurs</a></li>
<li class="chapter" data-level="4.3.3" data-path="04-bivarie.html"><a href="04-bivarie.html#régression-linéaire"><i class="fa fa-check"></i><b>4.3.3</b> Régression linéaire</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04-bivarie.html"><a href="04-bivarie.html#exercices-2"><i class="fa fa-check"></i><b>4.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-organiser.html"><a href="05-organiser.html"><i class="fa fa-check"></i><b>5</b> Organiser ses scripts</a><ul>
<li class="chapter" data-level="5.1" data-path="05-organiser.html"><a href="05-organiser.html#projets"><i class="fa fa-check"></i><b>5.1</b> Les projets dans RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="05-organiser.html"><a href="05-organiser.html#créer-des-sections-dans-un-script"><i class="fa fa-check"></i><b>5.2</b> Créer des sections dans un script</a></li>
<li class="chapter" data-level="5.3" data-path="05-organiser.html"><a href="05-organiser.html#répartir-son-travail-entre-plusieurs-scripts"><i class="fa fa-check"></i><b>5.3</b> Répartir son travail entre plusieurs scripts</a></li>
<li class="chapter" data-level="5.4" data-path="05-organiser.html"><a href="05-organiser.html#désactiver-la-sauvegarde-de-lespace-de-travail"><i class="fa fa-check"></i><b>5.4</b> Désactiver la sauvegarde de l’espace de travail</a></li>
</ul></li>
<li class="part"><span><b>II Introduction au tidyverse</b></span></li>
<li class="chapter" data-level="6" data-path="06-tidyverse.html"><a href="06-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Le tidyverse</a><ul>
<li class="chapter" data-level="6.1" data-path="06-tidyverse.html"><a href="06-tidyverse.html#extensions"><i class="fa fa-check"></i><b>6.1</b> Extensions</a></li>
<li class="chapter" data-level="6.2" data-path="06-tidyverse.html"><a href="06-tidyverse.html#installation"><i class="fa fa-check"></i><b>6.2</b> Installation</a></li>
<li class="chapter" data-level="6.3" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tidydata"><i class="fa fa-check"></i><b>6.3</b> tidy data</a></li>
<li class="chapter" data-level="6.4" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>6.4</b> tibbles</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-import.html"><a href="07-import.html"><i class="fa fa-check"></i><b>7</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="7.1" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-textes"><i class="fa fa-check"></i><b>7.1</b> Import de fichiers textes</a><ul>
<li class="chapter" data-level="7.1.1" data-path="07-import.html"><a href="07-import.html#interface-interactive-dimport-de-fichiers"><i class="fa fa-check"></i><b>7.1.1</b> Interface interactive d’import de fichiers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-import.html"><a href="07-import.html#import-depuis-un-fichier-excel"><i class="fa fa-check"></i><b>7.2</b> Import depuis un fichier Excel</a></li>
<li class="chapter" data-level="7.3" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-sas-spss-et-stata"><i class="fa fa-check"></i><b>7.3</b> Import de fichiers SAS, SPSS et Stata</a></li>
<li class="chapter" data-level="7.4" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-dbase"><i class="fa fa-check"></i><b>7.4</b> Import de fichiers dBase</a></li>
<li class="chapter" data-level="7.5" data-path="07-import.html"><a href="07-import.html#connexion-à-des-bases-de-données"><i class="fa fa-check"></i><b>7.5</b> Connexion à des bases de données</a><ul>
<li class="chapter" data-level="7.5.1" data-path="07-import.html"><a href="07-import.html#interfaçage-via-lextension-dbi"><i class="fa fa-check"></i><b>7.5.1</b> Interfaçage via l’extension <code>DBI</code></a></li>
<li class="chapter" data-level="7.5.2" data-path="07-import.html"><a href="07-import.html#utilisation-de-dplyr-et-dbplyr"><i class="fa fa-check"></i><b>7.5.2</b> Utilisation de <code>dplyr</code> et <code>dbplyr</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="07-import.html"><a href="07-import.html#ressources"><i class="fa fa-check"></i><b>7.5.3</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="07-import.html"><a href="07-import.html#export-de-données"><i class="fa fa-check"></i><b>7.6</b> Export de données</a><ul>
<li class="chapter" data-level="7.6.1" data-path="07-import.html"><a href="07-import.html#export-de-tableaux-de-données"><i class="fa fa-check"></i><b>7.6.1</b> Export de tableaux de données</a></li>
<li class="chapter" data-level="7.6.2" data-path="07-import.html"><a href="07-import.html#sauvegarder-des-objets"><i class="fa fa-check"></i><b>7.6.2</b> Sauvegarder des objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-ggplot2.html"><a href="08-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Visualiser avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="8.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#préparation"><i class="fa fa-check"></i><b>8.1</b> Préparation</a></li>
<li class="chapter" data-level="8.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#initialisation"><i class="fa fa-check"></i><b>8.2</b> Initialisation</a></li>
<li class="chapter" data-level="8.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-geom"><i class="fa fa-check"></i><b>8.3</b> Exemples de <code>geom</code></a><ul>
<li class="chapter" data-level="8.3.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>8.3.1</b> <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_violin"><i class="fa fa-check"></i><b>8.3.2</b> <code>geom_violin</code></a></li>
<li class="chapter" data-level="8.3.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar"><i class="fa fa-check"></i><b>8.3.3</b> <code>geom_bar</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_text"><i class="fa fa-check"></i><b>8.3.4</b> <code>geom_text</code></a></li>
<li class="chapter" data-level="8.3.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_label"><i class="fa fa-check"></i><b>8.3.5</b> <code>geom_label</code></a></li>
<li class="chapter" data-level="8.3.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_density"><i class="fa fa-check"></i><b>8.3.6</b> <code>geom_density</code></a></li>
<li class="chapter" data-level="8.3.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_line"><i class="fa fa-check"></i><b>8.3.7</b> <code>geom_line</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#mappages"><i class="fa fa-check"></i><b>8.4</b> Mappages</a><ul>
<li class="chapter" data-level="8.4.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-mappages"><i class="fa fa-check"></i><b>8.4.1</b> Exemples de mappages</a></li>
<li class="chapter" data-level="8.4.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#aes-or-not-aes"><i class="fa fa-check"></i><b>8.4.2</b> <code>aes()</code> or not <code>aes()</code> ?</a></li>
<li class="chapter" data-level="8.4.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar-et-position"><i class="fa fa-check"></i><b>8.4.3</b> <code>geom_bar</code> et <code>position</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#représentation-de-plusieurs-geom"><i class="fa fa-check"></i><b>8.5</b> Représentation de plusieurs <code>geom</code></a><ul>
<li class="chapter" data-level="8.5.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#plusieurs-sources-de-données"><i class="fa fa-check"></i><b>8.5.1</b> Plusieurs sources de données</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#faceting"><i class="fa fa-check"></i><b>8.6</b> Faceting</a></li>
<li class="chapter" data-level="8.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scales"><i class="fa fa-check"></i><b>8.7</b> Scales</a><ul>
<li class="chapter" data-level="8.7.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_size"><i class="fa fa-check"></i><b>8.7.1</b> <code>scale_size</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_x-scale_y"><i class="fa fa-check"></i><b>8.7.2</b> <code>scale_x</code>, <code>scale_y</code></a></li>
<li class="chapter" data-level="8.7.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scalecolor"><i class="fa fa-check"></i><b>8.7.3</b> <code>scale_color</code>, <code>scale_fill</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="08-ggplot2.html"><a href="08-ggplot2.html#thèmes"><i class="fa fa-check"></i><b>8.8</b> Thèmes</a></li>
<li class="chapter" data-level="8.9" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ladd-in-esquisse"><i class="fa fa-check"></i><b>8.9</b> L’add-in <code>esquisse</code></a></li>
<li class="chapter" data-level="8.10" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ressources-1"><i class="fa fa-check"></i><b>8.10</b> Ressources</a></li>
<li class="chapter" data-level="8.11" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exercices-3"><i class="fa fa-check"></i><b>8.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-recodages.html"><a href="09-recodages.html"><i class="fa fa-check"></i><b>9</b> Recoder des variables</a><ul>
<li class="chapter" data-level="9.1" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs"><i class="fa fa-check"></i><b>9.1</b> Rappel sur les variables et les vecteurs</a></li>
<li class="chapter" data-level="9.2" data-path="09-recodages.html"><a href="09-recodages.html#tests"><i class="fa fa-check"></i><b>9.2</b> Tests et comparaison</a></li>
<li class="chapter" data-level="9.3" data-path="09-recodages.html"><a href="09-recodages.html#recoder-une-variable-qualitative"><i class="fa fa-check"></i><b>9.3</b> Recoder une variable qualitative</a><ul>
<li class="chapter" data-level="9.3.1" data-path="09-recodages.html"><a href="09-recodages.html#facteurs"><i class="fa fa-check"></i><b>9.3.1</b> Facteurs et <code>forcats</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="09-recodages.html"><a href="09-recodages.html#recode"><i class="fa fa-check"></i><b>9.3.2</b> Modifier les modalités d’une variable qualitative</a></li>
<li class="chapter" data-level="9.3.3" data-path="09-recodages.html"><a href="09-recodages.html#ordonner-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.3</b> Ordonner les modalités d’une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables"><i class="fa fa-check"></i><b>9.4</b> Combiner plusieurs variables</a><ul>
<li class="chapter" data-level="9.4.1" data-path="09-recodages.html"><a href="09-recodages.html#if-else"><i class="fa fa-check"></i><b>9.4.1</b> <code>if_else</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="09-recodages.html"><a href="09-recodages.html#case_when"><i class="fa fa-check"></i><b>9.4.2</b> <code>case_when</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique-en-classes"><i class="fa fa-check"></i><b>9.5</b> Découper une variable numérique en classes</a><ul>
<li class="chapter" data-level="9.5.1" data-path="09-recodages.html"><a href="09-recodages.html#interface-graphique"><i class="fa fa-check"></i><b>9.5.1</b> Interface graphique</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="09-recodages.html"><a href="09-recodages.html#exercices-4"><i class="fa fa-check"></i><b>9.6</b> Exercices</a><ul>
<li class="chapter" data-level="9.6.1" data-path="09-recodages.html"><a href="09-recodages.html#préparation-1"><i class="fa fa-check"></i><b>9.6.1</b> Préparation</a></li>
<li class="chapter" data-level="9.6.2" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs-et-tests"><i class="fa fa-check"></i><b>9.6.2</b> Vecteurs et tests</a></li>
<li class="chapter" data-level="9.6.3" data-path="09-recodages.html"><a href="09-recodages.html#recodages-de-variable-qualitative"><i class="fa fa-check"></i><b>9.6.3</b> Recodages de variable qualitative</a></li>
<li class="chapter" data-level="9.6.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables-1"><i class="fa fa-check"></i><b>9.6.4</b> Combiner plusieurs variables</a></li>
<li class="chapter" data-level="9.6.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique"><i class="fa fa-check"></i><b>9.6.5</b> Découper une variable numérique</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-dplyr.html"><a href="10-dplyr.html"><i class="fa fa-check"></i><b>10</b> Manipuler les données avec <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.1" data-path="10-dplyr.html"><a href="10-dplyr.html#préparation-2"><i class="fa fa-check"></i><b>10.1</b> Préparation</a></li>
<li class="chapter" data-level="10.2" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-dplyr"><i class="fa fa-check"></i><b>10.2</b> Les verbes de <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice"><i class="fa fa-check"></i><b>10.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="10-dplyr.html"><a href="10-dplyr.html#filter"><i class="fa fa-check"></i><b>10.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="10-dplyr.html"><a href="10-dplyr.html#select-rename"><i class="fa fa-check"></i><b>10.2.3</b> <code>select</code> et <code>rename</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="10-dplyr.html"><a href="10-dplyr.html#arrange"><i class="fa fa-check"></i><b>10.2.4</b> <code>arrange</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="10-dplyr.html"><a href="10-dplyr.html#mutate"><i class="fa fa-check"></i><b>10.2.5</b> <code>mutate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-dplyr.html"><a href="10-dplyr.html#pipe"><i class="fa fa-check"></i><b>10.3</b> Enchaîner les opérations avec le <em>pipe</em></a></li>
<li class="chapter" data-level="10.4" data-path="10-dplyr.html"><a href="10-dplyr.html#opérations-groupées"><i class="fa fa-check"></i><b>10.4</b> Opérations groupées</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by"><i class="fa fa-check"></i><b>10.4.1</b> <code>group_by</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="10-dplyr.html"><a href="10-dplyr.html#summarise-et-count"><i class="fa fa-check"></i><b>10.4.2</b> <code>summarise</code> et <code>count</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="10-dplyr.html"><a href="10-dplyr.html#grouper-selon-plusieurs-variables"><i class="fa fa-check"></i><b>10.4.3</b> Grouper selon plusieurs variables</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-dplyr.html"><a href="10-dplyr.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>10.5</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_sample"><i class="fa fa-check"></i><b>10.5.1</b> <code>slice_sample</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_head-slice_tail-slice_min-slice_max"><i class="fa fa-check"></i><b>10.5.2</b> <code>slice_head</code>, <code>slice_tail</code>, <code>slice_min</code>, <code>slice_max</code></a></li>
<li class="chapter" data-level="10.5.3" data-path="10-dplyr.html"><a href="10-dplyr.html#lead-et-lag"><i class="fa fa-check"></i><b>10.5.3</b> <code>lead</code> et <code>lag</code></a></li>
<li class="chapter" data-level="10.5.4" data-path="10-dplyr.html"><a href="10-dplyr.html#distinct-et-n_distinct"><i class="fa fa-check"></i><b>10.5.4</b> <code>distinct</code> et <code>n_distinct</code></a></li>
<li class="chapter" data-level="10.5.5" data-path="10-dplyr.html"><a href="10-dplyr.html#relocate"><i class="fa fa-check"></i><b>10.5.5</b> <code>relocate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-dplyr.html"><a href="10-dplyr.html#tables-multiples"><i class="fa fa-check"></i><b>10.6</b> Tables multiples</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-dplyr.html"><a href="10-dplyr.html#concaténation-bind_rows-et-bind_cols"><i class="fa fa-check"></i><b>10.6.1</b> Concaténation : <code>bind_rows</code> et <code>bind_cols</code></a></li>
<li class="chapter" data-level="10.6.2" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures"><i class="fa fa-check"></i><b>10.6.2</b> Jointures</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-dplyr.html"><a href="10-dplyr.html#types-de-jointures"><i class="fa fa-check"></i><b>10.6.3</b> Types de jointures</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-dplyr.html"><a href="10-dplyr.html#ressources-2"><i class="fa fa-check"></i><b>10.7</b> Ressources</a></li>
<li class="chapter" data-level="10.8" data-path="10-dplyr.html"><a href="10-dplyr.html#exercices-5"><i class="fa fa-check"></i><b>10.8</b> Exercices</a><ul>
<li class="chapter" data-level="10.8.1" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-base-de-dplyr"><i class="fa fa-check"></i><b>10.8.1</b> Les verbes de base de <code>dplyr</code></a></li>
<li class="chapter" data-level="10.8.2" data-path="10-dplyr.html"><a href="10-dplyr.html#enchaîner-des-opérations"><i class="fa fa-check"></i><b>10.8.2</b> Enchaîner des opérations</a></li>
<li class="chapter" data-level="10.8.3" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by-et-summarise"><i class="fa fa-check"></i><b>10.8.3</b> <code>group_by</code> et <code>summarise</code></a></li>
<li class="chapter" data-level="10.8.4" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures-1"><i class="fa fa-check"></i><b>10.8.4</b> Jointures</a></li>
<li class="chapter" data-level="10.8.5" data-path="10-dplyr.html"><a href="10-dplyr.html#bonus"><i class="fa fa-check"></i><b>10.8.5</b> Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-stringr.html"><a href="11-stringr.html"><i class="fa fa-check"></i><b>11</b> Manipuler du texte avec <code>stringr</code></a><ul>
<li class="chapter" data-level="11.1" data-path="11-stringr.html"><a href="11-stringr.html#expressions-régulières"><i class="fa fa-check"></i><b>11.1</b> Expressions régulières</a></li>
<li class="chapter" data-level="11.2" data-path="11-stringr.html"><a href="11-stringr.html#concat"><i class="fa fa-check"></i><b>11.2</b> Concaténer des chaînes</a></li>
<li class="chapter" data-level="11.3" data-path="11-stringr.html"><a href="11-stringr.html#convertir-en-majuscules-minuscules"><i class="fa fa-check"></i><b>11.3</b> Convertir en majuscules / minuscules</a></li>
<li class="chapter" data-level="11.4" data-path="11-stringr.html"><a href="11-stringr.html#découper-des-chaînes"><i class="fa fa-check"></i><b>11.4</b> Découper des chaînes</a></li>
<li class="chapter" data-level="11.5" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-sous-chaînes-par-position"><i class="fa fa-check"></i><b>11.5</b> Extraire des sous-chaînes par position</a></li>
<li class="chapter" data-level="11.6" data-path="11-stringr.html"><a href="11-stringr.html#str-detect"><i class="fa fa-check"></i><b>11.6</b> Détecter des motifs</a></li>
<li class="chapter" data-level="11.7" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-motifs"><i class="fa fa-check"></i><b>11.7</b> Extraire des motifs</a></li>
<li class="chapter" data-level="11.8" data-path="11-stringr.html"><a href="11-stringr.html#remplacer-des-motifs"><i class="fa fa-check"></i><b>11.8</b> Remplacer des motifs</a></li>
<li class="chapter" data-level="11.9" data-path="11-stringr.html"><a href="11-stringr.html#modificateurs"><i class="fa fa-check"></i><b>11.9</b> Modificateurs de motifs</a></li>
<li class="chapter" data-level="11.10" data-path="11-stringr.html"><a href="11-stringr.html#ressources-3"><i class="fa fa-check"></i><b>11.10</b> Ressources</a></li>
<li class="chapter" data-level="11.11" data-path="11-stringr.html"><a href="11-stringr.html#exercices-6"><i class="fa fa-check"></i><b>11.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-tidyr.html"><a href="12-tidyr.html"><i class="fa fa-check"></i><b>12</b> Mettre en ordre avec <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.1" data-path="12-tidyr.html"><a href="12-tidyr.html#tidy-data"><i class="fa fa-check"></i><b>12.1</b> Tidy data</a></li>
<li class="chapter" data-level="12.2" data-path="12-tidyr.html"><a href="12-tidyr.html#trois-règles-pour-des-données-bien-rangées"><i class="fa fa-check"></i><b>12.2</b> Trois règles pour des données bien rangées</a></li>
<li class="chapter" data-level="12.3" data-path="12-tidyr.html"><a href="12-tidyr.html#les-verbes-de-tidyr"><i class="fa fa-check"></i><b>12.3</b> Les verbes de <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.3.1" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_longer-transformer-des-colonnes-en-lignes"><i class="fa fa-check"></i><b>12.3.1</b> <code>pivot_longer</code> : transformer des colonnes en lignes</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_wider-transformer-des-lignes-en-colonnes"><i class="fa fa-check"></i><b>12.3.2</b> <code>pivot_wider</code> : transformer des lignes en colonnes</a></li>
<li class="chapter" data-level="12.3.3" data-path="12-tidyr.html"><a href="12-tidyr.html#separate"><i class="fa fa-check"></i><b>12.3.3</b> <code>separate</code> : séparer une colonne en plusieurs colonnes</a></li>
<li class="chapter" data-level="12.3.4" data-path="12-tidyr.html"><a href="12-tidyr.html#separate-rows"><i class="fa fa-check"></i><b>12.3.4</b> <code>separate_rows</code> : séparer une colonne en plusieurs lignes</a></li>
<li class="chapter" data-level="12.3.5" data-path="12-tidyr.html"><a href="12-tidyr.html#unite-regrouper-plusieurs-colonnes-en-une-seule"><i class="fa fa-check"></i><b>12.3.5</b> <code>unite</code> : regrouper plusieurs colonnes en une seule</a></li>
<li class="chapter" data-level="12.3.6" data-path="12-tidyr.html"><a href="12-tidyr.html#extract"><i class="fa fa-check"></i><b>12.3.6</b> <code>extract</code> : créer de nouvelles colonnes à partir d’une colonne de texte</a></li>
<li class="chapter" data-level="12.3.7" data-path="12-tidyr.html"><a href="12-tidyr.html#complete-compléter-des-combinaisons-de-variables-manquantes"><i class="fa fa-check"></i><b>12.3.7</b> <code>complete</code> : compléter des combinaisons de variables manquantes</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="12-tidyr.html"><a href="12-tidyr.html#ressources-4"><i class="fa fa-check"></i><b>12.4</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Diffuser et publier avec <code>rmarkdown</code></a><ul>
<li class="chapter" data-level="13.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#créer-un-nouveau-document"><i class="fa fa-check"></i><b>13.1</b> Créer un nouveau document</a></li>
<li class="chapter" data-level="13.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#éléments-dun-document-r-markdown"><i class="fa fa-check"></i><b>13.2</b> Éléments d’un document R Markdown</a><ul>
<li class="chapter" data-level="13.2.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#en-tête-préambule"><i class="fa fa-check"></i><b>13.2.1</b> En-tête (préambule)</a></li>
<li class="chapter" data-level="13.2.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#texte-du-document"><i class="fa fa-check"></i><b>13.2.2</b> Texte du document</a></li>
<li class="chapter" data-level="13.2.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#blocs-de-code-r"><i class="fa fa-check"></i><b>13.2.3</b> Blocs de code R</a></li>
<li class="chapter" data-level="13.2.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#compiler-un-document-knit"><i class="fa fa-check"></i><b>13.2.4</b> Compiler un document (<em>Knit</em>)</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#personnaliser-le-document-généré"><i class="fa fa-check"></i><b>13.3</b> Personnaliser le document généré</a></li>
<li class="chapter" data-level="13.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-des-blocs-de-code-r"><i class="fa fa-check"></i><b>13.4</b> Options des blocs de code R</a><ul>
<li class="chapter" data-level="13.4.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#nom-du-bloc"><i class="fa fa-check"></i><b>13.4.1</b> Nom du bloc</a></li>
<li class="chapter" data-level="13.4.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options"><i class="fa fa-check"></i><b>13.4.2</b> Options</a></li>
<li class="chapter" data-level="13.4.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#modifier-les-options"><i class="fa fa-check"></i><b>13.4.3</b> Modifier les options</a></li>
<li class="chapter" data-level="13.4.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-globales"><i class="fa fa-check"></i><b>13.4.4</b> Options globales</a></li>
<li class="chapter" data-level="13.4.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#mise-en-cache-des-résultats"><i class="fa fa-check"></i><b>13.4.5</b> Mise en cache des résultats</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#rendu-des-tableaux"><i class="fa fa-check"></i><b>13.5</b> Rendu des tableaux</a><ul>
<li class="chapter" data-level="13.5.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-croisés-1"><i class="fa fa-check"></i><b>13.5.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="13.5.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-de-données-et-tris-à-plat"><i class="fa fa-check"></i><b>13.5.2</b> Tableaux de données et tris à plat</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates"><i class="fa fa-check"></i><b>13.6</b> Modèles de documents</a><ul>
<li class="chapter" data-level="13.6.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#slides"><i class="fa fa-check"></i><b>13.6.1</b> Slides</a></li>
<li class="chapter" data-level="13.6.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates-1"><i class="fa fa-check"></i><b>13.6.2</b> Templates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#ressources-5"><i class="fa fa-check"></i><b>13.7</b> Ressources</a></li>
</ul></li>
<li class="part"><span><b>III Aller plus loin</b></span></li>
<li class="chapter" data-level="14" data-path="14-fonctions.html"><a href="14-fonctions.html"><i class="fa fa-check"></i><b>14</b> Écrire ses propres fonctions</a><ul>
<li class="chapter" data-level="14.1" data-path="14-fonctions.html"><a href="14-fonctions.html#introduction-et-exemples"><i class="fa fa-check"></i><b>14.1</b> Introduction et exemples</a><ul>
<li class="chapter" data-level="14.1.1" data-path="14-fonctions.html"><a href="14-fonctions.html#structure-dune-fonction"><i class="fa fa-check"></i><b>14.1.1</b> Structure d’une fonction</a></li>
<li class="chapter" data-level="14.1.2" data-path="14-fonctions.html"><a href="14-fonctions.html#exemple-de-fonction"><i class="fa fa-check"></i><b>14.1.2</b> Exemple de fonction</a></li>
<li class="chapter" data-level="14.1.3" data-path="14-fonctions.html"><a href="14-fonctions.html#effets-de-bord-et-affichage-de-messages"><i class="fa fa-check"></i><b>14.1.3</b> Effets de bord et affichage de messages</a></li>
<li class="chapter" data-level="14.1.4" data-path="14-fonctions.html"><a href="14-fonctions.html#utilité-des-fonctions"><i class="fa fa-check"></i><b>14.1.4</b> Utilité des fonctions</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-et-résultat-dune-fonction"><i class="fa fa-check"></i><b>14.2</b> Arguments et résultat d’une fonction</a><ul>
<li class="chapter" data-level="14.2.1" data-path="14-fonctions.html"><a href="14-fonctions.html#définition-des-arguments"><i class="fa fa-check"></i><b>14.2.1</b> Définition des arguments</a></li>
<li class="chapter" data-level="14.2.2" data-path="14-fonctions.html"><a href="14-fonctions.html#valeurs-par-défaut"><i class="fa fa-check"></i><b>14.2.2</b> Valeurs par défaut</a></li>
<li class="chapter" data-level="14.2.3" data-path="14-fonctions.html"><a href="14-fonctions.html#largument-..."><i class="fa fa-check"></i><b>14.2.3</b> L’argument <code>...</code></a></li>
<li class="chapter" data-level="14.2.4" data-path="14-fonctions.html"><a href="14-fonctions.html#resfunc"><i class="fa fa-check"></i><b>14.2.4</b> Résultat d’une fonction</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables"><i class="fa fa-check"></i><b>14.3</b> Portée des variables</a><ul>
<li class="chapter" data-level="14.3.1" data-path="14-fonctions.html"><a href="14-fonctions.html#une-fonction-peut-accéder-à-un-objet-extérieur"><i class="fa fa-check"></i><b>14.3.1</b> Une fonction peut accéder à un objet extérieur</a></li>
<li class="chapter" data-level="14.3.2" data-path="14-fonctions.html"><a href="14-fonctions.html#les-arguments-et-les-objets-créés-dans-la-fonction-sont-prioritaires"><i class="fa fa-check"></i><b>14.3.2</b> Les arguments et les objets créés dans la fonction sont prioritaires</a></li>
<li class="chapter" data-level="14.3.3" data-path="14-fonctions.html"><a href="14-fonctions.html#un-objet-créé-dans-une-fonction-nexiste-que-dans-cette-fonction"><i class="fa fa-check"></i><b>14.3.3</b> Un objet créé dans une fonction n’existe que dans cette fonction</a></li>
<li class="chapter" data-level="14.3.4" data-path="14-fonctions.html"><a href="14-fonctions.html#on-ne-peut-pas-modifier-un-objet-global-dans-une-fonction"><i class="fa fa-check"></i><b>14.3.4</b> On ne peut pas modifier un objet global dans une fonction</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-comme-objets"><i class="fa fa-check"></i><b>14.4</b> Les fonctions comme objets</a><ul>
<li class="chapter" data-level="14.4.1" data-path="14-fonctions.html"><a href="14-fonctions.html#passer-des-fonctions-comme-argument"><i class="fa fa-check"></i><b>14.4.1</b> Passer des fonctions comme argument</a></li>
<li class="chapter" data-level="14.4.2" data-path="14-fonctions.html"><a href="14-fonctions.html#fonctions-anonymes"><i class="fa fa-check"></i><b>14.4.2</b> Fonctions anonymes</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="14-fonctions.html"><a href="14-fonctions.html#ressources-6"><i class="fa fa-check"></i><b>14.5</b> Ressources</a></li>
<li class="chapter" data-level="14.6" data-path="14-fonctions.html"><a href="14-fonctions.html#exercices-7"><i class="fa fa-check"></i><b>14.6</b> Exercices</a><ul>
<li class="chapter" data-level="14.6.1" data-path="14-fonctions.html"><a href="14-fonctions.html#introduction-et-exemples-1"><i class="fa fa-check"></i><b>14.6.1</b> Introduction et exemples</a></li>
<li class="chapter" data-level="14.6.2" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-et-résultats"><i class="fa fa-check"></i><b>14.6.2</b> Arguments et résultats</a></li>
<li class="chapter" data-level="14.6.3" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables-1"><i class="fa fa-check"></i><b>14.6.3</b> Portée des variables</a></li>
<li class="chapter" data-level="14.6.4" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-comme-objets-1"><i class="fa fa-check"></i><b>14.6.4</b> Les fonctions comme objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html"><i class="fa fa-check"></i><b>15</b> Structures de données</a><ul>
<li class="chapter" data-level="15.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#vecteurs-atomiques"><i class="fa fa-check"></i><b>15.1</b> Vecteurs atomiques</a><ul>
<li class="chapter" data-level="15.1.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#création-dun-vecteur"><i class="fa fa-check"></i><b>15.1.1</b> Création d’un vecteur</a></li>
<li class="chapter" data-level="15.1.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#vecteurs-nommés"><i class="fa fa-check"></i><b>15.1.2</b> Vecteurs nommés</a></li>
<li class="chapter" data-level="15.1.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#types-de-vecteurs"><i class="fa fa-check"></i><b>15.1.3</b> Types de vecteurs</a></li>
<li class="chapter" data-level="15.1.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#sélection-déléments"><i class="fa fa-check"></i><b>15.1.4</b> Sélection d’éléments</a></li>
<li class="chapter" data-level="15.1.5" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#modification"><i class="fa fa-check"></i><b>15.1.5</b> Modification</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#listes"><i class="fa fa-check"></i><b>15.2</b> Listes</a><ul>
<li class="chapter" data-level="15.2.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#création"><i class="fa fa-check"></i><b>15.2.1</b> Création</a></li>
<li class="chapter" data-level="15.2.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#ajout-déléments"><i class="fa fa-check"></i><b>15.2.2</b> Ajout d’éléments</a></li>
<li class="chapter" data-level="15.2.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#sélection-déléments-1"><i class="fa fa-check"></i><b>15.2.3</b> Sélection d’éléments</a></li>
<li class="chapter" data-level="15.2.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#modification-1"><i class="fa fa-check"></i><b>15.2.4</b> Modification</a></li>
<li class="chapter" data-level="15.2.5" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#utilisation"><i class="fa fa-check"></i><b>15.2.5</b> Utilisation</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#data-frame-tibbles"><i class="fa fa-check"></i><b>15.3</b> Tableaux de données (<em>data frame</em> et <em>tibble</em>)</a><ul>
<li class="chapter" data-level="15.3.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#création-1"><i class="fa fa-check"></i><b>15.3.1</b> Création</a></li>
<li class="chapter" data-level="15.3.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#noms-de-colonnes-et-de-lignes"><i class="fa fa-check"></i><b>15.3.2</b> Noms de colonnes et de lignes</a></li>
<li class="chapter" data-level="15.3.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#sélection-de-lignes-et-de-colonnes"><i class="fa fa-check"></i><b>15.3.3</b> Sélection de lignes et de colonnes</a></li>
<li class="chapter" data-level="15.3.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#modification-2"><i class="fa fa-check"></i><b>15.3.4</b> Modification</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#ressources-7"><i class="fa fa-check"></i><b>15.4</b> Ressources</a></li>
<li class="chapter" data-level="15.5" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#exercices-8"><i class="fa fa-check"></i><b>15.5</b> Exercices</a><ul>
<li class="chapter" data-level="15.5.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#vecteurs-atomiques-1"><i class="fa fa-check"></i><b>15.5.1</b> Vecteurs atomiques</a></li>
<li class="chapter" data-level="15.5.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#listes-1"><i class="fa fa-check"></i><b>15.5.2</b> Listes</a></li>
<li class="chapter" data-level="15.5.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#tableaux-de-données"><i class="fa fa-check"></i><b>15.5.3</b> Tableaux de données</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-boucles-if.html"><a href="16-boucles-if.html"><i class="fa fa-check"></i><b>16</b> Boucles et exécution conditionnelle</a><ul>
<li class="chapter" data-level="16.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-else-exécuter-du-code-sous-certaines-conditions"><i class="fa fa-check"></i><b>16.1</b> <code>if</code>, <code>else</code> : exécuter du code sous certaines conditions</a><ul>
<li class="chapter" data-level="16.1.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if"><i class="fa fa-check"></i><b>16.1.1</b> <code>if</code></a></li>
<li class="chapter" data-level="16.1.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-else-1"><i class="fa fa-check"></i><b>16.1.2</b> <code>if</code> / <code>else</code></a></li>
<li class="chapter" data-level="16.1.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-else-if-else"><i class="fa fa-check"></i><b>16.1.3</b> “<code>if</code>” / “<code>else if</code>” / “<code>else</code>”</a></li>
<li class="chapter" data-level="16.1.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#construction-de-conditions-complexes"><i class="fa fa-check"></i><b>16.1.4</b> Construction de conditions complexes</a></li>
<li class="chapter" data-level="16.1.5" data-path="16-boucles-if.html"><a href="16-boucles-if.html#différence-entre-if-else-et-ifelse"><i class="fa fa-check"></i><b>16.1.5</b> Différence entre <code>if</code> / <code>else</code> et <code>ifelse</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#contrôle-de-lexécution-et-gestion-des-erreurs"><i class="fa fa-check"></i><b>16.2</b> Contrôle de l’exécution et gestion des erreurs</a><ul>
<li class="chapter" data-level="16.2.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#utilisation-de-return-pour-sortir-de-la-fonction"><i class="fa fa-check"></i><b>16.2.1</b> Utilisation de <code>return</code> pour sortir de la fonction</a></li>
<li class="chapter" data-level="16.2.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#warning"><i class="fa fa-check"></i><b>16.2.2</b> <code>warning</code></a></li>
<li class="chapter" data-level="16.2.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#stop-et-stopifnot"><i class="fa fa-check"></i><b>16.2.3</b> <code>stop</code> et <code>stopifnot</code></a></li>
<li class="chapter" data-level="16.2.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#tester-la-présence-dun-argument"><i class="fa fa-check"></i><b>16.2.4</b> Tester la présence d’un argument</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#for-et-while-répéter-des-instructions-dans-une-boucle"><i class="fa fa-check"></i><b>16.3</b> <code>for</code> et <code>while</code> : répéter des instructions dans une boucle</a><ul>
<li class="chapter" data-level="16.3.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#for"><i class="fa fa-check"></i><b>16.3.1</b> <code>for</code></a></li>
<li class="chapter" data-level="16.3.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#while"><i class="fa fa-check"></i><b>16.3.2</b> <code>while</code></a></li>
<li class="chapter" data-level="16.3.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#next-et-break"><i class="fa fa-check"></i><b>16.3.3</b> <code>next</code> et <code>break</code></a></li>
<li class="chapter" data-level="16.3.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#no-boucles"><i class="fa fa-check"></i><b>16.3.4</b> Quand (ne pas) utiliser des boucles</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#débugguer-une-fonction"><i class="fa fa-check"></i><b>16.4</b> Débugguer une fonction</a><ul>
<li class="chapter" data-level="16.4.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#print"><i class="fa fa-check"></i><b>16.4.1</b> print()</a></li>
<li class="chapter" data-level="16.4.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#localiser-une-erreur"><i class="fa fa-check"></i><b>16.4.2</b> Localiser une erreur</a></li>
<li class="chapter" data-level="16.4.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#browser"><i class="fa fa-check"></i><b>16.4.3</b> browser()</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="16-boucles-if.html"><a href="16-boucles-if.html#ressources-boucles"><i class="fa fa-check"></i><b>16.5</b> Ressources</a></li>
<li class="chapter" data-level="16.6" data-path="16-boucles-if.html"><a href="16-boucles-if.html#exercices-9"><i class="fa fa-check"></i><b>16.6</b> Exercices</a><ul>
<li class="chapter" data-level="16.6.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-et-else"><i class="fa fa-check"></i><b>16.6.1</b> <code>if</code> et <code>else</code></a></li>
<li class="chapter" data-level="16.6.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#contrôle-de-lexécution"><i class="fa fa-check"></i><b>16.6.2</b> Contrôle de l’exécution</a></li>
<li class="chapter" data-level="16.6.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#boucles"><i class="fa fa-check"></i><b>16.6.3</b> Boucles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html"><i class="fa fa-check"></i><b>17</b> <code>dplyr</code> avancé</a><ul>
<li class="chapter" data-level="17.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-ses-propres-fonctions"><i class="fa fa-check"></i><b>17.1</b> Appliquer ses propres fonctions</a><ul>
<li class="chapter" data-level="17.1.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exemple-avec-mutate"><i class="fa fa-check"></i><b>17.1.1</b> Exemple avec <code>mutate</code></a></li>
<li class="chapter" data-level="17.1.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exemple-avec-summarise"><i class="fa fa-check"></i><b>17.1.2</b> Exemple avec <code>summarise</code></a></li>
<li class="chapter" data-level="17.1.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exemple-avec-rename_with"><i class="fa fa-check"></i><b>17.1.3</b> Exemple avec <code>rename_with</code></a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#across"><i class="fa fa-check"></i><b>17.2</b> <code>across()</code> : appliquer des fonctions à plusieurs colonnes</a><ul>
<li class="chapter" data-level="17.2.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-une-fonction-à-plusieurs-colonnes"><i class="fa fa-check"></i><b>17.2.1</b> Appliquer une fonction à plusieurs colonnes</a></li>
<li class="chapter" data-level="17.2.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#passer-des-arguments-supplémentaires-à-la-fonction-appliquée"><i class="fa fa-check"></i><b>17.2.2</b> Passer des arguments supplémentaires à la fonction appliquée</a></li>
<li class="chapter" data-level="17.2.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#noms-des-nouvelles-colonnes"><i class="fa fa-check"></i><b>17.2.3</b> Noms des nouvelles colonnes</a></li>
<li class="chapter" data-level="17.2.4" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-plusieurs-fonctions-à-plusieurs-colonnes"><i class="fa fa-check"></i><b>17.2.4</b> Appliquer plusieurs fonctions à plusieurs colonnes</a></li>
<li class="chapter" data-level="17.2.5" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#renommer-plusieurs-colonnes-avec-une-fonction"><i class="fa fa-check"></i><b>17.2.5</b> Renommer plusieurs colonnes avec une fonction</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#rowwise-et-c_across-appliquer-une-transformation-ligne-par-ligne"><i class="fa fa-check"></i><b>17.3</b> <code>rowwise()</code> et <code>c_across()</code> : appliquer une transformation ligne par ligne</a></li>
<li class="chapter" data-level="17.4" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#syntaxes-abregees"><i class="fa fa-check"></i><b>17.4</b> Fonctions anonymes et syntaxes abrégées</a></li>
<li class="chapter" data-level="17.5" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#ressources-8"><i class="fa fa-check"></i><b>17.5</b> Ressources</a></li>
<li class="chapter" data-level="17.6" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exercices-10"><i class="fa fa-check"></i><b>17.6</b> Exercices</a><ul>
<li class="chapter" data-level="17.6.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-ses-propres-fonctions-1"><i class="fa fa-check"></i><b>17.6.1</b> Appliquer ses propres fonctions</a></li>
<li class="chapter" data-level="17.6.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#across-1"><i class="fa fa-check"></i><b>17.6.2</b> <code>across()</code></a></li>
<li class="chapter" data-level="17.6.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#rowwise-et-c_across"><i class="fa fa-check"></i><b>17.6.3</b> <code>rowwise()</code> et <code>c_across()</code></a></li>
<li class="chapter" data-level="17.6.4" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#fonctions-anonymes-et-notations-abrégées"><i class="fa fa-check"></i><b>17.6.4</b> Fonctions anonymes et notations abrégées</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="18-purrr.html"><a href="18-purrr.html"><i class="fa fa-check"></i><b>18</b> Itérer avec <code>purrr</code></a><ul>
<li class="chapter" data-level="18.1" data-path="18-purrr.html"><a href="18-purrr.html#exemple-dapplication"><i class="fa fa-check"></i><b>18.1</b> Exemple d’application</a></li>
<li class="chapter" data-level="18.2" data-path="18-purrr.html"><a href="18-purrr.html#map-et-ses-variantes"><i class="fa fa-check"></i><b>18.2</b> <code>map</code> et ses variantes</a><ul>
<li class="chapter" data-level="18.2.1" data-path="18-purrr.html"><a href="18-purrr.html#modes-dappel-de-map"><i class="fa fa-check"></i><b>18.2.1</b> Modes d’appel de <code>map</code></a></li>
<li class="chapter" data-level="18.2.2" data-path="18-purrr.html"><a href="18-purrr.html#variantes-de-map"><i class="fa fa-check"></i><b>18.2.2</b> Variantes de <code>map</code></a></li>
<li class="chapter" data-level="18.2.3" data-path="18-purrr.html"><a href="18-purrr.html#map_dfr-et-map_dfc"><i class="fa fa-check"></i><b>18.2.3</b> <code>map_dfr()</code> et <code>map_dfc()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="18-purrr.html"><a href="18-purrr.html#itérer-sur-les-colonnes-dun-tableau-de-données"><i class="fa fa-check"></i><b>18.3</b> Itérer sur les colonnes d’un tableau de données</a></li>
<li class="chapter" data-level="18.4" data-path="18-purrr.html"><a href="18-purrr.html#modify"><i class="fa fa-check"></i><b>18.4</b> <code>modify</code></a></li>
<li class="chapter" data-level="18.5" data-path="18-purrr.html"><a href="18-purrr.html#imap"><i class="fa fa-check"></i><b>18.5</b> <code>imap</code></a></li>
<li class="chapter" data-level="18.6" data-path="18-purrr.html"><a href="18-purrr.html#walk"><i class="fa fa-check"></i><b>18.6</b> <code>walk</code></a></li>
<li class="chapter" data-level="18.7" data-path="18-purrr.html"><a href="18-purrr.html#map2-et-pmap-itérer-sur-plusieurs-vecteurs-en-parallèle"><i class="fa fa-check"></i><b>18.7</b> <code>map2</code> et <code>pmap</code> : itérer sur plusieurs vecteurs en parallèle</a></li>
<li class="chapter" data-level="18.8" data-path="18-purrr.html"><a href="18-purrr.html#répéter-une-opération"><i class="fa fa-check"></i><b>18.8</b> Répéter une opération</a></li>
<li class="chapter" data-level="18.9" data-path="18-purrr.html"><a href="18-purrr.html#quand-ne-pas-utiliser-map"><i class="fa fa-check"></i><b>18.9</b> Quand (ne pas) utiliser <code>map</code></a></li>
<li class="chapter" data-level="18.10" data-path="18-purrr.html"><a href="18-purrr.html#purrr-vs-apply"><i class="fa fa-check"></i><b>18.10</b> <code>purrr</code> vs <code>*apply</code></a></li>
<li class="chapter" data-level="18.11" data-path="18-purrr.html"><a href="18-purrr.html#ressources-9"><i class="fa fa-check"></i><b>18.11</b> Ressources</a></li>
<li class="chapter" data-level="18.12" data-path="18-purrr.html"><a href="18-purrr.html#exercices-11"><i class="fa fa-check"></i><b>18.12</b> Exercices</a><ul>
<li class="chapter" data-level="18.12.1" data-path="18-purrr.html"><a href="18-purrr.html#map-et-ses-variantes-1"><i class="fa fa-check"></i><b>18.12.1</b> <code>map</code> et ses variantes</a></li>
<li class="chapter" data-level="18.12.2" data-path="18-purrr.html"><a href="18-purrr.html#modify-et-itération-sur-les-colonnes-dun-tableau"><i class="fa fa-check"></i><b>18.12.2</b> <code>modify</code> et itération sur les colonnes d’un tableau</a></li>
<li class="chapter" data-level="18.12.3" data-path="18-purrr.html"><a href="18-purrr.html#imap-et-walk"><i class="fa fa-check"></i><b>18.12.3</b> <code>imap</code> et <code>walk</code></a></li>
<li class="chapter" data-level="18.12.4" data-path="18-purrr.html"><a href="18-purrr.html#map2-et-pmap"><i class="fa fa-check"></i><b>18.12.4</b> <code>map2</code> et <code>pmap</code></a></li>
<li class="chapter" data-level="18.12.5" data-path="18-purrr.html"><a href="18-purrr.html#répéter-une-opération-1"><i class="fa fa-check"></i><b>18.12.5</b> Répéter une opération</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html"><i class="fa fa-check"></i><b>19</b> Programmer avec le <em>tidyverse</em></a><ul>
<li class="chapter" data-level="19.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#spécificités-du-tidyverse"><i class="fa fa-check"></i><b>19.1</b> Spécificités du <em>tidyverse</em></a><ul>
<li class="chapter" data-level="19.1.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#data-masking"><i class="fa fa-check"></i><b>19.1.1</b> <em>data masking</em></a></li>
<li class="chapter" data-level="19.1.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#tidy-selection"><i class="fa fa-check"></i><b>19.1.2</b> <em>tidy selection</em></a></li>
<li class="chapter" data-level="19.1.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utilisation-dans-des-fonctions"><i class="fa fa-check"></i><b>19.1.3</b> Utilisation dans des fonctions</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#programmer-avec-dplyr-et-tidyr"><i class="fa fa-check"></i><b>19.2</b> Programmer avec <code>dplyr</code> et <code>tidyr</code></a><ul>
<li class="chapter" data-level="19.2.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utiliser-une-colonne-passée-en-argument"><i class="fa fa-check"></i><b>19.2.1</b> Utiliser une colonne passée en argument</a></li>
<li class="chapter" data-level="19.2.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utiliser-une-sélection-de-colonnes-passée-en-argument"><i class="fa fa-check"></i><b>19.2.2</b> Utiliser une sélection de colonnes passée en argument</a></li>
<li class="chapter" data-level="19.2.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#nommer-de-nouvelles-colonnes-à-partir-dun-argument"><i class="fa fa-check"></i><b>19.2.3</b> Nommer de nouvelles colonnes à partir d’un argument</a></li>
<li class="chapter" data-level="19.2.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#désambiguïser-data-et-env"><i class="fa fa-check"></i><b>19.2.4</b> Désambiguïser data et env</a></li>
<li class="chapter" data-level="19.2.5" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#quand-les-arguments-sont-des-chaînes-de-caractères"><i class="fa fa-check"></i><b>19.2.5</b> Quand les arguments sont des chaînes de caractères</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#programmer-avec-ggplot2"><i class="fa fa-check"></i><b>19.3</b> Programmer avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="19.3.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#sélection-de-colonnes-avec-aes"><i class="fa fa-check"></i><b>19.3.1</b> Sélection de colonnes avec <code>aes()</code></a></li>
<li class="chapter" data-level="19.3.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#faceting-1"><i class="fa fa-check"></i><b>19.3.2</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#aide-mémoire"><i class="fa fa-check"></i><b>19.4</b> Aide-mémoire</a></li>
<li class="chapter" data-level="19.5" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ressources-10"><i class="fa fa-check"></i><b>19.5</b> Ressources</a></li>
<li class="chapter" data-level="19.6" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#exercices-12"><i class="fa fa-check"></i><b>19.6</b> Exercices</a><ul>
<li class="chapter" data-level="19.6.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#dplyr-et-tidyr"><i class="fa fa-check"></i><b>19.6.1</b> <code>dplyr</code> et <code>tidyr</code></a></li>
<li class="chapter" data-level="19.6.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#noms-de-colonnes-en-chaînes-de-caractères"><i class="fa fa-check"></i><b>19.6.2</b> Noms de colonnes en chaînes de caractères</a></li>
<li class="chapter" data-level="19.6.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ambiguïté-data-env"><i class="fa fa-check"></i><b>19.6.3</b> Ambiguïté <code>data</code> / <code>env</code></a></li>
<li class="chapter" data-level="19.6.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ggplot2-1"><i class="fa fa-check"></i><b>19.6.4</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="20-targets.html"><a href="20-targets.html"><i class="fa fa-check"></i><b>20</b> Organiser un projet avec <code>targets</code></a><ul>
<li class="chapter" data-level="20.1" data-path="20-targets.html"><a href="20-targets.html#définition-du-pipeline"><i class="fa fa-check"></i><b>20.1</b> Définition du pipeline</a><ul>
<li class="chapter" data-level="20.1.1" data-path="20-targets.html"><a href="20-targets.html#projet-dexemple"><i class="fa fa-check"></i><b>20.1.1</b> Projet d’exemple</a></li>
<li class="chapter" data-level="20.1.2" data-path="20-targets.html"><a href="20-targets.html#targets.r"><i class="fa fa-check"></i><b>20.1.2</b> <code>_targets.R</code></a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="20-targets.html"><a href="20-targets.html#exécution-du-pipeline"><i class="fa fa-check"></i><b>20.2</b> Exécution du pipeline</a></li>
<li class="chapter" data-level="20.3" data-path="20-targets.html"><a href="20-targets.html#modification-du-pipeline"><i class="fa fa-check"></i><b>20.3</b> Modification du pipeline</a></li>
<li class="chapter" data-level="20.4" data-path="20-targets.html"><a href="20-targets.html#rmarkdown"><i class="fa fa-check"></i><b>20.4</b> RMarkdown</a></li>
<li class="chapter" data-level="20.5" data-path="20-targets.html"><a href="20-targets.html#gestion-des-données-en-cache"><i class="fa fa-check"></i><b>20.5</b> Gestion des données en cache</a></li>
<li class="chapter" data-level="20.6" data-path="20-targets.html"><a href="20-targets.html#avantages-et-limites"><i class="fa fa-check"></i><b>20.6</b> Avantages et limites</a><ul>
<li class="chapter" data-level="20.6.1" data-path="20-targets.html"><a href="20-targets.html#avantages"><i class="fa fa-check"></i><b>20.6.1</b> Avantages</a></li>
<li class="chapter" data-level="20.6.2" data-path="20-targets.html"><a href="20-targets.html#interactivité-et-développement-du-pipeline"><i class="fa fa-check"></i><b>20.6.2</b> Interactivité et développement du pipeline</a></li>
</ul></li>
<li class="chapter" data-level="20.7" data-path="20-targets.html"><a href="20-targets.html#ressources-11"><i class="fa fa-check"></i><b>20.7</b> Ressources</a></li>
</ul></li>
<li class="appendix"><span><b>Annexes</b></span></li>
<li class="chapter" data-level="A" data-path="21-ressources.html"><a href="21-ressources.html"><i class="fa fa-check"></i><b>A</b> Ressources</a><ul>
<li class="chapter" data-level="A.1" data-path="21-ressources.html"><a href="21-ressources.html#aide"><i class="fa fa-check"></i><b>A.1</b> Aide</a><ul>
<li class="chapter" data-level="A.1.1" data-path="21-ressources.html"><a href="21-ressources.html#aide-de-r-et-rstudio"><i class="fa fa-check"></i><b>A.1.1</b> Aide de R et RStudio</a></li>
<li class="chapter" data-level="A.1.2" data-path="21-ressources.html"><a href="21-ressources.html#aide-en-ligne"><i class="fa fa-check"></i><b>A.1.2</b> Aide en ligne</a></li>
<li class="chapter" data-level="A.1.3" data-path="21-ressources.html"><a href="21-ressources.html#antisèches"><i class="fa fa-check"></i><b>A.1.3</b> Antisèches</a></li>
<li class="chapter" data-level="A.1.4" data-path="21-ressources.html"><a href="21-ressources.html#où-poser-des-questions"><i class="fa fa-check"></i><b>A.1.4</b> Où poser des questions</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="21-ressources.html"><a href="21-ressources.html#ouvrages-blogs-moocs"><i class="fa fa-check"></i><b>A.2</b> Ouvrages, blogs, MOOCs…</a><ul>
<li class="chapter" data-level="A.2.1" data-path="21-ressources.html"><a href="21-ressources.html#francophones"><i class="fa fa-check"></i><b>A.2.1</b> Francophones</a></li>
<li class="chapter" data-level="A.2.2" data-path="21-ressources.html"><a href="21-ressources.html#anglophones"><i class="fa fa-check"></i><b>A.2.2</b> Anglophones</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="21-ressources.html"><a href="21-ressources.html#extensions-1"><i class="fa fa-check"></i><b>A.3</b> Extensions</a><ul>
<li class="chapter" data-level="A.3.1" data-path="21-ressources.html"><a href="21-ressources.html#où-trouver-des-extensions-intéressantes"><i class="fa fa-check"></i><b>A.3.1</b> Où trouver des extensions intéressantes ?</a></li>
<li class="chapter" data-level="A.3.2" data-path="21-ressources.html"><a href="21-ressources.html#lextension-questionr"><i class="fa fa-check"></i><b>A.3.2</b> L’extension <code>questionr</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction à R et au tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="organiser-un-projet-avec-targets" class="section level1">
<h1><span class="header-section-number">Partie 20</span> Organiser un projet avec <code>targets</code></h1>
<p><a href="https://docs.ropensci.org/targets/">targets</a> est une extension R développée par <a href="https://twitter.com/wmlandau">Will Landau</a> qui permet d’organiser un projet sous la forme d’un <em>pipeline</em> de traitements, composé de différentes étapes, et gérant automatiquement les dépendances entre celles-ci<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a>. Cette organisation a plusieurs avantages :</p>
<ul>
<li>elle permet une description de toutes les étapes du pipeline dans un fichier dédié, et force à séparer ces différentes étapes dans des fonctions à part, ce qui facilite la lisibilité et la maintenance du projet</li>
<li>elle facilite la reproductibilité des traitements, car elle garantit que toutes les étapes ont bien été effectuées dans le bon ordre et dans un nouvel environnement</li>
<li>elle optimise les temps de calcul, car en cas de modification seules les étapes qui le nécessitent sont relancées</li>
</ul>
<p>L’utilisation de <code>targets</code> dans des petits projets peut être vue comme une complexité supplémentaire pas toujours très utile, mais elle peut être très bénéfique pour des projets plus complexes ou comportant des temps de calculs importants à certaines étapes.</p>
<p><code>targets</code> fait partie de l’initiative <a href="https://ropensci.org/">rOpenSci</a>.</p>
<div id="définition-du-pipeline" class="section level2">
<h2><span class="header-section-number">20.1</span> Définition du pipeline</h2>
<div id="projet-dexemple" class="section level3">
<h3><span class="header-section-number">20.1.1</span> Projet d’exemple</h3>
<p>Pour illustrer la suite nous allons partir d’un projet très simple : à partir du <a href="https://www.insee.fr/fr/statistiques/2540004">fichier national des prénoms donnés à la naissance</a>, diffusé par l’INSEE, on souhaite produire un document indiquant les prénoms ayant les évolutions les plus fortes (à la hausse ou à la baisse) entre 2019 et 2020.</p>
<p>Le dossier de notre projet s’organise de la manière suivante :</p>
<pre><code>data/
└── nat2020.csv
R/
├── fonctions_recode.R
└── fonctions_calculs.R
_targets.R</code></pre>
<div class="rmdnote">
<p>
À noter que <code>targets</code> n’impose aucune structure de projet particulière en-dehors de la présence du fichier <code>_targets.R</code>. On aurait donc pu avoir une organisation tout à fait différente.
</p>
</div>
<p>Le fichier <code>data/nat2020.csv</code> contient les données brutes <a href="https://www.insee.fr/fr/statistiques/2540004">téléchargées depuis le site de l’INSEE</a>.</p>
<p>Le fichier <code>R/fonctions_recode.R</code> contient deux fonctions de traitement et de remise en forme des données.</p>
<div class="sourceCode" id="cb1163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1163-1"><a href="20-targets.html#cb1163-1"></a><span class="co"># On conserve uniquement 2019 et 2020 et on</span></span>
<span id="cb1163-2"><a href="20-targets.html#cb1163-2"></a><span class="co"># filtre les lignes des prénoms rares regroupés</span></span>
<span id="cb1163-3"><a href="20-targets.html#cb1163-3"></a>filter_data &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb1163-4"><a href="20-targets.html#cb1163-4"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb1163-5"><a href="20-targets.html#cb1163-5"></a><span class="st">        </span><span class="kw">filter</span>(annais <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2019&quot;</span>, <span class="st">&quot;2020&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb1163-6"><a href="20-targets.html#cb1163-6"></a><span class="st">        </span><span class="kw">filter</span>(preusuel <span class="op">!=</span><span class="st"> &quot;_PRENOMS_RARES&quot;</span>)</span>
<span id="cb1163-7"><a href="20-targets.html#cb1163-7"></a>}</span>
<span id="cb1163-8"><a href="20-targets.html#cb1163-8"></a></span>
<span id="cb1163-9"><a href="20-targets.html#cb1163-9"></a><span class="co"># Passage d&#39;un format avec les années en ligne à un </span></span>
<span id="cb1163-10"><a href="20-targets.html#cb1163-10"></a><span class="co"># format en colonne avec les années en colonnes</span></span>
<span id="cb1163-11"><a href="20-targets.html#cb1163-11"></a>pivot_<span class="dv">2019</span>_<span class="dv">2020</span> &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</span>
<span id="cb1163-12"><a href="20-targets.html#cb1163-12"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb1163-13"><a href="20-targets.html#cb1163-13"></a><span class="st">        </span>tidyr<span class="op">::</span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> annais, <span class="dt">values_from =</span> nombre) <span class="op">%&gt;%</span></span>
<span id="cb1163-14"><a href="20-targets.html#cb1163-14"></a><span class="st">        </span><span class="kw">relocate</span>(<span class="st">`</span><span class="dt">2020</span><span class="st">`</span>, <span class="dt">.after =</span> <span class="st">`</span><span class="dt">2019</span><span class="st">`</span>)</span>
<span id="cb1163-15"><a href="20-targets.html#cb1163-15"></a>}</span></code></pre></div>
<p>Le fichier <code>R/fonctions_calculs.R</code> contient une seule fonction qui calcule les variables d’évolution 2019-2020.</p>
<div class="sourceCode" id="cb1164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1164-1"><a href="20-targets.html#cb1164-1"></a><span class="co"># Calcul des indicateurs d&#39;évolution en effectifs et pourcentages</span></span>
<span id="cb1164-2"><a href="20-targets.html#cb1164-2"></a><span class="co"># pour les prénoms dont la fréquence est &gt; à min_n</span></span>
<span id="cb1164-3"><a href="20-targets.html#cb1164-3"></a>calcule_evo &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">min_n =</span> <span class="dv">200</span>) {</span>
<span id="cb1164-4"><a href="20-targets.html#cb1164-4"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb1164-5"><a href="20-targets.html#cb1164-5"></a><span class="st">        </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">2020</span><span class="st">`</span> <span class="op">&gt;</span><span class="st"> </span>min_n <span class="op">|</span><span class="st"> `</span><span class="dt">2019</span><span class="st">`</span> <span class="op">&gt;</span><span class="st"> </span>min_n) <span class="op">%&gt;%</span></span>
<span id="cb1164-6"><a href="20-targets.html#cb1164-6"></a><span class="st">        </span><span class="kw">mutate</span>(</span>
<span id="cb1164-7"><a href="20-targets.html#cb1164-7"></a>            <span class="dt">evo =</span> (<span class="st">`</span><span class="dt">2020</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">2019</span><span class="st">`</span>),</span>
<span id="cb1164-8"><a href="20-targets.html#cb1164-8"></a>            <span class="st">`</span><span class="dt">evo%</span><span class="st">`</span> =<span class="st"> </span><span class="kw">round</span>(evo <span class="op">/</span><span class="st"> `</span><span class="dt">2019</span><span class="st">`</span> <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb1164-9"><a href="20-targets.html#cb1164-9"></a>        ) <span class="op">%&gt;%</span></span>
<span id="cb1164-10"><a href="20-targets.html#cb1164-10"></a><span class="st">        </span><span class="kw">drop_na</span>(evo)</span>
<span id="cb1164-11"><a href="20-targets.html#cb1164-11"></a>}</span></code></pre></div>
</div>
<div id="targets.r" class="section level3">
<h3><span class="header-section-number">20.1.2</span> <code>_targets.R</code></h3>
<p>C’est dans le fichier <code>_targets.R</code>, situé à la racine du dossier, qu’on va définir le pipeline constitué de toutes les étapes de notre traitement : chargement et manipulation des données, calculs, génération de rapports, etc. Ces étapes sont également appelées <em>cibles</em> (<em>targets</em>).</p>
<div class="rmdnote">
<p>
La syntaxe présentée ici est celle proposée par l’extension <code>tarchetypes</code>, qui est un peu plus facile à prendre en main et plus lisible que la syntaxe native de <code>targets</code>.
</p>
</div>
<p>Le fichier <code>_targets.R</code> commence par charger à la fois <code>targets</code> et <code>tarchetypes</code>.</p>
<div class="sourceCode" id="cb1165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1165-1"><a href="20-targets.html#cb1165-1"></a><span class="co"># Packages nécessaires pour ce script</span></span>
<span id="cb1165-2"><a href="20-targets.html#cb1165-2"></a><span class="kw">library</span>(targets)</span>
<span id="cb1165-3"><a href="20-targets.html#cb1165-3"></a><span class="kw">library</span>(tarchetypes)</span></code></pre></div>
<p>On va ensuite utiliser <code>source()</code> pour charger le contenu des deux fichiers <code>R/fonctions_recode.R</code> et <code>R/fonctions_calculs.R</code>, pour pouvoir utiliser par la suite les fonctions qu’ils définissent.</p>
<div class="sourceCode" id="cb1166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1166-1"><a href="20-targets.html#cb1166-1"></a><span class="co"># Chargement des fonctions</span></span>
<span id="cb1166-2"><a href="20-targets.html#cb1166-2"></a><span class="kw">source</span>(<span class="st">&quot;R/fonctions_recode.R&quot;</span>)</span>
<span id="cb1166-3"><a href="20-targets.html#cb1166-3"></a><span class="kw">source</span>(<span class="st">&quot;R/fonctions_calculs.R&quot;</span>)</span></code></pre></div>
<p>On définit ensuite des options globales pour le pipeline. L’option <code>packages</code> de <code>tar_option_set()</code>, permet de spécifier une liste d’extensions à charger systématiquement avant le lancement de chaque étape. Ici on s’assure que l’extension <code>tidyverse</code> est bien chargée et disponible.</p>
<div class="sourceCode" id="cb1167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1167-1"><a href="20-targets.html#cb1167-1"></a><span class="co"># Options pour les différentes étapes</span></span>
<span id="cb1167-2"><a href="20-targets.html#cb1167-2"></a><span class="kw">options</span>(<span class="dt">tidyverse.quiet =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1167-3"><a href="20-targets.html#cb1167-3"></a><span class="kw">tar_option_set</span>(<span class="dt">packages =</span> <span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Vient enfin la définition du pipeline proprement dit. Celle-ci se fait via la fonction <code>tar_plan()</code> de <code>tarchetypes</code>.</p>
<p>La première opération que l’on souhaite effectuer est de charger les données contenues dans <code>data/nat2020.csv</code>. Pour cela on va d’abord créer une première étape qui consiste à <em>référencer</em> notre fichier CSV à l’aide de la fonction <code>tar_file()</code>.</p>
<div class="sourceCode" id="cb1168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1168-1"><a href="20-targets.html#cb1168-1"></a><span class="kw">tar_plan</span>(</span>
<span id="cb1168-2"><a href="20-targets.html#cb1168-2"></a>    <span class="co"># Chargement du fichier CSV</span></span>
<span id="cb1168-3"><a href="20-targets.html#cb1168-3"></a>    <span class="kw">tar_file</span>(csv_file, <span class="st">&quot;data/nat2020.csv&quot;</span>)</span>
<span id="cb1168-4"><a href="20-targets.html#cb1168-4"></a>)</span></code></pre></div>
<p>Cette première étape définit une <em>cible</em> (<em>target</em>), nommée <code>csv_file</code>, qui pointe vers notre fichier CSV.</p>
<p>On ajoute une seconde étape qui charge les données à l’aide de <code>read_csv2()</code>.</p>
<div class="sourceCode" id="cb1169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1169-1"><a href="20-targets.html#cb1169-1"></a><span class="kw">tar_plan</span>(</span>
<span id="cb1169-2"><a href="20-targets.html#cb1169-2"></a>    <span class="co"># Chargement du fichier CSV</span></span>
<span id="cb1169-3"><a href="20-targets.html#cb1169-3"></a>    <span class="kw">tar_file</span>(csv_file, <span class="st">&quot;data/nat2020.csv&quot;</span>),</span>
<span id="cb1169-4"><a href="20-targets.html#cb1169-4"></a>    <span class="dt">donnees_brutes =</span> <span class="kw">read_csv2</span>(csv_file),</span>
<span id="cb1169-5"><a href="20-targets.html#cb1169-5"></a>)</span></code></pre></div>
<p>Cette nouvelle étape définit une deuxième cible nommée <code>donnees_brutes</code>. Cette cible correspond au nom d’une étape, mais aussi à un objet : dans ce qui suit, <code>donnees_brutes</code> correspond au tableau de données résultat du <code>read_csv2()</code>.</p>
<p>On va utiliser cet objet dans une troisième étape qui lui applique nos deux fonctions de filtrage et transformation définies dans <code>R/fonctions_recode.R</code>.</p>
<div class="sourceCode" id="cb1170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1170-1"><a href="20-targets.html#cb1170-1"></a><span class="kw">tar_plan</span>(</span>
<span id="cb1170-2"><a href="20-targets.html#cb1170-2"></a>    <span class="co"># Chargement du fichier CSV</span></span>
<span id="cb1170-3"><a href="20-targets.html#cb1170-3"></a>    <span class="kw">tar_file</span>(csv_file, <span class="st">&quot;data/nat2020.csv&quot;</span>),</span>
<span id="cb1170-4"><a href="20-targets.html#cb1170-4"></a>    <span class="dt">donnees_brutes =</span> <span class="kw">read_csv2</span>(csv_file),</span>
<span id="cb1170-5"><a href="20-targets.html#cb1170-5"></a></span>
<span id="cb1170-6"><a href="20-targets.html#cb1170-6"></a>    <span class="co"># Mise en forme des données</span></span>
<span id="cb1170-7"><a href="20-targets.html#cb1170-7"></a>    <span class="dt">donnees =</span> donnees_brutes <span class="op">%&gt;%</span></span>
<span id="cb1170-8"><a href="20-targets.html#cb1170-8"></a><span class="st">        </span><span class="kw">filter_data</span>() <span class="op">%&gt;%</span></span>
<span id="cb1170-9"><a href="20-targets.html#cb1170-9"></a><span class="st">        </span><span class="kw">pivot_2019_2020</span>()</span>
<span id="cb1170-10"><a href="20-targets.html#cb1170-10"></a>)</span></code></pre></div>
<p>Ici aussi, <code>donnees</code> est à la fois le nom d’une cible et un objet contenant nos données retravaillées. On utilise cet objet dans une étape supplémentaire qui utilise la fonction de <code>R/fonctions_calculs.R</code> pour calculer les variables d’évolution.</p>
<div class="sourceCode" id="cb1171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1171-1"><a href="20-targets.html#cb1171-1"></a><span class="kw">tar_plan</span>(</span>
<span id="cb1171-2"><a href="20-targets.html#cb1171-2"></a>    <span class="co"># Chargement du fichier CSV</span></span>
<span id="cb1171-3"><a href="20-targets.html#cb1171-3"></a>    <span class="kw">tar_file</span>(csv_file, <span class="st">&quot;data/nat2020.csv&quot;</span>),</span>
<span id="cb1171-4"><a href="20-targets.html#cb1171-4"></a>    <span class="dt">donnees_brutes =</span> <span class="kw">read_csv2</span>(csv_file),</span>
<span id="cb1171-5"><a href="20-targets.html#cb1171-5"></a></span>
<span id="cb1171-6"><a href="20-targets.html#cb1171-6"></a>    <span class="co"># Mise en forme des données</span></span>
<span id="cb1171-7"><a href="20-targets.html#cb1171-7"></a>    <span class="dt">donnees =</span> donnees_brutes <span class="op">%&gt;%</span></span>
<span id="cb1171-8"><a href="20-targets.html#cb1171-8"></a><span class="st">        </span><span class="kw">filter_data</span>() <span class="op">%&gt;%</span></span>
<span id="cb1171-9"><a href="20-targets.html#cb1171-9"></a><span class="st">        </span><span class="kw">pivot_2019_2020</span>(),</span>
<span id="cb1171-10"><a href="20-targets.html#cb1171-10"></a></span>
<span id="cb1171-11"><a href="20-targets.html#cb1171-11"></a>    <span class="co"># Calcul indicateurs</span></span>
<span id="cb1171-12"><a href="20-targets.html#cb1171-12"></a>    <span class="dt">donnees_evo =</span> donnees <span class="op">%&gt;%</span></span>
<span id="cb1171-13"><a href="20-targets.html#cb1171-13"></a><span class="st">        </span><span class="kw">calcule_evo</span>(<span class="dt">min_n =</span> <span class="dv">1000</span>)</span>
<span id="cb1171-14"><a href="20-targets.html#cb1171-14"></a>)</span></code></pre></div>
<div class="rmdimportant">
<p>
On notera que les cibles doivent toutes avoir des noms différents. Si on exécute plusieurs étapes de transformations ou de calculs sur un tableau de données, on devra donner un nom distinct à ces cibles et aux objets qui correspondent.
</p>
</div>
<p>Au final, notre fichier <code>_targets.R</code> est donc le suivant :</p>
<div class="sourceCode" id="cb1172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1172-1"><a href="20-targets.html#cb1172-1"></a><span class="co"># Packages nécessaires pour ce script</span></span>
<span id="cb1172-2"><a href="20-targets.html#cb1172-2"></a><span class="kw">library</span>(targets)</span>
<span id="cb1172-3"><a href="20-targets.html#cb1172-3"></a><span class="kw">library</span>(tarchetypes)</span>
<span id="cb1172-4"><a href="20-targets.html#cb1172-4"></a></span>
<span id="cb1172-5"><a href="20-targets.html#cb1172-5"></a><span class="co"># Chargement des fonctions</span></span>
<span id="cb1172-6"><a href="20-targets.html#cb1172-6"></a><span class="kw">source</span>(<span class="st">&quot;R/fonctions_recode.R&quot;</span>)</span>
<span id="cb1172-7"><a href="20-targets.html#cb1172-7"></a><span class="kw">source</span>(<span class="st">&quot;R/fonctions_calculs.R&quot;</span>)</span>
<span id="cb1172-8"><a href="20-targets.html#cb1172-8"></a></span>
<span id="cb1172-9"><a href="20-targets.html#cb1172-9"></a><span class="co"># Options pour les différentes étapes</span></span>
<span id="cb1172-10"><a href="20-targets.html#cb1172-10"></a><span class="kw">options</span>(<span class="dt">tidyverse.quiet =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1172-11"><a href="20-targets.html#cb1172-11"></a><span class="kw">tar_option_set</span>(<span class="dt">packages =</span> <span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb1172-12"><a href="20-targets.html#cb1172-12"></a></span>
<span id="cb1172-13"><a href="20-targets.html#cb1172-13"></a><span class="co"># Définition du pipeline</span></span>
<span id="cb1172-14"><a href="20-targets.html#cb1172-14"></a><span class="kw">tar_plan</span>(</span>
<span id="cb1172-15"><a href="20-targets.html#cb1172-15"></a>    <span class="co"># Chargement du fichier CSV</span></span>
<span id="cb1172-16"><a href="20-targets.html#cb1172-16"></a>    <span class="kw">tar_file</span>(csv_file, <span class="st">&quot;data/nat2020.csv&quot;</span>),</span>
<span id="cb1172-17"><a href="20-targets.html#cb1172-17"></a>    <span class="dt">donnees_brutes =</span> <span class="kw">read_csv2</span>(csv_file),</span>
<span id="cb1172-18"><a href="20-targets.html#cb1172-18"></a></span>
<span id="cb1172-19"><a href="20-targets.html#cb1172-19"></a>    <span class="co"># Mise en forme des données</span></span>
<span id="cb1172-20"><a href="20-targets.html#cb1172-20"></a>    <span class="dt">donnees =</span> donnees_brutes <span class="op">%&gt;%</span></span>
<span id="cb1172-21"><a href="20-targets.html#cb1172-21"></a><span class="st">        </span><span class="kw">filter_data</span>() <span class="op">%&gt;%</span></span>
<span id="cb1172-22"><a href="20-targets.html#cb1172-22"></a><span class="st">        </span><span class="kw">pivot_2019_2020</span>(),</span>
<span id="cb1172-23"><a href="20-targets.html#cb1172-23"></a></span>
<span id="cb1172-24"><a href="20-targets.html#cb1172-24"></a>    <span class="co"># Calcul indicateurs</span></span>
<span id="cb1172-25"><a href="20-targets.html#cb1172-25"></a>    <span class="dt">donnees_evo =</span> donnees <span class="op">%&gt;%</span></span>
<span id="cb1172-26"><a href="20-targets.html#cb1172-26"></a><span class="st">        </span><span class="kw">calcule_evo</span>(<span class="dt">min_n =</span> <span class="dv">1000</span>)</span>
<span id="cb1172-27"><a href="20-targets.html#cb1172-27"></a></span>
<span id="cb1172-28"><a href="20-targets.html#cb1172-28"></a>)</span></code></pre></div>
<div class="rmdnote">
<p>
<code>targets</code> offre aussi la possibilité de définir notre pipeline directement dans un fichier RMarkdown, ce qui peut permettre notamment de mieux le documenter. Pour plus d’information on pourra se référer au chapitre <a href="https://books.ropensci.org/targets/markdown.html">Target Markdown</a> du manuel en ligne.
</p>
</div>
</div>
</div>
<div id="exécution-du-pipeline" class="section level2">
<h2><span class="header-section-number">20.2</span> Exécution du pipeline</h2>
<p>Une fois notre pipeline défini, <code>targets</code> fournit des outils permettant de visualiser sa structure et son état, notamment la fonction <code>tar_visnetwork()</code>.</p>
<div class="sourceCode" id="cb1173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1173-1"><a href="20-targets.html#cb1173-1"></a><span class="kw">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-40608b3b321db9e5f394" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-40608b3b321db9e5f394">{"x":{"nodes":{"name":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"type":["stem","stem","stem","stem","function","function","function"],"status":["outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"seconds":[null,null,null,null,null,null,null],"bytes":[null,null,null,null,null,null,null],"branches":[null,null,null,null,null,null,null],"id":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"label":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"level":[1,3,2,4,1,1,1],"color":["#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5"],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["csv_file","calcule_evo","donnees","donnees_brutes","filter_data","pivot_2019_2020"],"to":["donnees_brutes","donnees_evo","donnees_evo","donnees","donnees","donnees"],"arrows":["to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Stem","Function"],"color":["#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script>
<p>Les différentes cibles apparaissent sous forme de cercles, et les fonctions qui leur sont appliquées sous forme de triangles. Les flèches indiquent que <code>targets</code> a automatiquement créé un réseau de <em>dépendances</em> entre cibles et fonctions : ainsi la cible <code>donnees</code> dépend des fonctions <code>filter_data</code>, <code>pivot_2019_2020</code> et de la cible <code>donnees_brutes</code>, qui elle-même dépend de la cible <code>csv_file</code>.</p>
<p>La couleur des différents éléments montrent que ceux-ci sont à l’état <em>outdated</em> : ils ne sont pas à jour.</p>
<p>On va donc exécuter notre pipeline, en utilisant la fonction <code>tar_make()</code>.</p>
<div class="sourceCode" id="cb1174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1174-1"><a href="20-targets.html#cb1174-1"></a><span class="kw">tar_make</span>()</span>
<span id="cb1174-2"><a href="20-targets.html#cb1174-2"></a><span class="co">#&gt; • start target csv_file</span></span>
<span id="cb1174-3"><a href="20-targets.html#cb1174-3"></a><span class="co">#&gt; • built target csv_file</span></span>
<span id="cb1174-4"><a href="20-targets.html#cb1174-4"></a><span class="co">#&gt; • start target donnees_brutes</span></span>
<span id="cb1174-5"><a href="20-targets.html#cb1174-5"></a><span class="co">#&gt; ℹ Using &quot;&#39;,&#39;&quot; as decimal and &quot;&#39;.&#39;&quot; as grouping mark. Use `read_delim()` for more control.</span></span>
<span id="cb1174-6"><a href="20-targets.html#cb1174-6"></a><span class="co">#&gt; Rows: 667364 Columns: 4</span></span>
<span id="cb1174-7"><a href="20-targets.html#cb1174-7"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb1174-8"><a href="20-targets.html#cb1174-8"></a><span class="co">#&gt; Delimiter: &quot;;&quot;</span></span>
<span id="cb1174-9"><a href="20-targets.html#cb1174-9"></a><span class="co">#&gt; chr (2): preusuel, annais</span></span>
<span id="cb1174-10"><a href="20-targets.html#cb1174-10"></a><span class="co">#&gt; dbl (2): sexe, nombre</span></span>
<span id="cb1174-11"><a href="20-targets.html#cb1174-11"></a><span class="co">#&gt; </span></span>
<span id="cb1174-12"><a href="20-targets.html#cb1174-12"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb1174-13"><a href="20-targets.html#cb1174-13"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb1174-14"><a href="20-targets.html#cb1174-14"></a><span class="co">#&gt; • built target donnees_brutes</span></span>
<span id="cb1174-15"><a href="20-targets.html#cb1174-15"></a><span class="co">#&gt; • start target donnees</span></span>
<span id="cb1174-16"><a href="20-targets.html#cb1174-16"></a><span class="co">#&gt; • built target donnees</span></span>
<span id="cb1174-17"><a href="20-targets.html#cb1174-17"></a><span class="co">#&gt; • start target donnees_evo</span></span>
<span id="cb1174-18"><a href="20-targets.html#cb1174-18"></a><span class="co">#&gt; • built target donnees_evo</span></span>
<span id="cb1174-19"><a href="20-targets.html#cb1174-19"></a><span class="co">#&gt; • end pipeline</span></span></code></pre></div>
<p>Lorsqu’on utilise <code>tar_make()</code>, <code>targets</code> lance une nouvelle session R (pour éviter tout problème ou conflit lié à l’état de notre session actuelle), charge les extensions définie via <code>tar_option_set()</code>, et exécute les cibles définies avec <code>tar_plan()</code>.</p>
<p>On visualise le nouvel état de notre pipeline, et on voit que toutes les cibles sont passées à l’état <em>up to date</em>.</p>
<div class="sourceCode" id="cb1175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1175-1"><a href="20-targets.html#cb1175-1"></a><span class="kw">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-1befa2804aeb27f428d2" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-1befa2804aeb27f428d2">{"x":{"nodes":{"name":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"type":["stem","stem","stem","stem","function","function","function"],"status":["uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[1.332,0.189,0.388,0.014,null,null,null],"bytes":[12147948,98882,1406709,2451,null,null,null],"branches":[null,null,null,null,null,null,null],"id":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"label":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"level":[1,3,2,4,1,1,1],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["csv_file","calcule_evo","donnees","donnees_brutes","filter_data","pivot_2019_2020"],"to":["donnees_brutes","donnees_evo","donnees_evo","donnees","donnees","donnees"],"arrows":["to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Stem","Function"],"color":["#354823","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script>
<p>À chaque étape, <code>targets</code> crée et stocke dans un cache chacun des objets correspondants aux différentes cibles (<code>donnees_brutes</code>, <code>donnees</code>, etc.). On peut charger à tout moment ces objets dans notre session avec la fonction <code>tar_load()</code><a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a>.</p>
<div class="sourceCode" id="cb1176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1176-1"><a href="20-targets.html#cb1176-1"></a><span class="kw">tar_load</span>(donnees_evo)</span>
<span id="cb1176-2"><a href="20-targets.html#cb1176-2"></a>donnees_evo</span>
<span id="cb1176-3"><a href="20-targets.html#cb1176-3"></a><span class="co">#&gt; # A tibble: 128 × 6</span></span>
<span id="cb1176-4"><a href="20-targets.html#cb1176-4"></a><span class="co">#&gt;     sexe preusuel  `2019` `2020`   evo `evo%`</span></span>
<span id="cb1176-5"><a href="20-targets.html#cb1176-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb1176-6"><a href="20-targets.html#cb1176-6"></a><span class="co">#&gt;  1     1 AARON       2443   2312  -131  -5.36</span></span>
<span id="cb1176-7"><a href="20-targets.html#cb1176-7"></a><span class="co">#&gt;  2     1 ADAM        3670   3386  -284  -7.74</span></span>
<span id="cb1176-8"><a href="20-targets.html#cb1176-8"></a><span class="co">#&gt;  3     1 ALEXANDRE   1154   1039  -115  -9.97</span></span>
<span id="cb1176-9"><a href="20-targets.html#cb1176-9"></a><span class="co">#&gt;  4     1 AMIR        1588   1360  -228 -14.4 </span></span>
<span id="cb1176-10"><a href="20-targets.html#cb1176-10"></a><span class="co">#&gt;  5     1 ANTOINE     1786   1455  -331 -18.5 </span></span>
<span id="cb1176-11"><a href="20-targets.html#cb1176-11"></a><span class="co">#&gt;  6     1 ARTHUR      4008   3800  -208  -5.19</span></span>
<span id="cb1176-12"><a href="20-targets.html#cb1176-12"></a><span class="co">#&gt;  7     1 AUGUSTIN    1546   1379  -167 -10.8 </span></span>
<span id="cb1176-13"><a href="20-targets.html#cb1176-13"></a><span class="co">#&gt;  8     1 AXEL        1809   1683  -126  -6.97</span></span>
<span id="cb1176-14"><a href="20-targets.html#cb1176-14"></a><span class="co">#&gt;  9     1 AYDEN       1524   1786   262  17.2 </span></span>
<span id="cb1176-15"><a href="20-targets.html#cb1176-15"></a><span class="co">#&gt; 10     1 BAPTISTE    1403   1202  -201 -14.3 </span></span>
<span id="cb1176-16"><a href="20-targets.html#cb1176-16"></a><span class="co">#&gt; # … with 118 more rows</span></span></code></pre></div>
<p>On peut aussi utiliser <code>tar_read()</code>, qui lit et retourne les résultats d’une des cibles, permettant de les stocker dans un nouvel objet.</p>
<div class="sourceCode" id="cb1177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1177-1"><a href="20-targets.html#cb1177-1"></a>evo &lt;-<span class="st"> </span><span class="kw">tar_read</span>(donnees_evo)</span></code></pre></div>
</div>
<div id="modification-du-pipeline" class="section level2">
<h2><span class="header-section-number">20.3</span> Modification du pipeline</h2>
<p>Essayons de lancer à nouveau notre pipeline :</p>
<div class="sourceCode" id="cb1178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1178-1"><a href="20-targets.html#cb1178-1"></a><span class="kw">tar_make</span>()</span>
<span id="cb1178-2"><a href="20-targets.html#cb1178-2"></a><span class="co">#&gt; ✔ skip target csv_file</span></span>
<span id="cb1178-3"><a href="20-targets.html#cb1178-3"></a><span class="co">#&gt; ✔ skip target donnees_brutes</span></span>
<span id="cb1178-4"><a href="20-targets.html#cb1178-4"></a><span class="co">#&gt; ✔ skip target donnees</span></span>
<span id="cb1178-5"><a href="20-targets.html#cb1178-5"></a><span class="co">#&gt; ✔ skip target donnees_evo</span></span>
<span id="cb1178-6"><a href="20-targets.html#cb1178-6"></a><span class="co">#&gt; ✔ skip pipeline</span></span></code></pre></div>
<p>On voit que toutes les cibles ont été “skippées” : quand on lance <code>tar_make()</code>, seules les cibles qui sont à l’état <em>outdated</em> sont recalculées. Les résultats des autres sont conservés tels quels.</p>
<p>On va maintenant modifier légèrement notre fichier <code>R/fonctions_calculs.R</code> : plutôt que d’arrondir les évolutions en pourcentages à deux décimale, on n’en conserve plus qu’une.</p>
<div class="sourceCode" id="cb1179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1179-1"><a href="20-targets.html#cb1179-1"></a><span class="co"># Calcul des indicateurs d&#39;évolution en effectifs et pourcentages</span></span>
<span id="cb1179-2"><a href="20-targets.html#cb1179-2"></a><span class="co"># pour les prénoms dont la fréquence est &gt; à min_n</span></span>
<span id="cb1179-3"><a href="20-targets.html#cb1179-3"></a>calcule_evo &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">min_n =</span> <span class="dv">200</span>) {</span>
<span id="cb1179-4"><a href="20-targets.html#cb1179-4"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb1179-5"><a href="20-targets.html#cb1179-5"></a><span class="st">        </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">2020</span><span class="st">`</span> <span class="op">&gt;</span><span class="st"> </span>min_n <span class="op">|</span><span class="st"> `</span><span class="dt">2019</span><span class="st">`</span> <span class="op">&gt;</span><span class="st"> </span>min_n) <span class="op">%&gt;%</span></span>
<span id="cb1179-6"><a href="20-targets.html#cb1179-6"></a><span class="st">        </span><span class="kw">mutate</span>(</span>
<span id="cb1179-7"><a href="20-targets.html#cb1179-7"></a>            <span class="dt">evo =</span> (<span class="st">`</span><span class="dt">2020</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">2019</span><span class="st">`</span>),</span>
<span id="cb1179-8"><a href="20-targets.html#cb1179-8"></a>            <span class="st">`</span><span class="dt">evo%</span><span class="st">`</span> =<span class="st"> </span><span class="kw">round</span>(evo <span class="op">/</span><span class="st"> `</span><span class="dt">2019</span><span class="st">`</span> <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb1179-9"><a href="20-targets.html#cb1179-9"></a>        ) <span class="op">%&gt;%</span></span>
<span id="cb1179-10"><a href="20-targets.html#cb1179-10"></a><span class="st">        </span><span class="kw">drop_na</span>(evo)</span>
<span id="cb1179-11"><a href="20-targets.html#cb1179-11"></a>}</span></code></pre></div>
<p>On visualise à nouveau l’état de notre pipeline :</p>
<div class="sourceCode" id="cb1180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1180-1"><a href="20-targets.html#cb1180-1"></a><span class="kw">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-674ff8701d08e76ad835" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-674ff8701d08e76ad835">{"x":{"nodes":{"name":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"type":["stem","stem","stem","stem","function","function","function"],"status":["uptodate","uptodate","uptodate","outdated","uptodate","uptodate","outdated"],"seconds":[1.332,0.189,0.388,0.014,null,null,null],"bytes":[12147948,98882,1406709,2451,null,null,null],"branches":[null,null,null,null,null,null,null],"id":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"label":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"level":[1,3,2,4,1,1,1],"color":["#354823","#354823","#354823","#78B7C5","#354823","#354823","#78B7C5"],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["csv_file","calcule_evo","donnees","donnees_brutes","filter_data","pivot_2019_2020"],"to":["donnees_brutes","donnees_evo","donnees_evo","donnees","donnees","donnees"],"arrows":["to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Stem","Function"],"color":["#354823","#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","dot","triangle"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script>
<p>Grâce à sa gestion interne des dépendances entre les cibles, <code>targets</code> a vu que la fonction <code>calcule_evo</code> a été modifiée (elle est passée en statut <em>outdated</em>), et comme la cible <code>donnees_evo</code> dépend de cette fonction, celle-ci a également été placée en <em>outdated</em>. On peut obtenir directement une liste des cibles qui ne sont plus à jour à l’aide de la fonction <code>tar_outdated()</code> :</p>
<div class="sourceCode" id="cb1181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1181-1"><a href="20-targets.html#cb1181-1"></a><span class="kw">tar_outdated</span>()</span>
<span id="cb1181-2"><a href="20-targets.html#cb1181-2"></a><span class="co">#&gt; [1] &quot;donnees_evo&quot;</span></span></code></pre></div>
<p>On relance notre pipeline :</p>
<div class="sourceCode" id="cb1182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1182-1"><a href="20-targets.html#cb1182-1"></a><span class="kw">tar_make</span>()</span>
<span id="cb1182-2"><a href="20-targets.html#cb1182-2"></a><span class="co">#&gt; ✔ skip target csv_file</span></span>
<span id="cb1182-3"><a href="20-targets.html#cb1182-3"></a><span class="co">#&gt; ✔ skip target donnees_brutes</span></span>
<span id="cb1182-4"><a href="20-targets.html#cb1182-4"></a><span class="co">#&gt; ✔ skip target donnees</span></span>
<span id="cb1182-5"><a href="20-targets.html#cb1182-5"></a><span class="co">#&gt; • start target donnees_evo</span></span>
<span id="cb1182-6"><a href="20-targets.html#cb1182-6"></a><span class="co">#&gt; • built target donnees_evo</span></span>
<span id="cb1182-7"><a href="20-targets.html#cb1182-7"></a><span class="co">#&gt; • end pipeline</span></span></code></pre></div>
<p>On voit que les cibles <code>csv_file</code>, <code>donnees_brutes</code> et <code>donnees</code> ont été “skippées” : <code>targets</code> est allé prendre directement leurs valeurs déjà stockées en cache. Par contre <code>donnees_evo</code> a bien été recalculée.</p>
<p>On peut vérifier que notre pipeline est désormais entièrement à jour :</p>
<div class="sourceCode" id="cb1183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1183-1"><a href="20-targets.html#cb1183-1"></a><span class="kw">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-eb17e94571260fc52913" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-eb17e94571260fc52913">{"x":{"nodes":{"name":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"type":["stem","stem","stem","stem","function","function","function"],"status":["uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[1.332,0.189,0.388,1.316,null,null,null],"bytes":[12147948,98882,1406709,2297,null,null,null],"branches":[null,null,null,null,null,null,null],"id":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"label":["csv_file","donnees","donnees_brutes","donnees_evo","filter_data","pivot_2019_2020","calcule_evo"],"level":[1,3,2,4,1,1,1],"color":["#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"shape":["dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["csv_file","calcule_evo","donnees","donnees_brutes","filter_data","pivot_2019_2020"],"to":["donnees_brutes","donnees_evo","donnees_evo","donnees","donnees","donnees"],"arrows":["to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Stem","Function"],"color":["#354823","#899DA4","#899DA4"],"shape":["dot","dot","triangle"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script>
<div class="rmdnote">
<p>
À noter que <code>targets</code> gère aussi les modifications des fichiers externes. Ainsi, si on modifie le contenu de <code>nat2020.csv</code>, la cible <code>csv_file</code> passerait en <em>outdated</em>, tout comme l’ensemble des autres cibles puisqu’elles dépendent directement ou indirectement de celle-ci. Dans ce cas, un <code>tar_make()</code> aurait pour effet de recalculer l’intégralité du pipeline.
</p>
</div>
</div>
<div id="rmarkdown" class="section level2">
<h2><span class="header-section-number">20.4</span> RMarkdown</h2>
<p>Imaginons maintenant qu’on souhaite générer un rapport à partir d’un document RMarkdown en utilisant les données d’évolution calculées par notre pipeline. On crée donc un nouveau fichier <code>evolution.Rmd</code> dans un dossier <code>reports</code>.</p>
<pre><code>data/
└── nat2020.csv
R/
├── fonctions_recode.R
└── fonctions_calculs.R
reports/
└── evolution.Rmd
_targets.R</code></pre>
<p>Quand on utilise un document RMarkdown dans un pipeline, il faut accéder aux données utilisées via les fonctions <code>tar_read()</code> ou <code>tar_load()</code> : ceci permet de s’assurer qu’on récupère les données “à jour”, et cela permet aussi à <code>targets</code> de déterminer un lien de dépendance entre le document et les données.</p>
<p>Comme on souhaite utiliser les données de <code>donnees_evo</code>, on devra donc utiliser quelque chose comme :</p>
<div class="sourceCode" id="cb1185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1185-1"><a href="20-targets.html#cb1185-1"></a>d &lt;-<span class="st"> </span><span class="kw">tar_read</span>(donnees_evo)</span></code></pre></div>
<p>Au final, le contenu de notre fichier RMarkdown est le suivant :</p>
<pre><code>---
title: &quot;Évolutions des prénoms 2019-2020&quot;
date: &quot;`r Sys.Date()`&quot;
output: 
    html_document:
        df_print: paged
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
d &lt;- tar_read(donnees_evo)
```


## Plus fortes hausses

```{r}
d %&gt;%
    arrange(desc(`evo%`)) %&gt;%
    head(10)
```

## Plus fortes baisses

```{r}
d %&gt;%
    arrange(`evo%`) %&gt;%
    head(10)
```</code></pre>
<p>Pour ajouter ce rapport à notre pipeline, on crée une nouvelle cible dans le <code>tar_plan()</code> de <code>_targets.R</code>. Comme il s’agit d’un document RMarkodnw, on utilise la fonction <code>tar_render()</code>.</p>
<div class="sourceCode" id="cb1187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1187-1"><a href="20-targets.html#cb1187-1"></a><span class="co"># Packages nécessaires pour ce script</span></span>
<span id="cb1187-2"><a href="20-targets.html#cb1187-2"></a><span class="kw">library</span>(targets)</span>
<span id="cb1187-3"><a href="20-targets.html#cb1187-3"></a><span class="kw">library</span>(tarchetypes)</span>
<span id="cb1187-4"><a href="20-targets.html#cb1187-4"></a></span>
<span id="cb1187-5"><a href="20-targets.html#cb1187-5"></a><span class="co"># Chargement des fonctions</span></span>
<span id="cb1187-6"><a href="20-targets.html#cb1187-6"></a><span class="kw">source</span>(<span class="st">&quot;R/fonctions_recode.R&quot;</span>)</span>
<span id="cb1187-7"><a href="20-targets.html#cb1187-7"></a><span class="kw">source</span>(<span class="st">&quot;R/fonctions_calculs.R&quot;</span>)</span>
<span id="cb1187-8"><a href="20-targets.html#cb1187-8"></a></span>
<span id="cb1187-9"><a href="20-targets.html#cb1187-9"></a><span class="co"># Options pour les différentes étapes</span></span>
<span id="cb1187-10"><a href="20-targets.html#cb1187-10"></a><span class="kw">options</span>(<span class="dt">tidyverse.quiet =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1187-11"><a href="20-targets.html#cb1187-11"></a><span class="kw">tar_option_set</span>(<span class="dt">packages =</span> <span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb1187-12"><a href="20-targets.html#cb1187-12"></a></span>
<span id="cb1187-13"><a href="20-targets.html#cb1187-13"></a><span class="co"># Définition du pipeline</span></span>
<span id="cb1187-14"><a href="20-targets.html#cb1187-14"></a><span class="kw">tar_plan</span>(</span>
<span id="cb1187-15"><a href="20-targets.html#cb1187-15"></a>    <span class="co"># Chargement du fichier CSV</span></span>
<span id="cb1187-16"><a href="20-targets.html#cb1187-16"></a>    <span class="kw">tar_file</span>(csv_file, <span class="st">&quot;data/nat2020.csv&quot;</span>),</span>
<span id="cb1187-17"><a href="20-targets.html#cb1187-17"></a>    <span class="dt">donnees_brutes =</span> <span class="kw">read_csv2</span>(csv_file),</span>
<span id="cb1187-18"><a href="20-targets.html#cb1187-18"></a></span>
<span id="cb1187-19"><a href="20-targets.html#cb1187-19"></a>    <span class="co"># Mise en forme des données</span></span>
<span id="cb1187-20"><a href="20-targets.html#cb1187-20"></a>    <span class="dt">donnees =</span> donnees_brutes <span class="op">%&gt;%</span></span>
<span id="cb1187-21"><a href="20-targets.html#cb1187-21"></a><span class="st">        </span><span class="kw">filter_data</span>() <span class="op">%&gt;%</span></span>
<span id="cb1187-22"><a href="20-targets.html#cb1187-22"></a><span class="st">        </span><span class="kw">pivot_2019_2020</span>(),</span>
<span id="cb1187-23"><a href="20-targets.html#cb1187-23"></a></span>
<span id="cb1187-24"><a href="20-targets.html#cb1187-24"></a>    <span class="co"># Calcul indicateurs</span></span>
<span id="cb1187-25"><a href="20-targets.html#cb1187-25"></a>    <span class="dt">donnees_evo =</span> donnees <span class="op">%&gt;%</span></span>
<span id="cb1187-26"><a href="20-targets.html#cb1187-26"></a><span class="st">        </span><span class="kw">calcule_evo</span>(<span class="dt">min_n =</span> <span class="dv">1000</span>),</span>
<span id="cb1187-27"><a href="20-targets.html#cb1187-27"></a></span>
<span id="cb1187-28"><a href="20-targets.html#cb1187-28"></a>    <span class="co"># Génération rapport</span></span>
<span id="cb1187-29"><a href="20-targets.html#cb1187-29"></a>    <span class="kw">tar_render</span>(report_evo, <span class="st">&quot;reports/evolution.Rmd&quot;</span>)</span>
<span id="cb1187-30"><a href="20-targets.html#cb1187-30"></a>)</span></code></pre></div>
<p>Visualisons notre pipeline modifié :</p>
<div class="sourceCode" id="cb1188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1188-1"><a href="20-targets.html#cb1188-1"></a><span class="kw">tar_visnetwork</span>()</span></code></pre></div>
<div id="htmlwidget-a4cb001f3a72af82d115" style="width:672px;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-a4cb001f3a72af82d115">{"x":{"nodes":{"name":["csv_file","donnees","donnees_brutes","donnees_evo","report_evo","filter_data","pivot_2019_2020","calcule_evo"],"type":["stem","stem","stem","stem","stem","function","function","function"],"status":["uptodate","uptodate","uptodate","uptodate","outdated","uptodate","uptodate","uptodate"],"seconds":[1.332,0.189,0.388,1.316,null,null,null,null],"bytes":[12147948,98882,1406709,2297,null,null,null,null],"branches":[null,null,null,null,null,null,null,null],"id":["csv_file","donnees","donnees_brutes","donnees_evo","report_evo","filter_data","pivot_2019_2020","calcule_evo"],"label":["csv_file","donnees","donnees_brutes","donnees_evo","report_evo","filter_data","pivot_2019_2020","calcule_evo"],"level":[1,3,2,4,5,1,1,1],"color":["#354823","#354823","#354823","#354823","#78B7C5","#354823","#354823","#354823"],"shape":["dot","dot","dot","dot","dot","triangle","triangle","triangle"]},"edges":{"from":["csv_file","calcule_evo","donnees","donnees_brutes","filter_data","pivot_2019_2020","donnees_evo"],"to":["donnees_brutes","donnees_evo","donnees_evo","donnees","donnees","donnees","report_evo"],"arrows":["to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":1,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Stem","Function"],"color":["#354823","#78B7C5","#899DA4","#899DA4"],"shape":["dot","dot","dot","triangle"]},"nodesToDataframe":true}},"evals":[],"jsHooks":[]}</script>
<p>On voit que notre nouvelle cible <code>report_evo</code> a bien été prise en compte, qu’elle dépend bien de <code>donnees_evo</code> et qu’elle est à l’état <em>outdated</em>.</p>
<p>Si on exécute notre pipeline :</p>
<div class="sourceCode" id="cb1189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1189-1"><a href="20-targets.html#cb1189-1"></a><span class="kw">tar_make</span>()</span>
<span id="cb1189-2"><a href="20-targets.html#cb1189-2"></a><span class="co">#&gt; ✔ skip target csv_file</span></span>
<span id="cb1189-3"><a href="20-targets.html#cb1189-3"></a><span class="co">#&gt; ✔ skip target donnees_brutes</span></span>
<span id="cb1189-4"><a href="20-targets.html#cb1189-4"></a><span class="co">#&gt; ✔ skip target donnees</span></span>
<span id="cb1189-5"><a href="20-targets.html#cb1189-5"></a><span class="co">#&gt; ✔ skip target donnees_evo</span></span>
<span id="cb1189-6"><a href="20-targets.html#cb1189-6"></a><span class="co">#&gt; • start target report_evo</span></span>
<span id="cb1189-7"><a href="20-targets.html#cb1189-7"></a><span class="co">#&gt; • built target report_evo</span></span>
<span id="cb1189-8"><a href="20-targets.html#cb1189-8"></a><span class="co">#&gt; • end pipeline</span></span></code></pre></div>
<p>La cible <code>report_evo</code> a bien été calculée, et on devrait retrouver notre rapport compilé au format HTML dans le dossier <code>reports</code>.</p>
</div>
<div id="gestion-des-données-en-cache" class="section level2">
<h2><span class="header-section-number">20.5</span> Gestion des données en cache</h2>
<p><code>targets</code> garde une copie des objets correspondant aux cibles du pipeline dans un cache, en fait sous forme de fichiers placés dans un sous-dossier <code>_targets</code>.</p>
<p>On a vu qu’on peut récupérer ces objets dans notre session via les fonctions <code>tar_read()</code> et <code>tar_load()</code>. <code>targets</code> propose également plusieurs fonctions pour gérer les données et métadonnées en cache :</p>
<ul>
<li><code>tar_destroy()</code> supprimme la totalite du répertoire <code>_targets</code>. Elle permet donc de “repartir de zéro”, sans aucun cache et avec toutes les cibles à recalculer.</li>
<li><code>tar_delete(donnees)</code> supprime l’objet <code>donnees</code> du cache et place l’état de la cible correspondante à <em>outdated</em>. Elle permet de forcer le recalcul d’une cible et de celles qui en dépendent. À noter qu’on peut sélectionner plusieurs cibles en utilisant la syntaxe de la <em>tidy selection</em>.</li>
<li><code>tar_prune()</code> permet de supprimer les cibles qui ne sont plus présentes dans le pipeline. Elle permet donc de “faire le ménage” quand on a supprimé des étapes dans <code>_targets.R</code>.</li>
</ul>
</div>
<div id="avantages-et-limites" class="section level2">
<h2><span class="header-section-number">20.6</span> Avantages et limites</h2>
<div id="avantages" class="section level3">
<h3><span class="header-section-number">20.6.1</span> Avantages</h3>
<p>On peut voir dans cette introduction rapide que l’utilisation de <code>targets</code> présente de nombreux avantages :</p>
<ol style="list-style-type: decimal">
<li>le fichier <code>_targets.R</code> fournit une description détaillée des étapes du projet. Cela facilite les choses quand on revient dessus après un certain temps et qu’on n’a plus tous les détails en tête, ou si on le partage avec quelqu’un.</li>
<li>chaque cible du pipeline est définie via des fonctions, ce qui garantit une séparation et une encapsulation des différentes étapes.</li>
<li>l’utilisation de <code>tar_make()</code> garantit que toutes les cibles du pipeline sont recalculées dans le bon ordre : pas de risque de lancer un script sur des données qui ne seraient pas complètement à jour parce qu’on a oublié de relancer certains recodages par exemple.</li>
<li><code>tar_make()</code> s’exécute toujours dans un environnement vide, ce qui élimine les problèmes liés à l’état de notre session en cours et garantit la reproductibilité des résultats.</li>
<li>comme <code>targets</code> conserve une copie des résultats des cibles en cache, pas besoin de tout recalculer quand on relance le projet, on peut récupérer directement les résultats et savoir si ils sont à jour.</li>
<li><code>tar_make()</code> ne recalcule que les cibles qui le nécessitent, les temps de calcul et d’exécution sont optimisés.</li>
</ol>
<p>Parmi les inconvénients liés à l’utilisation de <code>targets</code>, on notera que le débogage est un peu plus complexe, même si l’extension <a href="https://books.ropensci.org/targets/debugging.html">fournit plusieurs outils</a> pour faciliter le travail.</p>
</div>
<div id="interactivité-et-développement-du-pipeline" class="section level3">
<h3><span class="header-section-number">20.6.2</span> Interactivité et développement du pipeline</h3>
<p>Une des limitations de <code>targets</code> est que le pipeline ne permet pas l’utilisation de fonctions “interactives”. Par exemple, on pourrait ajouter une étape affichant un graphique dans <code>tar_plan()</code> :</p>
<div class="sourceCode" id="cb1190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1190-1"><a href="20-targets.html#cb1190-1"></a>graphique =<span class="st"> </span><span class="kw">ggplot</span>(donnees_evo) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> evo))</span></code></pre></div>
<p>Ceci fonctionne, mais ne provoque pas l’affichage du graphique. Il faut faire un <code>tar_read(graphique)</code> pour pouvoir le visualiser.</p>
<p>De la même manière, on ne peut pas utiliser d’interfaces interactives comme celles vues pour faciliter les recodages de variables (par exemple section <a href="09-recodages.html#irec">9.3.2.1</a>). Il est donc souvent pratique de commencer à développer des transformations, calculs ou analyses de façon “interactive”, via un script classique dans lequel on importe les données nécessaires via <code>tar_read()</code>. Une fois qu’on obtient le résultat souhaité, on transforme ce code en une ou plusieurs fonctions et on les intègre au pipeline de <code>targets</code>.</p>
<div class="rmdnote">
<p>
On notera que les documents RMarkdown s’utilisent très bien avec <code>targets</code> : du moment qu’on charge les données avec <code>tar_read()</code> ou <code>tar_load()</code>, ils permettent à la fois une utilisation “interactive” pendant leur écriture, et une intégration directe sans modification dans un pipeline avec <code>tar_render()</code>.
</p>
</div>
</div>
</div>
<div id="ressources-11" class="section level2">
<h2><span class="header-section-number">20.7</span> Ressources</h2>
<p>Nous n’avons vu ici qu’un petit aperçu des fonctionnalités de <code>targets</code>, qui est une extension extrêmement riche. Celle-ci propose de nombreuses autres possibilités, comme la parallélisation des calculs, la gestion des versions de paquets via <code>renv</code>, la création programmatique de cibles…</p>
<p>Le <em>package</em> bénéficie d’une excellente documentation en anglais. On pourra donc se référer aux sites officiels de <a href="https://docs.ropensci.org/targets">targets</a> et <a href="https://docs.ropensci.org/tarchetypes">tarchetypes</a>, mais surtout à l’ouvrage en ligne <a href="https://books.ropensci.org/targets/">The targets R Package User Manual</a>, très clair et très complet.</p>
<p>Le groupe des utilisateurs de R de Lille a récemment accueilli une intervention (toujours en anglais) de Will Landau, l’auteur de <code>targets</code>. Celle-ci est disponible <a href="https://www.youtube.com/watch?v=FODSavXGjYg">en vidéo sur YouTube</a>.</p>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="39">
<li id="fn39"><p>Pour les personnes habituées au développement, il s’agit d’un équivalent à <a href="https://www.gnu.org/software/make/">GNU Make</a> pour R.<a href="20-targets.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p>Ces données sont stockées dans le répertoire <code>_targets</code> à la racine du projet.<a href="20-targets.html#fnref40" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="19-programmer-tidyverse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="21-ressources.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/juba/tidyverse/blob/main/20-targets.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction_au_tidyverse.epub", "introduction_au_tidyverse.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
