<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Partie 14 Écrire ses propres fonctions | Introduction à R et au tidyverse</title>
  <meta name="description" content="Une introduction à R et aux extensions du tidyverse" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Partie 14 Écrire ses propres fonctions | Introduction à R et au tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Une introduction à R et aux extensions du tidyverse" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Partie 14 Écrire ses propres fonctions | Introduction à R et au tidyverse" />
  
  <meta name="twitter:description" content="Une introduction à R et aux extensions du tidyverse" />
  

<meta name="author" content="Julien Barnier" />


<meta name="date" content="2022-01-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="13-rmarkdown.html"/>
<link rel="next" href="15-dplyr-avance.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Introduction à R et au <em>tidyverse</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>À propos de ce document</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-presentation.html"><a href="01-presentation.html"><i class="fa fa-check"></i><b>1</b> Présentation</a><ul>
<li class="chapter" data-level="1.1" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-de-r"><i class="fa fa-check"></i><b>1.1</b> À propos de R</a></li>
<li class="chapter" data-level="1.2" data-path="01-presentation.html"><a href="01-presentation.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> À propos de RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-du-tidyverse"><i class="fa fa-check"></i><b>1.3</b> À propos du <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.4" data-path="01-presentation.html"><a href="01-presentation.html#structure-du-document"><i class="fa fa-check"></i><b>1.4</b> Structure du document</a></li>
<li class="chapter" data-level="1.5" data-path="01-presentation.html"><a href="01-presentation.html#prérequis"><i class="fa fa-check"></i><b>1.5</b> Prérequis</a></li>
</ul></li>
<li class="part"><span><b>I Introduction à R</b></span></li>
<li class="chapter" data-level="2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html"><i class="fa fa-check"></i><b>2</b> Prise en main</a><ul>
<li class="chapter" data-level="2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#la-console"><i class="fa fa-check"></i><b>2.1</b> La console</a><ul>
<li class="chapter" data-level="2.1.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#linvite-de-commandes"><i class="fa fa-check"></i><b>2.1.1</b> L’invite de commandes</a></li>
<li class="chapter" data-level="2.1.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#précisions-concernant-la-saisie-des-commandes"><i class="fa fa-check"></i><b>2.1.2</b> Précisions concernant la saisie des commandes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets"><i class="fa fa-check"></i><b>2.2</b> Objets</a><ul>
<li class="chapter" data-level="2.2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets-simples"><i class="fa fa-check"></i><b>2.2.1</b> Objets simples</a></li>
<li class="chapter" data-level="2.2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#introvecteurs"><i class="fa fa-check"></i><b>2.2.2</b> Vecteurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#fonctions"><i class="fa fa-check"></i><b>2.3</b> Fonctions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#principe"><i class="fa fa-check"></i><b>2.3.1</b> Principe</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#arguments"><i class="fa fa-check"></i><b>2.3.2</b> Arguments</a></li>
<li class="chapter" data-level="2.3.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#aide-sur-une-fonction"><i class="fa fa-check"></i><b>2.3.3</b> Aide sur une fonction</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#regrouper-ses-commandes-dans-des-scripts"><i class="fa fa-check"></i><b>2.4</b> Regrouper ses commandes dans des scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#commentaires"><i class="fa fa-check"></i><b>2.4.1</b> Commentaires</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#packages"><i class="fa fa-check"></i><b>2.5</b> Installer et charger des extensions (<em>packages</em>)</a></li>
<li class="chapter" data-level="2.6" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#exercices"><i class="fa fa-check"></i><b>2.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-premier_travail.html"><a href="03-premier_travail.html"><i class="fa fa-check"></i><b>3</b> Premier travail avec des données</a><ul>
<li class="chapter" data-level="3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#jeu-de-données-dexemple"><i class="fa fa-check"></i><b>3.1</b> Jeu de données d’exemple</a></li>
<li class="chapter" data-level="3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#tableau-de-données-data-frame"><i class="fa fa-check"></i><b>3.2</b> Tableau de données (<em>data frame</em>)</a><ul>
<li class="chapter" data-level="3.2.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#structure-du-tableau"><i class="fa fa-check"></i><b>3.2.1</b> Structure du tableau</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#accéder-aux-variables-dun-tableau"><i class="fa fa-check"></i><b>3.2.2</b> Accéder aux variables d’un tableau</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#créer-une-nouvelle-variable"><i class="fa fa-check"></i><b>3.2.3</b> Créer une nouvelle variable</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyse-univariée"><i class="fa fa-check"></i><b>3.3</b> Analyse univariée</a><ul>
<li class="chapter" data-level="3.3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-quantitative"><i class="fa fa-check"></i><b>3.3.1</b> Analyser une variable quantitative</a></li>
<li class="chapter" data-level="3.3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-qualitative"><i class="fa fa-check"></i><b>3.3.2</b> Analyser une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="03-premier_travail.html"><a href="03-premier_travail.html#exercices-1"><i class="fa fa-check"></i><b>3.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-bivarie.html"><a href="04-bivarie.html"><i class="fa fa-check"></i><b>4</b> Analyse bivariée</a><ul>
<li class="chapter" data-level="4.1" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-qualitatives"><i class="fa fa-check"></i><b>4.1</b> Croisement de deux variables qualitatives</a><ul>
<li class="chapter" data-level="4.1.1" data-path="04-bivarie.html"><a href="04-bivarie.html#tableaux-croisés"><i class="fa fa-check"></i><b>4.1.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="4.1.2" data-path="04-bivarie.html"><a href="04-bivarie.html#test-du-χ²"><i class="fa fa-check"></i><b>4.1.2</b> Test du χ²</a></li>
<li class="chapter" data-level="4.1.3" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-1"><i class="fa fa-check"></i><b>4.1.3</b> Représentation graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-dune-variable-quantitative-et-dune-variable-qualitative"><i class="fa fa-check"></i><b>4.2</b> Croisement d’une variable quantitative et d’une variable qualitative</a><ul>
<li class="chapter" data-level="4.2.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-2"><i class="fa fa-check"></i><b>4.2.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.2.2" data-path="04-bivarie.html"><a href="04-bivarie.html#tapply"><i class="fa fa-check"></i><b>4.2.2</b> Calculs d’indicateurs</a></li>
<li class="chapter" data-level="4.2.3" data-path="04-bivarie.html"><a href="04-bivarie.html#tests-statistiques"><i class="fa fa-check"></i><b>4.2.3</b> Tests statistiques</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-quantitatives"><i class="fa fa-check"></i><b>4.3</b> Croisement de deux variables quantitatives</a><ul>
<li class="chapter" data-level="4.3.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-3"><i class="fa fa-check"></i><b>4.3.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.3.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calcul-dindicateurs"><i class="fa fa-check"></i><b>4.3.2</b> Calcul d’indicateurs</a></li>
<li class="chapter" data-level="4.3.3" data-path="04-bivarie.html"><a href="04-bivarie.html#régression-linéaire"><i class="fa fa-check"></i><b>4.3.3</b> Régression linéaire</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04-bivarie.html"><a href="04-bivarie.html#exercices-2"><i class="fa fa-check"></i><b>4.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-organiser.html"><a href="05-organiser.html"><i class="fa fa-check"></i><b>5</b> Organiser ses scripts</a><ul>
<li class="chapter" data-level="5.1" data-path="05-organiser.html"><a href="05-organiser.html#projets"><i class="fa fa-check"></i><b>5.1</b> Les projets dans RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="05-organiser.html"><a href="05-organiser.html#créer-des-sections-dans-un-script"><i class="fa fa-check"></i><b>5.2</b> Créer des sections dans un script</a></li>
<li class="chapter" data-level="5.3" data-path="05-organiser.html"><a href="05-organiser.html#répartir-son-travail-entre-plusieurs-scripts"><i class="fa fa-check"></i><b>5.3</b> Répartir son travail entre plusieurs scripts</a></li>
<li class="chapter" data-level="5.4" data-path="05-organiser.html"><a href="05-organiser.html#désactiver-la-sauvegarde-de-lespace-de-travail"><i class="fa fa-check"></i><b>5.4</b> Désactiver la sauvegarde de l’espace de travail</a></li>
</ul></li>
<li class="part"><span><b>II Introduction au tidyverse</b></span></li>
<li class="chapter" data-level="6" data-path="06-tidyverse.html"><a href="06-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Le tidyverse</a><ul>
<li class="chapter" data-level="6.1" data-path="06-tidyverse.html"><a href="06-tidyverse.html#extensions"><i class="fa fa-check"></i><b>6.1</b> Extensions</a></li>
<li class="chapter" data-level="6.2" data-path="06-tidyverse.html"><a href="06-tidyverse.html#installation"><i class="fa fa-check"></i><b>6.2</b> Installation</a></li>
<li class="chapter" data-level="6.3" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tidydata"><i class="fa fa-check"></i><b>6.3</b> tidy data</a></li>
<li class="chapter" data-level="6.4" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>6.4</b> tibbles</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-import.html"><a href="07-import.html"><i class="fa fa-check"></i><b>7</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="7.1" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-textes"><i class="fa fa-check"></i><b>7.1</b> Import de fichiers textes</a><ul>
<li class="chapter" data-level="7.1.1" data-path="07-import.html"><a href="07-import.html#interface-interactive-dimport-de-fichiers"><i class="fa fa-check"></i><b>7.1.1</b> Interface interactive d’import de fichiers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-import.html"><a href="07-import.html#import-depuis-un-fichier-excel"><i class="fa fa-check"></i><b>7.2</b> Import depuis un fichier Excel</a></li>
<li class="chapter" data-level="7.3" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-sas-spss-et-stata"><i class="fa fa-check"></i><b>7.3</b> Import de fichiers SAS, SPSS et Stata</a></li>
<li class="chapter" data-level="7.4" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-dbase"><i class="fa fa-check"></i><b>7.4</b> Import de fichiers dBase</a></li>
<li class="chapter" data-level="7.5" data-path="07-import.html"><a href="07-import.html#connexion-à-des-bases-de-données"><i class="fa fa-check"></i><b>7.5</b> Connexion à des bases de données</a><ul>
<li class="chapter" data-level="7.5.1" data-path="07-import.html"><a href="07-import.html#interfaçage-via-lextension-dbi"><i class="fa fa-check"></i><b>7.5.1</b> Interfaçage via l’extension <code>DBI</code></a></li>
<li class="chapter" data-level="7.5.2" data-path="07-import.html"><a href="07-import.html#utilisation-de-dplyr-et-dbplyr"><i class="fa fa-check"></i><b>7.5.2</b> Utilisation de <code>dplyr</code> et <code>dbplyr</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="07-import.html"><a href="07-import.html#ressources"><i class="fa fa-check"></i><b>7.5.3</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="07-import.html"><a href="07-import.html#export-de-données"><i class="fa fa-check"></i><b>7.6</b> Export de données</a><ul>
<li class="chapter" data-level="7.6.1" data-path="07-import.html"><a href="07-import.html#export-de-tableaux-de-données"><i class="fa fa-check"></i><b>7.6.1</b> Export de tableaux de données</a></li>
<li class="chapter" data-level="7.6.2" data-path="07-import.html"><a href="07-import.html#sauvegarder-des-objets"><i class="fa fa-check"></i><b>7.6.2</b> Sauvegarder des objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-ggplot2.html"><a href="08-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Visualiser avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="8.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#préparation"><i class="fa fa-check"></i><b>8.1</b> Préparation</a></li>
<li class="chapter" data-level="8.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#initialisation"><i class="fa fa-check"></i><b>8.2</b> Initialisation</a></li>
<li class="chapter" data-level="8.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-geom"><i class="fa fa-check"></i><b>8.3</b> Exemples de <code>geom</code></a><ul>
<li class="chapter" data-level="8.3.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>8.3.1</b> <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_violin"><i class="fa fa-check"></i><b>8.3.2</b> <code>geom_violin</code></a></li>
<li class="chapter" data-level="8.3.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar-et-geom_col"><i class="fa fa-check"></i><b>8.3.3</b> <code>geom_bar</code> et <code>geom_col</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_text"><i class="fa fa-check"></i><b>8.3.4</b> <code>geom_text</code></a></li>
<li class="chapter" data-level="8.3.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_label"><i class="fa fa-check"></i><b>8.3.5</b> <code>geom_label</code></a></li>
<li class="chapter" data-level="8.3.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_density"><i class="fa fa-check"></i><b>8.3.6</b> <code>geom_density</code></a></li>
<li class="chapter" data-level="8.3.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_line"><i class="fa fa-check"></i><b>8.3.7</b> <code>geom_line</code></a></li>
<li class="chapter" data-level="8.3.8" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_hex-et-geom_bin2d"><i class="fa fa-check"></i><b>8.3.8</b> <code>geom_hex</code> et <code>geom_bin2d</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#mappages"><i class="fa fa-check"></i><b>8.4</b> Mappages</a><ul>
<li class="chapter" data-level="8.4.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-mappages"><i class="fa fa-check"></i><b>8.4.1</b> Exemples de mappages</a></li>
<li class="chapter" data-level="8.4.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#aes-or-not-aes"><i class="fa fa-check"></i><b>8.4.2</b> <code>aes()</code> or not <code>aes()</code> ?</a></li>
<li class="chapter" data-level="8.4.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar-et-position"><i class="fa fa-check"></i><b>8.4.3</b> <code>geom_bar</code> et <code>position</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#représentation-de-plusieurs-geom"><i class="fa fa-check"></i><b>8.5</b> Représentation de plusieurs <code>geom</code></a><ul>
<li class="chapter" data-level="8.5.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#plusieurs-sources-de-données"><i class="fa fa-check"></i><b>8.5.1</b> Plusieurs sources de données</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#faceting"><i class="fa fa-check"></i><b>8.6</b> Faceting</a></li>
<li class="chapter" data-level="8.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scales"><i class="fa fa-check"></i><b>8.7</b> Scales</a><ul>
<li class="chapter" data-level="8.7.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_size"><i class="fa fa-check"></i><b>8.7.1</b> <code>scale_size</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_x-scale_y"><i class="fa fa-check"></i><b>8.7.2</b> <code>scale_x</code>, <code>scale_y</code></a></li>
<li class="chapter" data-level="8.7.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scalecolor"><i class="fa fa-check"></i><b>8.7.3</b> <code>scale_color</code>, <code>scale_fill</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="08-ggplot2.html"><a href="08-ggplot2.html#thèmes"><i class="fa fa-check"></i><b>8.8</b> Thèmes</a></li>
<li class="chapter" data-level="8.9" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ladd-in-esquisse"><i class="fa fa-check"></i><b>8.9</b> L’add-in <code>esquisse</code></a></li>
<li class="chapter" data-level="8.10" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ressources-1"><i class="fa fa-check"></i><b>8.10</b> Ressources</a></li>
<li class="chapter" data-level="8.11" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exercices-3"><i class="fa fa-check"></i><b>8.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-recodages.html"><a href="09-recodages.html"><i class="fa fa-check"></i><b>9</b> Recoder des variables</a><ul>
<li class="chapter" data-level="9.1" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs"><i class="fa fa-check"></i><b>9.1</b> Rappel sur les variables et les vecteurs</a></li>
<li class="chapter" data-level="9.2" data-path="09-recodages.html"><a href="09-recodages.html#tests"><i class="fa fa-check"></i><b>9.2</b> Tests et comparaison</a></li>
<li class="chapter" data-level="9.3" data-path="09-recodages.html"><a href="09-recodages.html#recoder-une-variable-qualitative"><i class="fa fa-check"></i><b>9.3</b> Recoder une variable qualitative</a><ul>
<li class="chapter" data-level="9.3.1" data-path="09-recodages.html"><a href="09-recodages.html#facteurs"><i class="fa fa-check"></i><b>9.3.1</b> Facteurs et <code>forcats</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="09-recodages.html"><a href="09-recodages.html#recode"><i class="fa fa-check"></i><b>9.3.2</b> Modifier les modalités d’une variable qualitative</a></li>
<li class="chapter" data-level="9.3.3" data-path="09-recodages.html"><a href="09-recodages.html#ordonner-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.3</b> Ordonner les modalités d’une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables"><i class="fa fa-check"></i><b>9.4</b> Combiner plusieurs variables</a><ul>
<li class="chapter" data-level="9.4.1" data-path="09-recodages.html"><a href="09-recodages.html#if-else"><i class="fa fa-check"></i><b>9.4.1</b> <code>if_else</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="09-recodages.html"><a href="09-recodages.html#case_when"><i class="fa fa-check"></i><b>9.4.2</b> <code>case_when</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique-en-classes"><i class="fa fa-check"></i><b>9.5</b> Découper une variable numérique en classes</a><ul>
<li class="chapter" data-level="9.5.1" data-path="09-recodages.html"><a href="09-recodages.html#interface-graphique"><i class="fa fa-check"></i><b>9.5.1</b> Interface graphique</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="09-recodages.html"><a href="09-recodages.html#exercices-4"><i class="fa fa-check"></i><b>9.6</b> Exercices</a><ul>
<li class="chapter" data-level="9.6.1" data-path="09-recodages.html"><a href="09-recodages.html#préparation-1"><i class="fa fa-check"></i><b>9.6.1</b> Préparation</a></li>
<li class="chapter" data-level="9.6.2" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs-et-tests"><i class="fa fa-check"></i><b>9.6.2</b> Vecteurs et tests</a></li>
<li class="chapter" data-level="9.6.3" data-path="09-recodages.html"><a href="09-recodages.html#recodages-de-variable-qualitative"><i class="fa fa-check"></i><b>9.6.3</b> Recodages de variable qualitative</a></li>
<li class="chapter" data-level="9.6.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables-1"><i class="fa fa-check"></i><b>9.6.4</b> Combiner plusieurs variables</a></li>
<li class="chapter" data-level="9.6.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique"><i class="fa fa-check"></i><b>9.6.5</b> Découper une variable numérique</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-dplyr.html"><a href="10-dplyr.html"><i class="fa fa-check"></i><b>10</b> Manipuler les données avec <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.1" data-path="10-dplyr.html"><a href="10-dplyr.html#préparation-2"><i class="fa fa-check"></i><b>10.1</b> Préparation</a></li>
<li class="chapter" data-level="10.2" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-dplyr"><i class="fa fa-check"></i><b>10.2</b> Les verbes de <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice"><i class="fa fa-check"></i><b>10.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="10-dplyr.html"><a href="10-dplyr.html#filter"><i class="fa fa-check"></i><b>10.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="10-dplyr.html"><a href="10-dplyr.html#select-rename"><i class="fa fa-check"></i><b>10.2.3</b> <code>select</code> et <code>rename</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="10-dplyr.html"><a href="10-dplyr.html#arrange"><i class="fa fa-check"></i><b>10.2.4</b> <code>arrange</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="10-dplyr.html"><a href="10-dplyr.html#mutate"><i class="fa fa-check"></i><b>10.2.5</b> <code>mutate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-dplyr.html"><a href="10-dplyr.html#pipe"><i class="fa fa-check"></i><b>10.3</b> Enchaîner les opérations avec le <em>pipe</em></a></li>
<li class="chapter" data-level="10.4" data-path="10-dplyr.html"><a href="10-dplyr.html#opérations-groupées"><i class="fa fa-check"></i><b>10.4</b> Opérations groupées</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by"><i class="fa fa-check"></i><b>10.4.1</b> <code>group_by</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="10-dplyr.html"><a href="10-dplyr.html#summarise-et-count"><i class="fa fa-check"></i><b>10.4.2</b> <code>summarise</code> et <code>count</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="10-dplyr.html"><a href="10-dplyr.html#grouper-selon-plusieurs-variables"><i class="fa fa-check"></i><b>10.4.3</b> Grouper selon plusieurs variables</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-dplyr.html"><a href="10-dplyr.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>10.5</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_sample"><i class="fa fa-check"></i><b>10.5.1</b> <code>slice_sample</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_head-slice_tail-slice_min-slice_max"><i class="fa fa-check"></i><b>10.5.2</b> <code>slice_head</code>, <code>slice_tail</code>, <code>slice_min</code>, <code>slice_max</code></a></li>
<li class="chapter" data-level="10.5.3" data-path="10-dplyr.html"><a href="10-dplyr.html#lead-et-lag"><i class="fa fa-check"></i><b>10.5.3</b> <code>lead</code> et <code>lag</code></a></li>
<li class="chapter" data-level="10.5.4" data-path="10-dplyr.html"><a href="10-dplyr.html#distinct-et-n_distinct"><i class="fa fa-check"></i><b>10.5.4</b> <code>distinct</code> et <code>n_distinct</code></a></li>
<li class="chapter" data-level="10.5.5" data-path="10-dplyr.html"><a href="10-dplyr.html#relocate"><i class="fa fa-check"></i><b>10.5.5</b> <code>relocate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-dplyr.html"><a href="10-dplyr.html#tables-multiples"><i class="fa fa-check"></i><b>10.6</b> Tables multiples</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-dplyr.html"><a href="10-dplyr.html#concaténation-bind_rows-et-bind_cols"><i class="fa fa-check"></i><b>10.6.1</b> Concaténation : <code>bind_rows</code> et <code>bind_cols</code></a></li>
<li class="chapter" data-level="10.6.2" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures"><i class="fa fa-check"></i><b>10.6.2</b> Jointures</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-dplyr.html"><a href="10-dplyr.html#types-de-jointures"><i class="fa fa-check"></i><b>10.6.3</b> Types de jointures</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-dplyr.html"><a href="10-dplyr.html#ressources-2"><i class="fa fa-check"></i><b>10.7</b> Ressources</a></li>
<li class="chapter" data-level="10.8" data-path="10-dplyr.html"><a href="10-dplyr.html#exercices-5"><i class="fa fa-check"></i><b>10.8</b> Exercices</a><ul>
<li class="chapter" data-level="10.8.1" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-base-de-dplyr"><i class="fa fa-check"></i><b>10.8.1</b> Les verbes de base de <code>dplyr</code></a></li>
<li class="chapter" data-level="10.8.2" data-path="10-dplyr.html"><a href="10-dplyr.html#enchaîner-des-opérations"><i class="fa fa-check"></i><b>10.8.2</b> Enchaîner des opérations</a></li>
<li class="chapter" data-level="10.8.3" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by-et-summarise"><i class="fa fa-check"></i><b>10.8.3</b> <code>group_by</code> et <code>summarise</code></a></li>
<li class="chapter" data-level="10.8.4" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures-1"><i class="fa fa-check"></i><b>10.8.4</b> Jointures</a></li>
<li class="chapter" data-level="10.8.5" data-path="10-dplyr.html"><a href="10-dplyr.html#bonus"><i class="fa fa-check"></i><b>10.8.5</b> Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-stringr.html"><a href="11-stringr.html"><i class="fa fa-check"></i><b>11</b> Manipuler du texte avec <code>stringr</code></a><ul>
<li class="chapter" data-level="11.1" data-path="11-stringr.html"><a href="11-stringr.html#expressions-régulières"><i class="fa fa-check"></i><b>11.1</b> Expressions régulières</a></li>
<li class="chapter" data-level="11.2" data-path="11-stringr.html"><a href="11-stringr.html#concat"><i class="fa fa-check"></i><b>11.2</b> Concaténer des chaînes</a></li>
<li class="chapter" data-level="11.3" data-path="11-stringr.html"><a href="11-stringr.html#convertir-en-majuscules-minuscules"><i class="fa fa-check"></i><b>11.3</b> Convertir en majuscules / minuscules</a></li>
<li class="chapter" data-level="11.4" data-path="11-stringr.html"><a href="11-stringr.html#découper-des-chaînes"><i class="fa fa-check"></i><b>11.4</b> Découper des chaînes</a></li>
<li class="chapter" data-level="11.5" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-sous-chaînes-par-position"><i class="fa fa-check"></i><b>11.5</b> Extraire des sous-chaînes par position</a></li>
<li class="chapter" data-level="11.6" data-path="11-stringr.html"><a href="11-stringr.html#str-detect"><i class="fa fa-check"></i><b>11.6</b> Détecter des motifs</a></li>
<li class="chapter" data-level="11.7" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-motifs"><i class="fa fa-check"></i><b>11.7</b> Extraire des motifs</a></li>
<li class="chapter" data-level="11.8" data-path="11-stringr.html"><a href="11-stringr.html#remplacer-des-motifs"><i class="fa fa-check"></i><b>11.8</b> Remplacer des motifs</a></li>
<li class="chapter" data-level="11.9" data-path="11-stringr.html"><a href="11-stringr.html#modificateurs"><i class="fa fa-check"></i><b>11.9</b> Modificateurs de motifs</a></li>
<li class="chapter" data-level="11.10" data-path="11-stringr.html"><a href="11-stringr.html#ressources-3"><i class="fa fa-check"></i><b>11.10</b> Ressources</a></li>
<li class="chapter" data-level="11.11" data-path="11-stringr.html"><a href="11-stringr.html#exercices-6"><i class="fa fa-check"></i><b>11.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-tidyr.html"><a href="12-tidyr.html"><i class="fa fa-check"></i><b>12</b> Mettre en ordre avec <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.1" data-path="12-tidyr.html"><a href="12-tidyr.html#tidy-data"><i class="fa fa-check"></i><b>12.1</b> Tidy data</a></li>
<li class="chapter" data-level="12.2" data-path="12-tidyr.html"><a href="12-tidyr.html#trois-règles-pour-des-données-bien-rangées"><i class="fa fa-check"></i><b>12.2</b> Trois règles pour des données bien rangées</a></li>
<li class="chapter" data-level="12.3" data-path="12-tidyr.html"><a href="12-tidyr.html#les-verbes-de-tidyr"><i class="fa fa-check"></i><b>12.3</b> Les verbes de <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.3.1" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_longer-transformer-des-colonnes-en-lignes"><i class="fa fa-check"></i><b>12.3.1</b> <code>pivot_longer</code> : transformer des colonnes en lignes</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_wider-transformer-des-lignes-en-colonnes"><i class="fa fa-check"></i><b>12.3.2</b> <code>pivot_wider</code> : transformer des lignes en colonnes</a></li>
<li class="chapter" data-level="12.3.3" data-path="12-tidyr.html"><a href="12-tidyr.html#separate"><i class="fa fa-check"></i><b>12.3.3</b> <code>separate</code> : séparer une colonne en plusieurs colonnes</a></li>
<li class="chapter" data-level="12.3.4" data-path="12-tidyr.html"><a href="12-tidyr.html#separate-rows"><i class="fa fa-check"></i><b>12.3.4</b> <code>separate_rows</code> : séparer une colonne en plusieurs lignes</a></li>
<li class="chapter" data-level="12.3.5" data-path="12-tidyr.html"><a href="12-tidyr.html#unite-regrouper-plusieurs-colonnes-en-une-seule"><i class="fa fa-check"></i><b>12.3.5</b> <code>unite</code> : regrouper plusieurs colonnes en une seule</a></li>
<li class="chapter" data-level="12.3.6" data-path="12-tidyr.html"><a href="12-tidyr.html#extract"><i class="fa fa-check"></i><b>12.3.6</b> <code>extract</code> : créer de nouvelles colonnes à partir d’une colonne de texte</a></li>
<li class="chapter" data-level="12.3.7" data-path="12-tidyr.html"><a href="12-tidyr.html#complete-compléter-des-combinaisons-de-variables-manquantes"><i class="fa fa-check"></i><b>12.3.7</b> <code>complete</code> : compléter des combinaisons de variables manquantes</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="12-tidyr.html"><a href="12-tidyr.html#ressources-4"><i class="fa fa-check"></i><b>12.4</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Diffuser et publier avec <code>rmarkdown</code></a><ul>
<li class="chapter" data-level="13.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#créer-un-nouveau-document"><i class="fa fa-check"></i><b>13.1</b> Créer un nouveau document</a></li>
<li class="chapter" data-level="13.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#éléments-dun-document-r-markdown"><i class="fa fa-check"></i><b>13.2</b> Éléments d’un document R Markdown</a><ul>
<li class="chapter" data-level="13.2.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#en-tête-préambule"><i class="fa fa-check"></i><b>13.2.1</b> En-tête (préambule)</a></li>
<li class="chapter" data-level="13.2.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#texte-du-document"><i class="fa fa-check"></i><b>13.2.2</b> Texte du document</a></li>
<li class="chapter" data-level="13.2.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#blocs-de-code-r"><i class="fa fa-check"></i><b>13.2.3</b> Blocs de code R</a></li>
<li class="chapter" data-level="13.2.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#compiler-un-document-knit"><i class="fa fa-check"></i><b>13.2.4</b> Compiler un document (<em>Knit</em>)</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#personnaliser-le-document-généré"><i class="fa fa-check"></i><b>13.3</b> Personnaliser le document généré</a></li>
<li class="chapter" data-level="13.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-des-blocs-de-code-r"><i class="fa fa-check"></i><b>13.4</b> Options des blocs de code R</a><ul>
<li class="chapter" data-level="13.4.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#nom-du-bloc"><i class="fa fa-check"></i><b>13.4.1</b> Nom du bloc</a></li>
<li class="chapter" data-level="13.4.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options"><i class="fa fa-check"></i><b>13.4.2</b> Options</a></li>
<li class="chapter" data-level="13.4.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#modifier-les-options"><i class="fa fa-check"></i><b>13.4.3</b> Modifier les options</a></li>
<li class="chapter" data-level="13.4.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-globales"><i class="fa fa-check"></i><b>13.4.4</b> Options globales</a></li>
<li class="chapter" data-level="13.4.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#mise-en-cache-des-résultats"><i class="fa fa-check"></i><b>13.4.5</b> Mise en cache des résultats</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#rendu-des-tableaux"><i class="fa fa-check"></i><b>13.5</b> Rendu des tableaux</a><ul>
<li class="chapter" data-level="13.5.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-croisés-1"><i class="fa fa-check"></i><b>13.5.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="13.5.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-de-données-et-tris-à-plat"><i class="fa fa-check"></i><b>13.5.2</b> Tableaux de données et tris à plat</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates"><i class="fa fa-check"></i><b>13.6</b> Modèles de documents</a><ul>
<li class="chapter" data-level="13.6.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#slides"><i class="fa fa-check"></i><b>13.6.1</b> Slides</a></li>
<li class="chapter" data-level="13.6.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates-1"><i class="fa fa-check"></i><b>13.6.2</b> Templates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#ressources-5"><i class="fa fa-check"></i><b>13.7</b> Ressources</a></li>
</ul></li>
<li class="part"><span><b>III Aller plus loin</b></span></li>
<li class="chapter" data-level="14" data-path="14-fonctions.html"><a href="14-fonctions.html"><i class="fa fa-check"></i><b>14</b> Écrire ses propres fonctions</a><ul>
<li class="chapter" data-level="14.1" data-path="14-fonctions.html"><a href="14-fonctions.html#introduction-et-exemples"><i class="fa fa-check"></i><b>14.1</b> Introduction et exemples</a><ul>
<li class="chapter" data-level="14.1.1" data-path="14-fonctions.html"><a href="14-fonctions.html#structure-dune-fonction"><i class="fa fa-check"></i><b>14.1.1</b> Structure d’une fonction</a></li>
<li class="chapter" data-level="14.1.2" data-path="14-fonctions.html"><a href="14-fonctions.html#exemple-de-fonction"><i class="fa fa-check"></i><b>14.1.2</b> Exemple de fonction</a></li>
<li class="chapter" data-level="14.1.3" data-path="14-fonctions.html"><a href="14-fonctions.html#effets-de-bord-et-affichage-de-messages"><i class="fa fa-check"></i><b>14.1.3</b> Effets de bord et affichage de messages</a></li>
<li class="chapter" data-level="14.1.4" data-path="14-fonctions.html"><a href="14-fonctions.html#utilité-des-fonctions"><i class="fa fa-check"></i><b>14.1.4</b> Utilité des fonctions</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-et-résultat-dune-fonction"><i class="fa fa-check"></i><b>14.2</b> Arguments et résultat d’une fonction</a><ul>
<li class="chapter" data-level="14.2.1" data-path="14-fonctions.html"><a href="14-fonctions.html#définition-des-arguments"><i class="fa fa-check"></i><b>14.2.1</b> Définition des arguments</a></li>
<li class="chapter" data-level="14.2.2" data-path="14-fonctions.html"><a href="14-fonctions.html#valeurs-par-défaut"><i class="fa fa-check"></i><b>14.2.2</b> Valeurs par défaut</a></li>
<li class="chapter" data-level="14.2.3" data-path="14-fonctions.html"><a href="14-fonctions.html#arg-oblig"><i class="fa fa-check"></i><b>14.2.3</b> Arguments obligatoires et arguments facultatifs</a></li>
<li class="chapter" data-level="14.2.4" data-path="14-fonctions.html"><a href="14-fonctions.html#largument-..."><i class="fa fa-check"></i><b>14.2.4</b> L’argument <code>...</code></a></li>
<li class="chapter" data-level="14.2.5" data-path="14-fonctions.html"><a href="14-fonctions.html#resfunc"><i class="fa fa-check"></i><b>14.2.5</b> Résultat d’une fonction</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables"><i class="fa fa-check"></i><b>14.3</b> Portée des variables</a><ul>
<li class="chapter" data-level="14.3.1" data-path="14-fonctions.html"><a href="14-fonctions.html#une-fonction-peut-accéder-à-un-objet-extérieur"><i class="fa fa-check"></i><b>14.3.1</b> Une fonction peut accéder à un objet extérieur</a></li>
<li class="chapter" data-level="14.3.2" data-path="14-fonctions.html"><a href="14-fonctions.html#les-arguments-et-les-objets-créés-dans-la-fonction-sont-prioritaires"><i class="fa fa-check"></i><b>14.3.2</b> Les arguments et les objets créés dans la fonction sont prioritaires</a></li>
<li class="chapter" data-level="14.3.3" data-path="14-fonctions.html"><a href="14-fonctions.html#un-objet-créé-dans-une-fonction-nexiste-que-dans-cette-fonction"><i class="fa fa-check"></i><b>14.3.3</b> Un objet créé dans une fonction n’existe que dans cette fonction</a></li>
<li class="chapter" data-level="14.3.4" data-path="14-fonctions.html"><a href="14-fonctions.html#on-ne-peut-pas-modifier-un-objet-global-dans-une-fonction"><i class="fa fa-check"></i><b>14.3.4</b> On ne peut pas modifier un objet global dans une fonction</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-comme-objets"><i class="fa fa-check"></i><b>14.4</b> Les fonctions comme objets</a><ul>
<li class="chapter" data-level="14.4.1" data-path="14-fonctions.html"><a href="14-fonctions.html#passer-des-fonctions-comme-argument"><i class="fa fa-check"></i><b>14.4.1</b> Passer des fonctions comme argument</a></li>
<li class="chapter" data-level="14.4.2" data-path="14-fonctions.html"><a href="14-fonctions.html#fonctions-anonymes"><i class="fa fa-check"></i><b>14.4.2</b> Fonctions anonymes</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="14-fonctions.html"><a href="14-fonctions.html#ressources-6"><i class="fa fa-check"></i><b>14.5</b> Ressources</a></li>
<li class="chapter" data-level="14.6" data-path="14-fonctions.html"><a href="14-fonctions.html#exercices-7"><i class="fa fa-check"></i><b>14.6</b> Exercices</a><ul>
<li class="chapter" data-level="14.6.1" data-path="14-fonctions.html"><a href="14-fonctions.html#introduction-et-exemples-1"><i class="fa fa-check"></i><b>14.6.1</b> Introduction et exemples</a></li>
<li class="chapter" data-level="14.6.2" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-et-résultat"><i class="fa fa-check"></i><b>14.6.2</b> Arguments et résultat</a></li>
<li class="chapter" data-level="14.6.3" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables-1"><i class="fa fa-check"></i><b>14.6.3</b> Portée des variables</a></li>
<li class="chapter" data-level="14.6.4" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-comme-objets-1"><i class="fa fa-check"></i><b>14.6.4</b> Les fonctions comme objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html"><i class="fa fa-check"></i><b>15</b> <code>dplyr</code> avancé</a><ul>
<li class="chapter" data-level="15.1" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#appliquer-ses-propres-fonctions"><i class="fa fa-check"></i><b>15.1</b> Appliquer ses propres fonctions</a><ul>
<li class="chapter" data-level="15.1.1" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#exemple-avec-mutate"><i class="fa fa-check"></i><b>15.1.1</b> Exemple avec <code>mutate</code></a></li>
<li class="chapter" data-level="15.1.2" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#exemple-avec-summarise"><i class="fa fa-check"></i><b>15.1.2</b> Exemple avec <code>summarise</code></a></li>
<li class="chapter" data-level="15.1.3" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#exemple-avec-rename_with"><i class="fa fa-check"></i><b>15.1.3</b> Exemple avec <code>rename_with</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#across"><i class="fa fa-check"></i><b>15.2</b> <code>across()</code> : appliquer des fonctions à plusieurs colonnes</a><ul>
<li class="chapter" data-level="15.2.1" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#appliquer-une-fonction-à-plusieurs-colonnes"><i class="fa fa-check"></i><b>15.2.1</b> Appliquer une fonction à plusieurs colonnes</a></li>
<li class="chapter" data-level="15.2.2" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#passer-des-arguments-supplémentaires-à-la-fonction-appliquée"><i class="fa fa-check"></i><b>15.2.2</b> Passer des arguments supplémentaires à la fonction appliquée</a></li>
<li class="chapter" data-level="15.2.3" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#noms-des-colonnes-créées-par-un-mutate"><i class="fa fa-check"></i><b>15.2.3</b> Noms des colonnes créées par un <code>mutate</code></a></li>
<li class="chapter" data-level="15.2.4" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#appliquer-plusieurs-fonctions-à-plusieurs-colonnes"><i class="fa fa-check"></i><b>15.2.4</b> Appliquer plusieurs fonctions à plusieurs colonnes</a></li>
<li class="chapter" data-level="15.2.5" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#renommer-plusieurs-colonnes-avec-une-fonction"><i class="fa fa-check"></i><b>15.2.5</b> Renommer plusieurs colonnes avec une fonction</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#syntaxes-abregees"><i class="fa fa-check"></i><b>15.3</b> Fonctions anonymes et syntaxes abrégées</a></li>
<li class="chapter" data-level="15.4" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#rowwise-et-c_across-appliquer-une-transformation-ligne-par-ligne"><i class="fa fa-check"></i><b>15.4</b> <code>rowwise()</code> et <code>c_across()</code> : appliquer une transformation ligne par ligne</a></li>
<li class="chapter" data-level="15.5" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#ressources-7"><i class="fa fa-check"></i><b>15.5</b> Ressources</a></li>
<li class="chapter" data-level="15.6" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#exercices-8"><i class="fa fa-check"></i><b>15.6</b> Exercices</a><ul>
<li class="chapter" data-level="15.6.1" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#appliquer-ses-propres-fonctions-1"><i class="fa fa-check"></i><b>15.6.1</b> Appliquer ses propres fonctions</a></li>
<li class="chapter" data-level="15.6.2" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#across-1"><i class="fa fa-check"></i><b>15.6.2</b> <code>across()</code></a></li>
<li class="chapter" data-level="15.6.3" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#fonctions-anonymes-et-notations-abrégées"><i class="fa fa-check"></i><b>15.6.3</b> Fonctions anonymes et notations abrégées</a></li>
<li class="chapter" data-level="15.6.4" data-path="15-dplyr-avance.html"><a href="15-dplyr-avance.html#rowwise-et-c_across"><i class="fa fa-check"></i><b>15.6.4</b> <code>rowwise()</code> et <code>c_across()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html"><i class="fa fa-check"></i><b>16</b> Structures de données</a><ul>
<li class="chapter" data-level="16.1" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#vecteurs-atomiques"><i class="fa fa-check"></i><b>16.1</b> Vecteurs atomiques</a><ul>
<li class="chapter" data-level="16.1.1" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#création-dun-vecteur"><i class="fa fa-check"></i><b>16.1.1</b> Création d’un vecteur</a></li>
<li class="chapter" data-level="16.1.2" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#vecteurs-nommés"><i class="fa fa-check"></i><b>16.1.2</b> Vecteurs nommés</a></li>
<li class="chapter" data-level="16.1.3" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#types-de-vecteurs"><i class="fa fa-check"></i><b>16.1.3</b> Types de vecteurs</a></li>
<li class="chapter" data-level="16.1.4" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#sélection-déléments"><i class="fa fa-check"></i><b>16.1.4</b> Sélection d’éléments</a></li>
<li class="chapter" data-level="16.1.5" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#modification"><i class="fa fa-check"></i><b>16.1.5</b> Modification</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#listes"><i class="fa fa-check"></i><b>16.2</b> Listes</a><ul>
<li class="chapter" data-level="16.2.1" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#création"><i class="fa fa-check"></i><b>16.2.1</b> Création</a></li>
<li class="chapter" data-level="16.2.2" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#ajout-déléments"><i class="fa fa-check"></i><b>16.2.2</b> Ajout d’éléments</a></li>
<li class="chapter" data-level="16.2.3" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#sélection-déléments-1"><i class="fa fa-check"></i><b>16.2.3</b> Sélection d’éléments</a></li>
<li class="chapter" data-level="16.2.4" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#modification-1"><i class="fa fa-check"></i><b>16.2.4</b> Modification</a></li>
<li class="chapter" data-level="16.2.5" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#utilisation"><i class="fa fa-check"></i><b>16.2.5</b> Utilisation</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#data-frame-tibbles"><i class="fa fa-check"></i><b>16.3</b> Tableaux de données (<em>data frame</em> et <em>tibble</em>)</a><ul>
<li class="chapter" data-level="16.3.1" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#création-1"><i class="fa fa-check"></i><b>16.3.1</b> Création</a></li>
<li class="chapter" data-level="16.3.2" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#noms-de-colonnes-et-de-lignes"><i class="fa fa-check"></i><b>16.3.2</b> Noms de colonnes et de lignes</a></li>
<li class="chapter" data-level="16.3.3" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#df-sel"><i class="fa fa-check"></i><b>16.3.3</b> Sélection de lignes et de colonnes</a></li>
<li class="chapter" data-level="16.3.4" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#modification-2"><i class="fa fa-check"></i><b>16.3.4</b> Modification</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#ressources-8"><i class="fa fa-check"></i><b>16.4</b> Ressources</a></li>
<li class="chapter" data-level="16.5" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#exercices-9"><i class="fa fa-check"></i><b>16.5</b> Exercices</a><ul>
<li class="chapter" data-level="16.5.1" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#vecteurs-atomiques-1"><i class="fa fa-check"></i><b>16.5.1</b> Vecteurs atomiques</a></li>
<li class="chapter" data-level="16.5.2" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#listes-1"><i class="fa fa-check"></i><b>16.5.2</b> Listes</a></li>
<li class="chapter" data-level="16.5.3" data-path="16-structures-donnees.html"><a href="16-structures-donnees.html#tableaux-de-données"><i class="fa fa-check"></i><b>16.5.3</b> Tableaux de données</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="17-if-boucles.html"><a href="17-if-boucles.html"><i class="fa fa-check"></i><b>17</b> Exécution conditionnelle et boucles</a><ul>
<li class="chapter" data-level="17.1" data-path="17-if-boucles.html"><a href="17-if-boucles.html#if-et-else-exécuter-du-code-sous-certaines-conditions"><i class="fa fa-check"></i><b>17.1</b> <code>if</code> et <code>else</code> : exécuter du code sous certaines conditions</a><ul>
<li class="chapter" data-level="17.1.1" data-path="17-if-boucles.html"><a href="17-if-boucles.html#if"><i class="fa fa-check"></i><b>17.1.1</b> <code>if</code></a></li>
<li class="chapter" data-level="17.1.2" data-path="17-if-boucles.html"><a href="17-if-boucles.html#if-else-1"><i class="fa fa-check"></i><b>17.1.2</b> <code>if</code> / <code>else</code></a></li>
<li class="chapter" data-level="17.1.3" data-path="17-if-boucles.html"><a href="17-if-boucles.html#if-else-if-else"><i class="fa fa-check"></i><b>17.1.3</b> “<code>if</code>” / “<code>else if</code>” / “<code>else</code>”</a></li>
<li class="chapter" data-level="17.1.4" data-path="17-if-boucles.html"><a href="17-if-boucles.html#construction-de-conditions-complexes"><i class="fa fa-check"></i><b>17.1.4</b> Construction de conditions complexes</a></li>
<li class="chapter" data-level="17.1.5" data-path="17-if-boucles.html"><a href="17-if-boucles.html#différence-entre-if-else-et-ifelse"><i class="fa fa-check"></i><b>17.1.5</b> Différence entre <code>if</code> / <code>else</code> et <code>ifelse</code></a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="17-if-boucles.html"><a href="17-if-boucles.html#contrôle-de-lexécution-et-gestion-des-erreurs"><i class="fa fa-check"></i><b>17.2</b> Contrôle de l’exécution et gestion des erreurs</a><ul>
<li class="chapter" data-level="17.2.1" data-path="17-if-boucles.html"><a href="17-if-boucles.html#utilisation-de-return-pour-sortir-de-la-fonction"><i class="fa fa-check"></i><b>17.2.1</b> Utilisation de <code>return</code> pour sortir de la fonction</a></li>
<li class="chapter" data-level="17.2.2" data-path="17-if-boucles.html"><a href="17-if-boucles.html#warning"><i class="fa fa-check"></i><b>17.2.2</b> <code>warning</code></a></li>
<li class="chapter" data-level="17.2.3" data-path="17-if-boucles.html"><a href="17-if-boucles.html#stop-et-stopifnot"><i class="fa fa-check"></i><b>17.2.3</b> <code>stop</code> et <code>stopifnot</code></a></li>
<li class="chapter" data-level="17.2.4" data-path="17-if-boucles.html"><a href="17-if-boucles.html#test-arg"><i class="fa fa-check"></i><b>17.2.4</b> Tester la présence d’un argument facultatif</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="17-if-boucles.html"><a href="17-if-boucles.html#for-et-while-répéter-des-instructions-dans-une-boucle"><i class="fa fa-check"></i><b>17.3</b> <code>for</code> et <code>while</code> : répéter des instructions dans une boucle</a><ul>
<li class="chapter" data-level="17.3.1" data-path="17-if-boucles.html"><a href="17-if-boucles.html#for"><i class="fa fa-check"></i><b>17.3.1</b> <code>for</code></a></li>
<li class="chapter" data-level="17.3.2" data-path="17-if-boucles.html"><a href="17-if-boucles.html#while"><i class="fa fa-check"></i><b>17.3.2</b> <code>while</code></a></li>
<li class="chapter" data-level="17.3.3" data-path="17-if-boucles.html"><a href="17-if-boucles.html#next-et-break"><i class="fa fa-check"></i><b>17.3.3</b> <code>next</code> et <code>break</code></a></li>
<li class="chapter" data-level="17.3.4" data-path="17-if-boucles.html"><a href="17-if-boucles.html#no-boucles"><i class="fa fa-check"></i><b>17.3.4</b> Quand (ne pas) utiliser des boucles</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="17-if-boucles.html"><a href="17-if-boucles.html#ressources-boucles"><i class="fa fa-check"></i><b>17.4</b> Ressources</a></li>
<li class="chapter" data-level="17.5" data-path="17-if-boucles.html"><a href="17-if-boucles.html#exercices-10"><i class="fa fa-check"></i><b>17.5</b> Exercices</a><ul>
<li class="chapter" data-level="17.5.1" data-path="17-if-boucles.html"><a href="17-if-boucles.html#if-et-else"><i class="fa fa-check"></i><b>17.5.1</b> <code>if</code> et <code>else</code></a></li>
<li class="chapter" data-level="17.5.2" data-path="17-if-boucles.html"><a href="17-if-boucles.html#contrôle-de-lexécution"><i class="fa fa-check"></i><b>17.5.2</b> Contrôle de l’exécution</a></li>
<li class="chapter" data-level="17.5.3" data-path="17-if-boucles.html"><a href="17-if-boucles.html#boucles"><i class="fa fa-check"></i><b>17.5.3</b> Boucles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="18-purrr.html"><a href="18-purrr.html"><i class="fa fa-check"></i><b>18</b> Itérer avec <code>purrr</code></a><ul>
<li class="chapter" data-level="18.1" data-path="18-purrr.html"><a href="18-purrr.html#exemple-dapplication"><i class="fa fa-check"></i><b>18.1</b> Exemple d’application</a></li>
<li class="chapter" data-level="18.2" data-path="18-purrr.html"><a href="18-purrr.html#map-et-ses-variantes"><i class="fa fa-check"></i><b>18.2</b> <code>map</code> et ses variantes</a><ul>
<li class="chapter" data-level="18.2.1" data-path="18-purrr.html"><a href="18-purrr.html#modes-dappel-de-map"><i class="fa fa-check"></i><b>18.2.1</b> Modes d’appel de <code>map</code></a></li>
<li class="chapter" data-level="18.2.2" data-path="18-purrr.html"><a href="18-purrr.html#variantes-de-map"><i class="fa fa-check"></i><b>18.2.2</b> Variantes de <code>map</code></a></li>
<li class="chapter" data-level="18.2.3" data-path="18-purrr.html"><a href="18-purrr.html#map_dfr-et-map_dfc"><i class="fa fa-check"></i><b>18.2.3</b> <code>map_dfr()</code> et <code>map_dfc()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="18-purrr.html"><a href="18-purrr.html#itérer-sur-les-colonnes-dun-tableau-de-données"><i class="fa fa-check"></i><b>18.3</b> Itérer sur les colonnes d’un tableau de données</a></li>
<li class="chapter" data-level="18.4" data-path="18-purrr.html"><a href="18-purrr.html#modify"><i class="fa fa-check"></i><b>18.4</b> <code>modify</code></a></li>
<li class="chapter" data-level="18.5" data-path="18-purrr.html"><a href="18-purrr.html#imap"><i class="fa fa-check"></i><b>18.5</b> <code>imap</code></a></li>
<li class="chapter" data-level="18.6" data-path="18-purrr.html"><a href="18-purrr.html#walk"><i class="fa fa-check"></i><b>18.6</b> <code>walk</code></a></li>
<li class="chapter" data-level="18.7" data-path="18-purrr.html"><a href="18-purrr.html#map2-et-pmap-itérer-sur-plusieurs-vecteurs-en-parallèle"><i class="fa fa-check"></i><b>18.7</b> <code>map2</code> et <code>pmap</code> : itérer sur plusieurs vecteurs en parallèle</a></li>
<li class="chapter" data-level="18.8" data-path="18-purrr.html"><a href="18-purrr.html#répéter-une-opération"><i class="fa fa-check"></i><b>18.8</b> Répéter une opération</a></li>
<li class="chapter" data-level="18.9" data-path="18-purrr.html"><a href="18-purrr.html#quand-ne-pas-utiliser-map"><i class="fa fa-check"></i><b>18.9</b> Quand (ne pas) utiliser <code>map</code></a></li>
<li class="chapter" data-level="18.10" data-path="18-purrr.html"><a href="18-purrr.html#purrr-vs-apply"><i class="fa fa-check"></i><b>18.10</b> <code>purrr</code> vs <code>*apply</code></a></li>
<li class="chapter" data-level="18.11" data-path="18-purrr.html"><a href="18-purrr.html#ressources-9"><i class="fa fa-check"></i><b>18.11</b> Ressources</a></li>
<li class="chapter" data-level="18.12" data-path="18-purrr.html"><a href="18-purrr.html#exercices-11"><i class="fa fa-check"></i><b>18.12</b> Exercices</a><ul>
<li class="chapter" data-level="18.12.1" data-path="18-purrr.html"><a href="18-purrr.html#map-et-ses-variantes-1"><i class="fa fa-check"></i><b>18.12.1</b> <code>map</code> et ses variantes</a></li>
<li class="chapter" data-level="18.12.2" data-path="18-purrr.html"><a href="18-purrr.html#modify-et-itération-sur-les-colonnes-dun-tableau"><i class="fa fa-check"></i><b>18.12.2</b> <code>modify</code> et itération sur les colonnes d’un tableau</a></li>
<li class="chapter" data-level="18.12.3" data-path="18-purrr.html"><a href="18-purrr.html#imap-et-walk"><i class="fa fa-check"></i><b>18.12.3</b> <code>imap</code> et <code>walk</code></a></li>
<li class="chapter" data-level="18.12.4" data-path="18-purrr.html"><a href="18-purrr.html#map2-et-pmap"><i class="fa fa-check"></i><b>18.12.4</b> <code>map2</code> et <code>pmap</code></a></li>
<li class="chapter" data-level="18.12.5" data-path="18-purrr.html"><a href="18-purrr.html#répéter-une-opération-1"><i class="fa fa-check"></i><b>18.12.5</b> Répéter une opération</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html"><i class="fa fa-check"></i><b>19</b> Programmer avec le <em>tidyverse</em></a><ul>
<li class="chapter" data-level="19.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#spécificités-du-tidyverse"><i class="fa fa-check"></i><b>19.1</b> Spécificités du <em>tidyverse</em></a><ul>
<li class="chapter" data-level="19.1.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#data-masking"><i class="fa fa-check"></i><b>19.1.1</b> <em>data masking</em></a></li>
<li class="chapter" data-level="19.1.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#tidy-selection"><i class="fa fa-check"></i><b>19.1.2</b> <em>tidy selection</em></a></li>
<li class="chapter" data-level="19.1.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utilisation-dans-des-fonctions"><i class="fa fa-check"></i><b>19.1.3</b> Utilisation dans des fonctions</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#programmer-avec-dplyr-et-tidyr"><i class="fa fa-check"></i><b>19.2</b> Programmer avec <code>dplyr</code> et <code>tidyr</code></a><ul>
<li class="chapter" data-level="19.2.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utiliser-une-colonne-passée-en-argument"><i class="fa fa-check"></i><b>19.2.1</b> Utiliser une colonne passée en argument</a></li>
<li class="chapter" data-level="19.2.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utiliser-une-sélection-de-colonnes-passée-en-argument"><i class="fa fa-check"></i><b>19.2.2</b> Utiliser une sélection de colonnes passée en argument</a></li>
<li class="chapter" data-level="19.2.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#nommer-de-nouvelles-colonnes-à-partir-dun-argument"><i class="fa fa-check"></i><b>19.2.3</b> Nommer de nouvelles colonnes à partir d’un argument</a></li>
<li class="chapter" data-level="19.2.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#désambiguïser-data-et-env"><i class="fa fa-check"></i><b>19.2.4</b> Désambiguïser data et env</a></li>
<li class="chapter" data-level="19.2.5" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#quand-les-arguments-sont-des-chaînes-de-caractères"><i class="fa fa-check"></i><b>19.2.5</b> Quand les arguments sont des chaînes de caractères</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#programmer-avec-ggplot2"><i class="fa fa-check"></i><b>19.3</b> Programmer avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="19.3.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#sélection-de-colonnes-avec-aes"><i class="fa fa-check"></i><b>19.3.1</b> Sélection de colonnes avec <code>aes()</code></a></li>
<li class="chapter" data-level="19.3.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#faceting-1"><i class="fa fa-check"></i><b>19.3.2</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#aide-mémoire"><i class="fa fa-check"></i><b>19.4</b> Aide-mémoire</a></li>
<li class="chapter" data-level="19.5" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ressources-10"><i class="fa fa-check"></i><b>19.5</b> Ressources</a></li>
<li class="chapter" data-level="19.6" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#exercices-12"><i class="fa fa-check"></i><b>19.6</b> Exercices</a><ul>
<li class="chapter" data-level="19.6.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#dplyr-et-tidyr"><i class="fa fa-check"></i><b>19.6.1</b> <code>dplyr</code> et <code>tidyr</code></a></li>
<li class="chapter" data-level="19.6.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#noms-de-colonnes-en-chaînes-de-caractères"><i class="fa fa-check"></i><b>19.6.2</b> Noms de colonnes en chaînes de caractères</a></li>
<li class="chapter" data-level="19.6.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ambiguïté-data-env"><i class="fa fa-check"></i><b>19.6.3</b> Ambiguïté <code>data</code> / <code>env</code></a></li>
<li class="chapter" data-level="19.6.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ggplot2-1"><i class="fa fa-check"></i><b>19.6.4</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html"><i class="fa fa-check"></i><b>20</b> Débuggage et performance</a><ul>
<li class="chapter" data-level="20.1" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#débugguer-une-fonction"><i class="fa fa-check"></i><b>20.1</b> Débugguer une fonction</a><ul>
<li class="chapter" data-level="20.1.1" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#print"><i class="fa fa-check"></i><b>20.1.1</b> print()</a></li>
<li class="chapter" data-level="20.1.2" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#localiser-une-erreur"><i class="fa fa-check"></i><b>20.1.2</b> Localiser une erreur</a></li>
<li class="chapter" data-level="20.1.3" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#browser"><i class="fa fa-check"></i><b>20.1.3</b> browser()</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#benchmarking-mesurer-et-comparer-les-temps-dexécution"><i class="fa fa-check"></i><b>20.2</b> benchmarking : mesurer et comparer les temps d’exécution</a></li>
<li class="chapter" data-level="20.3" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#quelques-conseils-doptimisation"><i class="fa fa-check"></i><b>20.3</b> Quelques conseils d’optimisation</a><ul>
<li class="chapter" data-level="20.3.1" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#privilégier-les-fonctions-vectorisées"><i class="fa fa-check"></i><b>20.3.1</b> Privilégier les fonctions vectorisées</a></li>
<li class="chapter" data-level="20.3.2" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#mettre-le-minimum-dopérations-dans-les-boucles"><i class="fa fa-check"></i><b>20.3.2</b> Mettre le minimum d’opérations dans les boucles</a></li>
<li class="chapter" data-level="20.3.3" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#choisir-un-format-de-fichier-adapté"><i class="fa fa-check"></i><b>20.3.3</b> Choisir un format de fichier adapté</a></li>
<li class="chapter" data-level="20.3.4" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#repérer-les-opérations-coûteuses-avec-du-profiling"><i class="fa fa-check"></i><b>20.3.4</b> Repérer les opérations coûteuses avec du <em>profiling</em></a></li>
<li class="chapter" data-level="20.3.5" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#mettre-en-cache-des-résultats-intermédiaires"><i class="fa fa-check"></i><b>20.3.5</b> Mettre en cache des résultats intermédiaires</a></li>
<li class="chapter" data-level="20.3.6" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#utiliser-dautres-extensions"><i class="fa fa-check"></i><b>20.3.6</b> Utiliser d’autres extensions</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="20-debuggage-performance.html"><a href="20-debuggage-performance.html#ressources-11"><i class="fa fa-check"></i><b>20.4</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="21-targets.html"><a href="21-targets.html"><i class="fa fa-check"></i><b>21</b> Organiser un projet avec <code>targets</code></a><ul>
<li class="chapter" data-level="21.1" data-path="21-targets.html"><a href="21-targets.html#définition-du-pipeline"><i class="fa fa-check"></i><b>21.1</b> Définition du pipeline</a><ul>
<li class="chapter" data-level="21.1.1" data-path="21-targets.html"><a href="21-targets.html#projet-dexemple"><i class="fa fa-check"></i><b>21.1.1</b> Projet d’exemple</a></li>
<li class="chapter" data-level="21.1.2" data-path="21-targets.html"><a href="21-targets.html#targets.r"><i class="fa fa-check"></i><b>21.1.2</b> <code>_targets.R</code></a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="21-targets.html"><a href="21-targets.html#exécution-du-pipeline"><i class="fa fa-check"></i><b>21.2</b> Exécution du pipeline</a></li>
<li class="chapter" data-level="21.3" data-path="21-targets.html"><a href="21-targets.html#modification-du-pipeline"><i class="fa fa-check"></i><b>21.3</b> Modification du pipeline</a></li>
<li class="chapter" data-level="21.4" data-path="21-targets.html"><a href="21-targets.html#rmarkdown"><i class="fa fa-check"></i><b>21.4</b> RMarkdown</a></li>
<li class="chapter" data-level="21.5" data-path="21-targets.html"><a href="21-targets.html#gestion-des-données-en-cache"><i class="fa fa-check"></i><b>21.5</b> Gestion des données en cache</a></li>
<li class="chapter" data-level="21.6" data-path="21-targets.html"><a href="21-targets.html#avantages-et-limites"><i class="fa fa-check"></i><b>21.6</b> Avantages et limites</a><ul>
<li class="chapter" data-level="21.6.1" data-path="21-targets.html"><a href="21-targets.html#avantages"><i class="fa fa-check"></i><b>21.6.1</b> Avantages</a></li>
<li class="chapter" data-level="21.6.2" data-path="21-targets.html"><a href="21-targets.html#interactivité-et-développement-du-pipeline"><i class="fa fa-check"></i><b>21.6.2</b> Interactivité et développement du pipeline</a></li>
</ul></li>
<li class="chapter" data-level="21.7" data-path="21-targets.html"><a href="21-targets.html#ressources-12"><i class="fa fa-check"></i><b>21.7</b> Ressources</a></li>
</ul></li>
<li class="appendix"><span><b>Annexes</b></span></li>
<li class="chapter" data-level="A" data-path="22-ressources.html"><a href="22-ressources.html"><i class="fa fa-check"></i><b>A</b> Ressources</a><ul>
<li class="chapter" data-level="A.1" data-path="22-ressources.html"><a href="22-ressources.html#aide"><i class="fa fa-check"></i><b>A.1</b> Aide</a><ul>
<li class="chapter" data-level="A.1.1" data-path="22-ressources.html"><a href="22-ressources.html#aide-de-r-et-rstudio"><i class="fa fa-check"></i><b>A.1.1</b> Aide de R et RStudio</a></li>
<li class="chapter" data-level="A.1.2" data-path="22-ressources.html"><a href="22-ressources.html#aide-en-ligne"><i class="fa fa-check"></i><b>A.1.2</b> Aide en ligne</a></li>
<li class="chapter" data-level="A.1.3" data-path="22-ressources.html"><a href="22-ressources.html#antisèches"><i class="fa fa-check"></i><b>A.1.3</b> Antisèches</a></li>
<li class="chapter" data-level="A.1.4" data-path="22-ressources.html"><a href="22-ressources.html#où-poser-des-questions"><i class="fa fa-check"></i><b>A.1.4</b> Où poser des questions</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="22-ressources.html"><a href="22-ressources.html#ouvrages-blogs-moocs"><i class="fa fa-check"></i><b>A.2</b> Ouvrages, blogs, MOOCs…</a><ul>
<li class="chapter" data-level="A.2.1" data-path="22-ressources.html"><a href="22-ressources.html#francophones"><i class="fa fa-check"></i><b>A.2.1</b> Francophones</a></li>
<li class="chapter" data-level="A.2.2" data-path="22-ressources.html"><a href="22-ressources.html#anglophones"><i class="fa fa-check"></i><b>A.2.2</b> Anglophones</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="22-ressources.html"><a href="22-ressources.html#extensions-1"><i class="fa fa-check"></i><b>A.3</b> Extensions</a><ul>
<li class="chapter" data-level="A.3.1" data-path="22-ressources.html"><a href="22-ressources.html#où-trouver-des-extensions-intéressantes"><i class="fa fa-check"></i><b>A.3.1</b> Où trouver des extensions intéressantes ?</a></li>
<li class="chapter" data-level="A.3.2" data-path="22-ressources.html"><a href="22-ressources.html#lextension-questionr"><i class="fa fa-check"></i><b>A.3.2</b> L’extension <code>questionr</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction à R et au tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="écrire-ses-propres-fonctions" class="section level1">
<h1><span class="header-section-number">Partie 14</span> Écrire ses propres fonctions</h1>
<div id="introduction-et-exemples" class="section level2">
<h2><span class="header-section-number">14.1</span> Introduction et exemples</h2>
<div id="structure-dune-fonction" class="section level3">
<h3><span class="header-section-number">14.1.1</span> Structure d’une fonction</h3>
<p>Nous avons vu lors de l’introduction à R que le langage repose sur deux grands concepts : les <em>objets</em> et les <em>fonctions</em>. Pour reprendre une citation de John Chambers, en R, tout ce qui existe est un objet, et tout ce qui se passe est une fonction.</p>
<p>Le principe d’une fonction est de prendre en entrée un ou plusieurs arguments (ou paramètres), d’effectuer un certain nombre d’actions et de renvoyer un résultat :</p>
<p><img src="resources/figures/schema_fonction.svg" /></p>
<p>Nous avons déjà rencontré et utilisé un grand nombre de fonctions, certaines assez simples (<code>mean</code>, <code>max</code>…) et d’autres beaucoup plus complexes (<code>summary</code>, <code>mutate</code>…). R, comme tout langage de programmation, offre la possibilité de créer et d’utiliser ses propres fonctions.</p>
<p>Voici un exemple de fonction très simple, quoi que d’une utilité douteuse, puisqu’elle se contente d’ajouter 2 à un nombre :</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="14-fonctions.html#cb576-1"></a>ajoute2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb576-2"><a href="14-fonctions.html#cb576-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb576-3"><a href="14-fonctions.html#cb576-3"></a>  <span class="kw">return</span>(res)</span>
<span id="cb576-4"><a href="14-fonctions.html#cb576-4"></a>}</span></code></pre></div>
<p>En exécutant ce code, on crée une nouvelle fonction nommée <code>ajoute2</code>, que l’on peut directement utiliser dans un script ou dans la console :</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="14-fonctions.html#cb577-1"></a><span class="kw">ajoute2</span>(<span class="dv">3</span>)</span>
<span id="cb577-2"><a href="14-fonctions.html#cb577-2"></a><span class="co">#&gt; [1] 5</span></span></code></pre></div>
<p>On va décomposer pas à pas la structure de cette première fonction.</p>
<p>D’abord, une fonction est créée en utilisant l’instruction <code>function</code>. Celle-ci est suivie d’une paire de parenthèses et d’une paire d’accolades.</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="14-fonctions.html#cb578-1"></a><span class="cf">function</span>() {</span>
<span id="cb578-2"><a href="14-fonctions.html#cb578-2"></a></span>
<span id="cb578-3"><a href="14-fonctions.html#cb578-3"></a>}</span></code></pre></div>
<p>Dans les parenthèses, on indique les <em>arguments</em> de la fonction, ceux qui devront lui être passés quand nous l’appellerons. Ici notre fonction ne prend qu’un seul argument, que nous avons décidé arbitrairement de nommer <code>x</code>.</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="14-fonctions.html#cb579-1"></a><span class="cf">function</span>(x) {</span>
<span id="cb579-2"><a href="14-fonctions.html#cb579-2"></a></span>
<span id="cb579-3"><a href="14-fonctions.html#cb579-3"></a>}</span></code></pre></div>
<p>Les accolades comprennent une série d’instructions R qui constituent le <em>corps</em> de notre fonction. C’est ce code qui sera exécuté quand notre fonction est appelée. On peut utiliser dans le corps de la fonction les arguments qui lui sont passés. Ici, la première ligne utilise la valeur de l’argument <code>x</code>, lui ajoute 2 et stocke le résultat dans un nouvel objet <code>res</code>.</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="14-fonctions.html#cb580-1"></a><span class="cf">function</span>(x) {</span>
<span id="cb580-2"><a href="14-fonctions.html#cb580-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb580-3"><a href="14-fonctions.html#cb580-3"></a>}</span></code></pre></div>
<p>Pour qu’elle soit utile, notre fonction doit renvoyer le résultat qu’elle a calculé précédemment. Ceci se fait via l’instruction <code>return</code> à qui on passe la valeur à retourner.</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="14-fonctions.html#cb581-1"></a><span class="cf">function</span>(x) {</span>
<span id="cb581-2"><a href="14-fonctions.html#cb581-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb581-3"><a href="14-fonctions.html#cb581-3"></a>  <span class="kw">return</span>(res)</span>
<span id="cb581-4"><a href="14-fonctions.html#cb581-4"></a>}</span></code></pre></div>
<p>Enfin, pour que notre fonction puisse être appelée et utilisée, nous devons lui donner un nom, ou plus précisément la stocker dans un objet. Ici on la stocke dans un objet nommé <code>ajoute2</code>.</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="14-fonctions.html#cb582-1"></a>ajoute2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb582-2"><a href="14-fonctions.html#cb582-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb582-3"><a href="14-fonctions.html#cb582-3"></a>  <span class="kw">return</span>(res)</span>
<span id="cb582-4"><a href="14-fonctions.html#cb582-4"></a>}</span></code></pre></div>
<div class="rmdnote">
<p>
Les fonctions étant des objets comme les autres, elles suivent les mêmes contraintes pour leur nom : on a donc droit aux lettres, chiffres, point et tiret bas.
</p>
<p>
Attention à ne pas donner à votre fonction le nom d’une fonction déjà existante : par exemple, si vous créez une fonction nommée <code>table</code>, la fonction du même nom de R base ne sera plus disponible (sauf à la préfixer avec <code>base::table</code>). Si vous “écrasez” par erreur une fonction existante, il vous suffit de relancer votre session R et de trouver un nouveau nom.
</p>
</div>
<p>Avec le code précédent, on a donc créé un nouvel objet <code>ajoute2</code> de type <code>function</code>. Cette nouvelle fonction prend un seul argument <code>x</code>, calcule la valeur <code>x + 2</code> et retourne ce résultat. On l’utilise en tapant son nom suivi de la valeur de son argument entre parenthèses, par exemple :</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="14-fonctions.html#cb583-1"></a><span class="kw">ajoute2</span>(<span class="dv">41</span>)</span>
<span id="cb583-2"><a href="14-fonctions.html#cb583-2"></a><span class="co">#&gt; [1] 43</span></span></code></pre></div>
<p>Ou encore :</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="14-fonctions.html#cb584-1"></a>y &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb584-2"><a href="14-fonctions.html#cb584-2"></a>z &lt;-<span class="st"> </span><span class="kw">ajoute2</span>(y)</span>
<span id="cb584-3"><a href="14-fonctions.html#cb584-3"></a>z</span>
<span id="cb584-4"><a href="14-fonctions.html#cb584-4"></a><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>À noter que comme <code>x + 2</code> fonctionne si <code>x</code> est un vecteur, on peut aussi appeler notre fonction en lui passant un vecteur en argument.</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="14-fonctions.html#cb585-1"></a>vec &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb585-2"><a href="14-fonctions.html#cb585-2"></a><span class="kw">ajoute2</span>(vec)</span>
<span id="cb585-3"><a href="14-fonctions.html#cb585-3"></a><span class="co">#&gt; [1] 3 4 5 6 7</span></span></code></pre></div>
<p>Si on récapitule, une fonction se définit donc de la manière suivante :</p>
<p><img src="resources/figures/structure_fonction.svg" /></p>
<p>Une fonction peut évidemment prendre plusieurs arguments. Dans ce cas on liste les arguments dans les parenthèses en les séparant par des virgules :</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="14-fonctions.html#cb586-1"></a>somme &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb586-2"><a href="14-fonctions.html#cb586-2"></a>  <span class="kw">return</span>(x <span class="op">+</span><span class="st"> </span>y)</span>
<span id="cb586-3"><a href="14-fonctions.html#cb586-3"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="14-fonctions.html#cb587-1"></a><span class="kw">somme</span>(<span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb587-2"><a href="14-fonctions.html#cb587-2"></a><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Une fonction peut aussi n’accepter aucun argument, dans ce cas on laisse les parenthèses vides.</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="14-fonctions.html#cb588-1"></a>miaule &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb588-2"><a href="14-fonctions.html#cb588-2"></a>  <span class="kw">return</span>(<span class="st">&quot;Miaou&quot;</span>)</span>
<span id="cb588-3"><a href="14-fonctions.html#cb588-3"></a>}</span>
<span id="cb588-4"><a href="14-fonctions.html#cb588-4"></a></span>
<span id="cb588-5"><a href="14-fonctions.html#cb588-5"></a><span class="kw">miaule</span>()</span>
<span id="cb588-6"><a href="14-fonctions.html#cb588-6"></a><span class="co">#&gt; [1] &quot;Miaou&quot;</span></span></code></pre></div>
<p>À noter que si on appelle une fonction avec un nombre d’arguments incorrect, cela génère une erreur.</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="14-fonctions.html#cb589-1"></a><span class="kw">somme</span>(<span class="dv">1</span>)</span>
<span id="cb589-2"><a href="14-fonctions.html#cb589-2"></a><span class="co">#&gt; Error in somme(1): l&#39;argument &quot;y&quot; est manquant, avec aucune valeur par défaut</span></span></code></pre></div>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="14-fonctions.html#cb590-1"></a><span class="kw">miaule</span>(<span class="st">&quot;ouaf&quot;</span>)</span>
<span id="cb590-2"><a href="14-fonctions.html#cb590-2"></a><span class="co">#&gt; Error in miaule(&quot;ouaf&quot;): argument inutilisé (&quot;ouaf&quot;)</span></span></code></pre></div>
</div>
<div id="exemple-de-fonction" class="section level3">
<h3><span class="header-section-number">14.1.2</span> Exemple de fonction</h3>
<p>Prenons un exemple un peu plus élaboré : la fonction <code>table()</code> retourne le tri à plat en effectifs d’une variable qualitative. On souhaite créer une fonction qui calcule plutôt le tri à plat en pourcentages. Voici une manière de le faire :</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="14-fonctions.html#cb591-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb591-2"><a href="14-fonctions.html#cb591-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v)</span>
<span id="cb591-3"><a href="14-fonctions.html#cb591-3"></a>  effectif_total &lt;-<span class="st"> </span><span class="kw">length</span>(v)</span>
<span id="cb591-4"><a href="14-fonctions.html#cb591-4"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span>effectif_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb591-5"><a href="14-fonctions.html#cb591-5"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb591-6"><a href="14-fonctions.html#cb591-6"></a>}</span></code></pre></div>
<p>Notre fonction prend en entrée un argument nommé <code>v</code>, en l’occurrence un vecteur représentant une variable qualitative. On commence par faire le tri à plat de ce vecteur avec <code>table</code>, puis on calcule la répartition en pourcentages en divisant ce tri à plat par l’effectif total et en multipliant par 100.</p>
<p>Testons avec un vecteur d’exemple :</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="14-fonctions.html#cb592-1"></a>vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;rouge&quot;</span>, <span class="st">&quot;vert&quot;</span>, <span class="st">&quot;vert&quot;</span>, <span class="st">&quot;bleu&quot;</span>, <span class="st">&quot;rouge&quot;</span>)</span>
<span id="cb592-2"><a href="14-fonctions.html#cb592-2"></a><span class="kw">prop_tab</span>(vec)</span>
<span id="cb592-3"><a href="14-fonctions.html#cb592-3"></a><span class="co">#&gt; v</span></span>
<span id="cb592-4"><a href="14-fonctions.html#cb592-4"></a><span class="co">#&gt;  bleu rouge  vert </span></span>
<span id="cb592-5"><a href="14-fonctions.html#cb592-5"></a><span class="co">#&gt;    20    40    40</span></span></code></pre></div>
<p>Testons sur une variable du jeu de données <code>hdv2003</code><a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a> :</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="14-fonctions.html#cb593-1"></a><span class="kw">library</span>(questionr)</span>
<span id="cb593-2"><a href="14-fonctions.html#cb593-2"></a><span class="kw">data</span>(hdv2003)</span>
<span id="cb593-3"><a href="14-fonctions.html#cb593-3"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>qualif)</span>
<span id="cb593-4"><a href="14-fonctions.html#cb593-4"></a><span class="co">#&gt; v</span></span>
<span id="cb593-5"><a href="14-fonctions.html#cb593-5"></a><span class="co">#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien </span></span>
<span id="cb593-6"><a href="14-fonctions.html#cb593-6"></a><span class="co">#&gt;                    10.15                    14.60                     4.30 </span></span>
<span id="cb593-7"><a href="14-fonctions.html#cb593-7"></a><span class="co">#&gt; Profession intermediaire                    Cadre                  Employe </span></span>
<span id="cb593-8"><a href="14-fonctions.html#cb593-8"></a><span class="co">#&gt;                     8.00                    13.00                    29.70 </span></span>
<span id="cb593-9"><a href="14-fonctions.html#cb593-9"></a><span class="co">#&gt;                    Autre </span></span>
<span id="cb593-10"><a href="14-fonctions.html#cb593-10"></a><span class="co">#&gt;                     2.90</span></span></code></pre></div>
<p>Ça fonctionne, mais avec une petite limite : par défaut <code>table()</code> ignore les <code>NA</code>. On peut modifier ce comportement en lui ajoutant un argument <code>useNA = "ifany"</code>.</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="14-fonctions.html#cb594-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb594-2"><a href="14-fonctions.html#cb594-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>)</span>
<span id="cb594-3"><a href="14-fonctions.html#cb594-3"></a>  effectif_total &lt;-<span class="st"> </span><span class="kw">length</span>(v)</span>
<span id="cb594-4"><a href="14-fonctions.html#cb594-4"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span>effectif_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb594-5"><a href="14-fonctions.html#cb594-5"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb594-6"><a href="14-fonctions.html#cb594-6"></a>}</span>
<span id="cb594-7"><a href="14-fonctions.html#cb594-7"></a></span>
<span id="cb594-8"><a href="14-fonctions.html#cb594-8"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>qualif)</span>
<span id="cb594-9"><a href="14-fonctions.html#cb594-9"></a><span class="co">#&gt; v</span></span>
<span id="cb594-10"><a href="14-fonctions.html#cb594-10"></a><span class="co">#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien </span></span>
<span id="cb594-11"><a href="14-fonctions.html#cb594-11"></a><span class="co">#&gt;                    10.15                    14.60                     4.30 </span></span>
<span id="cb594-12"><a href="14-fonctions.html#cb594-12"></a><span class="co">#&gt; Profession intermediaire                    Cadre                  Employe </span></span>
<span id="cb594-13"><a href="14-fonctions.html#cb594-13"></a><span class="co">#&gt;                     8.00                    13.00                    29.70 </span></span>
<span id="cb594-14"><a href="14-fonctions.html#cb594-14"></a><span class="co">#&gt;                    Autre                     &lt;NA&gt; </span></span>
<span id="cb594-15"><a href="14-fonctions.html#cb594-15"></a><span class="co">#&gt;                     2.90                    17.35</span></span></code></pre></div>
<div class="rmdimportant">
<p>
Quand on modifie une fonction existante, il faut exécuter à nouveau le code correspondant à sa définition pour la “mettre à jour”. Ici, si on ne le fait pas l’objet <code>prop_tab</code> contiendra toujours l’ancienne définition.
</p>
<p>
Pour “mettre à jour” une fonction après avoir modifié son code, on peut soit sélectionner le code qui la définit et l’exécuter de la manière habituelle, soit, dans RStudio, se positionner dans le corps de la fonction et utiliser le raccourci clavier <code>Ctrl + Alt + F</code>.
</p>
</div>
<p>Autre amélioration possible : on pourrait vouloir modifier le nombre de décimales affichées pour les pourcentages, par exemple en les limitant à 1. Pour cela on ajoute une instruction <code>round()</code>.</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="14-fonctions.html#cb595-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb595-2"><a href="14-fonctions.html#cb595-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>)</span>
<span id="cb595-3"><a href="14-fonctions.html#cb595-3"></a>  effectif_total &lt;-<span class="st"> </span><span class="kw">length</span>(v)</span>
<span id="cb595-4"><a href="14-fonctions.html#cb595-4"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span>effectif_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb595-5"><a href="14-fonctions.html#cb595-5"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, <span class="dv">1</span>)</span>
<span id="cb595-6"><a href="14-fonctions.html#cb595-6"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb595-7"><a href="14-fonctions.html#cb595-7"></a>}</span>
<span id="cb595-8"><a href="14-fonctions.html#cb595-8"></a></span>
<span id="cb595-9"><a href="14-fonctions.html#cb595-9"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>qualif)</span>
<span id="cb595-10"><a href="14-fonctions.html#cb595-10"></a><span class="co">#&gt; v</span></span>
<span id="cb595-11"><a href="14-fonctions.html#cb595-11"></a><span class="co">#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien </span></span>
<span id="cb595-12"><a href="14-fonctions.html#cb595-12"></a><span class="co">#&gt;                     10.2                     14.6                      4.3 </span></span>
<span id="cb595-13"><a href="14-fonctions.html#cb595-13"></a><span class="co">#&gt; Profession intermediaire                    Cadre                  Employe </span></span>
<span id="cb595-14"><a href="14-fonctions.html#cb595-14"></a><span class="co">#&gt;                      8.0                     13.0                     29.7 </span></span>
<span id="cb595-15"><a href="14-fonctions.html#cb595-15"></a><span class="co">#&gt;                    Autre                     &lt;NA&gt; </span></span>
<span id="cb595-16"><a href="14-fonctions.html#cb595-16"></a><span class="co">#&gt;                      2.9                     17.3</span></span></code></pre></div>
<p>Ça fonctionne ! Cela dit, limiter à un chiffre après la virgule ne convient pas forcément dans tous les cas. L’idéal serait d’offrir la possibilité à la personne qui appelle la fonction de choisir elle-même la précision de l’affichage. Comment ? Tout simplement en ajoutant un deuxième argument à notre fonction, que nous nommerons <code>decimales</code>, et en utilisant cet argument à la place du 1 dans l’appel à <code>round()</code>.</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="14-fonctions.html#cb596-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v, decimales) {</span>
<span id="cb596-2"><a href="14-fonctions.html#cb596-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>)</span>
<span id="cb596-3"><a href="14-fonctions.html#cb596-3"></a>  effectif_total &lt;-<span class="st"> </span><span class="kw">length</span>(v)</span>
<span id="cb596-4"><a href="14-fonctions.html#cb596-4"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span>effectif_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb596-5"><a href="14-fonctions.html#cb596-5"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, decimales)</span>
<span id="cb596-6"><a href="14-fonctions.html#cb596-6"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb596-7"><a href="14-fonctions.html#cb596-7"></a>}</span></code></pre></div>
<p>Désormais, notre fonction s’utilise en lui indiquant deux arguments :</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="14-fonctions.html#cb597-1"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>qualif, <span class="dv">1</span>)</span>
<span id="cb597-2"><a href="14-fonctions.html#cb597-2"></a><span class="co">#&gt; v</span></span>
<span id="cb597-3"><a href="14-fonctions.html#cb597-3"></a><span class="co">#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien </span></span>
<span id="cb597-4"><a href="14-fonctions.html#cb597-4"></a><span class="co">#&gt;                     10.2                     14.6                      4.3 </span></span>
<span id="cb597-5"><a href="14-fonctions.html#cb597-5"></a><span class="co">#&gt; Profession intermediaire                    Cadre                  Employe </span></span>
<span id="cb597-6"><a href="14-fonctions.html#cb597-6"></a><span class="co">#&gt;                      8.0                     13.0                     29.7 </span></span>
<span id="cb597-7"><a href="14-fonctions.html#cb597-7"></a><span class="co">#&gt;                    Autre                     &lt;NA&gt; </span></span>
<span id="cb597-8"><a href="14-fonctions.html#cb597-8"></a><span class="co">#&gt;                      2.9                     17.3</span></span></code></pre></div>
<p>De la même manière, on pourrait vouloir laisser le choix à l’utilisateur d’afficher ou non les <code>NA</code> dans le tri à plat. C’est possible en ajoutant un troisième argument à notre fonction et en utilisant sa valeur dans le paramètre <code>useNA</code> de <code>table()</code>.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="14-fonctions.html#cb598-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v, decimales, useNA) {</span>
<span id="cb598-2"><a href="14-fonctions.html#cb598-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> useNA)</span>
<span id="cb598-3"><a href="14-fonctions.html#cb598-3"></a>  effectif_total &lt;-<span class="st"> </span><span class="kw">length</span>(v)</span>
<span id="cb598-4"><a href="14-fonctions.html#cb598-4"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span>effectif_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb598-5"><a href="14-fonctions.html#cb598-5"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, decimales)</span>
<span id="cb598-6"><a href="14-fonctions.html#cb598-6"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb598-7"><a href="14-fonctions.html#cb598-7"></a>}</span>
<span id="cb598-8"><a href="14-fonctions.html#cb598-8"></a></span>
<span id="cb598-9"><a href="14-fonctions.html#cb598-9"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>qualif, <span class="dv">1</span>, <span class="st">&quot;no&quot;</span>)</span>
<span id="cb598-10"><a href="14-fonctions.html#cb598-10"></a><span class="co">#&gt; v</span></span>
<span id="cb598-11"><a href="14-fonctions.html#cb598-11"></a><span class="co">#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien </span></span>
<span id="cb598-12"><a href="14-fonctions.html#cb598-12"></a><span class="co">#&gt;                     10.2                     14.6                      4.3 </span></span>
<span id="cb598-13"><a href="14-fonctions.html#cb598-13"></a><span class="co">#&gt; Profession intermediaire                    Cadre                  Employe </span></span>
<span id="cb598-14"><a href="14-fonctions.html#cb598-14"></a><span class="co">#&gt;                      8.0                     13.0                     29.7 </span></span>
<span id="cb598-15"><a href="14-fonctions.html#cb598-15"></a><span class="co">#&gt;                    Autre </span></span>
<span id="cb598-16"><a href="14-fonctions.html#cb598-16"></a><span class="co">#&gt;                      2.9</span></span></code></pre></div>
</div>
<div id="effets-de-bord-et-affichage-de-messages" class="section level3">
<h3><span class="header-section-number">14.1.3</span> Effets de bord et affichage de messages</h3>
<p>Parfois une fonction n’a pas pour objectif de renvoyer un résultat mais d’accomplir une action, comme générer un graphique, afficher un message, enregistrer un fichier… Dans ce cas la fonction peut ne pas inclure d’instruction <code>return()</code>.</p>
<div class="rmdnote">
<p>
Les actions “visibles” dans notre session R accomplies par une fonction en-dehors du résultat renvoyé sont appelés des <em>effets de bord</em>.
</p>
</div>
<p>Par exemple la fonction suivante prend en argument un vecteur et génère un diagramme en barres du tri à plat de cette variable (en modifiant un peu la présentation au passage).</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="14-fonctions.html#cb599-1"></a>my_barplot &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb599-2"><a href="14-fonctions.html#cb599-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(var)</span>
<span id="cb599-3"><a href="14-fonctions.html#cb599-3"></a>  <span class="kw">barplot</span>(tri, <span class="dt">col =</span> <span class="st">&quot;skyblue&quot;</span>, <span class="dt">border =</span> <span class="ot">NA</span>)</span>
<span id="cb599-4"><a href="14-fonctions.html#cb599-4"></a>}</span>
<span id="cb599-5"><a href="14-fonctions.html#cb599-5"></a></span>
<span id="cb599-6"><a href="14-fonctions.html#cb599-6"></a><span class="kw">my_barplot</span>(hdv2003<span class="op">$</span>clso)</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-621-1.svg" width="672" /></p>
<p>Un autre effet de bord très courant consiste à afficher des informations dans la console. Pour cela on peut utiliser <code>print</code>, qui affiche de manière aussi lisible que possible l’objet qu’on lui passe en argument :</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="14-fonctions.html#cb600-1"></a>indicateurs &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb600-2"><a href="14-fonctions.html#cb600-2"></a>  <span class="kw">print</span>(<span class="kw">mean</span>(v))</span>
<span id="cb600-3"><a href="14-fonctions.html#cb600-3"></a>  <span class="kw">print</span>(<span class="kw">sd</span>(v))</span>
<span id="cb600-4"><a href="14-fonctions.html#cb600-4"></a>}</span>
<span id="cb600-5"><a href="14-fonctions.html#cb600-5"></a></span>
<span id="cb600-6"><a href="14-fonctions.html#cb600-6"></a><span class="kw">indicateurs</span>(hdv2003<span class="op">$</span>age)</span>
<span id="cb600-7"><a href="14-fonctions.html#cb600-7"></a><span class="co">#&gt; [1] 48.157</span></span>
<span id="cb600-8"><a href="14-fonctions.html#cb600-8"></a><span class="co">#&gt; [1] 16.94181</span></span></code></pre></div>
<p>Quand on souhaite seulement afficher une chaîne de caractère, on peut utiliser <code>cat()</code> qui fournit une sortie plus lisible que <code>print</code> :</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="14-fonctions.html#cb601-1"></a>hello &lt;-<span class="st"> </span><span class="cf">function</span>(nom) {</span>
<span id="cb601-2"><a href="14-fonctions.html#cb601-2"></a>  <span class="kw">cat</span>(<span class="st">&quot;Bonjour,&quot;</span>, nom, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb601-3"><a href="14-fonctions.html#cb601-3"></a>}</span>
<span id="cb601-4"><a href="14-fonctions.html#cb601-4"></a></span>
<span id="cb601-5"><a href="14-fonctions.html#cb601-5"></a><span class="kw">hello</span>(<span class="st">&quot;Pierre-Edmond&quot;</span>)</span>
<span id="cb601-6"><a href="14-fonctions.html#cb601-6"></a><span class="co">#&gt; Bonjour, Pierre-Edmond !</span></span></code></pre></div>
<p>Enfin, on peut aussi utiliser <code>message()</code> qui, comme son nom l’indique, affiche un message dans la console, avec une mise en forme spécifique. En général on l’utilise plutôt pour afficher des informations relatives au déroulement de la fonction.</p>
<p>Dans l’exemple suivant, on utilise la fonction <code>runif()</code> pour générer aléatoirement <code>n</code> nombres entre 0 et 1 et on affiche avec <code>cat()</code> la valeur du plus petit nombre généré. Comme l’exécution du <code>runif()</code> peut prendre du temps si <code>n</code> est grand, on affiche un message avec <code>message()</code> pour prévenir l’utilisateur.</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="14-fonctions.html#cb602-1"></a>min_alea &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb602-2"><a href="14-fonctions.html#cb602-2"></a>  <span class="kw">message</span>(<span class="st">&quot;Génération de &quot;</span>, n, <span class="st">&quot; nombres aléatoires...&quot;</span>)</span>
<span id="cb602-3"><a href="14-fonctions.html#cb602-3"></a>  v &lt;-<span class="st"> </span><span class="kw">runif</span>(n)</span>
<span id="cb602-4"><a href="14-fonctions.html#cb602-4"></a>  <span class="kw">cat</span>(<span class="st">&quot;Le plus petit nombre généré vaut&quot;</span>, <span class="kw">min</span>(v))</span>
<span id="cb602-5"><a href="14-fonctions.html#cb602-5"></a>}</span>
<span id="cb602-6"><a href="14-fonctions.html#cb602-6"></a></span>
<span id="cb602-7"><a href="14-fonctions.html#cb602-7"></a><span class="kw">min_alea</span>(<span class="dv">50000</span>)</span>
<span id="cb602-8"><a href="14-fonctions.html#cb602-8"></a><span class="co">#&gt; Génération de 50000 nombres aléatoires...</span></span>
<span id="cb602-9"><a href="14-fonctions.html#cb602-9"></a><span class="co">#&gt; Le plus petit nombre généré vaut 0.00001055235</span></span></code></pre></div>
</div>
<div id="utilité-des-fonctions" class="section level3">
<h3><span class="header-section-number">14.1.4</span> Utilité des fonctions</h3>
<p>On peut se demander dans quels cas il est utile de créer une fonction.</p>
<p>Une règle courante considère que dès qu’on a répété le même code plus de deux fois, il est préférable d’en faire une fonction. Celles-ci ont en effet comme avantage d’éviter la duplication du code.</p>
<p>Imaginons que nous avons récupéré un jeu de données avec toute une série de variables ayant les modalités <code>"1"</code> et <code>"2"</code> qui correspondent aux réponses <code>"Oui"</code> et <code>"Non"</code> à des questions. On crée un <em>data frame</em> fictif comportant quatre variables de ce type :</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="14-fonctions.html#cb603-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb603-2"><a href="14-fonctions.html#cb603-2"></a>  <span class="dt">q1 =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>),</span>
<span id="cb603-3"><a href="14-fonctions.html#cb603-3"></a>  <span class="dt">q2 =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>),</span>
<span id="cb603-4"><a href="14-fonctions.html#cb603-4"></a>  <span class="dt">q3 =</span> <span class="kw">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;1&quot;</span>),</span>
<span id="cb603-5"><a href="14-fonctions.html#cb603-5"></a>  <span class="dt">q4 =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;1&quot;</span>)</span>
<span id="cb603-6"><a href="14-fonctions.html#cb603-6"></a>)</span>
<span id="cb603-7"><a href="14-fonctions.html#cb603-7"></a></span>
<span id="cb603-8"><a href="14-fonctions.html#cb603-8"></a>df</span>
<span id="cb603-9"><a href="14-fonctions.html#cb603-9"></a><span class="co">#&gt;   q1 q2 q3 q4</span></span>
<span id="cb603-10"><a href="14-fonctions.html#cb603-10"></a><span class="co">#&gt; 1  1  1  2  1</span></span>
<span id="cb603-11"><a href="14-fonctions.html#cb603-11"></a><span class="co">#&gt; 2  1  2  2  2</span></span>
<span id="cb603-12"><a href="14-fonctions.html#cb603-12"></a><span class="co">#&gt; 3  2  2  1  1</span></span>
<span id="cb603-13"><a href="14-fonctions.html#cb603-13"></a><span class="co">#&gt; 4  1  2  1  1</span></span></code></pre></div>
<p>On a vu section <a href="09-recodages.html#recoder-une-variable-qualitative">9.3</a> qu’on peut recoder l’une de ces variables à l’aide de la fonction <code>fct_recode()</code> de l’extension <code>forcats</code> :</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="14-fonctions.html#cb604-1"></a>df<span class="op">$</span>q1 &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(df<span class="op">$</span>q1,</span>
<span id="cb604-2"><a href="14-fonctions.html#cb604-2"></a>  <span class="st">&quot;Oui&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb604-3"><a href="14-fonctions.html#cb604-3"></a>  <span class="st">&quot;Non&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb604-4"><a href="14-fonctions.html#cb604-4"></a>)</span></code></pre></div>
<p>On peut donc être tenté de dupliquer ce code autant de fois qu’on a de questions à recoder :</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="14-fonctions.html#cb605-1"></a>df<span class="op">$</span>q1 &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(df<span class="op">$</span>q1,</span>
<span id="cb605-2"><a href="14-fonctions.html#cb605-2"></a>  <span class="st">&quot;Oui&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb605-3"><a href="14-fonctions.html#cb605-3"></a>  <span class="st">&quot;Non&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb605-4"><a href="14-fonctions.html#cb605-4"></a>)</span>
<span id="cb605-5"><a href="14-fonctions.html#cb605-5"></a>df<span class="op">$</span>q2 &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(df<span class="op">$</span>q2,</span>
<span id="cb605-6"><a href="14-fonctions.html#cb605-6"></a>  <span class="st">&quot;Oui&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb605-7"><a href="14-fonctions.html#cb605-7"></a>  <span class="st">&quot;Non&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb605-8"><a href="14-fonctions.html#cb605-8"></a>)</span>
<span id="cb605-9"><a href="14-fonctions.html#cb605-9"></a>df<span class="op">$</span>q3 &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(df<span class="op">$</span>q3,</span>
<span id="cb605-10"><a href="14-fonctions.html#cb605-10"></a>  <span class="st">&quot;Oui&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb605-11"><a href="14-fonctions.html#cb605-11"></a>  <span class="st">&quot;Non&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb605-12"><a href="14-fonctions.html#cb605-12"></a>)</span>
<span id="cb605-13"><a href="14-fonctions.html#cb605-13"></a>df<span class="op">$</span>q4 &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(df<span class="op">$</span>q4,</span>
<span id="cb605-14"><a href="14-fonctions.html#cb605-14"></a>  <span class="st">&quot;Oui&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb605-15"><a href="14-fonctions.html#cb605-15"></a>  <span class="st">&quot;Non&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb605-16"><a href="14-fonctions.html#cb605-16"></a>)</span></code></pre></div>
<p>Mais il est plus judicieux dans ce cas de créer une fonction pour ce recodage :</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="14-fonctions.html#cb606-1"></a>recode_oui_non &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb606-2"><a href="14-fonctions.html#cb606-2"></a>  var_recodee &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(var,</span>
<span id="cb606-3"><a href="14-fonctions.html#cb606-3"></a>    <span class="st">&quot;Oui&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb606-4"><a href="14-fonctions.html#cb606-4"></a>    <span class="st">&quot;Non&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb606-5"><a href="14-fonctions.html#cb606-5"></a>  )</span>
<span id="cb606-6"><a href="14-fonctions.html#cb606-6"></a>  <span class="kw">return</span>(var_recodee)</span>
<span id="cb606-7"><a href="14-fonctions.html#cb606-7"></a>}</span></code></pre></div>
<p>En effet, il est alors très simple d’appliquer ce recodage à plusieurs variables :</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="14-fonctions.html#cb607-1"></a>df<span class="op">$</span>q1 &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(df<span class="op">$</span>q1)</span>
<span id="cb607-2"><a href="14-fonctions.html#cb607-2"></a>df<span class="op">$</span>q2 &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(df<span class="op">$</span>q2)</span>
<span id="cb607-3"><a href="14-fonctions.html#cb607-3"></a>df<span class="op">$</span>q3 &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(df<span class="op">$</span>q3)</span>
<span id="cb607-4"><a href="14-fonctions.html#cb607-4"></a>df<span class="op">$</span>q4 &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(df<span class="op">$</span>q4)</span></code></pre></div>
<p>Autre avantage, si on réalise qu’on a commis une erreur et qu’en fait le code <code>"1"</code> correspondait à <code>"Non"</code> et le code <code>"2"</code> à <code>"Oui"</code>, on n’a pas besoin de modifier tous les endroits où on a copié/collé notre recodage : on a juste à corriger la définition de la fonction.</p>
<p>Les avantages de procéder ainsi sont donc multiples :</p>
<ul>
<li>créer une fonction évite la répétition du code et le rend moins long et plus lisible, surtout si on donne à notre fonction un nom explicite permettant de comprendre facilement ce qu’elle fait.</li>
<li>créer une fonction évite les erreurs de copier/coller du code.</li>
<li>une fonction permet de mettre à jour plus facilement son code : si on se rend compte d’une erreur ou si on souhaite améliorer son fonctionnement, on n’a qu’un seul endroit à modifier.</li>
<li>enfin, créer des fonctions permet potentiellement de rendre son code réutilisable d’un script à l’autre ou même d’un projet à l’autre. Voire, à terme, de les regrouper dans un <em>package</em> pour soi-même ou pour diffusion à d’autres utilisateurs et utilisatrices de R.</li>
</ul>
</div>
</div>
<div id="arguments-et-résultat-dune-fonction" class="section level2">
<h2><span class="header-section-number">14.2</span> Arguments et résultat d’une fonction</h2>
<div id="définition-des-arguments" class="section level3">
<h3><span class="header-section-number">14.2.1</span> Définition des arguments</h3>
<p>Les arguments (ou paramètres) d’une fonction sont ce qu’on lui donne “en entrée”, et qui vont soit lui fournir des données, soit modifier son comportement. La liste des arguments acceptés par une fonction est indiquée entre les parenthèses de l’appel de <code>function()</code> :</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="14-fonctions.html#cb608-1"></a>ma_fonction &lt;-<span class="st"> </span><span class="cf">function</span>(arg1, arg2, arg3) {</span>
<span id="cb608-2"><a href="14-fonctions.html#cb608-2"></a>  <span class="kw">print</span>(arg1)</span>
<span id="cb608-3"><a href="14-fonctions.html#cb608-3"></a>  <span class="kw">print</span>(arg2)</span>
<span id="cb608-4"><a href="14-fonctions.html#cb608-4"></a>  <span class="kw">print</span>(arg3)</span>
<span id="cb608-5"><a href="14-fonctions.html#cb608-5"></a>}</span></code></pre></div>
<div class="rmdnote">
<p>
Une fonction peut aussi ne pas accepter d’arguments, dans ce cas on la définit juste avec <code>function()</code>.
</p>
</div>
<p>Lors de l’appel de la fonction, on peut lui passer les arguments <em>par position</em> :</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="14-fonctions.html#cb609-1"></a><span class="kw">ma_fonction</span>(x, <span class="dv">12</span>, <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Dans ce cas, <code>arg1</code> vaudra <code>x</code>, <code>arg2</code> vaudra <code>12</code> et <code>arg3</code> vaudra <code>TRUE</code>.</p>
<p>On peut aussi passer les arguments <em>par nom</em> :</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="14-fonctions.html#cb610-1"></a><span class="kw">ma_fonction</span>(<span class="dt">arg1 =</span> x, <span class="dt">arg2 =</span> <span class="dv">12</span>, <span class="dt">arg3 =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Quand on passe les arguments par nom, on peut les indiquer dans l’ordre que l’on souhaite :</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="14-fonctions.html#cb611-1"></a><span class="kw">ma_fonction</span>(<span class="dt">arg1 =</span> x, <span class="dt">arg3 =</span> <span class="ot">TRUE</span>, <span class="dt">arg2 =</span> <span class="dv">12</span>)</span></code></pre></div>
<p>Et on peut évidemment mélanger passage par position et passage par nom :</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="14-fonctions.html#cb612-1"></a><span class="kw">ma_fonction</span>(x, <span class="dv">12</span>, <span class="dt">arg3 =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Le plus souvent, les premiers arguments acceptés par une fonction sont les données sur lesquelles elle va travailler, tandis que les arguments suivants sont des paramètres qui vont modifier son comportement. Par exemple, <code>median</code> accepte comme premier argument <code>x</code>, un vecteur, puis un argument <code>na.rm</code> qui va changer sa manière de calculer la médiane des valeurs de <code>x</code>.</p>
<div class="rmdnote">
<p>
En général on appelle la fonction en passant les paramètres correspondant aux données par position, et les autres en les nommant. C’est ainsi qu’on ne fait ni <code>median(x = tailles, na.rm = TRUE)</code> ni <code>median(tailles, TRUE)</code>, mais plutôt <code>median(tailles, na.rm = TRUE)</code>.
</p>
<p>
En ce qui concerne le nom des arguments, en général ceux correspondant aux données transmises à une fonction peuvent avoir des noms relativement génériques (<code>x</code>, <code>y</code>, <code>v</code> pour un vecteur, <code>data</code> ou <code>df</code> pour un data.frame…). Les autres doivent par contre avoir des noms à la fois courts et explicites : par exemple plutôt <code>decimales</code> que <code>nd</code> ou <code>nombre_de_decimales</code>.
</p>
</div>
</div>
<div id="valeurs-par-défaut" class="section level3">
<h3><span class="header-section-number">14.2.2</span> Valeurs par défaut</h3>
<p>Au moment de la définition de la fonction, on peut indiquer une valeur par défaut qui sera prise par l’argument si la personne qui utilise la fonction n’en fournit pas.</p>
<p>Si on reprend la fonction <code>prop_tab</code> déjà définie plus haut :</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="14-fonctions.html#cb613-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v, decimales, useNA) {</span>
<span id="cb613-2"><a href="14-fonctions.html#cb613-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> useNA)</span>
<span id="cb613-3"><a href="14-fonctions.html#cb613-3"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(v) <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb613-4"><a href="14-fonctions.html#cb613-4"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, decimales)</span>
<span id="cb613-5"><a href="14-fonctions.html#cb613-5"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb613-6"><a href="14-fonctions.html#cb613-6"></a>}</span></code></pre></div>
<p>On peut indiquer une valeur par défaut aux arguments <code>decimales</code> et <code>useNA</code> de la manière suivante :</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="14-fonctions.html#cb614-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v, <span class="dt">decimales =</span> <span class="dv">1</span>, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>) {</span>
<span id="cb614-2"><a href="14-fonctions.html#cb614-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> useNA)</span>
<span id="cb614-3"><a href="14-fonctions.html#cb614-3"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(v) <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb614-4"><a href="14-fonctions.html#cb614-4"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, decimales)</span>
<span id="cb614-5"><a href="14-fonctions.html#cb614-5"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb614-6"><a href="14-fonctions.html#cb614-6"></a>}</span></code></pre></div>
<p>Si on appelle <code>prop_tab</code> en lui passant uniquement le vecteur <code>v</code>, on voit que <code>decimales</code> vaut bien 1 et <code>useNA</code> vaut bien `“ifany”:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="14-fonctions.html#cb615-1"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>qualif)</span>
<span id="cb615-2"><a href="14-fonctions.html#cb615-2"></a><span class="co">#&gt; v</span></span>
<span id="cb615-3"><a href="14-fonctions.html#cb615-3"></a><span class="co">#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien </span></span>
<span id="cb615-4"><a href="14-fonctions.html#cb615-4"></a><span class="co">#&gt;                     10.2                     14.6                      4.3 </span></span>
<span id="cb615-5"><a href="14-fonctions.html#cb615-5"></a><span class="co">#&gt; Profession intermediaire                    Cadre                  Employe </span></span>
<span id="cb615-6"><a href="14-fonctions.html#cb615-6"></a><span class="co">#&gt;                      8.0                     13.0                     29.7 </span></span>
<span id="cb615-7"><a href="14-fonctions.html#cb615-7"></a><span class="co">#&gt;                    Autre                     &lt;NA&gt; </span></span>
<span id="cb615-8"><a href="14-fonctions.html#cb615-8"></a><span class="co">#&gt;                      2.9                     17.3</span></span></code></pre></div>
</div>
<div id="arg-oblig" class="section level3">
<h3><span class="header-section-number">14.2.3</span> Arguments obligatoires et arguments facultatifs</h3>
<p>Si un argument n’a pas de valeur par défaut, il est <em>obligatoire</em> : si l’utilisateur essaye d’appeler la fonction sans définir cet argument, cela génère une erreur.</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="14-fonctions.html#cb616-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v, decimales, useNA) {</span>
<span id="cb616-2"><a href="14-fonctions.html#cb616-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> useNA)</span>
<span id="cb616-3"><a href="14-fonctions.html#cb616-3"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(v) <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb616-4"><a href="14-fonctions.html#cb616-4"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, decimales)</span>
<span id="cb616-5"><a href="14-fonctions.html#cb616-5"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb616-6"><a href="14-fonctions.html#cb616-6"></a>}</span>
<span id="cb616-7"><a href="14-fonctions.html#cb616-7"></a></span>
<span id="cb616-8"><a href="14-fonctions.html#cb616-8"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>sexe)</span>
<span id="cb616-9"><a href="14-fonctions.html#cb616-9"></a><span class="co">#&gt; Error in match.arg(useNA): l&#39;argument &quot;useNA&quot; est manquant, avec aucune valeur par défaut</span></span></code></pre></div>
<div class="rmdnote">
<p>
Pour être tout à fait précis, l’erreur est générée uniquement lorsque l’argument sans valeur par défaut est utilisé dans la fonction.
</p>
</div>
<p>Si à l’inverse un argument a une valeur par défaut, il devient <em>facultatif</em> : on peut appeler la fonction sans le définir.</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="14-fonctions.html#cb617-1"></a>prop_tab &lt;-<span class="st"> </span><span class="cf">function</span>(v, <span class="dt">decimales =</span> <span class="dv">1</span>, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>) {</span>
<span id="cb617-2"><a href="14-fonctions.html#cb617-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(v, <span class="dt">useNA =</span> useNA)</span>
<span id="cb617-3"><a href="14-fonctions.html#cb617-3"></a>  tri &lt;-<span class="st"> </span>tri <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(v) <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb617-4"><a href="14-fonctions.html#cb617-4"></a>  tri &lt;-<span class="st"> </span><span class="kw">round</span>(tri, decimales)</span>
<span id="cb617-5"><a href="14-fonctions.html#cb617-5"></a>  <span class="kw">return</span>(tri)</span>
<span id="cb617-6"><a href="14-fonctions.html#cb617-6"></a>}</span>
<span id="cb617-7"><a href="14-fonctions.html#cb617-7"></a></span>
<span id="cb617-8"><a href="14-fonctions.html#cb617-8"></a><span class="kw">prop_tab</span>(hdv2003<span class="op">$</span>sexe)</span>
<span id="cb617-9"><a href="14-fonctions.html#cb617-9"></a><span class="co">#&gt; v</span></span>
<span id="cb617-10"><a href="14-fonctions.html#cb617-10"></a><span class="co">#&gt; Homme Femme </span></span>
<span id="cb617-11"><a href="14-fonctions.html#cb617-11"></a><span class="co">#&gt;    45    55</span></span></code></pre></div>
<p>Parfois un argument est facultatif mais on n’a pas forcément de valeur par défaut à lui attribuer. Dans ce cas on lui attribue en général par défaut la valeur <code>NULL</code>, et on utilise l’instruction <code>if()</code> dans la fonction pour tester s’il a été défini ou pas. Ce cas de figure est détaillé section <a href="17-if-boucles.html#test-arg">17.2.4</a>.</p>
</div>
<div id="largument-..." class="section level3">
<h3><span class="header-section-number">14.2.4</span> L’argument <code>...</code></h3>
<p>Une fonction peut prendre un argument spécial nommé <code>...</code> :</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="14-fonctions.html#cb618-1"></a>ma_fonction &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">correct =</span> <span class="ot">TRUE</span>, ...) {</span>
<span id="cb618-2"><a href="14-fonctions.html#cb618-2"></a>  </span>
<span id="cb618-3"><a href="14-fonctions.html#cb618-3"></a>}</span></code></pre></div>
<p>Cet argument spécial “capture” tous les arguments présents et qui n’ont pas été définis avec la fonction. Par exemple, si on appelle la fonction précédente avec :</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="14-fonctions.html#cb619-1"></a><span class="kw">ma_fonction</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">correct =</span> <span class="ot">FALSE</span>, <span class="dt">title =</span> <span class="st">&quot;Titre&quot;</span>, <span class="dt">size =</span> <span class="dv">12</span>)</span></code></pre></div>
<p>Alors <code>...</code> contiendra les arguments <code>title</code> et <code>size</code> et leurs valeurs.</p>
<div class="rmdnote">
<p>
Si on veut accéder à la valeur de <code>size</code> dans <code>…</code>, on utilise <code>list(…)$size</code>.
</p>
</div>
<p>En général <code>...</code> est utilisé pour passer ces arguments à d’autres fonctions. Reprenons notre fonction <code>my_barplot</code> définie précédemment :</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb620-1"><a href="14-fonctions.html#cb620-1"></a>my_barplot &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb620-2"><a href="14-fonctions.html#cb620-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(var)</span>
<span id="cb620-3"><a href="14-fonctions.html#cb620-3"></a>  <span class="kw">barplot</span>(tri, <span class="dt">col =</span> <span class="st">&quot;skyblue&quot;</span>, <span class="dt">border =</span> <span class="ot">NA</span>)</span>
<span id="cb620-4"><a href="14-fonctions.html#cb620-4"></a>}</span></code></pre></div>
<p>On pourrait permettre de personnaliser les couleurs des barres et de leurs bordures en ajoutant des arguments supplémentaires :</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="14-fonctions.html#cb621-1"></a>my_barplot &lt;-<span class="st"> </span><span class="cf">function</span>(var, <span class="dt">col =</span> <span class="st">&quot;skyblue&quot;</span>, <span class="dt">border =</span> <span class="ot">NA</span>) {</span>
<span id="cb621-2"><a href="14-fonctions.html#cb621-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(var)</span>
<span id="cb621-3"><a href="14-fonctions.html#cb621-3"></a>  <span class="kw">barplot</span>(tri, <span class="dt">col =</span> col, <span class="dt">border =</span> border)</span>
<span id="cb621-4"><a href="14-fonctions.html#cb621-4"></a>}</span></code></pre></div>
<p>Mais si on veut aussi permettre de personnaliser d’autres arguments de <code>barplot</code> comme <code>main</code>, <code>xlab</code>, <code>xlim</code>… il faudrait rajouter autant d’arguments supplémentaires à notre fonction, ce qui deviendrait vite ingérable. Une solution est de “capturer” tous les arguments supplémentaires avec <code>...</code> et de les passer directement à <code>barplot</code>, de cette manière :</p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="14-fonctions.html#cb622-1"></a>my_barplot &lt;-<span class="st"> </span><span class="cf">function</span>(var, ...) {</span>
<span id="cb622-2"><a href="14-fonctions.html#cb622-2"></a>  tri &lt;-<span class="st"> </span><span class="kw">table</span>(var)</span>
<span id="cb622-3"><a href="14-fonctions.html#cb622-3"></a>  tri &lt;-<span class="st"> </span><span class="kw">sort</span>(tri)</span>
<span id="cb622-4"><a href="14-fonctions.html#cb622-4"></a>  <span class="kw">barplot</span>(tri, ...)</span>
<span id="cb622-5"><a href="14-fonctions.html#cb622-5"></a>}</span></code></pre></div>
<p>Ce qui permet d’appeler notre fonction avec tous les arguments possibles de <code>barplot</code>, par exemple :</p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="14-fonctions.html#cb623-1"></a><span class="kw">my_barplot</span>(</span>
<span id="cb623-2"><a href="14-fonctions.html#cb623-2"></a>  hdv2003<span class="op">$</span>clso,</span>
<span id="cb623-3"><a href="14-fonctions.html#cb623-3"></a>  <span class="dt">col =</span> <span class="st">&quot;yellowgreen&quot;</span>,</span>
<span id="cb623-4"><a href="14-fonctions.html#cb623-4"></a>  <span class="dt">main =</span> <span class="st">&quot;Croyez-vous en l&#39;existence des classes sociales ?&quot;</span></span>
<span id="cb623-5"><a href="14-fonctions.html#cb623-5"></a>)</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-649-1.svg" width="672" /></p>
</div>
<div id="resfunc" class="section level3">
<h3><span class="header-section-number">14.2.5</span> Résultat d’une fonction</h3>
<p>On l’a vu, l’objectif d’une fonction est en général de renvoyer un résultat. Lors de la définition d’une fonction, le résultat peut être retourné en utilisant la fonction <code>return()</code> :</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="14-fonctions.html#cb624-1"></a>ajoute2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb624-2"><a href="14-fonctions.html#cb624-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb624-3"><a href="14-fonctions.html#cb624-3"></a>  <span class="kw">return</span>(res)</span>
<span id="cb624-4"><a href="14-fonctions.html#cb624-4"></a>}</span></code></pre></div>
<p>En réalité, l’utilisation de <code>return()</code> n’est pas obligatoire : une fonction retourne automatiquement le résultat de la dernière instruction qu’elle exécute. On aurait donc pu écrire :</p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="14-fonctions.html#cb625-1"></a>ajoute2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb625-2"><a href="14-fonctions.html#cb625-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb625-3"><a href="14-fonctions.html#cb625-3"></a>  res</span>
<span id="cb625-4"><a href="14-fonctions.html#cb625-4"></a>}</span></code></pre></div>
<p>Ou même, encore mieux et plus lisible :</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="14-fonctions.html#cb626-1"></a>ajoute2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb626-2"><a href="14-fonctions.html#cb626-2"></a>  x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb626-3"><a href="14-fonctions.html#cb626-3"></a>}</span></code></pre></div>
<div class="rmdimportant">
<p>
Dans la suite de ce document on utilisera, lorsque c’est possible, la syntaxe la plus “compacte” qui omet le <code>return()</code>.
</p>
</div>
<p>Un point important à noter : lorsque R rencontre une instruction <code>return()</code> dans une fonction, il interrompt immédiatement son exécution et “sort” de la fonction en renvoyant le résultat.</p>
<p>Ainsi, dans la fonction suivante :</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="14-fonctions.html#cb627-1"></a>ajoute2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb627-2"><a href="14-fonctions.html#cb627-2"></a>  <span class="kw">return</span>(x <span class="op">+</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb627-3"><a href="14-fonctions.html#cb627-3"></a>  x <span class="op">*</span><span class="st"> </span><span class="dv">5</span></span>
<span id="cb627-4"><a href="14-fonctions.html#cb627-4"></a>}</span></code></pre></div>
<p>L’instruction <code>x * 5</code> ne sera jamais exécutée car R “sort” de la fonction dès qu’il évalue le <code>return()</code> de la ligne précédente.</p>
<p>Conséquence de ce comportement, on ne peut pas utiliser plusieurs <code>return()</code> pour renvoyer plusieurs résultats depuis une seule fonction. Est-ce à dire qu’une fonction R ne pourrait renvoyer qu’une seule valeur ? Non, car si elle ne peut retourner qu’un seul objet, celui-ci peut être complexe et comporter plusieurs valeurs.</p>
<p>Par exemple, on a vu précédemment une fonction rudimentaire nommée <code>indicateurs()</code> qui affiche la moyenne et l’écart-type d’un vecteur numérique.</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="14-fonctions.html#cb628-1"></a>indicateurs &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb628-2"><a href="14-fonctions.html#cb628-2"></a>  <span class="kw">print</span>(<span class="kw">mean</span>(v))</span>
<span id="cb628-3"><a href="14-fonctions.html#cb628-3"></a>  <span class="kw">print</span>(<span class="kw">sd</span>(v))</span>
<span id="cb628-4"><a href="14-fonctions.html#cb628-4"></a>}</span></code></pre></div>
<p>Plutôt que de se contenter de les afficher dans la console, on pourrait vouloir retourner ces deux valeurs pour pouvoir les réutiliser par la suite. Pour cela, une première solution pourrait être de renvoyer un vecteur comportant ces deux valeurs.</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="14-fonctions.html#cb629-1"></a>indicateurs &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb629-2"><a href="14-fonctions.html#cb629-2"></a>  moyenne &lt;-<span class="st"> </span><span class="kw">mean</span>(v)</span>
<span id="cb629-3"><a href="14-fonctions.html#cb629-3"></a>  ecart_type &lt;-<span class="st"> </span><span class="kw">sd</span>(v)</span>
<span id="cb629-4"><a href="14-fonctions.html#cb629-4"></a>  <span class="kw">c</span>(moyenne, ecart_type)</span>
<span id="cb629-5"><a href="14-fonctions.html#cb629-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb630"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb630-1"><a href="14-fonctions.html#cb630-1"></a><span class="kw">indicateurs</span>(hdv2003<span class="op">$</span>age)</span>
<span id="cb630-2"><a href="14-fonctions.html#cb630-2"></a><span class="co">#&gt; [1] 48.15700 16.94181</span></span></code></pre></div>
<p>Mais dans ce cas de figure il est recommandé de retourner plutôt une liste nommée<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>, de cette manière :</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="14-fonctions.html#cb631-1"></a>indicateurs &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb631-2"><a href="14-fonctions.html#cb631-2"></a>  moyenne &lt;-<span class="st"> </span><span class="kw">mean</span>(v)</span>
<span id="cb631-3"><a href="14-fonctions.html#cb631-3"></a>  ecart_type &lt;-<span class="st"> </span><span class="kw">sd</span>(v)</span>
<span id="cb631-4"><a href="14-fonctions.html#cb631-4"></a>  <span class="kw">list</span>(<span class="dt">moyenne =</span> moyenne, <span class="dt">ecart_type =</span> ecart_type)</span>
<span id="cb631-5"><a href="14-fonctions.html#cb631-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="14-fonctions.html#cb632-1"></a><span class="kw">indicateurs</span>(hdv2003<span class="op">$</span>age)</span>
<span id="cb632-2"><a href="14-fonctions.html#cb632-2"></a><span class="co">#&gt; $moyenne</span></span>
<span id="cb632-3"><a href="14-fonctions.html#cb632-3"></a><span class="co">#&gt; [1] 48.157</span></span>
<span id="cb632-4"><a href="14-fonctions.html#cb632-4"></a><span class="co">#&gt; </span></span>
<span id="cb632-5"><a href="14-fonctions.html#cb632-5"></a><span class="co">#&gt; $ecart_type</span></span>
<span id="cb632-6"><a href="14-fonctions.html#cb632-6"></a><span class="co">#&gt; [1] 16.94181</span></span></code></pre></div>
<p>On a du coup un affichage un peu plus lisible, et on peut accéder aux éléments du résultat via leur nom :</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="14-fonctions.html#cb633-1"></a>res &lt;-<span class="st"> </span><span class="kw">indicateurs</span>(hdv2003<span class="op">$</span>age)</span>
<span id="cb633-2"><a href="14-fonctions.html#cb633-2"></a>res<span class="op">$</span>moyenne</span>
<span id="cb633-3"><a href="14-fonctions.html#cb633-3"></a><span class="co">#&gt; [1] 48.157</span></span></code></pre></div>
</div>
</div>
<div id="portée-des-variables" class="section level2">
<h2><span class="header-section-number">14.3</span> Portée des variables</h2>
<p>Un point délicat mais important quand on commence à créer ses propres fonctions concerne la <em>portée des variables</em>, c’est-à-dire la façon dont les objets créés dans une fonction et ceux existant en-dehors “cohabitent”. C’est une question assez complexe, mais seules quatre grandes règles sont réellement utiles au départ.</p>
<div id="une-fonction-peut-accéder-à-un-objet-extérieur" class="section level3">
<h3><span class="header-section-number">14.3.1</span> Une fonction peut accéder à un objet extérieur</h3>
<p>Si on fait appel dans une fonction à un objet qui n’existe pas et n’a pas été passé comme argument, on obtient une erreur.</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="14-fonctions.html#cb634-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb634-2"><a href="14-fonctions.html#cb634-2"></a>  obj</span>
<span id="cb634-3"><a href="14-fonctions.html#cb634-3"></a>}</span>
<span id="cb634-4"><a href="14-fonctions.html#cb634-4"></a></span>
<span id="cb634-5"><a href="14-fonctions.html#cb634-5"></a><span class="kw">f</span>()</span>
<span id="cb634-6"><a href="14-fonctions.html#cb634-6"></a><span class="co">#&gt; Error in f(): objet &#39;obj&#39; introuvable</span></span></code></pre></div>
<p>Si on crée cet objet dans notre fonction avant de l’utiliser, on supprime évidemment l’erreur.</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="14-fonctions.html#cb635-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb635-2"><a href="14-fonctions.html#cb635-2"></a>  obj &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb635-3"><a href="14-fonctions.html#cb635-3"></a>  obj</span>
<span id="cb635-4"><a href="14-fonctions.html#cb635-4"></a>}</span>
<span id="cb635-5"><a href="14-fonctions.html#cb635-5"></a></span>
<span id="cb635-6"><a href="14-fonctions.html#cb635-6"></a><span class="kw">f</span>()</span>
<span id="cb635-7"><a href="14-fonctions.html#cb635-7"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>Mais on peut aussi accéder depuis une fonction à un objet qui existe dans notre environnement au moment où la fonction a été appelée.</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="14-fonctions.html#cb636-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb636-2"><a href="14-fonctions.html#cb636-2"></a>  obj</span>
<span id="cb636-3"><a href="14-fonctions.html#cb636-3"></a>}</span>
<span id="cb636-4"><a href="14-fonctions.html#cb636-4"></a></span>
<span id="cb636-5"><a href="14-fonctions.html#cb636-5"></a>obj &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb636-6"><a href="14-fonctions.html#cb636-6"></a><span class="kw">f</span>()</span>
<span id="cb636-7"><a href="14-fonctions.html#cb636-7"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>Dans cet exemple, au moment de l’exécution de <code>f()</code>, comme <code>obj</code> n’existe pas au sein de la fonction (il n’a pas été passé comme argument ni défini dans le corps de la fonction), R va chercher dans l’environnement global, celui depuis lequel la fonction a été appelée. Comme il trouve un objet <code>obj</code>, il utilise sa valeur au moment de l’appel de la fonction.</p>
</div>
<div id="les-arguments-et-les-objets-créés-dans-la-fonction-sont-prioritaires" class="section level3">
<h3><span class="header-section-number">14.3.2</span> Les arguments et les objets créés dans la fonction sont prioritaires</h3>
<p>Que se passe-t-il si un objet avec le même nom existe à la fois dans la fonction et dans notre environnement global ? Dans ce cas <em>R privilégie l’objet créé dans la fonction</em>.</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="14-fonctions.html#cb637-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb637-2"><a href="14-fonctions.html#cb637-2"></a>  obj &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb637-3"><a href="14-fonctions.html#cb637-3"></a>  obj</span>
<span id="cb637-4"><a href="14-fonctions.html#cb637-4"></a>}</span>
<span id="cb637-5"><a href="14-fonctions.html#cb637-5"></a></span>
<span id="cb637-6"><a href="14-fonctions.html#cb637-6"></a>obj &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb637-7"><a href="14-fonctions.html#cb637-7"></a><span class="kw">f</span>()</span>
<span id="cb637-8"><a href="14-fonctions.html#cb637-8"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>Cette règle s’applique également pour les arguments passés à la fonction.</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="14-fonctions.html#cb638-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(obj) {</span>
<span id="cb638-2"><a href="14-fonctions.html#cb638-2"></a>  obj</span>
<span id="cb638-3"><a href="14-fonctions.html#cb638-3"></a>}</span>
<span id="cb638-4"><a href="14-fonctions.html#cb638-4"></a></span>
<span id="cb638-5"><a href="14-fonctions.html#cb638-5"></a>obj &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb638-6"><a href="14-fonctions.html#cb638-6"></a><span class="kw">f</span>(<span class="dv">20</span>)</span>
<span id="cb638-7"><a href="14-fonctions.html#cb638-7"></a><span class="co">#&gt; [1] 20</span></span></code></pre></div>
</div>
<div id="un-objet-créé-dans-une-fonction-nexiste-que-dans-cette-fonction" class="section level3">
<h3><span class="header-section-number">14.3.3</span> Un objet créé dans une fonction n’existe que dans cette fonction</h3>
<p>Autre règle importante : un objet créé à l’intérieur d’une fonction n’est pas accessible à l’extérieur de celle-ci.</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="14-fonctions.html#cb639-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb639-2"><a href="14-fonctions.html#cb639-2"></a>  nouvel_objet &lt;-<span class="st"> </span><span class="dv">15</span></span>
<span id="cb639-3"><a href="14-fonctions.html#cb639-3"></a>  nouvel_objet</span>
<span id="cb639-4"><a href="14-fonctions.html#cb639-4"></a>}</span>
<span id="cb639-5"><a href="14-fonctions.html#cb639-5"></a></span>
<span id="cb639-6"><a href="14-fonctions.html#cb639-6"></a><span class="kw">f</span>()</span>
<span id="cb639-7"><a href="14-fonctions.html#cb639-7"></a><span class="co">#&gt; [1] 15</span></span>
<span id="cb639-8"><a href="14-fonctions.html#cb639-8"></a>nouvel_objet</span>
<span id="cb639-9"><a href="14-fonctions.html#cb639-9"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): objet &#39;nouvel_objet&#39; introuvable</span></span></code></pre></div>
<p>Ici, <code>nouvel_objet</code> existe tant qu’on est dans la fonction, mais il est détruit dès qu’on en sort et donc inaccessible dans notre environnement global.</p>
<div class="rmdimportant">
<p>
Les objets créés dans notre session et qui existent dans notre environnement (tel que visible dans l’onglet <em>Environment</em> de RStudio) sont appelés des <strong>objets globaux</strong> : ils existent et sont accessibles pour les fonctions appelées depuis cet environnement. Les objets créés lors de l’exécution d’une fonction sont à l’inverse des <strong>objets locaux</strong> : ils n’existent qu’à l’intérieur de la fonction et pour la durée de son exécution. Si deux objets du même nom coexistent, l’objet local est prioritaire par rapport à l’objet global.
</p>
</div>
</div>
<div id="on-ne-peut-pas-modifier-un-objet-global-dans-une-fonction" class="section level3">
<h3><span class="header-section-number">14.3.4</span> On ne peut pas modifier un objet global dans une fonction</h3>
<p>Une conséquence importante de la troisième règle est qu’il n’est pas possible de modifier un objet de notre environnement global depuis une fonction<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a> :</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="14-fonctions.html#cb640-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb640-2"><a href="14-fonctions.html#cb640-2"></a>  obj &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb640-3"><a href="14-fonctions.html#cb640-3"></a>  <span class="kw">message</span>(<span class="st">&quot;Valeur dans la fonction : &quot;</span>, obj)</span>
<span id="cb640-4"><a href="14-fonctions.html#cb640-4"></a>}</span>
<span id="cb640-5"><a href="14-fonctions.html#cb640-5"></a></span>
<span id="cb640-6"><a href="14-fonctions.html#cb640-6"></a>obj &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb640-7"><a href="14-fonctions.html#cb640-7"></a><span class="kw">f</span>()</span>
<span id="cb640-8"><a href="14-fonctions.html#cb640-8"></a><span class="co">#&gt; Valeur dans la fonction : 10</span></span>
<span id="cb640-9"><a href="14-fonctions.html#cb640-9"></a>obj</span>
<span id="cb640-10"><a href="14-fonctions.html#cb640-10"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>Pour comprendre le résultat obtenu, on peut essayer de décomposer pas à pas :</p>
<ol style="list-style-type: decimal">
<li>Au moment du <code>obj &lt;- 3</code>, R crée un objet global nommé <code>obj</code> avec la valeur 3.</li>
<li>Quand on exécute <code>f()</code> et qu’on rencontre l’instruction <code>obj &lt;- 10</code>, R crée un nouvel objet nommé <code>obj</code>, local celui-ci, avec la valeur 10. À ce moment-là on a donc deux objets distincts portant le même nom, l’un global avec la valeur 3, l’autre local avec la valeur 10. Comme l’objet local est prioritaire, c’est lui qui est utilisé lors de l’affichage du message.</li>
<li>Lorsqu’on sort de <code>f()</code>, l’objet local contenant la valeur 10 est détruit. Il ne reste plus que l’objet global avec la valeur 3. C’est donc lui qui est affiché lors du dernier appel à <code>obj</code>.</li>
</ol>
<p>Pour les mêmes raisons, dans l’exemple suivant, le recodage appliqué à la variable <code>taille</code> du tableau <code>df</code> passé en argument à la fonction <code>recode_taille()</code> n’est pas conservé en-dehors de la fonction. Ce recodage n’existe que dans un tableau <code>d</code> local à la fonction, et détruit dès qu’on en est sorti.</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="14-fonctions.html#cb641-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">taille =</span> <span class="kw">c</span>(<span class="dv">155</span>, <span class="dv">182</span>), <span class="dt">poids =</span> <span class="kw">c</span>(<span class="dv">65</span>, <span class="dv">71</span>))</span>
<span id="cb641-2"><a href="14-fonctions.html#cb641-2"></a></span>
<span id="cb641-3"><a href="14-fonctions.html#cb641-3"></a>recode_taille &lt;-<span class="st"> </span><span class="cf">function</span>(d) {</span>
<span id="cb641-4"><a href="14-fonctions.html#cb641-4"></a>  d<span class="op">$</span>taille &lt;-<span class="st"> </span>d<span class="op">$</span>taille <span class="op">/</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb641-5"><a href="14-fonctions.html#cb641-5"></a>}</span>
<span id="cb641-6"><a href="14-fonctions.html#cb641-6"></a></span>
<span id="cb641-7"><a href="14-fonctions.html#cb641-7"></a><span class="kw">recode_taille</span>(df)</span>
<span id="cb641-8"><a href="14-fonctions.html#cb641-8"></a></span>
<span id="cb641-9"><a href="14-fonctions.html#cb641-9"></a><span class="co"># Le recodage n&#39;est pas conservé</span></span>
<span id="cb641-10"><a href="14-fonctions.html#cb641-10"></a>df</span>
<span id="cb641-11"><a href="14-fonctions.html#cb641-11"></a><span class="co">#&gt;   taille poids</span></span>
<span id="cb641-12"><a href="14-fonctions.html#cb641-12"></a><span class="co">#&gt; 1    155    65</span></span>
<span id="cb641-13"><a href="14-fonctions.html#cb641-13"></a><span class="co">#&gt; 2    182    71</span></span></code></pre></div>
<p>Si on souhaite modifier un objet global, on doit le passer comme argument en entrée de notre fonction, et le renvoyer comme résultat en sortie. Pour que le recodage précédent soit bien répercuté dans notre tableau <code>df</code>, on doit faire :</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="14-fonctions.html#cb642-1"></a>recode_taille &lt;-<span class="st"> </span><span class="cf">function</span>(d) {</span>
<span id="cb642-2"><a href="14-fonctions.html#cb642-2"></a>  d<span class="op">$</span>taille &lt;-<span class="st"> </span>d<span class="op">$</span>taille <span class="op">/</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb642-3"><a href="14-fonctions.html#cb642-3"></a>  d</span>
<span id="cb642-4"><a href="14-fonctions.html#cb642-4"></a>}</span>
<span id="cb642-5"><a href="14-fonctions.html#cb642-5"></a></span>
<span id="cb642-6"><a href="14-fonctions.html#cb642-6"></a>df &lt;-<span class="st"> </span><span class="kw">recode_taille</span>(df)</span>
<span id="cb642-7"><a href="14-fonctions.html#cb642-7"></a></span>
<span id="cb642-8"><a href="14-fonctions.html#cb642-8"></a><span class="co"># Le recodage est bien conservé</span></span>
<span id="cb642-9"><a href="14-fonctions.html#cb642-9"></a>df</span>
<span id="cb642-10"><a href="14-fonctions.html#cb642-10"></a><span class="co">#&gt;   taille poids</span></span>
<span id="cb642-11"><a href="14-fonctions.html#cb642-11"></a><span class="co">#&gt; 1   1.55    65</span></span>
<span id="cb642-12"><a href="14-fonctions.html#cb642-12"></a><span class="co">#&gt; 2   1.82    71</span></span></code></pre></div>
</div>
</div>
<div id="les-fonctions-comme-objets" class="section level2">
<h2><span class="header-section-number">14.4</span> Les fonctions comme objets</h2>
<p>Quand on crée une fonction, on la “nomme” en la stockant dans un objet. Cet objet peut être utilisé comme n’importe quel autre objet dans R. On peut ainsi copier une fonction en l’attribuant à un nouvel objet :</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="14-fonctions.html#cb643-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb643-2"><a href="14-fonctions.html#cb643-2"></a>  x <span class="op">+</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb643-3"><a href="14-fonctions.html#cb643-3"></a>}</span>
<span id="cb643-4"><a href="14-fonctions.html#cb643-4"></a></span>
<span id="cb643-5"><a href="14-fonctions.html#cb643-5"></a>g &lt;-<span class="st"> </span>f</span>
<span id="cb643-6"><a href="14-fonctions.html#cb643-6"></a><span class="kw">g</span>(<span class="dv">10</span>)</span>
<span id="cb643-7"><a href="14-fonctions.html#cb643-7"></a><span class="co">#&gt; [1] 12</span></span></code></pre></div>
<p>On a déjà vu à de nombreuses reprises que quand on fournit juste un nom d’objet à R, celui-ci affiche son contenu dans la console. C’est aussi le cas pour les fonctions : dans ce cas c’est le code source de la fonction qui est affiché.</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="14-fonctions.html#cb644-1"></a>f</span>
<span id="cb644-2"><a href="14-fonctions.html#cb644-2"></a><span class="co">#&gt; function(x) {</span></span>
<span id="cb644-3"><a href="14-fonctions.html#cb644-3"></a><span class="co">#&gt;   x + 2</span></span>
<span id="cb644-4"><a href="14-fonctions.html#cb644-4"></a><span class="co">#&gt; }</span></span></code></pre></div>
<div id="passer-des-fonctions-comme-argument" class="section level3">
<h3><span class="header-section-number">14.4.1</span> Passer des fonctions comme argument</h3>
<p>Certaines fonctions sont prévues pour s’appliquer elles-mêmes à des fonctions. Par exemple, <code>formals</code> et <code>body</code> permettent d’afficher respectivement les arguments et le corps d’une fonction passée en argument.</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="14-fonctions.html#cb645-1"></a><span class="kw">formals</span>(f)</span>
<span id="cb645-2"><a href="14-fonctions.html#cb645-2"></a><span class="co">#&gt; $x</span></span></code></pre></div>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="14-fonctions.html#cb646-1"></a><span class="kw">body</span>(f)</span>
<span id="cb646-2"><a href="14-fonctions.html#cb646-2"></a><span class="co">#&gt; {</span></span>
<span id="cb646-3"><a href="14-fonctions.html#cb646-3"></a><span class="co">#&gt;     x + 2</span></span>
<span id="cb646-4"><a href="14-fonctions.html#cb646-4"></a><span class="co">#&gt; }</span></span></code></pre></div>
<p>Il est donc possible de passer une fonction comme argument d’une autre fonction, comme dans <code>body(f)</code>. On a déjà vu un exemple de ce type de fonctionnement avec la fonction <code>tapply</code> dans la section <a href="04-bivarie.html#tapply">4.2.2</a>. Celle-ci prend trois arguments : un vecteur de valeurs, un facteur, et une fonction. Elle applique ensuite la fonction aux valeurs pour chaque niveau du facteur.</p>
<p>Par exemple, si on a un data frame avec une liste de fruits et leur poids :</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="14-fonctions.html#cb647-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb647-2"><a href="14-fonctions.html#cb647-2"></a>  <span class="dt">fruit =</span> <span class="kw">c</span>(<span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Citron&quot;</span>, <span class="st">&quot;Citron&quot;</span>),</span>
<span id="cb647-3"><a href="14-fonctions.html#cb647-3"></a>  <span class="dt">poids =</span> <span class="kw">c</span>(<span class="dv">147</span>, <span class="dv">189</span>, <span class="dv">76</span>, <span class="dv">91</span>)</span>
<span id="cb647-4"><a href="14-fonctions.html#cb647-4"></a>)</span>
<span id="cb647-5"><a href="14-fonctions.html#cb647-5"></a></span>
<span id="cb647-6"><a href="14-fonctions.html#cb647-6"></a>df</span>
<span id="cb647-7"><a href="14-fonctions.html#cb647-7"></a><span class="co">#&gt;    fruit poids</span></span>
<span id="cb647-8"><a href="14-fonctions.html#cb647-8"></a><span class="co">#&gt; 1  Pomme   147</span></span>
<span id="cb647-9"><a href="14-fonctions.html#cb647-9"></a><span class="co">#&gt; 2  Pomme   189</span></span>
<span id="cb647-10"><a href="14-fonctions.html#cb647-10"></a><span class="co">#&gt; 3 Citron    76</span></span>
<span id="cb647-11"><a href="14-fonctions.html#cb647-11"></a><span class="co">#&gt; 4 Citron    91</span></span></code></pre></div>
<p>On peut utiliser <code>tapply</code> pour calculer le poids moyen par type de fruit.</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="14-fonctions.html#cb648-1"></a><span class="kw">tapply</span>(df<span class="op">$</span>poids, df<span class="op">$</span>fruit, mean)</span>
<span id="cb648-2"><a href="14-fonctions.html#cb648-2"></a><span class="co">#&gt; Citron  Pomme </span></span>
<span id="cb648-3"><a href="14-fonctions.html#cb648-3"></a><span class="co">#&gt;   83.5  168.0</span></span></code></pre></div>
<p>Si on souhaite plutôt calculer le poids maximal, il suffit de passer à <code>tapply</code> la fonction <code>max</code> plutôt que la fonction <code>mean</code>.</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="14-fonctions.html#cb649-1"></a><span class="kw">tapply</span>(df<span class="op">$</span>poids, df<span class="op">$</span>fruit, max)</span>
<span id="cb649-2"><a href="14-fonctions.html#cb649-2"></a><span class="co">#&gt; Citron  Pomme </span></span>
<span id="cb649-3"><a href="14-fonctions.html#cb649-3"></a><span class="co">#&gt;     91    189</span></span></code></pre></div>
<p>Cette manière de transmettre une fonction à une autre fonction peut être un peu déroutante de prime abord, mais c’est une mécanique qu’on va retrouver très souvent dans les chapitres suivants.</p>
<div class="rmdimportant">
<p>
Si <code>f</code> est une fonction, il est important de bien faire la différence entre <code>f</code> et <code>f()</code> :
</p>
<ul>
<li>
<code>f</code> est la fonction en elle-même
</li>
<li>
<code>f()</code> est le résultat de la fonction quand on l’exécute sans lui passer d’argument
</li>
</ul>
<p>
Quand on passe une fonction comme argument à une autre fonction, on utilise donc toujours la notation sans les parenthèses.
</p>
</div>
</div>
<div id="fonctions-anonymes" class="section level3">
<h3><span class="header-section-number">14.4.2</span> Fonctions anonymes</h3>
<p>Dans le cas où on souhaite calculer quelque chose pour lequel une fonction n’existe pas déjà, on peut créer une nouvelle fonction :</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb650-1"><a href="14-fonctions.html#cb650-1"></a>poids_moyen_kg &lt;-<span class="st"> </span><span class="cf">function</span>(poids) {</span>
<span id="cb650-2"><a href="14-fonctions.html#cb650-2"></a>  <span class="kw">mean</span>(poids <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>)</span>
<span id="cb650-3"><a href="14-fonctions.html#cb650-3"></a>}</span></code></pre></div>
<p>Et la passer en argument à <code>tapply()</code> :</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="14-fonctions.html#cb651-1"></a><span class="kw">tapply</span>(df<span class="op">$</span>poids, df<span class="op">$</span>fruit, poids_moyen_kg)</span>
<span id="cb651-2"><a href="14-fonctions.html#cb651-2"></a><span class="co">#&gt; Citron  Pomme </span></span>
<span id="cb651-3"><a href="14-fonctions.html#cb651-3"></a><span class="co">#&gt; 0.0835 0.1680</span></span></code></pre></div>
<p>Si on ne souhaite pas réutiliser cette fonction par la suite, on peut aussi définir cette fonction directement comme argument de <code>tapply</code> :</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="14-fonctions.html#cb652-1"></a><span class="kw">tapply</span>(df<span class="op">$</span>poids, df<span class="op">$</span>fruit, <span class="cf">function</span>(poids) {</span>
<span id="cb652-2"><a href="14-fonctions.html#cb652-2"></a>  <span class="kw">mean</span>(poids<span class="op">/</span><span class="dv">1000</span>)</span>
<span id="cb652-3"><a href="14-fonctions.html#cb652-3"></a>})</span>
<span id="cb652-4"><a href="14-fonctions.html#cb652-4"></a><span class="co">#&gt; Citron  Pomme </span></span>
<span id="cb652-5"><a href="14-fonctions.html#cb652-5"></a><span class="co">#&gt; 0.0835 0.1680</span></span></code></pre></div>
<p>Dans ce cas on a créé ce qu’on appelle une <em>fonction anonyme</em>, qui n’a pas de nom (elle n’a pas été stockée dans un objet), et qui n’existe que le temps de l’appel à <code>tapply</code>.</p>
</div>
</div>
<div id="ressources-6" class="section level2">
<h2><span class="header-section-number">14.5</span> Ressources</h2>
<p>L’ouvrage <em>R for Data Science</em> (en anglais), accessible en ligne, contient un chapitre complet d’<a href="http://r4ds.had.co.nz/functions.html">introduction sur les fonctions</a>.</p>
<p>L’ouvrage <em>Advanced R</em> (également en anglais) aborde de manière très approfondie <a href="https://adv-r.hadley.nz/functions.html">les fonctions</a> ainsi que la <a href="https://adv-r.hadley.nz/fp.html">programmation fonctionnelle</a>.</p>
<p>Le manuel officiel <em>Introduction to R</em> (toujours en anglais) contient une partie sur <a href="https://cran.r-project.org/doc/manuals/R-intro.html#Writing-your-own-functions">l’écriture de ses propres fonctions</a>.</p>
</div>
<div id="exercices-7" class="section level2">
<h2><span class="header-section-number">14.6</span> Exercices</h2>
<div id="introduction-et-exemples-1" class="section level3">
<h3><span class="header-section-number">14.6.1</span> Introduction et exemples</h3>
<p><strong>Exercice 1.1</strong></p>
<p>Écrire une fonction nommée <code>perimetre</code> qui prend en entrée un argument nommé <code>r</code> et retourne le périmètre d’un cercle de rayon <code>r</code>, c’est-à-dire <code>2 * pi * r</code> (<code>pi</code> est un objet R qui contient la valeur de <span class="math inline">\(\pi\)</span>).</p>
<p>Vérifier avec l’appel suivant :</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="14-fonctions.html#cb653-1"></a><span class="kw">perimetre</span>(<span class="dv">4</span>)</span>
<span id="cb653-2"><a href="14-fonctions.html#cb653-2"></a><span class="co">#&gt; [1] 25.13274</span></span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="14-fonctions.html#cb654-1"></a>perimetre &lt;-<span class="st"> </span><span class="cf">function</span>(r) {</span>
<span id="cb654-2"><a href="14-fonctions.html#cb654-2"></a>  resultat &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>pi <span class="op">*</span><span class="st"> </span>r</span>
<span id="cb654-3"><a href="14-fonctions.html#cb654-3"></a>  <span class="kw">return</span>(resultat)</span>
<span id="cb654-4"><a href="14-fonctions.html#cb654-4"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.2</strong></p>
<p>Écrire une fonction <code>etendue</code> qui prend en entrée un vecteur numérique et retourne la différence entre la valeur maximale et la valeur minimale de ce vecteur.</p>
<p>Vérifier avec l’appel suivant :</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="14-fonctions.html#cb655-1"></a><span class="kw">etendue</span>(<span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">35</span>, <span class="dv">21</span>, <span class="dv">40</span>))</span>
<span id="cb655-2"><a href="14-fonctions.html#cb655-2"></a><span class="co">#&gt; [1] 22</span></span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="14-fonctions.html#cb656-1"></a>etendue &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb656-2"><a href="14-fonctions.html#cb656-2"></a>  vmax &lt;-<span class="st"> </span><span class="kw">max</span>(v)</span>
<span id="cb656-3"><a href="14-fonctions.html#cb656-3"></a>  vmin &lt;-<span class="st"> </span><span class="kw">min</span>(v)</span>
<span id="cb656-4"><a href="14-fonctions.html#cb656-4"></a>  <span class="kw">return</span>(vmax <span class="op">-</span><span class="st"> </span>vmin)</span>
<span id="cb656-5"><a href="14-fonctions.html#cb656-5"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.3</strong></p>
<p>Écrire une fonction nommée <code>alea</code> qui accepte un argument <code>n</code>, génère un vecteur de <code>n</code> valeurs aléatoires entre 0 et 1 avec la fonction <code>runif(n)</code> et retourne ce vecteur comme résultat.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="14-fonctions.html#cb657-1"></a>alea &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb657-2"><a href="14-fonctions.html#cb657-2"></a>  v &lt;-<span class="st"> </span><span class="kw">runif</span>(n)</span>
<span id="cb657-3"><a href="14-fonctions.html#cb657-3"></a>  <span class="kw">return</span>(v)</span>
<span id="cb657-4"><a href="14-fonctions.html#cb657-4"></a>}</span></code></pre></div>
</div>

<p>Modifier la fonction pour qu’elle accepte deux arguments supplémentaires <code>min</code> et <code>max</code> et qu’elle retourne un vecteur de <code>n</code> valeurs aléatoires comprises entre <code>min</code> et <code>max</code> avec la fonction <code>runif(n, min, max)</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="14-fonctions.html#cb658-1"></a>alea &lt;-<span class="st"> </span><span class="cf">function</span>(n, min, max) {</span>
<span id="cb658-2"><a href="14-fonctions.html#cb658-2"></a>  v &lt;-<span class="st"> </span><span class="kw">runif</span>(n, min, max)</span>
<span id="cb658-3"><a href="14-fonctions.html#cb658-3"></a>  <span class="kw">return</span>(v)</span>
<span id="cb658-4"><a href="14-fonctions.html#cb658-4"></a>}</span></code></pre></div>
</div>

<p>Modifier à nouveau la fonction pour qu’elle retourne un vecteur de <code>n</code> nombres <em>entiers</em> aléatoires compris entre <code>min</code> et <code>max</code> en appliquant la fonction <code>trunc()</code> au vecteur généré par <code>runif()</code>.</p>
<p>Vérifier le résultat avec :</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="14-fonctions.html#cb659-1"></a>v &lt;-<span class="st"> </span><span class="kw">alea</span>(<span class="dv">10000</span>, <span class="dv">1</span>, <span class="dv">6</span>)</span>
<span id="cb659-2"><a href="14-fonctions.html#cb659-2"></a><span class="kw">table</span>(v)</span>
<span id="cb659-3"><a href="14-fonctions.html#cb659-3"></a><span class="co">#&gt; v</span></span>
<span id="cb659-4"><a href="14-fonctions.html#cb659-4"></a><span class="co">#&gt;    1    2    3    4    5    6 </span></span>
<span id="cb659-5"><a href="14-fonctions.html#cb659-5"></a><span class="co">#&gt; 1642 1611 1706 1687 1696 1658</span></span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="14-fonctions.html#cb660-1"></a>alea &lt;-<span class="st"> </span><span class="cf">function</span>(n, min, max) {</span>
<span id="cb660-2"><a href="14-fonctions.html#cb660-2"></a>  v &lt;-<span class="st"> </span><span class="kw">runif</span>(n, min, max <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb660-3"><a href="14-fonctions.html#cb660-3"></a>  v &lt;-<span class="st"> </span><span class="kw">trunc</span>(v)</span>
<span id="cb660-4"><a href="14-fonctions.html#cb660-4"></a>  <span class="kw">return</span>(v)</span>
<span id="cb660-5"><a href="14-fonctions.html#cb660-5"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.4</strong></p>
<p>Écrire une fonction nommée <code>meteo</code> qui prend un argument nommé <code>ville</code> avec le corps suivant :</p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="14-fonctions.html#cb661-1"></a>out &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="kw">paste0</span>(<span class="st">&quot;https://v2.wttr.in/&quot;</span>, ville, <span class="st">&quot;?A&quot;</span>))</span>
<span id="cb661-2"><a href="14-fonctions.html#cb661-2"></a><span class="kw">cat</span>(out, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>Tester la fonction avec par exemple <code>meteo("Lyon")</code> (il est possible que l’affichage dans la console ne soit pas lisible si vous travaillez sous Windows).</p>

<div class="solution-exo">
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="14-fonctions.html#cb662-1"></a>meteo &lt;-<span class="st"> </span><span class="cf">function</span>(ville) {</span>
<span id="cb662-2"><a href="14-fonctions.html#cb662-2"></a>  out &lt;-<span class="st"> </span><span class="kw">readLines</span>(<span class="kw">paste0</span>(<span class="st">&quot;https://v2.wttr.in/&quot;</span>, ville, <span class="st">&quot;?A&quot;</span>))</span>
<span id="cb662-3"><a href="14-fonctions.html#cb662-3"></a>  <span class="kw">cat</span>(out, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb662-4"><a href="14-fonctions.html#cb662-4"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.5</strong></p>
<p>Soit le code suivant, qui recode une variable du jeu de données <code>hdv2003</code> en utilisant <code>str_to_lower()</code> puis <code>fct_recode()</code> :</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="14-fonctions.html#cb663-1"></a><span class="kw">library</span>(questionr)</span>
<span id="cb663-2"><a href="14-fonctions.html#cb663-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb663-3"><a href="14-fonctions.html#cb663-3"></a><span class="kw">data</span>(hdv2003)</span>
<span id="cb663-4"><a href="14-fonctions.html#cb663-4"></a></span>
<span id="cb663-5"><a href="14-fonctions.html#cb663-5"></a>hdv2003<span class="op">$</span>hard.rock &lt;-<span class="st"> </span><span class="kw">str_to_lower</span>(hdv2003<span class="op">$</span>hard.rock)</span>
<span id="cb663-6"><a href="14-fonctions.html#cb663-6"></a>hdv2003<span class="op">$</span>hard.rock &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(hdv2003<span class="op">$</span>hard.rock, <span class="st">&quot;o&quot;</span> =<span class="st"> &quot;oui&quot;</span>, <span class="st">&quot;n&quot;</span> =<span class="st"> &quot;non&quot;</span>)</span></code></pre></div>
<p>Transformer ce code en une fonction nommée <code>recode_oui_non</code>, et appliquer cette fonction à <code>hard.rock</code>, <code>lecture.bd</code> et <code>cuisine</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="14-fonctions.html#cb664-1"></a>recode_oui_non &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb664-2"><a href="14-fonctions.html#cb664-2"></a>  var_rec &lt;-<span class="st"> </span><span class="kw">str_to_lower</span>(var)</span>
<span id="cb664-3"><a href="14-fonctions.html#cb664-3"></a>  var_rec &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(var_rec, <span class="st">&quot;o&quot;</span> =<span class="st"> &quot;oui&quot;</span>, <span class="st">&quot;n&quot;</span> =<span class="st"> &quot;non&quot;</span>)</span>
<span id="cb664-4"><a href="14-fonctions.html#cb664-4"></a>  <span class="kw">return</span>(var_rec)</span>
<span id="cb664-5"><a href="14-fonctions.html#cb664-5"></a>}</span>
<span id="cb664-6"><a href="14-fonctions.html#cb664-6"></a></span>
<span id="cb664-7"><a href="14-fonctions.html#cb664-7"></a>hdv2003<span class="op">$</span>hard.rock &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(hdv2003<span class="op">$</span>hard.rock)</span>
<span id="cb664-8"><a href="14-fonctions.html#cb664-8"></a>hdv2003<span class="op">$</span>lecture.bd &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(hdv2003<span class="op">$</span>lecture.bd)</span>
<span id="cb664-9"><a href="14-fonctions.html#cb664-9"></a>hdv2003<span class="op">$</span>cuisine &lt;-<span class="st"> </span><span class="kw">recode_oui_non</span>(hdv2003<span class="op">$</span>cuisine)</span></code></pre></div>
</div>

</div>
<div id="arguments-et-résultat" class="section level3">
<h3><span class="header-section-number">14.6.2</span> Arguments et résultat</h3>
<p><strong>Exercice 2.1</strong></p>
<p>Observer le code de la fonction suivante pour comprendre à quoi correspondent chacun de ses trois arguments, puis réordonner et renommer ces arguments de manière plus pertinente :</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="14-fonctions.html#cb665-1"></a>moyenne_arrondie &lt;-<span class="st"> </span><span class="cf">function</span>(d, vecteur_contenant_les_donnees, supprimer_les_na) {</span>
<span id="cb665-2"><a href="14-fonctions.html#cb665-2"></a>  res &lt;-<span class="st"> </span><span class="kw">mean</span>(vecteur_contenant_les_donnees, <span class="dt">na.rm =</span> supprimer_les_na)</span>
<span id="cb665-3"><a href="14-fonctions.html#cb665-3"></a>  res &lt;-<span class="st"> </span><span class="kw">round</span>(res, d)</span>
<span id="cb665-4"><a href="14-fonctions.html#cb665-4"></a>  <span class="kw">return</span>(res)</span>
<span id="cb665-5"><a href="14-fonctions.html#cb665-5"></a>}</span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="14-fonctions.html#cb666-1"></a>moyenne_arrondie &lt;-<span class="st"> </span><span class="cf">function</span>(v, decimales, na.rm) {</span>
<span id="cb666-2"><a href="14-fonctions.html#cb666-2"></a>  res &lt;-<span class="st"> </span><span class="kw">mean</span>(v, <span class="dt">na.rm =</span> na.rm)</span>
<span id="cb666-3"><a href="14-fonctions.html#cb666-3"></a>  res &lt;-<span class="st"> </span><span class="kw">round</span>(res, decimales)</span>
<span id="cb666-4"><a href="14-fonctions.html#cb666-4"></a>  <span class="kw">return</span>(res)</span>
<span id="cb666-5"><a href="14-fonctions.html#cb666-5"></a>}</span></code></pre></div>
</div>

<p>Donner aux arguments de la fonction une valeur par défaut.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="14-fonctions.html#cb667-1"></a>moyenne_arrondie &lt;-<span class="st"> </span><span class="cf">function</span>(v, <span class="dt">decimales =</span> <span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) {</span>
<span id="cb667-2"><a href="14-fonctions.html#cb667-2"></a>  res &lt;-<span class="st"> </span><span class="kw">mean</span>(v, <span class="dt">na.rm =</span> na.rm)</span>
<span id="cb667-3"><a href="14-fonctions.html#cb667-3"></a>  res &lt;-<span class="st"> </span><span class="kw">round</span>(res, decimales)</span>
<span id="cb667-4"><a href="14-fonctions.html#cb667-4"></a>  <span class="kw">return</span>(res)</span>
<span id="cb667-5"><a href="14-fonctions.html#cb667-5"></a>}</span></code></pre></div>
</div>

<p>Simplifier la fonction en utilisant la syntaxe plus compacte qui ne fait pas appel à <code>return()</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="14-fonctions.html#cb668-1"></a>moyenne_arrondie &lt;-<span class="st"> </span><span class="cf">function</span>(v, <span class="dt">decimales =</span> <span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) {</span>
<span id="cb668-2"><a href="14-fonctions.html#cb668-2"></a>  res &lt;-<span class="st"> </span><span class="kw">mean</span>(v, <span class="dt">na.rm =</span> na.rm)</span>
<span id="cb668-3"><a href="14-fonctions.html#cb668-3"></a>  <span class="kw">round</span>(res, decimales)</span>
<span id="cb668-4"><a href="14-fonctions.html#cb668-4"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 2.2</strong></p>
<p>Simplifier la fonction suivante pour que son corps ne fasse plus qu’une seule ligne :</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="14-fonctions.html#cb669-1"></a>centrer_reduire &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb669-2"><a href="14-fonctions.html#cb669-2"></a>  res &lt;-<span class="st"> </span>x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb669-3"><a href="14-fonctions.html#cb669-3"></a>  res &lt;-<span class="st"> </span>res <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)</span>
<span id="cb669-4"><a href="14-fonctions.html#cb669-4"></a>  <span class="kw">return</span>(res)</span>
<span id="cb669-5"><a href="14-fonctions.html#cb669-5"></a>}</span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="14-fonctions.html#cb670-1"></a>centrer_reduire &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb670-2"><a href="14-fonctions.html#cb670-2"></a>  (x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)</span>
<span id="cb670-3"><a href="14-fonctions.html#cb670-3"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 2.3</strong></p>
<p>Le code suivant permet de déterminer la lettre initiale et la longueur d’un mot.</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="14-fonctions.html#cb671-1"></a>initiale &lt;-<span class="st"> </span><span class="kw">str_sub</span>(mot, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb671-2"><a href="14-fonctions.html#cb671-2"></a>longueur &lt;-<span class="st"> </span><span class="kw">nchar</span>(mot)</span></code></pre></div>
<p>Utiliser ce code pour créer une fonction <code>caracteristiques_mot()</code> qui prend un argument <code>mot</code> et retourne à la fois son initiale et sa longueur.</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="14-fonctions.html#cb672-1"></a><span class="kw">caracteristiques_mot</span>(<span class="st">&quot;Bidonnage&quot;</span>)</span>
<span id="cb672-2"><a href="14-fonctions.html#cb672-2"></a><span class="co">#&gt; $initiale</span></span>
<span id="cb672-3"><a href="14-fonctions.html#cb672-3"></a><span class="co">#&gt; [1] &quot;B&quot;</span></span>
<span id="cb672-4"><a href="14-fonctions.html#cb672-4"></a><span class="co">#&gt; </span></span>
<span id="cb672-5"><a href="14-fonctions.html#cb672-5"></a><span class="co">#&gt; $longueur</span></span>
<span id="cb672-6"><a href="14-fonctions.html#cb672-6"></a><span class="co">#&gt; [1] 9</span></span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="14-fonctions.html#cb673-1"></a>caracteristiques_mot &lt;-<span class="st"> </span><span class="cf">function</span>(mot) {</span>
<span id="cb673-2"><a href="14-fonctions.html#cb673-2"></a>  initiale &lt;-<span class="st"> </span><span class="kw">str_sub</span>(mot, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb673-3"><a href="14-fonctions.html#cb673-3"></a>  longueur &lt;-<span class="st"> </span><span class="kw">nchar</span>(mot)</span>
<span id="cb673-4"><a href="14-fonctions.html#cb673-4"></a>  <span class="kw">list</span>(<span class="dt">initiale =</span> initiale, <span class="dt">longueur =</span> longueur)</span>
<span id="cb673-5"><a href="14-fonctions.html#cb673-5"></a>}</span></code></pre></div>
</div>

<p><em>Facultatif :</em> modifier la fonction pour qu’elle retourne un vecteur plutôt qu’une liste, et l’appliquer sur un mot de votre choix. Que constatez-vous ?</p>

<div class="solution-exo">
<p>Comme les vecteurs atomiques ne peuvent contenir que des données du même type, le nombre correspondant à <code>longueur</code> a été converti en chaîne de caractères.</p>
</div>

</div>
<div id="portée-des-variables-1" class="section level3">
<h3><span class="header-section-number">14.6.3</span> Portée des variables</h3>
<p><strong>Exercice 3.1</strong></p>
<p>En lisant les codes suivants, essayer de prévoir quelle va être la valeur affichée par la dernière ligne. Vérifier en exécutant le code :</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="14-fonctions.html#cb674-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb674-2"><a href="14-fonctions.html#cb674-2"></a>  x &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb674-3"><a href="14-fonctions.html#cb674-3"></a>  x</span>
<span id="cb674-4"><a href="14-fonctions.html#cb674-4"></a>}</span>
<span id="cb674-5"><a href="14-fonctions.html#cb674-5"></a></span>
<span id="cb674-6"><a href="14-fonctions.html#cb674-6"></a><span class="kw">f</span>()</span></code></pre></div>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="14-fonctions.html#cb675-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb675-2"><a href="14-fonctions.html#cb675-2"></a>  x</span>
<span id="cb675-3"><a href="14-fonctions.html#cb675-3"></a>}</span>
<span id="cb675-4"><a href="14-fonctions.html#cb675-4"></a></span>
<span id="cb675-5"><a href="14-fonctions.html#cb675-5"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb675-6"><a href="14-fonctions.html#cb675-6"></a><span class="kw">f</span>()</span></code></pre></div>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="14-fonctions.html#cb676-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb676-2"><a href="14-fonctions.html#cb676-2"></a>  x</span>
<span id="cb676-3"><a href="14-fonctions.html#cb676-3"></a>}</span>
<span id="cb676-4"><a href="14-fonctions.html#cb676-4"></a></span>
<span id="cb676-5"><a href="14-fonctions.html#cb676-5"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb676-6"><a href="14-fonctions.html#cb676-6"></a><span class="kw">f</span>(<span class="dv">30</span>)</span></code></pre></div>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="14-fonctions.html#cb677-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="dv">100</span>) {</span>
<span id="cb677-2"><a href="14-fonctions.html#cb677-2"></a>  x</span>
<span id="cb677-3"><a href="14-fonctions.html#cb677-3"></a>}</span>
<span id="cb677-4"><a href="14-fonctions.html#cb677-4"></a></span>
<span id="cb677-5"><a href="14-fonctions.html#cb677-5"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb677-6"><a href="14-fonctions.html#cb677-6"></a><span class="kw">f</span>()</span></code></pre></div>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="14-fonctions.html#cb678-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="dv">100</span>) {</span>
<span id="cb678-2"><a href="14-fonctions.html#cb678-2"></a>  x &lt;-<span class="st"> </span><span class="dv">150</span></span>
<span id="cb678-3"><a href="14-fonctions.html#cb678-3"></a>  x</span>
<span id="cb678-4"><a href="14-fonctions.html#cb678-4"></a>}</span>
<span id="cb678-5"><a href="14-fonctions.html#cb678-5"></a></span>
<span id="cb678-6"><a href="14-fonctions.html#cb678-6"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb678-7"><a href="14-fonctions.html#cb678-7"></a><span class="kw">f</span>(<span class="dv">30</span>)</span></code></pre></div>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="14-fonctions.html#cb679-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb679-2"><a href="14-fonctions.html#cb679-2"></a>  x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb679-3"><a href="14-fonctions.html#cb679-3"></a>}</span>
<span id="cb679-4"><a href="14-fonctions.html#cb679-4"></a></span>
<span id="cb679-5"><a href="14-fonctions.html#cb679-5"></a>x &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb679-6"><a href="14-fonctions.html#cb679-6"></a><span class="kw">f</span>()</span>
<span id="cb679-7"><a href="14-fonctions.html#cb679-7"></a>x</span></code></pre></div>
<p><strong>Exercice 3.2</strong></p>
<p>Dans le code suivant, on a essayé de créer une fonction qui modifie un tableau de données passé en argument pour ne conserver que les lignes correspondant aux pommes. Est-ce que ça fonctionne ?</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="14-fonctions.html#cb680-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb680-2"><a href="14-fonctions.html#cb680-2"></a>  <span class="dt">fruit =</span> <span class="kw">c</span>(<span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Citron&quot;</span>, <span class="st">&quot;Citron&quot;</span>),</span>
<span id="cb680-3"><a href="14-fonctions.html#cb680-3"></a>  <span class="dt">poids =</span> <span class="kw">c</span>(<span class="dv">147</span>, <span class="dv">189</span>, <span class="dv">76</span>, <span class="dv">91</span>)</span>
<span id="cb680-4"><a href="14-fonctions.html#cb680-4"></a>)</span>
<span id="cb680-5"><a href="14-fonctions.html#cb680-5"></a></span>
<span id="cb680-6"><a href="14-fonctions.html#cb680-6"></a>filtre_pommes &lt;-<span class="st"> </span><span class="cf">function</span>(d) {</span>
<span id="cb680-7"><a href="14-fonctions.html#cb680-7"></a>  d &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(d, fruit <span class="op">==</span><span class="st"> &quot;Pomme&quot;</span>)</span>
<span id="cb680-8"><a href="14-fonctions.html#cb680-8"></a>}</span>
<span id="cb680-9"><a href="14-fonctions.html#cb680-9"></a></span>
<span id="cb680-10"><a href="14-fonctions.html#cb680-10"></a><span class="kw">filtre_pommes</span>(df)</span>
<span id="cb680-11"><a href="14-fonctions.html#cb680-11"></a>df</span></code></pre></div>
<p>Modifier le code pour obtenir le résultat souhaité.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="14-fonctions.html#cb681-1"></a>filtre_pommes &lt;-<span class="st"> </span><span class="cf">function</span>(d) {</span>
<span id="cb681-2"><a href="14-fonctions.html#cb681-2"></a>  dplyr<span class="op">::</span><span class="kw">filter</span>(d, fruit <span class="op">==</span><span class="st"> &quot;Pomme&quot;</span>)</span>
<span id="cb681-3"><a href="14-fonctions.html#cb681-3"></a>}</span>
<span id="cb681-4"><a href="14-fonctions.html#cb681-4"></a></span>
<span id="cb681-5"><a href="14-fonctions.html#cb681-5"></a>df &lt;-<span class="st"> </span><span class="kw">filtre_pommes</span>(df)</span>
<span id="cb681-6"><a href="14-fonctions.html#cb681-6"></a>df</span></code></pre></div>
</div>

</div>
<div id="les-fonctions-comme-objets-1" class="section level3">
<h3><span class="header-section-number">14.6.4</span> Les fonctions comme objets</h3>
<p><strong>Exercice 4.1</strong></p>
<p>Écrire une fonction nommée <code>bonjour</code> qui ne prend aucun argument et affiche juste le texte “Bonjour !” dans la console.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="14-fonctions.html#cb682-1"></a>bonjour &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb682-2"><a href="14-fonctions.html#cb682-2"></a>  <span class="kw">cat</span>(<span class="st">&quot;Bonjour !&quot;</span>)</span>
<span id="cb682-3"><a href="14-fonctions.html#cb682-3"></a>}</span></code></pre></div>
</div>

<p>Exécuter dans la console les deux commandes suivantes tour à tour :</p>
<ul>
<li><code>bonjour()</code></li>
<li><code>bonjour</code></li>
</ul>
<p>Comprenez-vous la différence entre les deux ?</p>
<p>Copier la fonction dans un nouvel objet nommé <code>salut</code>. Exécuter la nouvelle fonction ainsi créée.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb683-1"><a href="14-fonctions.html#cb683-1"></a>salut &lt;-<span class="st"> </span>bonjour</span>
<span id="cb683-2"><a href="14-fonctions.html#cb683-2"></a><span class="kw">salut</span>()</span></code></pre></div>
</div>

<p><strong>Exercice 4.2</strong></p>
<p>Construire une fonction <code>etendue()</code> qui prend en entrée un vecteur numérique et retourne la différence entre la valeur maximale et la valeur minimale de ce vecteur (vous pouvez récupérer le code de l’exercice 1.2).</p>

<div class="solution-exo">
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="14-fonctions.html#cb684-1"></a>etendue &lt;-<span class="st"> </span><span class="cf">function</span>(v) {</span>
<span id="cb684-2"><a href="14-fonctions.html#cb684-2"></a>  <span class="kw">max</span>(v) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(v)</span>
<span id="cb684-3"><a href="14-fonctions.html#cb684-3"></a>}</span></code></pre></div>
</div>

<p>À l’aide de <code>tapply()</code>, appliquez la fonction <code>etendue()</code> à la variable <code>age</code> pour chaque valeur de <code>qualif</code> dans le jeu de données <code>hdv2003</code>.</p>
<pre><code>#&gt;       Ouvrier specialise         Ouvrier qualifie               Technicien 
#&gt;                       74                       68                       62 
#&gt; Profession intermediaire                    Cadre                  Employe 
#&gt;                       62                       63                       72 
#&gt;                    Autre 
#&gt;                       78</code></pre>

<div class="solution-exo">
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="14-fonctions.html#cb686-1"></a><span class="kw">library</span>(questionr)</span>
<span id="cb686-2"><a href="14-fonctions.html#cb686-2"></a><span class="kw">data</span>(hdv2003)</span>
<span id="cb686-3"><a href="14-fonctions.html#cb686-3"></a></span>
<span id="cb686-4"><a href="14-fonctions.html#cb686-4"></a><span class="kw">tapply</span>(hdv2003<span class="op">$</span>age, hdv2003<span class="op">$</span>qualif, etendue)</span></code></pre></div>
</div>

<p>Réécrire le code précédent en utilisant une fonction anonyme (<em>ie</em> en définissant la fonction directement dans le <code>tapply</code>).</p>

<div class="solution-exo">
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb687-1"><a href="14-fonctions.html#cb687-1"></a><span class="kw">tapply</span>(hdv2003<span class="op">$</span>age, hdv2003<span class="op">$</span>qualif, <span class="cf">function</span>(v) {</span>
<span id="cb687-2"><a href="14-fonctions.html#cb687-2"></a>  <span class="kw">max</span>(v) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(v)</span>
<span id="cb687-3"><a href="14-fonctions.html#cb687-3"></a>})</span></code></pre></div>
</div>

<p><strong>Exercice 4.3</strong></p>
<p>Exécutez le code suivant. Comprenez-vous les résultats obtenus ?</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="14-fonctions.html#cb688-1"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(y) {</span>
<span id="cb688-2"><a href="14-fonctions.html#cb688-2"></a>  y <span class="op">*</span><span class="st"> </span><span class="dv">4</span></span>
<span id="cb688-3"><a href="14-fonctions.html#cb688-3"></a>}</span>
<span id="cb688-4"><a href="14-fonctions.html#cb688-4"></a></span>
<span id="cb688-5"><a href="14-fonctions.html#cb688-5"></a><span class="kw">body</span>(f)</span>
<span id="cb688-6"><a href="14-fonctions.html#cb688-6"></a><span class="kw">f</span>(<span class="dv">5</span>)</span>
<span id="cb688-7"><a href="14-fonctions.html#cb688-7"></a></span>
<span id="cb688-8"><a href="14-fonctions.html#cb688-8"></a><span class="kw">body</span>(f) &lt;-<span class="st"> </span><span class="kw">quote</span>(y <span class="op">+</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb688-9"><a href="14-fonctions.html#cb688-9"></a><span class="kw">body</span>(f)</span>
<span id="cb688-10"><a href="14-fonctions.html#cb688-10"></a><span class="kw">f</span>(<span class="dv">5</span>)</span></code></pre></div>
<p>Intuitivement, comprenez-vous à quoi sert la fonction <code>quote</code> ?</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="25">
<li id="fn25"><p>Le jeu de données <code>hdv2003</code> fait partie de l’extension <code>questionr</code>, il est décrit section <a href="22-ressources.html#hdv2003">A.3.2.2</a>.<a href="14-fonctions.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>Les listes seront abordées un peu plus en détail dans la partie <a href="16-structures-donnees.html#listes">16.2</a>.<a href="14-fonctions.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>En réalité c’est possible avec l’opérateur <code>&lt;&lt;-</code>, mais c’est fortement déconseillé dans la très grande majorité des cas.<a href="14-fonctions.html#fnref27" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="13-rmarkdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="15-dplyr-avance.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/juba/tidyverse/blob/main/14-fonctions.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction_au_tidyverse.epub", "introduction_au_tidyverse.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
