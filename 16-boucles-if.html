<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Partie 16 Boucles et exécution conditionnelle | Introduction à R et au tidyverse</title>
  <meta name="description" content="Une introduction à R et aux extensions du tidyverse" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Partie 16 Boucles et exécution conditionnelle | Introduction à R et au tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Une introduction à R et aux extensions du tidyverse" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Partie 16 Boucles et exécution conditionnelle | Introduction à R et au tidyverse" />
  
  <meta name="twitter:description" content="Une introduction à R et aux extensions du tidyverse" />
  

<meta name="author" content="Julien Barnier" />


<meta name="date" content="2021-10-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="15-structures-donnees.html"/>
<link rel="next" href="17-dplyr-avance.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Introduction à R et au <em>tidyverse</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>À propos de ce document</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-presentation.html"><a href="01-presentation.html"><i class="fa fa-check"></i><b>1</b> Présentation</a><ul>
<li class="chapter" data-level="1.1" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-de-r"><i class="fa fa-check"></i><b>1.1</b> À propos de R</a></li>
<li class="chapter" data-level="1.2" data-path="01-presentation.html"><a href="01-presentation.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> À propos de RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-du-tidyverse"><i class="fa fa-check"></i><b>1.3</b> À propos du <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.4" data-path="01-presentation.html"><a href="01-presentation.html#structure-du-document"><i class="fa fa-check"></i><b>1.4</b> Structure du document</a></li>
<li class="chapter" data-level="1.5" data-path="01-presentation.html"><a href="01-presentation.html#prérequis"><i class="fa fa-check"></i><b>1.5</b> Prérequis</a></li>
</ul></li>
<li class="part"><span><b>I Introduction à R</b></span></li>
<li class="chapter" data-level="2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html"><i class="fa fa-check"></i><b>2</b> Prise en main</a><ul>
<li class="chapter" data-level="2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#la-console"><i class="fa fa-check"></i><b>2.1</b> La console</a><ul>
<li class="chapter" data-level="2.1.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#linvite-de-commandes"><i class="fa fa-check"></i><b>2.1.1</b> L’invite de commandes</a></li>
<li class="chapter" data-level="2.1.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#précisions-concernant-la-saisie-des-commandes"><i class="fa fa-check"></i><b>2.1.2</b> Précisions concernant la saisie des commandes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets"><i class="fa fa-check"></i><b>2.2</b> Objets</a><ul>
<li class="chapter" data-level="2.2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets-simples"><i class="fa fa-check"></i><b>2.2.1</b> Objets simples</a></li>
<li class="chapter" data-level="2.2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#introvecteurs"><i class="fa fa-check"></i><b>2.2.2</b> Vecteurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#fonctions"><i class="fa fa-check"></i><b>2.3</b> Fonctions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#principe"><i class="fa fa-check"></i><b>2.3.1</b> Principe</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#arguments"><i class="fa fa-check"></i><b>2.3.2</b> Arguments</a></li>
<li class="chapter" data-level="2.3.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#aide-sur-une-fonction"><i class="fa fa-check"></i><b>2.3.3</b> Aide sur une fonction</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#regrouper-ses-commandes-dans-des-scripts"><i class="fa fa-check"></i><b>2.4</b> Regrouper ses commandes dans des scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#commentaires"><i class="fa fa-check"></i><b>2.4.1</b> Commentaires</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#packages"><i class="fa fa-check"></i><b>2.5</b> Installer et charger des extensions (<em>packages</em>)</a></li>
<li class="chapter" data-level="2.6" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#exercices"><i class="fa fa-check"></i><b>2.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-premier_travail.html"><a href="03-premier_travail.html"><i class="fa fa-check"></i><b>3</b> Premier travail avec des données</a><ul>
<li class="chapter" data-level="3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#jeu-de-données-dexemple"><i class="fa fa-check"></i><b>3.1</b> Jeu de données d’exemple</a></li>
<li class="chapter" data-level="3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#tableau-de-données-data-frame"><i class="fa fa-check"></i><b>3.2</b> Tableau de données (<em>data frame</em>)</a><ul>
<li class="chapter" data-level="3.2.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#structure-du-tableau"><i class="fa fa-check"></i><b>3.2.1</b> Structure du tableau</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#accéder-aux-variables-dun-tableau"><i class="fa fa-check"></i><b>3.2.2</b> Accéder aux variables d’un tableau</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#créer-une-nouvelle-variable"><i class="fa fa-check"></i><b>3.2.3</b> Créer une nouvelle variable</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyse-univariée"><i class="fa fa-check"></i><b>3.3</b> Analyse univariée</a><ul>
<li class="chapter" data-level="3.3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-quantitative"><i class="fa fa-check"></i><b>3.3.1</b> Analyser une variable quantitative</a></li>
<li class="chapter" data-level="3.3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-qualitative"><i class="fa fa-check"></i><b>3.3.2</b> Analyser une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="03-premier_travail.html"><a href="03-premier_travail.html#exercices-1"><i class="fa fa-check"></i><b>3.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-bivarie.html"><a href="04-bivarie.html"><i class="fa fa-check"></i><b>4</b> Analyse bivariée</a><ul>
<li class="chapter" data-level="4.1" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-qualitatives"><i class="fa fa-check"></i><b>4.1</b> Croisement de deux variables qualitatives</a><ul>
<li class="chapter" data-level="4.1.1" data-path="04-bivarie.html"><a href="04-bivarie.html#tableaux-croisés"><i class="fa fa-check"></i><b>4.1.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="4.1.2" data-path="04-bivarie.html"><a href="04-bivarie.html#test-du-χ²"><i class="fa fa-check"></i><b>4.1.2</b> Test du χ²</a></li>
<li class="chapter" data-level="4.1.3" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-1"><i class="fa fa-check"></i><b>4.1.3</b> Représentation graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-dune-variable-quantitative-et-dune-variable-qualitative"><i class="fa fa-check"></i><b>4.2</b> Croisement d’une variable quantitative et d’une variable qualitative</a><ul>
<li class="chapter" data-level="4.2.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-2"><i class="fa fa-check"></i><b>4.2.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.2.2" data-path="04-bivarie.html"><a href="04-bivarie.html#tapply"><i class="fa fa-check"></i><b>4.2.2</b> Calculs d’indicateurs</a></li>
<li class="chapter" data-level="4.2.3" data-path="04-bivarie.html"><a href="04-bivarie.html#tests-statistiques"><i class="fa fa-check"></i><b>4.2.3</b> Tests statistiques</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-quantitatives"><i class="fa fa-check"></i><b>4.3</b> Croisement de deux variables quantitatives</a><ul>
<li class="chapter" data-level="4.3.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-3"><i class="fa fa-check"></i><b>4.3.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.3.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calcul-dindicateurs"><i class="fa fa-check"></i><b>4.3.2</b> Calcul d’indicateurs</a></li>
<li class="chapter" data-level="4.3.3" data-path="04-bivarie.html"><a href="04-bivarie.html#régression-linéaire"><i class="fa fa-check"></i><b>4.3.3</b> Régression linéaire</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04-bivarie.html"><a href="04-bivarie.html#exercices-2"><i class="fa fa-check"></i><b>4.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-organiser.html"><a href="05-organiser.html"><i class="fa fa-check"></i><b>5</b> Organiser ses scripts</a><ul>
<li class="chapter" data-level="5.1" data-path="05-organiser.html"><a href="05-organiser.html#projets"><i class="fa fa-check"></i><b>5.1</b> Les projets dans RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="05-organiser.html"><a href="05-organiser.html#créer-des-sections-dans-un-script"><i class="fa fa-check"></i><b>5.2</b> Créer des sections dans un script</a></li>
<li class="chapter" data-level="5.3" data-path="05-organiser.html"><a href="05-organiser.html#répartir-son-travail-entre-plusieurs-scripts"><i class="fa fa-check"></i><b>5.3</b> Répartir son travail entre plusieurs scripts</a></li>
<li class="chapter" data-level="5.4" data-path="05-organiser.html"><a href="05-organiser.html#désactiver-la-sauvegarde-de-lespace-de-travail"><i class="fa fa-check"></i><b>5.4</b> Désactiver la sauvegarde de l’espace de travail</a></li>
</ul></li>
<li class="part"><span><b>II Introduction au tidyverse</b></span></li>
<li class="chapter" data-level="6" data-path="06-tidyverse.html"><a href="06-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Le tidyverse</a><ul>
<li class="chapter" data-level="6.1" data-path="06-tidyverse.html"><a href="06-tidyverse.html#extensions"><i class="fa fa-check"></i><b>6.1</b> Extensions</a></li>
<li class="chapter" data-level="6.2" data-path="06-tidyverse.html"><a href="06-tidyverse.html#installation"><i class="fa fa-check"></i><b>6.2</b> Installation</a></li>
<li class="chapter" data-level="6.3" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tidydata"><i class="fa fa-check"></i><b>6.3</b> tidy data</a></li>
<li class="chapter" data-level="6.4" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>6.4</b> tibbles</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-import.html"><a href="07-import.html"><i class="fa fa-check"></i><b>7</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="7.1" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-textes"><i class="fa fa-check"></i><b>7.1</b> Import de fichiers textes</a><ul>
<li class="chapter" data-level="7.1.1" data-path="07-import.html"><a href="07-import.html#interface-interactive-dimport-de-fichiers"><i class="fa fa-check"></i><b>7.1.1</b> Interface interactive d’import de fichiers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-import.html"><a href="07-import.html#import-depuis-un-fichier-excel"><i class="fa fa-check"></i><b>7.2</b> Import depuis un fichier Excel</a></li>
<li class="chapter" data-level="7.3" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-sas-spss-et-stata"><i class="fa fa-check"></i><b>7.3</b> Import de fichiers SAS, SPSS et Stata</a></li>
<li class="chapter" data-level="7.4" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-dbase"><i class="fa fa-check"></i><b>7.4</b> Import de fichiers dBase</a></li>
<li class="chapter" data-level="7.5" data-path="07-import.html"><a href="07-import.html#connexion-à-des-bases-de-données"><i class="fa fa-check"></i><b>7.5</b> Connexion à des bases de données</a><ul>
<li class="chapter" data-level="7.5.1" data-path="07-import.html"><a href="07-import.html#interfaçage-via-lextension-dbi"><i class="fa fa-check"></i><b>7.5.1</b> Interfaçage via l’extension <code>DBI</code></a></li>
<li class="chapter" data-level="7.5.2" data-path="07-import.html"><a href="07-import.html#utilisation-de-dplyr-et-dbplyr"><i class="fa fa-check"></i><b>7.5.2</b> Utilisation de <code>dplyr</code> et <code>dbplyr</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="07-import.html"><a href="07-import.html#ressources"><i class="fa fa-check"></i><b>7.5.3</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="07-import.html"><a href="07-import.html#export-de-données"><i class="fa fa-check"></i><b>7.6</b> Export de données</a><ul>
<li class="chapter" data-level="7.6.1" data-path="07-import.html"><a href="07-import.html#export-de-tableaux-de-données"><i class="fa fa-check"></i><b>7.6.1</b> Export de tableaux de données</a></li>
<li class="chapter" data-level="7.6.2" data-path="07-import.html"><a href="07-import.html#sauvegarder-des-objets"><i class="fa fa-check"></i><b>7.6.2</b> Sauvegarder des objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-ggplot2.html"><a href="08-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Visualiser avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="8.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#préparation"><i class="fa fa-check"></i><b>8.1</b> Préparation</a></li>
<li class="chapter" data-level="8.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#initialisation"><i class="fa fa-check"></i><b>8.2</b> Initialisation</a></li>
<li class="chapter" data-level="8.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-geom"><i class="fa fa-check"></i><b>8.3</b> Exemples de <code>geom</code></a><ul>
<li class="chapter" data-level="8.3.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>8.3.1</b> <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_violin"><i class="fa fa-check"></i><b>8.3.2</b> <code>geom_violin</code></a></li>
<li class="chapter" data-level="8.3.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar"><i class="fa fa-check"></i><b>8.3.3</b> <code>geom_bar</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_text"><i class="fa fa-check"></i><b>8.3.4</b> <code>geom_text</code></a></li>
<li class="chapter" data-level="8.3.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_label"><i class="fa fa-check"></i><b>8.3.5</b> <code>geom_label</code></a></li>
<li class="chapter" data-level="8.3.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_density"><i class="fa fa-check"></i><b>8.3.6</b> <code>geom_density</code></a></li>
<li class="chapter" data-level="8.3.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_line"><i class="fa fa-check"></i><b>8.3.7</b> <code>geom_line</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#mappages"><i class="fa fa-check"></i><b>8.4</b> Mappages</a><ul>
<li class="chapter" data-level="8.4.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-mappages"><i class="fa fa-check"></i><b>8.4.1</b> Exemples de mappages</a></li>
<li class="chapter" data-level="8.4.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#aes-or-not-aes"><i class="fa fa-check"></i><b>8.4.2</b> <code>aes()</code> or not <code>aes()</code> ?</a></li>
<li class="chapter" data-level="8.4.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar-et-position"><i class="fa fa-check"></i><b>8.4.3</b> <code>geom_bar</code> et <code>position</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#représentation-de-plusieurs-geom"><i class="fa fa-check"></i><b>8.5</b> Représentation de plusieurs <code>geom</code></a><ul>
<li class="chapter" data-level="8.5.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#plusieurs-sources-de-données"><i class="fa fa-check"></i><b>8.5.1</b> Plusieurs sources de données</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#faceting"><i class="fa fa-check"></i><b>8.6</b> Faceting</a></li>
<li class="chapter" data-level="8.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scales"><i class="fa fa-check"></i><b>8.7</b> Scales</a><ul>
<li class="chapter" data-level="8.7.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_size"><i class="fa fa-check"></i><b>8.7.1</b> <code>scale_size</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_x-scale_y"><i class="fa fa-check"></i><b>8.7.2</b> <code>scale_x</code>, <code>scale_y</code></a></li>
<li class="chapter" data-level="8.7.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scalecolor"><i class="fa fa-check"></i><b>8.7.3</b> <code>scale_color</code>, <code>scale_fill</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="08-ggplot2.html"><a href="08-ggplot2.html#thèmes"><i class="fa fa-check"></i><b>8.8</b> Thèmes</a></li>
<li class="chapter" data-level="8.9" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ladd-in-esquisse"><i class="fa fa-check"></i><b>8.9</b> L’add-in <code>esquisse</code></a></li>
<li class="chapter" data-level="8.10" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ressources-1"><i class="fa fa-check"></i><b>8.10</b> Ressources</a></li>
<li class="chapter" data-level="8.11" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exercices-3"><i class="fa fa-check"></i><b>8.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-recodages.html"><a href="09-recodages.html"><i class="fa fa-check"></i><b>9</b> Recoder des variables</a><ul>
<li class="chapter" data-level="9.1" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs"><i class="fa fa-check"></i><b>9.1</b> Rappel sur les variables et les vecteurs</a></li>
<li class="chapter" data-level="9.2" data-path="09-recodages.html"><a href="09-recodages.html#tests"><i class="fa fa-check"></i><b>9.2</b> Tests et comparaison</a></li>
<li class="chapter" data-level="9.3" data-path="09-recodages.html"><a href="09-recodages.html#recoder-une-variable-qualitative"><i class="fa fa-check"></i><b>9.3</b> Recoder une variable qualitative</a><ul>
<li class="chapter" data-level="9.3.1" data-path="09-recodages.html"><a href="09-recodages.html#facteurs"><i class="fa fa-check"></i><b>9.3.1</b> Facteurs et <code>forcats</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="09-recodages.html"><a href="09-recodages.html#recode"><i class="fa fa-check"></i><b>9.3.2</b> Modifier les modalités d’une variable qualitative</a></li>
<li class="chapter" data-level="9.3.3" data-path="09-recodages.html"><a href="09-recodages.html#ordonner-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.3</b> Ordonner les modalités d’une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables"><i class="fa fa-check"></i><b>9.4</b> Combiner plusieurs variables</a><ul>
<li class="chapter" data-level="9.4.1" data-path="09-recodages.html"><a href="09-recodages.html#if-else"><i class="fa fa-check"></i><b>9.4.1</b> <code>if_else</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="09-recodages.html"><a href="09-recodages.html#case_when"><i class="fa fa-check"></i><b>9.4.2</b> <code>case_when</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique-en-classes"><i class="fa fa-check"></i><b>9.5</b> Découper une variable numérique en classes</a><ul>
<li class="chapter" data-level="9.5.1" data-path="09-recodages.html"><a href="09-recodages.html#interface-graphique"><i class="fa fa-check"></i><b>9.5.1</b> Interface graphique</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="09-recodages.html"><a href="09-recodages.html#exercices-4"><i class="fa fa-check"></i><b>9.6</b> Exercices</a><ul>
<li class="chapter" data-level="9.6.1" data-path="09-recodages.html"><a href="09-recodages.html#préparation-1"><i class="fa fa-check"></i><b>9.6.1</b> Préparation</a></li>
<li class="chapter" data-level="9.6.2" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs-et-tests"><i class="fa fa-check"></i><b>9.6.2</b> Vecteurs et tests</a></li>
<li class="chapter" data-level="9.6.3" data-path="09-recodages.html"><a href="09-recodages.html#recodages-de-variable-qualitative"><i class="fa fa-check"></i><b>9.6.3</b> Recodages de variable qualitative</a></li>
<li class="chapter" data-level="9.6.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables-1"><i class="fa fa-check"></i><b>9.6.4</b> Combiner plusieurs variables</a></li>
<li class="chapter" data-level="9.6.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique"><i class="fa fa-check"></i><b>9.6.5</b> Découper une variable numérique</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-dplyr.html"><a href="10-dplyr.html"><i class="fa fa-check"></i><b>10</b> Manipuler les données avec <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.1" data-path="10-dplyr.html"><a href="10-dplyr.html#préparation-2"><i class="fa fa-check"></i><b>10.1</b> Préparation</a></li>
<li class="chapter" data-level="10.2" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-dplyr"><i class="fa fa-check"></i><b>10.2</b> Les verbes de <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice"><i class="fa fa-check"></i><b>10.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="10-dplyr.html"><a href="10-dplyr.html#filter"><i class="fa fa-check"></i><b>10.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="10-dplyr.html"><a href="10-dplyr.html#select-rename"><i class="fa fa-check"></i><b>10.2.3</b> <code>select</code> et <code>rename</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="10-dplyr.html"><a href="10-dplyr.html#arrange"><i class="fa fa-check"></i><b>10.2.4</b> <code>arrange</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="10-dplyr.html"><a href="10-dplyr.html#mutate"><i class="fa fa-check"></i><b>10.2.5</b> <code>mutate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-dplyr.html"><a href="10-dplyr.html#pipe"><i class="fa fa-check"></i><b>10.3</b> Enchaîner les opérations avec le <em>pipe</em></a></li>
<li class="chapter" data-level="10.4" data-path="10-dplyr.html"><a href="10-dplyr.html#opérations-groupées"><i class="fa fa-check"></i><b>10.4</b> Opérations groupées</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by"><i class="fa fa-check"></i><b>10.4.1</b> <code>group_by</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="10-dplyr.html"><a href="10-dplyr.html#summarise-et-count"><i class="fa fa-check"></i><b>10.4.2</b> <code>summarise</code> et <code>count</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="10-dplyr.html"><a href="10-dplyr.html#grouper-selon-plusieurs-variables"><i class="fa fa-check"></i><b>10.4.3</b> Grouper selon plusieurs variables</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-dplyr.html"><a href="10-dplyr.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>10.5</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_sample"><i class="fa fa-check"></i><b>10.5.1</b> <code>slice_sample</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_head-slice_tail-slice_min-slice_max"><i class="fa fa-check"></i><b>10.5.2</b> <code>slice_head</code>, <code>slice_tail</code>, <code>slice_min</code>, <code>slice_max</code></a></li>
<li class="chapter" data-level="10.5.3" data-path="10-dplyr.html"><a href="10-dplyr.html#lead-et-lag"><i class="fa fa-check"></i><b>10.5.3</b> <code>lead</code> et <code>lag</code></a></li>
<li class="chapter" data-level="10.5.4" data-path="10-dplyr.html"><a href="10-dplyr.html#distinct-et-n_distinct"><i class="fa fa-check"></i><b>10.5.4</b> <code>distinct</code> et <code>n_distinct</code></a></li>
<li class="chapter" data-level="10.5.5" data-path="10-dplyr.html"><a href="10-dplyr.html#relocate"><i class="fa fa-check"></i><b>10.5.5</b> <code>relocate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-dplyr.html"><a href="10-dplyr.html#tables-multiples"><i class="fa fa-check"></i><b>10.6</b> Tables multiples</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-dplyr.html"><a href="10-dplyr.html#concaténation-bind_rows-et-bind_cols"><i class="fa fa-check"></i><b>10.6.1</b> Concaténation : <code>bind_rows</code> et <code>bind_cols</code></a></li>
<li class="chapter" data-level="10.6.2" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures"><i class="fa fa-check"></i><b>10.6.2</b> Jointures</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-dplyr.html"><a href="10-dplyr.html#types-de-jointures"><i class="fa fa-check"></i><b>10.6.3</b> Types de jointures</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-dplyr.html"><a href="10-dplyr.html#ressources-2"><i class="fa fa-check"></i><b>10.7</b> Ressources</a></li>
<li class="chapter" data-level="10.8" data-path="10-dplyr.html"><a href="10-dplyr.html#exercices-5"><i class="fa fa-check"></i><b>10.8</b> Exercices</a><ul>
<li class="chapter" data-level="10.8.1" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-base-de-dplyr"><i class="fa fa-check"></i><b>10.8.1</b> Les verbes de base de <code>dplyr</code></a></li>
<li class="chapter" data-level="10.8.2" data-path="10-dplyr.html"><a href="10-dplyr.html#enchaîner-des-opérations"><i class="fa fa-check"></i><b>10.8.2</b> Enchaîner des opérations</a></li>
<li class="chapter" data-level="10.8.3" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by-et-summarise"><i class="fa fa-check"></i><b>10.8.3</b> <code>group_by</code> et <code>summarise</code></a></li>
<li class="chapter" data-level="10.8.4" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures-1"><i class="fa fa-check"></i><b>10.8.4</b> Jointures</a></li>
<li class="chapter" data-level="10.8.5" data-path="10-dplyr.html"><a href="10-dplyr.html#bonus"><i class="fa fa-check"></i><b>10.8.5</b> Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-stringr.html"><a href="11-stringr.html"><i class="fa fa-check"></i><b>11</b> Manipuler du texte avec <code>stringr</code></a><ul>
<li class="chapter" data-level="11.1" data-path="11-stringr.html"><a href="11-stringr.html#expressions-régulières"><i class="fa fa-check"></i><b>11.1</b> Expressions régulières</a></li>
<li class="chapter" data-level="11.2" data-path="11-stringr.html"><a href="11-stringr.html#concat"><i class="fa fa-check"></i><b>11.2</b> Concaténer des chaînes</a></li>
<li class="chapter" data-level="11.3" data-path="11-stringr.html"><a href="11-stringr.html#convertir-en-majuscules-minuscules"><i class="fa fa-check"></i><b>11.3</b> Convertir en majuscules / minuscules</a></li>
<li class="chapter" data-level="11.4" data-path="11-stringr.html"><a href="11-stringr.html#découper-des-chaînes"><i class="fa fa-check"></i><b>11.4</b> Découper des chaînes</a></li>
<li class="chapter" data-level="11.5" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-sous-chaînes-par-position"><i class="fa fa-check"></i><b>11.5</b> Extraire des sous-chaînes par position</a></li>
<li class="chapter" data-level="11.6" data-path="11-stringr.html"><a href="11-stringr.html#str-detect"><i class="fa fa-check"></i><b>11.6</b> Détecter des motifs</a></li>
<li class="chapter" data-level="11.7" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-motifs"><i class="fa fa-check"></i><b>11.7</b> Extraire des motifs</a></li>
<li class="chapter" data-level="11.8" data-path="11-stringr.html"><a href="11-stringr.html#remplacer-des-motifs"><i class="fa fa-check"></i><b>11.8</b> Remplacer des motifs</a></li>
<li class="chapter" data-level="11.9" data-path="11-stringr.html"><a href="11-stringr.html#modificateurs"><i class="fa fa-check"></i><b>11.9</b> Modificateurs de motifs</a></li>
<li class="chapter" data-level="11.10" data-path="11-stringr.html"><a href="11-stringr.html#ressources-3"><i class="fa fa-check"></i><b>11.10</b> Ressources</a></li>
<li class="chapter" data-level="11.11" data-path="11-stringr.html"><a href="11-stringr.html#exercices-6"><i class="fa fa-check"></i><b>11.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-tidyr.html"><a href="12-tidyr.html"><i class="fa fa-check"></i><b>12</b> Mettre en ordre avec <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.1" data-path="12-tidyr.html"><a href="12-tidyr.html#tidy-data"><i class="fa fa-check"></i><b>12.1</b> Tidy data</a></li>
<li class="chapter" data-level="12.2" data-path="12-tidyr.html"><a href="12-tidyr.html#trois-règles-pour-des-données-bien-rangées"><i class="fa fa-check"></i><b>12.2</b> Trois règles pour des données bien rangées</a></li>
<li class="chapter" data-level="12.3" data-path="12-tidyr.html"><a href="12-tidyr.html#les-verbes-de-tidyr"><i class="fa fa-check"></i><b>12.3</b> Les verbes de <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.3.1" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_longer-transformer-des-colonnes-en-lignes"><i class="fa fa-check"></i><b>12.3.1</b> <code>pivot_longer</code> : transformer des colonnes en lignes</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_wider-transformer-des-lignes-en-colonnes"><i class="fa fa-check"></i><b>12.3.2</b> <code>pivot_wider</code> : transformer des lignes en colonnes</a></li>
<li class="chapter" data-level="12.3.3" data-path="12-tidyr.html"><a href="12-tidyr.html#separate"><i class="fa fa-check"></i><b>12.3.3</b> <code>separate</code> : séparer une colonne en plusieurs colonnes</a></li>
<li class="chapter" data-level="12.3.4" data-path="12-tidyr.html"><a href="12-tidyr.html#separate-rows"><i class="fa fa-check"></i><b>12.3.4</b> <code>separate_rows</code> : séparer une colonne en plusieurs lignes</a></li>
<li class="chapter" data-level="12.3.5" data-path="12-tidyr.html"><a href="12-tidyr.html#unite-regrouper-plusieurs-colonnes-en-une-seule"><i class="fa fa-check"></i><b>12.3.5</b> <code>unite</code> : regrouper plusieurs colonnes en une seule</a></li>
<li class="chapter" data-level="12.3.6" data-path="12-tidyr.html"><a href="12-tidyr.html#extract"><i class="fa fa-check"></i><b>12.3.6</b> <code>extract</code> : créer de nouvelles colonnes à partir d’une colonne de texte</a></li>
<li class="chapter" data-level="12.3.7" data-path="12-tidyr.html"><a href="12-tidyr.html#complete-compléter-des-combinaisons-de-variables-manquantes"><i class="fa fa-check"></i><b>12.3.7</b> <code>complete</code> : compléter des combinaisons de variables manquantes</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="12-tidyr.html"><a href="12-tidyr.html#ressources-4"><i class="fa fa-check"></i><b>12.4</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Diffuser et publier avec <code>rmarkdown</code></a><ul>
<li class="chapter" data-level="13.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#créer-un-nouveau-document"><i class="fa fa-check"></i><b>13.1</b> Créer un nouveau document</a></li>
<li class="chapter" data-level="13.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#éléments-dun-document-r-markdown"><i class="fa fa-check"></i><b>13.2</b> Éléments d’un document R Markdown</a><ul>
<li class="chapter" data-level="13.2.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#en-tête-préambule"><i class="fa fa-check"></i><b>13.2.1</b> En-tête (préambule)</a></li>
<li class="chapter" data-level="13.2.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#texte-du-document"><i class="fa fa-check"></i><b>13.2.2</b> Texte du document</a></li>
<li class="chapter" data-level="13.2.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#blocs-de-code-r"><i class="fa fa-check"></i><b>13.2.3</b> Blocs de code R</a></li>
<li class="chapter" data-level="13.2.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#compiler-un-document-knit"><i class="fa fa-check"></i><b>13.2.4</b> Compiler un document (<em>Knit</em>)</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#personnaliser-le-document-généré"><i class="fa fa-check"></i><b>13.3</b> Personnaliser le document généré</a></li>
<li class="chapter" data-level="13.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-des-blocs-de-code-r"><i class="fa fa-check"></i><b>13.4</b> Options des blocs de code R</a><ul>
<li class="chapter" data-level="13.4.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#nom-du-bloc"><i class="fa fa-check"></i><b>13.4.1</b> Nom du bloc</a></li>
<li class="chapter" data-level="13.4.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options"><i class="fa fa-check"></i><b>13.4.2</b> Options</a></li>
<li class="chapter" data-level="13.4.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#modifier-les-options"><i class="fa fa-check"></i><b>13.4.3</b> Modifier les options</a></li>
<li class="chapter" data-level="13.4.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-globales"><i class="fa fa-check"></i><b>13.4.4</b> Options globales</a></li>
<li class="chapter" data-level="13.4.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#mise-en-cache-des-résultats"><i class="fa fa-check"></i><b>13.4.5</b> Mise en cache des résultats</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#rendu-des-tableaux"><i class="fa fa-check"></i><b>13.5</b> Rendu des tableaux</a><ul>
<li class="chapter" data-level="13.5.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-croisés-1"><i class="fa fa-check"></i><b>13.5.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="13.5.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-de-données-et-tris-à-plat"><i class="fa fa-check"></i><b>13.5.2</b> Tableaux de données et tris à plat</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates"><i class="fa fa-check"></i><b>13.6</b> Modèles de documents</a><ul>
<li class="chapter" data-level="13.6.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#slides"><i class="fa fa-check"></i><b>13.6.1</b> Slides</a></li>
<li class="chapter" data-level="13.6.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates-1"><i class="fa fa-check"></i><b>13.6.2</b> Templates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#ressources-5"><i class="fa fa-check"></i><b>13.7</b> Ressources</a></li>
</ul></li>
<li class="part"><span><b>III Aller plus loin</b></span></li>
<li class="chapter" data-level="14" data-path="14-fonctions.html"><a href="14-fonctions.html"><i class="fa fa-check"></i><b>14</b> Écrire ses propres fonctions</a><ul>
<li class="chapter" data-level="14.1" data-path="14-fonctions.html"><a href="14-fonctions.html#introduction-et-exemples"><i class="fa fa-check"></i><b>14.1</b> Introduction et exemples</a><ul>
<li class="chapter" data-level="14.1.1" data-path="14-fonctions.html"><a href="14-fonctions.html#structure-dune-fonction"><i class="fa fa-check"></i><b>14.1.1</b> Structure d’une fonction</a></li>
<li class="chapter" data-level="14.1.2" data-path="14-fonctions.html"><a href="14-fonctions.html#exemple-de-fonction"><i class="fa fa-check"></i><b>14.1.2</b> Exemple de fonction</a></li>
<li class="chapter" data-level="14.1.3" data-path="14-fonctions.html"><a href="14-fonctions.html#effets-de-bord-et-affichage-de-messages"><i class="fa fa-check"></i><b>14.1.3</b> Effets de bord et affichage de messages</a></li>
<li class="chapter" data-level="14.1.4" data-path="14-fonctions.html"><a href="14-fonctions.html#utilité-des-fonctions"><i class="fa fa-check"></i><b>14.1.4</b> Utilité des fonctions</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-et-résultat-dune-fonction"><i class="fa fa-check"></i><b>14.2</b> Arguments et résultat d’une fonction</a><ul>
<li class="chapter" data-level="14.2.1" data-path="14-fonctions.html"><a href="14-fonctions.html#définition-des-arguments"><i class="fa fa-check"></i><b>14.2.1</b> Définition des arguments</a></li>
<li class="chapter" data-level="14.2.2" data-path="14-fonctions.html"><a href="14-fonctions.html#valeurs-par-défaut"><i class="fa fa-check"></i><b>14.2.2</b> Valeurs par défaut</a></li>
<li class="chapter" data-level="14.2.3" data-path="14-fonctions.html"><a href="14-fonctions.html#largument-..."><i class="fa fa-check"></i><b>14.2.3</b> L’argument <code>...</code></a></li>
<li class="chapter" data-level="14.2.4" data-path="14-fonctions.html"><a href="14-fonctions.html#resfunc"><i class="fa fa-check"></i><b>14.2.4</b> Résultat d’une fonction</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables"><i class="fa fa-check"></i><b>14.3</b> Portée des variables</a><ul>
<li class="chapter" data-level="14.3.1" data-path="14-fonctions.html"><a href="14-fonctions.html#une-fonction-peut-accéder-à-un-objet-extérieur"><i class="fa fa-check"></i><b>14.3.1</b> Une fonction peut accéder à un objet extérieur</a></li>
<li class="chapter" data-level="14.3.2" data-path="14-fonctions.html"><a href="14-fonctions.html#les-arguments-et-les-objets-créés-dans-la-fonction-sont-prioritaires"><i class="fa fa-check"></i><b>14.3.2</b> Les arguments et les objets créés dans la fonction sont prioritaires</a></li>
<li class="chapter" data-level="14.3.3" data-path="14-fonctions.html"><a href="14-fonctions.html#un-objet-créé-dans-une-fonction-nexiste-que-dans-cette-fonction"><i class="fa fa-check"></i><b>14.3.3</b> Un objet créé dans une fonction n’existe que dans cette fonction</a></li>
<li class="chapter" data-level="14.3.4" data-path="14-fonctions.html"><a href="14-fonctions.html#on-ne-peut-pas-modifier-un-objet-global-dans-une-fonction"><i class="fa fa-check"></i><b>14.3.4</b> On ne peut pas modifier un objet global dans une fonction</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-comme-objets"><i class="fa fa-check"></i><b>14.4</b> Les fonctions comme objets</a><ul>
<li class="chapter" data-level="14.4.1" data-path="14-fonctions.html"><a href="14-fonctions.html#passer-des-fonctions-comme-argument"><i class="fa fa-check"></i><b>14.4.1</b> Passer des fonctions comme argument</a></li>
<li class="chapter" data-level="14.4.2" data-path="14-fonctions.html"><a href="14-fonctions.html#fonctions-anonymes"><i class="fa fa-check"></i><b>14.4.2</b> Fonctions anonymes</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="14-fonctions.html"><a href="14-fonctions.html#ressources-6"><i class="fa fa-check"></i><b>14.5</b> Ressources</a></li>
<li class="chapter" data-level="14.6" data-path="14-fonctions.html"><a href="14-fonctions.html#exercices-7"><i class="fa fa-check"></i><b>14.6</b> Exercices</a><ul>
<li class="chapter" data-level="14.6.1" data-path="14-fonctions.html"><a href="14-fonctions.html#introduction-et-exemples-1"><i class="fa fa-check"></i><b>14.6.1</b> Introduction et exemples</a></li>
<li class="chapter" data-level="14.6.2" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-et-résultats"><i class="fa fa-check"></i><b>14.6.2</b> Arguments et résultats</a></li>
<li class="chapter" data-level="14.6.3" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables-1"><i class="fa fa-check"></i><b>14.6.3</b> Portée des variables</a></li>
<li class="chapter" data-level="14.6.4" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-comme-objets-1"><i class="fa fa-check"></i><b>14.6.4</b> Les fonctions comme objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html"><i class="fa fa-check"></i><b>15</b> Structures de données</a><ul>
<li class="chapter" data-level="15.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#vecteurs-atomiques"><i class="fa fa-check"></i><b>15.1</b> Vecteurs atomiques</a><ul>
<li class="chapter" data-level="15.1.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#création-dun-vecteur"><i class="fa fa-check"></i><b>15.1.1</b> Création d’un vecteur</a></li>
<li class="chapter" data-level="15.1.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#vecteurs-nommés"><i class="fa fa-check"></i><b>15.1.2</b> Vecteurs nommés</a></li>
<li class="chapter" data-level="15.1.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#types-de-vecteurs"><i class="fa fa-check"></i><b>15.1.3</b> Types de vecteurs</a></li>
<li class="chapter" data-level="15.1.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#sélection-déléments"><i class="fa fa-check"></i><b>15.1.4</b> Sélection d’éléments</a></li>
<li class="chapter" data-level="15.1.5" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#modification"><i class="fa fa-check"></i><b>15.1.5</b> Modification</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#listes"><i class="fa fa-check"></i><b>15.2</b> Listes</a><ul>
<li class="chapter" data-level="15.2.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#création"><i class="fa fa-check"></i><b>15.2.1</b> Création</a></li>
<li class="chapter" data-level="15.2.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#ajout-déléments"><i class="fa fa-check"></i><b>15.2.2</b> Ajout d’éléments</a></li>
<li class="chapter" data-level="15.2.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#sélection-déléments-1"><i class="fa fa-check"></i><b>15.2.3</b> Sélection d’éléments</a></li>
<li class="chapter" data-level="15.2.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#modification-1"><i class="fa fa-check"></i><b>15.2.4</b> Modification</a></li>
<li class="chapter" data-level="15.2.5" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#utilisation"><i class="fa fa-check"></i><b>15.2.5</b> Utilisation</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#data-frame-tibbles"><i class="fa fa-check"></i><b>15.3</b> Tableaux de données (<em>data frame</em> et <em>tibble</em>)</a><ul>
<li class="chapter" data-level="15.3.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#création-1"><i class="fa fa-check"></i><b>15.3.1</b> Création</a></li>
<li class="chapter" data-level="15.3.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#noms-de-colonnes-et-de-lignes"><i class="fa fa-check"></i><b>15.3.2</b> Noms de colonnes et de lignes</a></li>
<li class="chapter" data-level="15.3.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#sélection-de-lignes-et-de-colonnes"><i class="fa fa-check"></i><b>15.3.3</b> Sélection de lignes et de colonnes</a></li>
<li class="chapter" data-level="15.3.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#modification-2"><i class="fa fa-check"></i><b>15.3.4</b> Modification</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#ressources-7"><i class="fa fa-check"></i><b>15.4</b> Ressources</a></li>
<li class="chapter" data-level="15.5" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#exercices-8"><i class="fa fa-check"></i><b>15.5</b> Exercices</a><ul>
<li class="chapter" data-level="15.5.1" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#vecteurs-atomiques-1"><i class="fa fa-check"></i><b>15.5.1</b> Vecteurs atomiques</a></li>
<li class="chapter" data-level="15.5.2" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#listes-1"><i class="fa fa-check"></i><b>15.5.2</b> Listes</a></li>
<li class="chapter" data-level="15.5.3" data-path="15-structures-donnees.html"><a href="15-structures-donnees.html#tableaux-de-données"><i class="fa fa-check"></i><b>15.5.3</b> Tableaux de données</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-boucles-if.html"><a href="16-boucles-if.html"><i class="fa fa-check"></i><b>16</b> Boucles et exécution conditionnelle</a><ul>
<li class="chapter" data-level="16.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-else-exécuter-du-code-sous-certaines-conditions"><i class="fa fa-check"></i><b>16.1</b> <code>if</code>, <code>else</code> : exécuter du code sous certaines conditions</a><ul>
<li class="chapter" data-level="16.1.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if"><i class="fa fa-check"></i><b>16.1.1</b> <code>if</code></a></li>
<li class="chapter" data-level="16.1.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-else-1"><i class="fa fa-check"></i><b>16.1.2</b> <code>if</code> / <code>else</code></a></li>
<li class="chapter" data-level="16.1.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-else-if-else"><i class="fa fa-check"></i><b>16.1.3</b> “<code>if</code>” / “<code>else if</code>” / “<code>else</code>”</a></li>
<li class="chapter" data-level="16.1.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#construction-de-conditions-complexes"><i class="fa fa-check"></i><b>16.1.4</b> Construction de conditions complexes</a></li>
<li class="chapter" data-level="16.1.5" data-path="16-boucles-if.html"><a href="16-boucles-if.html#différence-entre-if-else-et-ifelse"><i class="fa fa-check"></i><b>16.1.5</b> Différence entre <code>if</code> / <code>else</code> et <code>ifelse</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#contrôle-de-lexécution-et-gestion-des-erreurs"><i class="fa fa-check"></i><b>16.2</b> Contrôle de l’exécution et gestion des erreurs</a><ul>
<li class="chapter" data-level="16.2.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#utilisation-de-return-pour-sortir-de-la-fonction"><i class="fa fa-check"></i><b>16.2.1</b> Utilisation de <code>return</code> pour sortir de la fonction</a></li>
<li class="chapter" data-level="16.2.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#warning"><i class="fa fa-check"></i><b>16.2.2</b> <code>warning</code></a></li>
<li class="chapter" data-level="16.2.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#stop-et-stopifnot"><i class="fa fa-check"></i><b>16.2.3</b> <code>stop</code> et <code>stopifnot</code></a></li>
<li class="chapter" data-level="16.2.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#tester-la-présence-dun-argument"><i class="fa fa-check"></i><b>16.2.4</b> Tester la présence d’un argument</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#for-et-while-répéter-des-instructions-dans-une-boucle"><i class="fa fa-check"></i><b>16.3</b> <code>for</code> et <code>while</code> : répéter des instructions dans une boucle</a><ul>
<li class="chapter" data-level="16.3.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#for"><i class="fa fa-check"></i><b>16.3.1</b> <code>for</code></a></li>
<li class="chapter" data-level="16.3.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#while"><i class="fa fa-check"></i><b>16.3.2</b> <code>while</code></a></li>
<li class="chapter" data-level="16.3.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#next-et-break"><i class="fa fa-check"></i><b>16.3.3</b> <code>next</code> et <code>break</code></a></li>
<li class="chapter" data-level="16.3.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#no-boucles"><i class="fa fa-check"></i><b>16.3.4</b> Quand (ne pas) utiliser des boucles</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="16-boucles-if.html"><a href="16-boucles-if.html#débugguer-une-fonction"><i class="fa fa-check"></i><b>16.4</b> Débugguer une fonction</a><ul>
<li class="chapter" data-level="16.4.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#print"><i class="fa fa-check"></i><b>16.4.1</b> print()</a></li>
<li class="chapter" data-level="16.4.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#localiser-une-erreur"><i class="fa fa-check"></i><b>16.4.2</b> Localiser une erreur</a></li>
<li class="chapter" data-level="16.4.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#browser"><i class="fa fa-check"></i><b>16.4.3</b> browser()</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="16-boucles-if.html"><a href="16-boucles-if.html#ressources-boucles"><i class="fa fa-check"></i><b>16.5</b> Ressources</a></li>
<li class="chapter" data-level="16.6" data-path="16-boucles-if.html"><a href="16-boucles-if.html#exercices-9"><i class="fa fa-check"></i><b>16.6</b> Exercices</a><ul>
<li class="chapter" data-level="16.6.1" data-path="16-boucles-if.html"><a href="16-boucles-if.html#if-et-else"><i class="fa fa-check"></i><b>16.6.1</b> <code>if</code> et <code>else</code></a></li>
<li class="chapter" data-level="16.6.2" data-path="16-boucles-if.html"><a href="16-boucles-if.html#contrôle-de-lexécution"><i class="fa fa-check"></i><b>16.6.2</b> Contrôle de l’exécution</a></li>
<li class="chapter" data-level="16.6.3" data-path="16-boucles-if.html"><a href="16-boucles-if.html#boucles"><i class="fa fa-check"></i><b>16.6.3</b> Boucles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html"><i class="fa fa-check"></i><b>17</b> <code>dplyr</code> avancé</a><ul>
<li class="chapter" data-level="17.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-ses-propres-fonctions"><i class="fa fa-check"></i><b>17.1</b> Appliquer ses propres fonctions</a><ul>
<li class="chapter" data-level="17.1.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exemple-avec-mutate"><i class="fa fa-check"></i><b>17.1.1</b> Exemple avec <code>mutate</code></a></li>
<li class="chapter" data-level="17.1.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exemple-avec-summarise"><i class="fa fa-check"></i><b>17.1.2</b> Exemple avec <code>summarise</code></a></li>
<li class="chapter" data-level="17.1.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exemple-avec-rename_with"><i class="fa fa-check"></i><b>17.1.3</b> Exemple avec <code>rename_with</code></a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#across"><i class="fa fa-check"></i><b>17.2</b> <code>across()</code> : appliquer des fonctions à plusieurs colonnes</a><ul>
<li class="chapter" data-level="17.2.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-une-fonction-à-plusieurs-colonnes"><i class="fa fa-check"></i><b>17.2.1</b> Appliquer une fonction à plusieurs colonnes</a></li>
<li class="chapter" data-level="17.2.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#passer-des-arguments-supplémentaires-à-la-fonction-appliquée"><i class="fa fa-check"></i><b>17.2.2</b> Passer des arguments supplémentaires à la fonction appliquée</a></li>
<li class="chapter" data-level="17.2.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#noms-des-nouvelles-colonnes"><i class="fa fa-check"></i><b>17.2.3</b> Noms des nouvelles colonnes</a></li>
<li class="chapter" data-level="17.2.4" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-plusieurs-fonctions-à-plusieurs-colonnes"><i class="fa fa-check"></i><b>17.2.4</b> Appliquer plusieurs fonctions à plusieurs colonnes</a></li>
<li class="chapter" data-level="17.2.5" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#renommer-plusieurs-colonnes-avec-une-fonction"><i class="fa fa-check"></i><b>17.2.5</b> Renommer plusieurs colonnes avec une fonction</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#rowwise-et-c_across-appliquer-une-transformation-ligne-par-ligne"><i class="fa fa-check"></i><b>17.3</b> <code>rowwise()</code> et <code>c_across()</code> : appliquer une transformation ligne par ligne</a></li>
<li class="chapter" data-level="17.4" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#syntaxes-abregees"><i class="fa fa-check"></i><b>17.4</b> Fonctions anonymes et syntaxes abrégées</a></li>
<li class="chapter" data-level="17.5" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#ressources-8"><i class="fa fa-check"></i><b>17.5</b> Ressources</a></li>
<li class="chapter" data-level="17.6" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#exercices-10"><i class="fa fa-check"></i><b>17.6</b> Exercices</a><ul>
<li class="chapter" data-level="17.6.1" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#appliquer-ses-propres-fonctions-1"><i class="fa fa-check"></i><b>17.6.1</b> Appliquer ses propres fonctions</a></li>
<li class="chapter" data-level="17.6.2" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#across-1"><i class="fa fa-check"></i><b>17.6.2</b> <code>across()</code></a></li>
<li class="chapter" data-level="17.6.3" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#rowwise-et-c_across"><i class="fa fa-check"></i><b>17.6.3</b> <code>rowwise()</code> et <code>c_across()</code></a></li>
<li class="chapter" data-level="17.6.4" data-path="17-dplyr-avance.html"><a href="17-dplyr-avance.html#fonctions-anonymes-et-notations-abrégées"><i class="fa fa-check"></i><b>17.6.4</b> Fonctions anonymes et notations abrégées</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="18-purrr.html"><a href="18-purrr.html"><i class="fa fa-check"></i><b>18</b> Itérer avec <code>purrr</code></a><ul>
<li class="chapter" data-level="18.1" data-path="18-purrr.html"><a href="18-purrr.html#exemple-dapplication"><i class="fa fa-check"></i><b>18.1</b> Exemple d’application</a></li>
<li class="chapter" data-level="18.2" data-path="18-purrr.html"><a href="18-purrr.html#map-et-ses-variantes"><i class="fa fa-check"></i><b>18.2</b> <code>map</code> et ses variantes</a><ul>
<li class="chapter" data-level="18.2.1" data-path="18-purrr.html"><a href="18-purrr.html#modes-dappel-de-map"><i class="fa fa-check"></i><b>18.2.1</b> Modes d’appel de <code>map</code></a></li>
<li class="chapter" data-level="18.2.2" data-path="18-purrr.html"><a href="18-purrr.html#variantes-de-map"><i class="fa fa-check"></i><b>18.2.2</b> Variantes de <code>map</code></a></li>
<li class="chapter" data-level="18.2.3" data-path="18-purrr.html"><a href="18-purrr.html#map_dfr-et-map_dfc"><i class="fa fa-check"></i><b>18.2.3</b> <code>map_dfr()</code> et <code>map_dfc()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="18-purrr.html"><a href="18-purrr.html#itérer-sur-les-colonnes-dun-tableau-de-données"><i class="fa fa-check"></i><b>18.3</b> Itérer sur les colonnes d’un tableau de données</a></li>
<li class="chapter" data-level="18.4" data-path="18-purrr.html"><a href="18-purrr.html#modify"><i class="fa fa-check"></i><b>18.4</b> <code>modify</code></a></li>
<li class="chapter" data-level="18.5" data-path="18-purrr.html"><a href="18-purrr.html#imap"><i class="fa fa-check"></i><b>18.5</b> <code>imap</code></a></li>
<li class="chapter" data-level="18.6" data-path="18-purrr.html"><a href="18-purrr.html#walk"><i class="fa fa-check"></i><b>18.6</b> <code>walk</code></a></li>
<li class="chapter" data-level="18.7" data-path="18-purrr.html"><a href="18-purrr.html#map2-et-pmap-itérer-sur-plusieurs-vecteurs-en-parallèle"><i class="fa fa-check"></i><b>18.7</b> <code>map2</code> et <code>pmap</code> : itérer sur plusieurs vecteurs en parallèle</a></li>
<li class="chapter" data-level="18.8" data-path="18-purrr.html"><a href="18-purrr.html#répéter-une-opération"><i class="fa fa-check"></i><b>18.8</b> Répéter une opération</a></li>
<li class="chapter" data-level="18.9" data-path="18-purrr.html"><a href="18-purrr.html#quand-ne-pas-utiliser-map"><i class="fa fa-check"></i><b>18.9</b> Quand (ne pas) utiliser <code>map</code></a></li>
<li class="chapter" data-level="18.10" data-path="18-purrr.html"><a href="18-purrr.html#purrr-vs-apply"><i class="fa fa-check"></i><b>18.10</b> <code>purrr</code> vs <code>*apply</code></a></li>
<li class="chapter" data-level="18.11" data-path="18-purrr.html"><a href="18-purrr.html#ressources-9"><i class="fa fa-check"></i><b>18.11</b> Ressources</a></li>
<li class="chapter" data-level="18.12" data-path="18-purrr.html"><a href="18-purrr.html#exercices-11"><i class="fa fa-check"></i><b>18.12</b> Exercices</a><ul>
<li class="chapter" data-level="18.12.1" data-path="18-purrr.html"><a href="18-purrr.html#map-et-ses-variantes-1"><i class="fa fa-check"></i><b>18.12.1</b> <code>map</code> et ses variantes</a></li>
<li class="chapter" data-level="18.12.2" data-path="18-purrr.html"><a href="18-purrr.html#modify-et-itération-sur-les-colonnes-dun-tableau"><i class="fa fa-check"></i><b>18.12.2</b> <code>modify</code> et itération sur les colonnes d’un tableau</a></li>
<li class="chapter" data-level="18.12.3" data-path="18-purrr.html"><a href="18-purrr.html#imap-et-walk"><i class="fa fa-check"></i><b>18.12.3</b> <code>imap</code> et <code>walk</code></a></li>
<li class="chapter" data-level="18.12.4" data-path="18-purrr.html"><a href="18-purrr.html#map2-et-pmap"><i class="fa fa-check"></i><b>18.12.4</b> <code>map2</code> et <code>pmap</code></a></li>
<li class="chapter" data-level="18.12.5" data-path="18-purrr.html"><a href="18-purrr.html#répéter-une-opération-1"><i class="fa fa-check"></i><b>18.12.5</b> Répéter une opération</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html"><i class="fa fa-check"></i><b>19</b> Programmer avec le <em>tidyverse</em></a><ul>
<li class="chapter" data-level="19.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#spécificités-du-tidyverse"><i class="fa fa-check"></i><b>19.1</b> Spécificités du <em>tidyverse</em></a><ul>
<li class="chapter" data-level="19.1.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#data-masking"><i class="fa fa-check"></i><b>19.1.1</b> <em>data masking</em></a></li>
<li class="chapter" data-level="19.1.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#tidy-selection"><i class="fa fa-check"></i><b>19.1.2</b> <em>tidy selection</em></a></li>
<li class="chapter" data-level="19.1.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utilisation-dans-des-fonctions"><i class="fa fa-check"></i><b>19.1.3</b> Utilisation dans des fonctions</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#programmer-avec-dplyr-et-tidyr"><i class="fa fa-check"></i><b>19.2</b> Programmer avec <code>dplyr</code> et <code>tidyr</code></a><ul>
<li class="chapter" data-level="19.2.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utiliser-une-colonne-passée-en-argument"><i class="fa fa-check"></i><b>19.2.1</b> Utiliser une colonne passée en argument</a></li>
<li class="chapter" data-level="19.2.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#utiliser-une-sélection-de-colonnes-passée-en-argument"><i class="fa fa-check"></i><b>19.2.2</b> Utiliser une sélection de colonnes passée en argument</a></li>
<li class="chapter" data-level="19.2.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#nommer-de-nouvelles-colonnes-à-partir-dun-argument"><i class="fa fa-check"></i><b>19.2.3</b> Nommer de nouvelles colonnes à partir d’un argument</a></li>
<li class="chapter" data-level="19.2.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#désambiguïser-data-et-env"><i class="fa fa-check"></i><b>19.2.4</b> Désambiguïser data et env</a></li>
<li class="chapter" data-level="19.2.5" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#quand-les-arguments-sont-des-chaînes-de-caractères"><i class="fa fa-check"></i><b>19.2.5</b> Quand les arguments sont des chaînes de caractères</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#programmer-avec-ggplot2"><i class="fa fa-check"></i><b>19.3</b> Programmer avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="19.3.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#sélection-de-colonnes-avec-aes"><i class="fa fa-check"></i><b>19.3.1</b> Sélection de colonnes avec <code>aes()</code></a></li>
<li class="chapter" data-level="19.3.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#faceting-1"><i class="fa fa-check"></i><b>19.3.2</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#aide-mémoire"><i class="fa fa-check"></i><b>19.4</b> Aide-mémoire</a></li>
<li class="chapter" data-level="19.5" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ressources-10"><i class="fa fa-check"></i><b>19.5</b> Ressources</a></li>
<li class="chapter" data-level="19.6" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#exercices-12"><i class="fa fa-check"></i><b>19.6</b> Exercices</a><ul>
<li class="chapter" data-level="19.6.1" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#dplyr-et-tidyr"><i class="fa fa-check"></i><b>19.6.1</b> <code>dplyr</code> et <code>tidyr</code></a></li>
<li class="chapter" data-level="19.6.2" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#noms-de-colonnes-en-chaînes-de-caractères"><i class="fa fa-check"></i><b>19.6.2</b> Noms de colonnes en chaînes de caractères</a></li>
<li class="chapter" data-level="19.6.3" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ambiguïté-data-env"><i class="fa fa-check"></i><b>19.6.3</b> Ambiguïté <code>data</code> / <code>env</code></a></li>
<li class="chapter" data-level="19.6.4" data-path="19-programmer-tidyverse.html"><a href="19-programmer-tidyverse.html#ggplot2-1"><i class="fa fa-check"></i><b>19.6.4</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="20-targets.html"><a href="20-targets.html"><i class="fa fa-check"></i><b>20</b> Organiser un projet avec <code>targets</code></a><ul>
<li class="chapter" data-level="20.1" data-path="20-targets.html"><a href="20-targets.html#définition-du-pipeline"><i class="fa fa-check"></i><b>20.1</b> Définition du pipeline</a><ul>
<li class="chapter" data-level="20.1.1" data-path="20-targets.html"><a href="20-targets.html#projet-dexemple"><i class="fa fa-check"></i><b>20.1.1</b> Projet d’exemple</a></li>
<li class="chapter" data-level="20.1.2" data-path="20-targets.html"><a href="20-targets.html#targets.r"><i class="fa fa-check"></i><b>20.1.2</b> <code>_targets.R</code></a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="20-targets.html"><a href="20-targets.html#exécution-du-pipeline"><i class="fa fa-check"></i><b>20.2</b> Exécution du pipeline</a></li>
<li class="chapter" data-level="20.3" data-path="20-targets.html"><a href="20-targets.html#modification-du-pipeline"><i class="fa fa-check"></i><b>20.3</b> Modification du pipeline</a></li>
<li class="chapter" data-level="20.4" data-path="20-targets.html"><a href="20-targets.html#rmarkdown"><i class="fa fa-check"></i><b>20.4</b> RMarkdown</a></li>
<li class="chapter" data-level="20.5" data-path="20-targets.html"><a href="20-targets.html#gestion-des-données-en-cache"><i class="fa fa-check"></i><b>20.5</b> Gestion des données en cache</a></li>
<li class="chapter" data-level="20.6" data-path="20-targets.html"><a href="20-targets.html#avantages-et-limites"><i class="fa fa-check"></i><b>20.6</b> Avantages et limites</a><ul>
<li class="chapter" data-level="20.6.1" data-path="20-targets.html"><a href="20-targets.html#avantages"><i class="fa fa-check"></i><b>20.6.1</b> Avantages</a></li>
<li class="chapter" data-level="20.6.2" data-path="20-targets.html"><a href="20-targets.html#interactivité-et-développement-du-pipeline"><i class="fa fa-check"></i><b>20.6.2</b> Interactivité et développement du pipeline</a></li>
</ul></li>
<li class="chapter" data-level="20.7" data-path="20-targets.html"><a href="20-targets.html#ressources-11"><i class="fa fa-check"></i><b>20.7</b> Ressources</a></li>
</ul></li>
<li class="appendix"><span><b>Annexes</b></span></li>
<li class="chapter" data-level="A" data-path="21-ressources.html"><a href="21-ressources.html"><i class="fa fa-check"></i><b>A</b> Ressources</a><ul>
<li class="chapter" data-level="A.1" data-path="21-ressources.html"><a href="21-ressources.html#aide"><i class="fa fa-check"></i><b>A.1</b> Aide</a><ul>
<li class="chapter" data-level="A.1.1" data-path="21-ressources.html"><a href="21-ressources.html#aide-de-r-et-rstudio"><i class="fa fa-check"></i><b>A.1.1</b> Aide de R et RStudio</a></li>
<li class="chapter" data-level="A.1.2" data-path="21-ressources.html"><a href="21-ressources.html#aide-en-ligne"><i class="fa fa-check"></i><b>A.1.2</b> Aide en ligne</a></li>
<li class="chapter" data-level="A.1.3" data-path="21-ressources.html"><a href="21-ressources.html#antisèches"><i class="fa fa-check"></i><b>A.1.3</b> Antisèches</a></li>
<li class="chapter" data-level="A.1.4" data-path="21-ressources.html"><a href="21-ressources.html#où-poser-des-questions"><i class="fa fa-check"></i><b>A.1.4</b> Où poser des questions</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="21-ressources.html"><a href="21-ressources.html#ouvrages-blogs-moocs"><i class="fa fa-check"></i><b>A.2</b> Ouvrages, blogs, MOOCs…</a><ul>
<li class="chapter" data-level="A.2.1" data-path="21-ressources.html"><a href="21-ressources.html#francophones"><i class="fa fa-check"></i><b>A.2.1</b> Francophones</a></li>
<li class="chapter" data-level="A.2.2" data-path="21-ressources.html"><a href="21-ressources.html#anglophones"><i class="fa fa-check"></i><b>A.2.2</b> Anglophones</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="21-ressources.html"><a href="21-ressources.html#extensions-1"><i class="fa fa-check"></i><b>A.3</b> Extensions</a><ul>
<li class="chapter" data-level="A.3.1" data-path="21-ressources.html"><a href="21-ressources.html#où-trouver-des-extensions-intéressantes"><i class="fa fa-check"></i><b>A.3.1</b> Où trouver des extensions intéressantes ?</a></li>
<li class="chapter" data-level="A.3.2" data-path="21-ressources.html"><a href="21-ressources.html#lextension-questionr"><i class="fa fa-check"></i><b>A.3.2</b> L’extension <code>questionr</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction à R et au tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="boucles-et-exécution-conditionnelle" class="section level1">
<h1><span class="header-section-number">Partie 16</span> Boucles et exécution conditionnelle</h1>
<p>Nous avons vu précédemment comment écrire nos propres fonctions. Cette section présente des éléments du langage qui permettent de programmer des actions un peu plus complexes : exécuter du code de manière conditionnelle, selon le résultat d’un test, et répéter des opérations avec des boucles.</p>
<p>Les notions décrites dans cette partie s’appliquent pour le développement de fonctions, mais peuvent aussi être mises en œuvre à tout moment dans un script.</p>
<p>On commence par charger les jeux de données d’exemple utilisés par la suite :</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="16-boucles-if.html#cb798-1"></a><span class="kw">library</span>(questionr)</span>
<span id="cb798-2"><a href="16-boucles-if.html#cb798-2"></a><span class="kw">data</span>(hdv2003)</span>
<span id="cb798-3"><a href="16-boucles-if.html#cb798-3"></a><span class="kw">data</span>(rp2012)</span></code></pre></div>
<div id="if-else-exécuter-du-code-sous-certaines-conditions" class="section level2">
<h2><span class="header-section-number">16.1</span> <code>if</code>, <code>else</code> : exécuter du code sous certaines conditions</h2>
<div id="if" class="section level3">
<h3><span class="header-section-number">16.1.1</span> <code>if</code></h3>
<p>L’instruction <code>if</code> permet de n’exécuter du code que si une condition est remplie.</p>
<p><img src="resources/figures/structure_if.svg" /></p>
<p><code>if</code> prend une condition (entre parenthèses) puis un bloc de code (entre accolades) qui n’est exécuté que si la condition est vraie.</p>
<p>Par exemple, dans le code suivant, le message <code>Bonjour !</code> ne sera affiché que si la valeur de l’objet <code>prenom</code> vaut <code>"Pierre-Edmond"</code> :</p>
<p>Prenons tout de suite un exemple :</p>
<div class="sourceCode" id="cb799"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb799-1"><a href="16-boucles-if.html#cb799-1"></a>prenom &lt;-<span class="st"> &quot;Pierre-Edmond&quot;</span></span>
<span id="cb799-2"><a href="16-boucles-if.html#cb799-2"></a><span class="cf">if</span> (prenom <span class="op">==</span><span class="st"> &quot;Pierre-Edmond&quot;</span>) {</span>
<span id="cb799-3"><a href="16-boucles-if.html#cb799-3"></a>    <span class="kw">message</span>(<span class="st">&quot;Bonjour !&quot;</span>)</span>
<span id="cb799-4"><a href="16-boucles-if.html#cb799-4"></a>}</span>
<span id="cb799-5"><a href="16-boucles-if.html#cb799-5"></a><span class="co">#&gt; Bonjour !</span></span></code></pre></div>
<p>On peut utiliser ce code pour créer une passionnante fonction qui a pour objectif de ne dire bonjour qu’aux personnes qui s’appellent Pierre-Edmond :</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="16-boucles-if.html#cb800-1"></a>bonjour_pierre_edmond &lt;-<span class="st"> </span><span class="cf">function</span>(prenom) {</span>
<span id="cb800-2"><a href="16-boucles-if.html#cb800-2"></a>    <span class="cf">if</span> (prenom <span class="op">==</span><span class="st"> &quot;Pierre-Edmond&quot;</span>) {</span>
<span id="cb800-3"><a href="16-boucles-if.html#cb800-3"></a>        <span class="kw">message</span>(<span class="st">&quot;Bonjour !&quot;</span>)</span>
<span id="cb800-4"><a href="16-boucles-if.html#cb800-4"></a>    }</span>
<span id="cb800-5"><a href="16-boucles-if.html#cb800-5"></a>}</span>
<span id="cb800-6"><a href="16-boucles-if.html#cb800-6"></a></span>
<span id="cb800-7"><a href="16-boucles-if.html#cb800-7"></a><span class="kw">bonjour_pierre_edmond</span>(<span class="st">&quot;Pierre-Edmond&quot;</span>)</span>
<span id="cb800-8"><a href="16-boucles-if.html#cb800-8"></a><span class="co">#&gt; Bonjour !</span></span>
<span id="cb800-9"><a href="16-boucles-if.html#cb800-9"></a></span>
<span id="cb800-10"><a href="16-boucles-if.html#cb800-10"></a><span class="kw">bonjour_pierre_edmond</span>(<span class="st">&quot;Valérie-Charlotte&quot;</span>)</span></code></pre></div>
<p>Une autre utilisation possible (et un peu plus utile) dans le cadre d’une fonction est de n’exécuter certaines instructions que si la valeur d’un argument remplit une certaine condition. Dans l’exemple suivant, on n’applique la fonction <code>round()</code> que si l’argument <code>arrondir</code> vaut <code>TRUE</code>.</p>
<div class="sourceCode" id="cb801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb801-1"><a href="16-boucles-if.html#cb801-1"></a>moyenne &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">arrondir =</span> <span class="ot">TRUE</span>) {</span>
<span id="cb801-2"><a href="16-boucles-if.html#cb801-2"></a>    res &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb801-3"><a href="16-boucles-if.html#cb801-3"></a>    <span class="cf">if</span> (arrondir) {</span>
<span id="cb801-4"><a href="16-boucles-if.html#cb801-4"></a>        res &lt;-<span class="st"> </span><span class="kw">round</span>(res)</span>
<span id="cb801-5"><a href="16-boucles-if.html#cb801-5"></a>    }</span>
<span id="cb801-6"><a href="16-boucles-if.html#cb801-6"></a>    res</span>
<span id="cb801-7"><a href="16-boucles-if.html#cb801-7"></a>}</span>
<span id="cb801-8"><a href="16-boucles-if.html#cb801-8"></a></span>
<span id="cb801-9"><a href="16-boucles-if.html#cb801-9"></a>v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.4</span>, <span class="fl">2.3</span>, <span class="fl">8.9</span>)</span>
<span id="cb801-10"><a href="16-boucles-if.html#cb801-10"></a><span class="kw">moyenne</span>(v)</span>
<span id="cb801-11"><a href="16-boucles-if.html#cb801-11"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb801-12"><a href="16-boucles-if.html#cb801-12"></a><span class="kw">moyenne</span>(v, <span class="dt">arrondir =</span> <span class="ot">FALSE</span>)</span>
<span id="cb801-13"><a href="16-boucles-if.html#cb801-13"></a><span class="co">#&gt; [1] 4.2</span></span></code></pre></div>
<p>À noter que quand le bloc de code qui suit une instruction <code>if</code> ne comporte qu’une seule instruction, on peut omettre les accolades qui l’entourent. Les syntaxe suivantes sont donc équivalentes :</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="16-boucles-if.html#cb802-1"></a><span class="cf">if</span> (arrondir) {</span>
<span id="cb802-2"><a href="16-boucles-if.html#cb802-2"></a>    res &lt;-<span class="st"> </span><span class="kw">round</span>(res)</span>
<span id="cb802-3"><a href="16-boucles-if.html#cb802-3"></a>}</span>
<span id="cb802-4"><a href="16-boucles-if.html#cb802-4"></a></span>
<span id="cb802-5"><a href="16-boucles-if.html#cb802-5"></a><span class="cf">if</span> (arrondir) res &lt;-<span class="st"> </span><span class="kw">round</span>(res)</span>
<span id="cb802-6"><a href="16-boucles-if.html#cb802-6"></a></span>
<span id="cb802-7"><a href="16-boucles-if.html#cb802-7"></a><span class="cf">if</span> (arrondir) </span>
<span id="cb802-8"><a href="16-boucles-if.html#cb802-8"></a>    res &lt;-<span class="st"> </span><span class="kw">round</span>(res)</span></code></pre></div>
<p>Pour des raisons de lisibilité, dans ce qui suit on conservera les accolades dans tous les cas.</p>
</div>
<div id="if-else-1" class="section level3">
<h3><span class="header-section-number">16.1.2</span> <code>if</code> / <code>else</code></h3>
<p>On utilise souvent <code>if</code> en conjonction avec l’instruction <code>else</code>. <code>else</code> précède un autre bloc de code R qui ne s’exécute que si la condition donnée à <code>if</code> est fausse :</p>
<p><img src="resources/figures/structure_if_else.svg" /></p>
<p>On peut ainsi utiliser <code>if</code> / <code>else</code> pour une nouvelle fonction fort utile qui nous évitera bien des désagréments météorologiques :</p>
<div class="sourceCode" id="cb803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb803-1"><a href="16-boucles-if.html#cb803-1"></a>conseil_vestimentaire &lt;-<span class="st"> </span><span class="cf">function</span>(temperature) {</span>
<span id="cb803-2"><a href="16-boucles-if.html#cb803-2"></a>    <span class="cf">if</span> (temperature <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span>) {</span>
<span id="cb803-3"><a href="16-boucles-if.html#cb803-3"></a>        <span class="kw">message</span>(<span class="st">&quot;La polaire n&#39;est pas forcément nécessaire.&quot;</span>)</span>
<span id="cb803-4"><a href="16-boucles-if.html#cb803-4"></a>    } <span class="cf">else</span> {</span>
<span id="cb803-5"><a href="16-boucles-if.html#cb803-5"></a>        <span class="kw">message</span>(<span class="st">&quot;Vous devriez prendre une petite laine.&quot;</span>)</span>
<span id="cb803-6"><a href="16-boucles-if.html#cb803-6"></a>    }</span>
<span id="cb803-7"><a href="16-boucles-if.html#cb803-7"></a>}</span>
<span id="cb803-8"><a href="16-boucles-if.html#cb803-8"></a></span>
<span id="cb803-9"><a href="16-boucles-if.html#cb803-9"></a><span class="kw">conseil_vestimentaire</span>(<span class="op">-</span><span class="dv">5</span>)</span>
<span id="cb803-10"><a href="16-boucles-if.html#cb803-10"></a><span class="co">#&gt; Vous devriez prendre une petite laine.</span></span></code></pre></div>
<p>Plus utile, on peut l’utiliser pour effectuer deux actions différentes en fonction de la valeur d’un argument. La fonction suivante génère deux graphiques différents selon le type du vecteur passé en argument :</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="16-boucles-if.html#cb804-1"></a>graph_var &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb804-2"><a href="16-boucles-if.html#cb804-2"></a>    <span class="cf">if</span> (<span class="kw">is.character</span>(x)) {</span>
<span id="cb804-3"><a href="16-boucles-if.html#cb804-3"></a>        <span class="kw">barplot</span>(<span class="kw">table</span>(x))</span>
<span id="cb804-4"><a href="16-boucles-if.html#cb804-4"></a>    } <span class="cf">else</span> {</span>
<span id="cb804-5"><a href="16-boucles-if.html#cb804-5"></a>        <span class="kw">hist</span>(x)</span>
<span id="cb804-6"><a href="16-boucles-if.html#cb804-6"></a>    }</span>
<span id="cb804-7"><a href="16-boucles-if.html#cb804-7"></a>}</span>
<span id="cb804-8"><a href="16-boucles-if.html#cb804-8"></a></span>
<span id="cb804-9"><a href="16-boucles-if.html#cb804-9"></a><span class="kw">graph_var</span>(<span class="kw">c</span>(<span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Citron&quot;</span>))</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-837-1.svg" width="672" /></p>
<div class="sourceCode" id="cb805"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb805-1"><a href="16-boucles-if.html#cb805-1"></a><span class="kw">graph_var</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>))</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-837-2.svg" width="672" /></p>
<p>On peut évidemment passer des conditions plus complexes. Dans notre fonction, le test <code>is.character(x)</code> échoue si <code>x</code> est un facteur, alors qu’on souhaiterait quand même réaliser un <code>barplot</code>. On peut donc compléter la condition du <code>if</code> :</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="16-boucles-if.html#cb806-1"></a>graph_var &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb806-2"><a href="16-boucles-if.html#cb806-2"></a>    <span class="cf">if</span> (<span class="kw">is.character</span>(x) <span class="op">||</span><span class="st"> </span><span class="kw">is.factor</span>(x)) {</span>
<span id="cb806-3"><a href="16-boucles-if.html#cb806-3"></a>        <span class="kw">barplot</span>(<span class="kw">table</span>(x))</span>
<span id="cb806-4"><a href="16-boucles-if.html#cb806-4"></a>    } <span class="cf">else</span> {</span>
<span id="cb806-5"><a href="16-boucles-if.html#cb806-5"></a>        <span class="kw">hist</span>(x)</span>
<span id="cb806-6"><a href="16-boucles-if.html#cb806-6"></a>    }</span>
<span id="cb806-7"><a href="16-boucles-if.html#cb806-7"></a>}</span>
<span id="cb806-8"><a href="16-boucles-if.html#cb806-8"></a></span>
<span id="cb806-9"><a href="16-boucles-if.html#cb806-9"></a><span class="kw">graph_var</span>(<span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Citron&quot;</span>)))</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-838-1.svg" width="672" /></p>
</div>
<div id="if-else-if-else" class="section level3">
<h3><span class="header-section-number">16.1.3</span> “<code>if</code>” / “<code>else if</code>” / “<code>else</code>”</h3>
<p>On peut aussi utiliser des blocs supplémentaires <code>else if</code> qui permettent d’ajouter de nouvelles conditions. Dès qu’une condition est vraie, le bloc de code correspondant est exécuté. Le dernier bloc <code>else</code> est exécuté si aucune des conditions n’est vraie.</p>
<p>On peut donc améliorer encore notre fonction <code>graph_var()</code> pour tester les différents types explicitement et afficher un message si aucun type géré n’a été reconnu.</p>
<div class="sourceCode" id="cb807"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb807-1"><a href="16-boucles-if.html#cb807-1"></a>graph_var &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb807-2"><a href="16-boucles-if.html#cb807-2"></a>    <span class="cf">if</span> (<span class="kw">is.character</span>(x) <span class="op">||</span><span class="st"> </span><span class="kw">is.factor</span>(x)) {</span>
<span id="cb807-3"><a href="16-boucles-if.html#cb807-3"></a>        <span class="kw">barplot</span>(<span class="kw">table</span>(x))</span>
<span id="cb807-4"><a href="16-boucles-if.html#cb807-4"></a>    } <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">is.numeric</span>(x)) {</span>
<span id="cb807-5"><a href="16-boucles-if.html#cb807-5"></a>        <span class="kw">hist</span>(x)</span>
<span id="cb807-6"><a href="16-boucles-if.html#cb807-6"></a>    } <span class="cf">else</span> {</span>
<span id="cb807-7"><a href="16-boucles-if.html#cb807-7"></a>        <span class="kw">message</span>(<span class="st">&quot;Le type de x n&#39;est pas géré par la fonction&quot;</span>)</span>
<span id="cb807-8"><a href="16-boucles-if.html#cb807-8"></a>    }</span>
<span id="cb807-9"><a href="16-boucles-if.html#cb807-9"></a>}</span>
<span id="cb807-10"><a href="16-boucles-if.html#cb807-10"></a></span>
<span id="cb807-11"><a href="16-boucles-if.html#cb807-11"></a><span class="kw">graph_var</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>))</span>
<span id="cb807-12"><a href="16-boucles-if.html#cb807-12"></a><span class="co">#&gt; Le type de x n&#39;est pas géré par la fonction</span></span></code></pre></div>
<p>Attention, seul le bloc de la première condition vraie est exécuté, l’ordre des conditions est donc important. Dans l’exemple suivant, le second bloc n’est jamais exécuté et donc le second message jamais affiché.</p>
<div class="sourceCode" id="cb808"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb808-1"><a href="16-boucles-if.html#cb808-1"></a>test_x &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb808-2"><a href="16-boucles-if.html#cb808-2"></a>    <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">100</span>) {</span>
<span id="cb808-3"><a href="16-boucles-if.html#cb808-3"></a>        <span class="kw">message</span>(<span class="st">&quot;x est inférieur à 100&quot;</span>)</span>
<span id="cb808-4"><a href="16-boucles-if.html#cb808-4"></a>    } <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) {</span>
<span id="cb808-5"><a href="16-boucles-if.html#cb808-5"></a>        <span class="kw">message</span>(<span class="st">&quot;x est inférieur à 10&quot;</span>)</span>
<span id="cb808-6"><a href="16-boucles-if.html#cb808-6"></a>    }</span>
<span id="cb808-7"><a href="16-boucles-if.html#cb808-7"></a>}</span>
<span id="cb808-8"><a href="16-boucles-if.html#cb808-8"></a></span>
<span id="cb808-9"><a href="16-boucles-if.html#cb808-9"></a><span class="kw">test_x</span>(<span class="dv">5</span>)</span>
<span id="cb808-10"><a href="16-boucles-if.html#cb808-10"></a><span class="co">#&gt; x est inférieur à 100</span></span></code></pre></div>
<p>Il est donc important d’ordonner les conditions de la plus spécifique à la plus générale.</p>
</div>
<div id="construction-de-conditions-complexes" class="section level3">
<h3><span class="header-section-number">16.1.4</span> Construction de conditions complexes</h3>
<p>On peut combiner plusieurs tests avec les opérateurs logiques classiques :</p>
<ul>
<li><code>&amp;&amp;</code> est l’opérateur “et”, qui est vrai si les deux conditions qu’il réunit sont vraies</li>
<li><code>||</code> est l’opérateur “ou”, qui est vrai si au moins l’une des deux conditions qu’il réunit sont vraies</li>
<li><code>!</code> est l’opérateur “non”, qui teste si la condition qu’il précède est fausse</li>
</ul>
<p>Ainsi, si on veut qu’une variable <code>temperature</code> soit comprise entre 15 et 25, on écrira :</p>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb809-1"><a href="16-boucles-if.html#cb809-1"></a>verifie_temperature &lt;-<span class="st"> </span><span class="cf">function</span>(temperature) {</span>
<span id="cb809-2"><a href="16-boucles-if.html#cb809-2"></a>    <span class="cf">if</span> (temperature <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">&amp;&amp;</span><span class="st"> </span>temperature <span class="op">&lt;=</span><span class="st"> </span><span class="dv">25</span>) {</span>
<span id="cb809-3"><a href="16-boucles-if.html#cb809-3"></a>        <span class="kw">message</span>(<span class="st">&quot;Température ok&quot;</span>)</span>
<span id="cb809-4"><a href="16-boucles-if.html#cb809-4"></a>    }</span>
<span id="cb809-5"><a href="16-boucles-if.html#cb809-5"></a>}</span>
<span id="cb809-6"><a href="16-boucles-if.html#cb809-6"></a><span class="kw">verifie_temperature</span>(<span class="dv">20</span>)</span></code></pre></div>
<p>Si on souhaite tester que <code>temperature</code> est inférieure à 15 ou supérieure à 25 :</p>
<div class="sourceCode" id="cb810"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb810-1"><a href="16-boucles-if.html#cb810-1"></a>verifie_temperature &lt;-<span class="st"> </span><span class="cf">function</span>(temperature) {</span>
<span id="cb810-2"><a href="16-boucles-if.html#cb810-2"></a>    <span class="cf">if</span> (temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">15</span> <span class="op">||</span><span class="st"> </span>temperature <span class="op">&gt;</span><span class="st"> </span><span class="dv">25</span>) {</span>
<span id="cb810-3"><a href="16-boucles-if.html#cb810-3"></a>        <span class="kw">message</span>(<span class="st">&quot;Température pas glop&quot;</span>)</span>
<span id="cb810-4"><a href="16-boucles-if.html#cb810-4"></a>    }</span>
<span id="cb810-5"><a href="16-boucles-if.html#cb810-5"></a>}</span>
<span id="cb810-6"><a href="16-boucles-if.html#cb810-6"></a><span class="kw">verifie_temperature</span>(<span class="dv">10</span>)</span></code></pre></div>
<p>Enfin, si on souhaite tester que <code>temperature</code> n’est pas égale à <code>NULL</code> :</p>
<div class="sourceCode" id="cb811"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb811-1"><a href="16-boucles-if.html#cb811-1"></a>verifie_temperature &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">temperature =</span> <span class="ot">NULL</span>) {</span>
<span id="cb811-2"><a href="16-boucles-if.html#cb811-2"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(temperature)) {</span>
<span id="cb811-3"><a href="16-boucles-if.html#cb811-3"></a>        <span class="kw">message</span>(<span class="st">&quot;Merci d&#39;avoir indiqué une température&quot;</span>)</span>
<span id="cb811-4"><a href="16-boucles-if.html#cb811-4"></a>    }</span>
<span id="cb811-5"><a href="16-boucles-if.html#cb811-5"></a>}</span>
<span id="cb811-6"><a href="16-boucles-if.html#cb811-6"></a><span class="kw">verifie_temperature</span>(<span class="dv">15</span>)</span></code></pre></div>
<p>On pourra noter qu’il existe deux types d’opérateurs “et” et “ou” dans R :</p>
<ul>
<li><code>&amp;</code> et <code>|</code> sont des opérateurs <em>vectorisés</em>. Ils peuvent s’appliquer à des vecteurs et retourneront un vecteur de <code>TRUE</code> et <code>FALSE</code></li>
<li><code>&amp;&amp;</code> et <code>||</code> ne peuvent retourner qu’une seule valeur, et si on leur fournit des vecteurs ils n’utiliseront que leurs premières valeurs</li>
</ul>
<div class="sourceCode" id="cb812"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb812-1"><a href="16-boucles-if.html#cb812-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb812-2"><a href="16-boucles-if.html#cb812-2"></a>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="dv">2</span></span>
<span id="cb812-3"><a href="16-boucles-if.html#cb812-3"></a><span class="co">#&gt; [1]  TRUE  TRUE FALSE FALSE FALSE</span></span>
<span id="cb812-4"><a href="16-boucles-if.html#cb812-4"></a>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="dv">2</span></span>
<span id="cb812-5"><a href="16-boucles-if.html#cb812-5"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<div class="rmdimportant">
<p>
Comme la condition passée à un <code>if</code> ne doit retourner qu’une seule valeur (et non un vecteur), on utilisera de préférence <code>&amp;&amp;</code> et <code>||</code>.
</p>
</div>
</div>
<div id="différence-entre-if-else-et-ifelse" class="section level3">
<h3><span class="header-section-number">16.1.5</span> Différence entre <code>if</code> / <code>else</code> et <code>ifelse</code></h3>
<p>Une source fréquente de confusion concerne la différence entre les instructions <code>if</code> / <code>else</code> et la fonction <code>ifelse()</code> de R base (ou son équivalent <code>if_else</code> de <code>dplyr</code>, voir section <a href="09-recodages.html#if-else">9.4.1</a>). Les deux sont pourtant très différentes :</p>
<ul>
<li><code>if</code> / <code>else</code> s’utilisent quand on teste une seule condition et qu’on veut exécuter des blocs de code différents selon son résultat</li>
<li><code>ifelse</code> et <code>if_else</code> appliquent un test à tous les éléments d’un vecteur et retournent un vecteur de valeurs logiques</li>
</ul>
<p>Premier cas de figure : un objet <code>x</code> contient une seule valeur et on veut afficher un message différent selon si celle-ci est inférieure ou supérieure à 10. Dans ce cas on utilise <code>if</code> / <code>else</code>.</p>
<div class="sourceCode" id="cb813"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb813-1"><a href="16-boucles-if.html#cb813-1"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb813-2"><a href="16-boucles-if.html#cb813-2"></a></span>
<span id="cb813-3"><a href="16-boucles-if.html#cb813-3"></a><span class="cf">if</span> (x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) {</span>
<span id="cb813-4"><a href="16-boucles-if.html#cb813-4"></a>    <span class="kw">message</span>(<span class="st">&quot;&gt;=10&quot;</span>)</span>
<span id="cb813-5"><a href="16-boucles-if.html#cb813-5"></a>} <span class="cf">else</span> {</span>
<span id="cb813-6"><a href="16-boucles-if.html#cb813-6"></a>    <span class="kw">message</span>(<span class="st">&quot;&lt;10&quot;</span>)</span>
<span id="cb813-7"><a href="16-boucles-if.html#cb813-7"></a>}</span>
<span id="cb813-8"><a href="16-boucles-if.html#cb813-8"></a><span class="co">#&gt; &lt;10</span></span></code></pre></div>
<p>Deuxième cas de figure : <code>x</code> est un vecteur et on souhaite recoder chacune de ses valeurs selon le même critère que ci-dessus. Dans ce cas on utilise <code>ifelse</code> ou <code>if_else</code>.</p>
<div class="sourceCode" id="cb814"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb814-1"><a href="16-boucles-if.html#cb814-1"></a>x &lt;-<span class="st"> </span><span class="dv">5</span><span class="op">:</span><span class="dv">15</span></span>
<span id="cb814-2"><a href="16-boucles-if.html#cb814-2"></a></span>
<span id="cb814-3"><a href="16-boucles-if.html#cb814-3"></a><span class="kw">ifelse</span>(x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;&gt;=10&quot;</span>, <span class="st">&quot;&lt;10&quot;</span>)</span>
<span id="cb814-4"><a href="16-boucles-if.html#cb814-4"></a><span class="co">#&gt;  [1] &quot;&lt;10&quot;  &quot;&lt;10&quot;  &quot;&lt;10&quot;  &quot;&lt;10&quot;  &quot;&lt;10&quot;  &quot;&gt;=10&quot; &quot;&gt;=10&quot; &quot;&gt;=10&quot; &quot;&gt;=10&quot; &quot;&gt;=10&quot;</span></span>
<span id="cb814-5"><a href="16-boucles-if.html#cb814-5"></a><span class="co">#&gt; [11] &quot;&gt;=10&quot;</span></span></code></pre></div>
<p>Une erreur fréquente, notamment quand on est dans une fonction, est de passer à <code>if</code> une condition appliquée à un vecteur. Dans ce cas R a la bonne idée d’afficher un message d’avertissement.</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb815-1"><a href="16-boucles-if.html#cb815-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb815-2"><a href="16-boucles-if.html#cb815-2"></a></span>
<span id="cb815-3"><a href="16-boucles-if.html#cb815-3"></a><span class="cf">if</span> (x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb815-4"><a href="16-boucles-if.html#cb815-4"></a>    <span class="kw">message</span>(<span class="st">&quot;&gt;=5&quot;</span>)</span>
<span id="cb815-5"><a href="16-boucles-if.html#cb815-5"></a>}</span>
<span id="cb815-6"><a href="16-boucles-if.html#cb815-6"></a><span class="co">#&gt; Warning in if (x &gt;= 5) {: the condition has length &gt; 1 and only the first</span></span>
<span id="cb815-7"><a href="16-boucles-if.html#cb815-7"></a><span class="co">#&gt; element will be used</span></span></code></pre></div>
<div class="rmdimportant">
<p>
À retenir donc : quand on utilise l’instruction <code>if</code>, la condition qui lui est passée entre parenthèses ne doit renvoyer qu’une seule valeur <code>TRUE</code> ou <code>FALSE</code>.
</p>
</div>
</div>
</div>
<div id="contrôle-de-lexécution-et-gestion-des-erreurs" class="section level2">
<h2><span class="header-section-number">16.2</span> Contrôle de l’exécution et gestion des erreurs</h2>
<p>L’instruction <code>if</code> est souvent utilisée dans des fonctions pour valider les valeurs passées en arguments, ou plus généralement pour contrôler que l’exécution du code se déroule comme prévu.</p>
<div id="utilisation-de-return-pour-sortir-de-la-fonction" class="section level3">
<h3><span class="header-section-number">16.2.1</span> Utilisation de <code>return</code> pour sortir de la fonction</h3>
<p>Une première utilisation peut être d’utiliser un <code>return</code> pour interrompre l’exécution de la fonction et retourner un résultat. On a en effet vu section <a href="14-fonctions.html#resfunc">14.2.4</a> que dès que R rencontre un <code>return</code> dans une fonction, il interrompt immédiatement l’exécution de celle-ci.</p>
<p>La fonction suivante retourne la longueur du mot le plus long dans un vecteur de chaînes de caractères. On ajoute donc un test qui retourne <code>NA</code> dans le cas où le vecteur passé en argument serait d’un type différent.</p>
<div class="sourceCode" id="cb816"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb816-1"><a href="16-boucles-if.html#cb816-1"></a>longueur_max &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb816-2"><a href="16-boucles-if.html#cb816-2"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.character</span>(x)) {</span>
<span id="cb816-3"><a href="16-boucles-if.html#cb816-3"></a>        <span class="kw">return</span>(<span class="ot">NA</span>)</span>
<span id="cb816-4"><a href="16-boucles-if.html#cb816-4"></a>    }</span>
<span id="cb816-5"><a href="16-boucles-if.html#cb816-5"></a>    <span class="kw">max</span>(<span class="kw">nchar</span>(x))</span>
<span id="cb816-6"><a href="16-boucles-if.html#cb816-6"></a>}</span>
<span id="cb816-7"><a href="16-boucles-if.html#cb816-7"></a></span>
<span id="cb816-8"><a href="16-boucles-if.html#cb816-8"></a><span class="kw">longueur_max</span>(<span class="kw">c</span>(<span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Citron&quot;</span>))</span>
<span id="cb816-9"><a href="16-boucles-if.html#cb816-9"></a><span class="co">#&gt; [1] 6</span></span>
<span id="cb816-10"><a href="16-boucles-if.html#cb816-10"></a><span class="kw">longueur_max</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb816-11"><a href="16-boucles-if.html#cb816-11"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div id="warning" class="section level3">
<h3><span class="header-section-number">16.2.2</span> <code>warning</code></h3>
<p>La fonction <code>warning</code> fonctionne comme <code>message</code> mais permet d’afficher un avertissement. Celui-ci est présenté différemment dans la console de manière à attirer l’attention sur un point particulier. Il indique également la fonction qui a déclenché l’avertissement, ce qui peut être utile pour retrouver l’origine du problème.</p>
<p>Dans la fonction précédente, on peut ajouter un avertissement dans le cas où le vecteur passé en argument n’est pas de type <code>character</code>.</p>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb817-1"><a href="16-boucles-if.html#cb817-1"></a>longueur_max &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb817-2"><a href="16-boucles-if.html#cb817-2"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.character</span>(x)) {</span>
<span id="cb817-3"><a href="16-boucles-if.html#cb817-3"></a>        <span class="kw">warning</span>(<span class="st">&quot;x n&#39;est pas de type character, le résultat vaut NA.&quot;</span>)</span>
<span id="cb817-4"><a href="16-boucles-if.html#cb817-4"></a>        <span class="kw">return</span>(<span class="ot">NA</span>)</span>
<span id="cb817-5"><a href="16-boucles-if.html#cb817-5"></a>    }</span>
<span id="cb817-6"><a href="16-boucles-if.html#cb817-6"></a>    <span class="kw">max</span>(<span class="kw">nchar</span>(x))</span>
<span id="cb817-7"><a href="16-boucles-if.html#cb817-7"></a>}</span>
<span id="cb817-8"><a href="16-boucles-if.html#cb817-8"></a></span>
<span id="cb817-9"><a href="16-boucles-if.html#cb817-9"></a><span class="kw">longueur_max</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb817-10"><a href="16-boucles-if.html#cb817-10"></a><span class="co">#&gt; Warning in longueur_max(1:5): x n&#39;est pas de type character, le résultat vaut</span></span>
<span id="cb817-11"><a href="16-boucles-if.html#cb817-11"></a><span class="co">#&gt; NA.</span></span>
<span id="cb817-12"><a href="16-boucles-if.html#cb817-12"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div id="stop-et-stopifnot" class="section level3">
<h3><span class="header-section-number">16.2.3</span> <code>stop</code> et <code>stopifnot</code></h3>
<p><code>stop</code> fonctionne comme <code>warning</code> mais déclenche une erreur qui interrompt totalement l’exécution du code. Quand R le rencontre dans une fonction, il sort immédiatement de la fonction, ne retourne aucun résultat, et il interrompt également toutes les autres instructions en attente d’exécution.</p>
<p>On peut ainsi considérer, toujours dans la fonction <code>longueur_max</code>, que le fait de ne pas fournir en argument un vecteur de type <code>character</code> est suffisamment “grave” pour interrompre l’exécution en cours et forcer la personne qui utilise la fonction à régler le problème.</p>
<div class="sourceCode" id="cb818"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb818-1"><a href="16-boucles-if.html#cb818-1"></a>longueur_max &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb818-2"><a href="16-boucles-if.html#cb818-2"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.character</span>(x)) {</span>
<span id="cb818-3"><a href="16-boucles-if.html#cb818-3"></a>        <span class="kw">stop</span>(<span class="st">&quot;x doit être de type character.&quot;</span>)</span>
<span id="cb818-4"><a href="16-boucles-if.html#cb818-4"></a>    }</span>
<span id="cb818-5"><a href="16-boucles-if.html#cb818-5"></a>    <span class="kw">max</span>(<span class="kw">nchar</span>(x))</span>
<span id="cb818-6"><a href="16-boucles-if.html#cb818-6"></a>}</span>
<span id="cb818-7"><a href="16-boucles-if.html#cb818-7"></a></span>
<span id="cb818-8"><a href="16-boucles-if.html#cb818-8"></a><span class="kw">longueur_max</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb818-9"><a href="16-boucles-if.html#cb818-9"></a><span class="co">#&gt; Error in longueur_max(1:5): x doit être de type character.</span></span></code></pre></div>
<div class="rmdnote">
<p>
Savoir si un problème doit être traité comme un avertissement ou comme une erreur relève du choix de la personne qui développe la fonction : chaque cas est particulier.
</p>
</div>
<p><code>stopifnot</code> est une syntaxe alternative plus compacte qui combine test et message d’erreur. On lui passe en premier argument une condition, et en deuxième argument un message à afficher si la condition est fausse.</p>
<p>On peut donc réécrire notre fonction <code>longueur_max</code> ci-dessus de la manière suivante :</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="16-boucles-if.html#cb819-1"></a>longueur_max &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb819-2"><a href="16-boucles-if.html#cb819-2"></a>    <span class="kw">stopifnot</span>(<span class="kw">is.character</span>(x))</span>
<span id="cb819-3"><a href="16-boucles-if.html#cb819-3"></a>    <span class="kw">max</span>(<span class="kw">nchar</span>(x))</span>
<span id="cb819-4"><a href="16-boucles-if.html#cb819-4"></a>}</span>
<span id="cb819-5"><a href="16-boucles-if.html#cb819-5"></a></span>
<span id="cb819-6"><a href="16-boucles-if.html#cb819-6"></a><span class="kw">longueur_max</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb819-7"><a href="16-boucles-if.html#cb819-7"></a><span class="co">#&gt; Error in longueur_max(1:5): is.character(x) is not TRUE</span></span></code></pre></div>
<p>Si on souhaite un message d’erreur personnalisé il faut le passer comme nom de la condition.</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb820-1"><a href="16-boucles-if.html#cb820-1"></a>longueur_max &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb820-2"><a href="16-boucles-if.html#cb820-2"></a>    <span class="kw">stopifnot</span>(</span>
<span id="cb820-3"><a href="16-boucles-if.html#cb820-3"></a>        <span class="st">&quot;x doit être de type character&quot;</span> =<span class="st"> </span><span class="kw">is.character</span>(x)</span>
<span id="cb820-4"><a href="16-boucles-if.html#cb820-4"></a>    )</span>
<span id="cb820-5"><a href="16-boucles-if.html#cb820-5"></a>    <span class="kw">max</span>(<span class="kw">nchar</span>(x))</span>
<span id="cb820-6"><a href="16-boucles-if.html#cb820-6"></a>}</span>
<span id="cb820-7"><a href="16-boucles-if.html#cb820-7"></a></span>
<span id="cb820-8"><a href="16-boucles-if.html#cb820-8"></a><span class="kw">longueur_max</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb820-9"><a href="16-boucles-if.html#cb820-9"></a><span class="co">#&gt; Error in longueur_max(1:5): x doit être de type character</span></span></code></pre></div>
</div>
<div id="tester-la-présence-dun-argument" class="section level3">
<h3><span class="header-section-number">16.2.4</span> Tester la présence d’un argument</h3>
<p>La méthode la plus courante pour tester si l’argument d’une fonction a été défini lors de l’appel de cette fonction est de donner à cet argument la valeur <code>NULL</code> par défaut, et de tester cette valeur.</p>
<p>Par exemple, soit une fonction qui génère un graphique avec un argument <code>titre</code> qui permet de définir son titre. On peut mettre par défaut cet argument à <code>NULL</code> et ajouter un titre par défaut si l’utilisateur n’en a pas fourni.</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb821-1"><a href="16-boucles-if.html#cb821-1"></a>histo &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">titre =</span> <span class="ot">NULL</span>) {</span>
<span id="cb821-2"><a href="16-boucles-if.html#cb821-2"></a>    <span class="cf">if</span> (<span class="kw">is.null</span>(titre)) {</span>
<span id="cb821-3"><a href="16-boucles-if.html#cb821-3"></a>        titre &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Moyenne :&quot;</span>, <span class="kw">mean</span>(x))</span>
<span id="cb821-4"><a href="16-boucles-if.html#cb821-4"></a>    }</span>
<span id="cb821-5"><a href="16-boucles-if.html#cb821-5"></a>    <span class="kw">hist</span>(x, <span class="dt">main =</span> titre)</span>
<span id="cb821-6"><a href="16-boucles-if.html#cb821-6"></a>}</span>
<span id="cb821-7"><a href="16-boucles-if.html#cb821-7"></a></span>
<span id="cb821-8"><a href="16-boucles-if.html#cb821-8"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">15</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">8</span>, <span class="dv">4</span>)</span>
<span id="cb821-9"><a href="16-boucles-if.html#cb821-9"></a><span class="kw">histo</span>(x)</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-856-1.svg" width="672" /></p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="16-boucles-if.html#cb822-1"></a></span>
<span id="cb822-2"><a href="16-boucles-if.html#cb822-2"></a><span class="kw">histo</span>(x, <span class="dt">titre =</span> <span class="st">&quot;Quel bel histogramme&quot;</span>)</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-856-2.svg" width="672" /></p>
</div>
</div>
<div id="for-et-while-répéter-des-instructions-dans-une-boucle" class="section level2">
<h2><span class="header-section-number">16.3</span> <code>for</code> et <code>while</code> : répéter des instructions dans une boucle</h2>
<p>Les boucles sont un type d’instructions qui permet de répéter du code plusieurs fois, soit en fonction d’une condition soit selon les éléments d’un vecteur<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>.</p>
<div id="for" class="section level3">
<h3><span class="header-section-number">16.3.1</span> <code>for</code></h3>
<p>Le premier type de boucle est défini par l’instruction <code>for</code>. Sa structure est la suivante :</p>
<p><img src="resources/figures/structure_for.svg" /></p>
<p>Le principe est le suivant : on fournit à <code>for</code> entre parenthèses une expression du type <code>item in vecteur</code>, puis un bloc de code entre accolades. <code>for</code> va exécuter le bloc de codes pour chacune des valeurs de <code>vecteur</code>, et affectera tour à tour à <code>item</code> la valeur courante de <code>vecteur</code>.</p>
<p>Prenons tout de suite un exemple pour mieux comprendre.</p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="16-boucles-if.html#cb823-1"></a><span class="cf">for</span> (item <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb823-2"><a href="16-boucles-if.html#cb823-2"></a>    <span class="kw">print</span>(item)</span>
<span id="cb823-3"><a href="16-boucles-if.html#cb823-3"></a>}</span>
<span id="cb823-4"><a href="16-boucles-if.html#cb823-4"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb823-5"><a href="16-boucles-if.html#cb823-5"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb823-6"><a href="16-boucles-if.html#cb823-6"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb823-7"><a href="16-boucles-if.html#cb823-7"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb823-8"><a href="16-boucles-if.html#cb823-8"></a><span class="co">#&gt; [1] 5</span></span></code></pre></div>
<p>Ici notre vecteur “source” est constitué des entiers de 1 à 5. <code>for</code> va donc exécuter l’instruction <code>print(item)</code> 5 fois, en remplaçant la première fois <code>item</code> par 1, la seconde fois par 2, etc.</p>
<p>On peut itérer sur tout type d’objet, et le nom <code>item</code> peut être remplacé par ce que l’on souhaite :</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="16-boucles-if.html#cb824-1"></a><span class="cf">for</span> (prenom <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;Pierre-Edmond&quot;</span>, <span class="st">&quot;Valérie-Charlotte&quot;</span>)) {</span>
<span id="cb824-2"><a href="16-boucles-if.html#cb824-2"></a>    <span class="kw">message</span>(<span class="st">&quot;Bonjour &quot;</span>, prenom, <span class="st">&quot; !&quot;</span>)</span>
<span id="cb824-3"><a href="16-boucles-if.html#cb824-3"></a>}</span>
<span id="cb824-4"><a href="16-boucles-if.html#cb824-4"></a><span class="co">#&gt; Bonjour Pierre-Edmond !</span></span>
<span id="cb824-5"><a href="16-boucles-if.html#cb824-5"></a><span class="co">#&gt; Bonjour Valérie-Charlotte !</span></span></code></pre></div>
<p>Exemple un peu plus complexe, la fonction suivante prend en entrée un tableau de données et un vecteur de noms de variables, et affiche le résultat de <code>summary</code> pour chacune de ces variables.</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb825-1"><a href="16-boucles-if.html#cb825-1"></a>summaries &lt;-<span class="st"> </span><span class="cf">function</span>(d, vars) {</span>
<span id="cb825-2"><a href="16-boucles-if.html#cb825-2"></a>    <span class="cf">for</span> (var <span class="cf">in</span> vars) {</span>
<span id="cb825-3"><a href="16-boucles-if.html#cb825-3"></a>        <span class="kw">message</span>(<span class="st">&quot;--- &quot;</span>, var, <span class="st">&quot; ---&quot;</span>)</span>
<span id="cb825-4"><a href="16-boucles-if.html#cb825-4"></a>        <span class="kw">print</span>(<span class="kw">summary</span>(d[, var]))</span>
<span id="cb825-5"><a href="16-boucles-if.html#cb825-5"></a>    }</span>
<span id="cb825-6"><a href="16-boucles-if.html#cb825-6"></a>}</span>
<span id="cb825-7"><a href="16-boucles-if.html#cb825-7"></a></span>
<span id="cb825-8"><a href="16-boucles-if.html#cb825-8"></a><span class="kw">summaries</span>(hdv2003, <span class="kw">c</span>(<span class="st">&quot;sexe&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;heures.tv&quot;</span>))</span>
<span id="cb825-9"><a href="16-boucles-if.html#cb825-9"></a><span class="co">#&gt; --- sexe ---</span></span>
<span id="cb825-10"><a href="16-boucles-if.html#cb825-10"></a><span class="co">#&gt; Homme Femme </span></span>
<span id="cb825-11"><a href="16-boucles-if.html#cb825-11"></a><span class="co">#&gt;   899  1101</span></span>
<span id="cb825-12"><a href="16-boucles-if.html#cb825-12"></a><span class="co">#&gt; --- age ---</span></span>
<span id="cb825-13"><a href="16-boucles-if.html#cb825-13"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb825-14"><a href="16-boucles-if.html#cb825-14"></a><span class="co">#&gt;   18.00   35.00   48.00   48.16   60.00   97.00</span></span>
<span id="cb825-15"><a href="16-boucles-if.html#cb825-15"></a><span class="co">#&gt; --- heures.tv ---</span></span>
<span id="cb825-16"><a href="16-boucles-if.html#cb825-16"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb825-17"><a href="16-boucles-if.html#cb825-17"></a><span class="co">#&gt;   0.000   1.000   2.000   2.247   3.000  12.000       5</span></span></code></pre></div>
<p>Un “pattern” relativement fréquent est de vouloir itérer sur les éléments d’un vecteur par leur position. Il est du coup assez naturel d’utiliser quelque chose comme <code>for (i in 1:length(x))</code>. Il est cependant préférable dans ces cas-là d’utiliser la fonction dédiée <code>seq_along(x)</code><a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a>.</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="16-boucles-if.html#cb826-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;rouge&quot;</span>, <span class="st">&quot;vert&quot;</span>, <span class="st">&quot;bleu&quot;</span>)</span>
<span id="cb826-2"><a href="16-boucles-if.html#cb826-2"></a><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(x)</span>
<span id="cb826-3"><a href="16-boucles-if.html#cb826-3"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb826-4"><a href="16-boucles-if.html#cb826-4"></a><span class="kw">seq_along</span>(x)</span>
<span id="cb826-5"><a href="16-boucles-if.html#cb826-5"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
<p>Dans l’exemple suivant, la fonction <code>affiche_dimensions</code> prend en entrée une liste de tableaux de données et affiche leur nombre de lignes et de colonnes.</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb827-1"><a href="16-boucles-if.html#cb827-1"></a>affiche_dimensions &lt;-<span class="st"> </span><span class="cf">function</span>(dfs) {</span>
<span id="cb827-2"><a href="16-boucles-if.html#cb827-2"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(dfs)) {</span>
<span id="cb827-3"><a href="16-boucles-if.html#cb827-3"></a>        name &lt;-<span class="st"> </span><span class="kw">names</span>(dfs)[[i]]</span>
<span id="cb827-4"><a href="16-boucles-if.html#cb827-4"></a>        df &lt;-<span class="st"> </span>dfs[[i]]</span>
<span id="cb827-5"><a href="16-boucles-if.html#cb827-5"></a>        <span class="kw">message</span>(<span class="st">&quot;Dimensions de &quot;</span>, name, <span class="st">&quot; : &quot;</span>, <span class="kw">nrow</span>(df), <span class="st">&quot;x&quot;</span>, <span class="kw">ncol</span>(df))</span>
<span id="cb827-6"><a href="16-boucles-if.html#cb827-6"></a>    }</span>
<span id="cb827-7"><a href="16-boucles-if.html#cb827-7"></a>}</span>
<span id="cb827-8"><a href="16-boucles-if.html#cb827-8"></a></span>
<span id="cb827-9"><a href="16-boucles-if.html#cb827-9"></a>l &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb827-10"><a href="16-boucles-if.html#cb827-10"></a>    <span class="dt">hdv =</span> hdv2003,</span>
<span id="cb827-11"><a href="16-boucles-if.html#cb827-11"></a>    <span class="dt">rp =</span> rp2012</span>
<span id="cb827-12"><a href="16-boucles-if.html#cb827-12"></a>)</span>
<span id="cb827-13"><a href="16-boucles-if.html#cb827-13"></a><span class="kw">affiche_dimensions</span>(l)</span>
<span id="cb827-14"><a href="16-boucles-if.html#cb827-14"></a><span class="co">#&gt; Dimensions de hdv : 2000x20</span></span>
<span id="cb827-15"><a href="16-boucles-if.html#cb827-15"></a><span class="co">#&gt; Dimensions de rp : 5170x60</span></span></code></pre></div>
<p>À noter que quand on sort d’une boucle <code>for</code>, l’objet utilisé pour itérer sur les valeurs du vecteur existe toujours, et contient la dernière valeur qu’il a prise.</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="16-boucles-if.html#cb828-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</span>
<span id="cb828-2"><a href="16-boucles-if.html#cb828-2"></a>    <span class="kw">print</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb828-3"><a href="16-boucles-if.html#cb828-3"></a>}</span>
<span id="cb828-4"><a href="16-boucles-if.html#cb828-4"></a><span class="co">#&gt; [1] &quot;a&quot;</span></span>
<span id="cb828-5"><a href="16-boucles-if.html#cb828-5"></a><span class="co">#&gt; [1] &quot;a&quot;</span></span>
<span id="cb828-6"><a href="16-boucles-if.html#cb828-6"></a><span class="co">#&gt; [1] &quot;a&quot;</span></span>
<span id="cb828-7"><a href="16-boucles-if.html#cb828-7"></a><span class="kw">print</span>(i)</span>
<span id="cb828-8"><a href="16-boucles-if.html#cb828-8"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
</div>
<div id="while" class="section level3">
<h3><span class="header-section-number">16.3.2</span> <code>while</code></h3>
<p><code>while</code> prend en argument une condition et est suivi d’un bloc de code entre accolades. Elle exécute le bloc tant que la condition est vraie :</p>
<p><img src="resources/figures/structure_while.svg" /></p>
<p>Par exemple, la fonction suivante simule un tirage à pile ou face à l’aide de la fonction <code>sample()</code>. La simulation de tirage s’exécute et affiche le résultat tant qu’on obtient “Pile” (et interrompt la boucle au premier “Face”) :</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="16-boucles-if.html#cb829-1"></a>resultat &lt;-<span class="st"> &quot;&quot;</span></span>
<span id="cb829-2"><a href="16-boucles-if.html#cb829-2"></a><span class="cf">while</span> (resultat <span class="op">!=</span><span class="st"> &quot;Face&quot;</span>) {</span>
<span id="cb829-3"><a href="16-boucles-if.html#cb829-3"></a>    resultat &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;Pile&quot;</span>, <span class="st">&quot;Face&quot;</span>), <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb829-4"><a href="16-boucles-if.html#cb829-4"></a>    <span class="kw">print</span>(resultat)</span>
<span id="cb829-5"><a href="16-boucles-if.html#cb829-5"></a>}</span></code></pre></div>
<pre><code>[1] &quot;Pile&quot;
[1] &quot;Pile&quot;
[1] &quot;Face&quot;</code></pre>
<p>Le déroulement de la boucle est le suivant :</p>
<ol style="list-style-type: decimal">
<li>la première instruction initialise la valeur de la variable <code>resultat</code> avec une chaîne vide</li>
<li>à la première entrée dans le <code>while</code>, <code>resultat</code> vaut <code>""</code>, elle est donc différente de <code>"Face"</code> et le bloc de code est donc exécuté</li>
<li>à la fin de cette exécution, <code>resultat</code> voit soit <code>"Pile"</code> soit <code>"Face"</code>. On entre alors une deuxième fois dans le <code>while</code>. Si <code>resultat</code> vaut <code>"Pile"</code>, la condition du <code>while</code> n’est pas vraie, on n’exécute donc pas le bloc de code et on sort de la boucle. Si <code>resultat</code> vaut <code>"Face"</code>, la condition est vraie, on n’exécute le bloc de code et on rentre ensuite une troisième fois dans le <code>while</code>, etc.</li>
</ol>
</div>
<div id="next-et-break" class="section level3">
<h3><span class="header-section-number">16.3.3</span> <code>next</code> et <code>break</code></h3>
<p>Les instructions <code>next</code> et <code>break</code> permettent de modifier les itérations d’une boucle <code>for</code> ou <code>while</code>.</p>
<p><code>next</code> permet de sortir de l’itération courante et de passer directement à l’itération suivante sans exécuter le reste du code.</p>
<p>Reprenons la fonction <code>summaries</code>, vue plus haut, qui affiche le résumé de plusieurs variables d’un tableau de données.</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb831-1"><a href="16-boucles-if.html#cb831-1"></a>summaries &lt;-<span class="st"> </span><span class="cf">function</span>(d, vars) {</span>
<span id="cb831-2"><a href="16-boucles-if.html#cb831-2"></a>    <span class="cf">for</span> (var <span class="cf">in</span> vars) {</span>
<span id="cb831-3"><a href="16-boucles-if.html#cb831-3"></a>        <span class="kw">message</span>(<span class="st">&quot;--- &quot;</span>, var, <span class="st">&quot; ---&quot;</span>)</span>
<span id="cb831-4"><a href="16-boucles-if.html#cb831-4"></a>        <span class="kw">print</span>(<span class="kw">summary</span>(d[, var]))</span>
<span id="cb831-5"><a href="16-boucles-if.html#cb831-5"></a>    }</span>
<span id="cb831-6"><a href="16-boucles-if.html#cb831-6"></a>}</span>
<span id="cb831-7"><a href="16-boucles-if.html#cb831-7"></a></span>
<span id="cb831-8"><a href="16-boucles-if.html#cb831-8"></a><span class="kw">summaries</span>(hdv2003, <span class="kw">c</span>(<span class="st">&quot;sexe&quot;</span>, <span class="st">&quot;age&quot;</span>))</span>
<span id="cb831-9"><a href="16-boucles-if.html#cb831-9"></a><span class="co">#&gt; --- sexe ---</span></span>
<span id="cb831-10"><a href="16-boucles-if.html#cb831-10"></a><span class="co">#&gt; Homme Femme </span></span>
<span id="cb831-11"><a href="16-boucles-if.html#cb831-11"></a><span class="co">#&gt;   899  1101</span></span>
<span id="cb831-12"><a href="16-boucles-if.html#cb831-12"></a><span class="co">#&gt; --- age ---</span></span>
<span id="cb831-13"><a href="16-boucles-if.html#cb831-13"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb831-14"><a href="16-boucles-if.html#cb831-14"></a><span class="co">#&gt;   18.00   35.00   48.00   48.16   60.00   97.00</span></span></code></pre></div>
<p>Si on passe à la fonction un nom de colonne qui n’existe pas, on obtient une erreur et les autres variables ne sont pas affichées.</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb832-1"><a href="16-boucles-if.html#cb832-1"></a><span class="kw">summaries</span>(hdv2003, <span class="kw">c</span>(<span class="st">&quot;sexe&quot;</span>, <span class="st">&quot;igloo&quot;</span>, <span class="st">&quot;age&quot;</span>))</span>
<span id="cb832-2"><a href="16-boucles-if.html#cb832-2"></a><span class="co">#&gt; --- sexe ---</span></span>
<span id="cb832-3"><a href="16-boucles-if.html#cb832-3"></a><span class="co">#&gt; Homme Femme </span></span>
<span id="cb832-4"><a href="16-boucles-if.html#cb832-4"></a><span class="co">#&gt;   899  1101</span></span>
<span id="cb832-5"><a href="16-boucles-if.html#cb832-5"></a><span class="co">#&gt; --- igloo ---</span></span>
<span id="cb832-6"><a href="16-boucles-if.html#cb832-6"></a><span class="co">#&gt; Error in `[.data.frame`(d, , var): undefined columns selected</span></span></code></pre></div>
<p>Or on pourrait, dans ce cas vouloir afficher les résultats pour les “bonnes” colonnes, et ignorer les autres. C’est possible si rajoute une instruction <code>next</code> quand la valeur courante de <code>var</code> ne fait pas partie des noms de colonnes (on pourrait aussi ajouter un <code>warning()</code> juste avant le <code>next</code> pour informer l’utilisateur).</p>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb833-1"><a href="16-boucles-if.html#cb833-1"></a>summaries &lt;-<span class="st"> </span><span class="cf">function</span>(d, vars) {</span>
<span id="cb833-2"><a href="16-boucles-if.html#cb833-2"></a>    <span class="cf">for</span> (var <span class="cf">in</span> vars) {</span>
<span id="cb833-3"><a href="16-boucles-if.html#cb833-3"></a>        <span class="cf">if</span> (<span class="op">!</span>(var <span class="op">%in%</span><span class="st"> </span><span class="kw">names</span>(d))) {</span>
<span id="cb833-4"><a href="16-boucles-if.html#cb833-4"></a>            <span class="cf">next</span></span>
<span id="cb833-5"><a href="16-boucles-if.html#cb833-5"></a>        }</span>
<span id="cb833-6"><a href="16-boucles-if.html#cb833-6"></a>        <span class="kw">message</span>(<span class="st">&quot;--- &quot;</span>, var, <span class="st">&quot; ---&quot;</span>)</span>
<span id="cb833-7"><a href="16-boucles-if.html#cb833-7"></a>        <span class="kw">print</span>(<span class="kw">summary</span>(d[, var]))</span>
<span id="cb833-8"><a href="16-boucles-if.html#cb833-8"></a>    }</span>
<span id="cb833-9"><a href="16-boucles-if.html#cb833-9"></a>}</span>
<span id="cb833-10"><a href="16-boucles-if.html#cb833-10"></a></span>
<span id="cb833-11"><a href="16-boucles-if.html#cb833-11"></a><span class="kw">summaries</span>(hdv2003, <span class="kw">c</span>(<span class="st">&quot;sexe&quot;</span>, <span class="st">&quot;igloo&quot;</span>, <span class="st">&quot;age&quot;</span>))</span>
<span id="cb833-12"><a href="16-boucles-if.html#cb833-12"></a><span class="co">#&gt; --- sexe ---</span></span>
<span id="cb833-13"><a href="16-boucles-if.html#cb833-13"></a><span class="co">#&gt; Homme Femme </span></span>
<span id="cb833-14"><a href="16-boucles-if.html#cb833-14"></a><span class="co">#&gt;   899  1101</span></span>
<span id="cb833-15"><a href="16-boucles-if.html#cb833-15"></a><span class="co">#&gt; --- age ---</span></span>
<span id="cb833-16"><a href="16-boucles-if.html#cb833-16"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb833-17"><a href="16-boucles-if.html#cb833-17"></a><span class="co">#&gt;   18.00   35.00   48.00   48.16   60.00   97.00</span></span></code></pre></div>
<p>L’instruction <code>break</code> est un peu plus radicale : non seulement elle sort de l’itération courante sans exécuter la suite du code, mais elle interrompt carrément la boucle toute entière et n’exécute pas les itérations restantes.</p>
<p>Dans l’exemple précédent, si on remplace <code>next</code> par <code>break</code>, on voit bien qu’on sort de la boucle et que seule la première itération est totalement exécutée.</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="16-boucles-if.html#cb834-1"></a>summaries &lt;-<span class="st"> </span><span class="cf">function</span>(d, vars) {</span>
<span id="cb834-2"><a href="16-boucles-if.html#cb834-2"></a>    <span class="cf">for</span> (var <span class="cf">in</span> vars) {</span>
<span id="cb834-3"><a href="16-boucles-if.html#cb834-3"></a>        <span class="cf">if</span> (<span class="op">!</span>(var <span class="op">%in%</span><span class="st"> </span><span class="kw">names</span>(d))) {</span>
<span id="cb834-4"><a href="16-boucles-if.html#cb834-4"></a>            <span class="cf">break</span></span>
<span id="cb834-5"><a href="16-boucles-if.html#cb834-5"></a>        }</span>
<span id="cb834-6"><a href="16-boucles-if.html#cb834-6"></a>        <span class="kw">message</span>(<span class="st">&quot;--- &quot;</span>, var, <span class="st">&quot; ---&quot;</span>)</span>
<span id="cb834-7"><a href="16-boucles-if.html#cb834-7"></a>        <span class="kw">print</span>(<span class="kw">summary</span>(d[, var]))</span>
<span id="cb834-8"><a href="16-boucles-if.html#cb834-8"></a>    }</span>
<span id="cb834-9"><a href="16-boucles-if.html#cb834-9"></a>}</span>
<span id="cb834-10"><a href="16-boucles-if.html#cb834-10"></a></span>
<span id="cb834-11"><a href="16-boucles-if.html#cb834-11"></a><span class="kw">summaries</span>(hdv2003, <span class="kw">c</span>(<span class="st">&quot;sexe&quot;</span>, <span class="st">&quot;igloo&quot;</span>, <span class="st">&quot;age&quot;</span>))</span>
<span id="cb834-12"><a href="16-boucles-if.html#cb834-12"></a><span class="co">#&gt; --- sexe ---</span></span>
<span id="cb834-13"><a href="16-boucles-if.html#cb834-13"></a><span class="co">#&gt; Homme Femme </span></span>
<span id="cb834-14"><a href="16-boucles-if.html#cb834-14"></a><span class="co">#&gt;   899  1101</span></span></code></pre></div>
</div>
<div id="no-boucles" class="section level3">
<h3><span class="header-section-number">16.3.4</span> Quand (ne pas) utiliser des boucles</h3>
<p>Le mécanisme des boucles, assez intuitif, peut être utilisé pour beaucoup d’opérations. Il y a cependant sous R des alternatives souvent plus rapides, qu’il est préférable de privilégier.</p>
<p>Avant tout, de nombreuses fonctions R sont “vectorisées” et s’appliquent directement à tous les éléments d’un vecteur. Dans le cas où une fonction vectorisée existe déjà, elle propose en général une syntaxe plus compacte et une exécution plus rapide.</p>
<p>Pour prendre un exemple caricatural, si on souhaite ajouter 10 à chaque élément d’un vecteur on évitera absolument de faire :</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb835-1"><a href="16-boucles-if.html#cb835-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</span>
<span id="cb835-2"><a href="16-boucles-if.html#cb835-2"></a>    x[i] &lt;-<span class="st"> </span>x[i] <span class="op">+</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb835-3"><a href="16-boucles-if.html#cb835-3"></a>}</span></code></pre></div>
<p>Et on se contentera d’un beaucoup plus simple <code>x + 10</code>.</p>
<p>Autre exemple, si on souhaite remplacer dans tous les éléments d’un vecteur de chaînes de caractères le caractère “X” par le caractère “o”, on pourrait être tenter de faire une boucle du type :</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="16-boucles-if.html#cb836-1"></a>mots &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;brXuette&quot;</span>, <span class="st">&quot;mXtX&quot;</span>, <span class="st">&quot;iglXX&quot;</span>)</span>
<span id="cb836-2"><a href="16-boucles-if.html#cb836-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(mots)) {</span>
<span id="cb836-3"><a href="16-boucles-if.html#cb836-3"></a>    mots[i] &lt;-<span class="st"> </span><span class="kw">str_replace_all</span>(mots[i], <span class="st">&quot;X&quot;</span>, <span class="st">&quot;o&quot;</span>)</span>
<span id="cb836-4"><a href="16-boucles-if.html#cb836-4"></a>}</span></code></pre></div>
<p>Or c’est tout à fait inutile car <code>str_replace_all()</code> étant vectorisée, on peut l’appliquer directement à un vecteur sans utiliser de boucle.</p>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb837-1"><a href="16-boucles-if.html#cb837-1"></a>mots &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;brXuette&quot;</span>, <span class="st">&quot;mXtX&quot;</span>, <span class="st">&quot;iglXX&quot;</span>)</span>
<span id="cb837-2"><a href="16-boucles-if.html#cb837-2"></a>mots &lt;-<span class="st"> </span><span class="kw">str_replace_all</span>(mots, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;o&quot;</span>)</span></code></pre></div>
<p>Dernier exemple, la boucle suivante remplace les valeurs manquantes d’un vecteur par les valeurs correspondantes d’un deuxième vecteur.</p>
<div class="sourceCode" id="cb838"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb838-1"><a href="16-boucles-if.html#cb838-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">4</span>, <span class="dv">110</span>, <span class="ot">NA</span>)</span>
<span id="cb838-2"><a href="16-boucles-if.html#cb838-2"></a>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>)</span>
<span id="cb838-3"><a href="16-boucles-if.html#cb838-3"></a></span>
<span id="cb838-4"><a href="16-boucles-if.html#cb838-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</span>
<span id="cb838-5"><a href="16-boucles-if.html#cb838-5"></a>    <span class="cf">if</span> (<span class="kw">is.na</span>(x[i])) x[i] &lt;-<span class="st"> </span>y[i]</span>
<span id="cb838-6"><a href="16-boucles-if.html#cb838-6"></a>}</span>
<span id="cb838-7"><a href="16-boucles-if.html#cb838-7"></a></span>
<span id="cb838-8"><a href="16-boucles-if.html#cb838-8"></a>x</span>
<span id="cb838-9"><a href="16-boucles-if.html#cb838-9"></a><span class="co">#&gt; [1]   1  30   4 110  60</span></span></code></pre></div>
<p>Cette boucle sera avantageusement remplacée par une utilisation plus compacte et plus rapide de l’opérateur <code>[]</code>.</p>
<div class="sourceCode" id="cb839"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb839-1"><a href="16-boucles-if.html#cb839-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">4</span>, <span class="dv">110</span>, <span class="ot">NA</span>)</span>
<span id="cb839-2"><a href="16-boucles-if.html#cb839-2"></a>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>)</span>
<span id="cb839-3"><a href="16-boucles-if.html#cb839-3"></a>x[<span class="kw">is.na</span>(x)] &lt;-<span class="st"> </span>y[<span class="kw">is.na</span>(x)]</span>
<span id="cb839-4"><a href="16-boucles-if.html#cb839-4"></a>x</span>
<span id="cb839-5"><a href="16-boucles-if.html#cb839-5"></a><span class="co">#&gt; [1]   1  30   4 110  60</span></span></code></pre></div>
<p>En dehors des questions de performance, une boucle peut aussi être moins lisible que certaines alternatives. Soit la fonction suivante, qui prend en entrée un vecteur de mots et retourne le nombre total de voyelles qu’il contient.</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="16-boucles-if.html#cb840-1"></a><span class="kw">library</span>(stringr)</span>
<span id="cb840-2"><a href="16-boucles-if.html#cb840-2"></a>n_voyelles &lt;-<span class="st"> </span><span class="cf">function</span>(mots) {</span>
<span id="cb840-3"><a href="16-boucles-if.html#cb840-3"></a>    nb &lt;-<span class="st"> </span><span class="kw">str_count</span>(mots, <span class="st">&quot;[aeiou]&quot;</span>)</span>
<span id="cb840-4"><a href="16-boucles-if.html#cb840-4"></a>    <span class="kw">sum</span>(nb)</span>
<span id="cb840-5"><a href="16-boucles-if.html#cb840-5"></a>}</span>
<span id="cb840-6"><a href="16-boucles-if.html#cb840-6"></a></span>
<span id="cb840-7"><a href="16-boucles-if.html#cb840-7"></a><span class="kw">n_voyelles</span>(<span class="kw">c</span>(<span class="st">&quot;le&quot;</span>, <span class="st">&quot;chat&quot;</span>, <span class="st">&quot;roupille&quot;</span>))</span>
<span id="cb840-8"><a href="16-boucles-if.html#cb840-8"></a><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>Supposons qu’on souhaite appliquer cette fonction à une série de vecteurs de mots contenus dans une liste. On pourrait utiliser une boucle <code>for</code> parcourant cette liste, appliquant la fonction, et ajoutant le résultat à un vecteur numérique vide préalablement créé avec <code>numeric()</code>.</p>
<div class="sourceCode" id="cb841"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb841-1"><a href="16-boucles-if.html#cb841-1"></a>phrases &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb841-2"><a href="16-boucles-if.html#cb841-2"></a>    <span class="kw">c</span>(<span class="st">&quot;le&quot;</span>, <span class="st">&quot;chat&quot;</span>, <span class="st">&quot;roupille&quot;</span>),</span>
<span id="cb841-3"><a href="16-boucles-if.html#cb841-3"></a>    <span class="kw">c</span>(<span class="st">&quot;l&#39;autre&quot;</span>, <span class="st">&quot;chat&quot;</span>, <span class="st">&quot;roupille&quot;</span>, <span class="st">&quot;aussi&quot;</span>)</span>
<span id="cb841-4"><a href="16-boucles-if.html#cb841-4"></a>)</span>
<span id="cb841-5"><a href="16-boucles-if.html#cb841-5"></a></span>
<span id="cb841-6"><a href="16-boucles-if.html#cb841-6"></a>res &lt;-<span class="st"> </span><span class="kw">numeric</span>()</span>
<span id="cb841-7"><a href="16-boucles-if.html#cb841-7"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(phrases)) {</span>
<span id="cb841-8"><a href="16-boucles-if.html#cb841-8"></a>    res[i] &lt;-<span class="st"> </span><span class="kw">n_voyelles</span>(phrases[[i]])</span>
<span id="cb841-9"><a href="16-boucles-if.html#cb841-9"></a>}</span>
<span id="cb841-10"><a href="16-boucles-if.html#cb841-10"></a>res</span>
<span id="cb841-11"><a href="16-boucles-if.html#cb841-11"></a><span class="co">#&gt; [1]  6 11</span></span></code></pre></div>
<p>On verra cependant dans la section <a href="18-purrr.html#purrr">18</a> que des fonctions permettent de faire ce genre de choses de manière beaucoup plus simple et plus lisible. Ici par exemple on obtiendrait le même résultat avec un simple :</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="16-boucles-if.html#cb842-1"></a>phrases <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_int</span>(n_voyelles)</span>
<span id="cb842-2"><a href="16-boucles-if.html#cb842-2"></a><span class="co">#&gt; [1]  6 11</span></span></code></pre></div>
<p>Au final, entre les fonctions vectorisées existantes et les possibilités fournies par <code>purrr</code>, il est assez rare de devoir utiliser une boucle directement dans R. Pour autant, il ne faut pas non plus tomber dans l’excès inverse et considérer que tout usage de <code>for</code> ou <code>while</code> doit être évité : ces fonctions sont parfaitement justifiées dans de nombreux cas de figure, et si vous trouvez une solution qui fonctionne de manière efficace avec une boucle <code>for</code>, il n’est pas forcément utile de chercher à la remplacer à tout prix.</p>
</div>
</div>
<div id="débugguer-une-fonction" class="section level2">
<h2><span class="header-section-number">16.4</span> Débugguer une fonction</h2>
<p>Lorsqu’on commence à écrire des fonctions un peu complexes, avec des <code>if</code>, des <code>for</code>, etc., arrive forcément un moment où ça ne fonctionne pas comme on souhaiterait et où on ne comprend pas pourquoi. Bref, il y a un bug.</p>
<p>Trouver la cause d’un bug n’est pas toujours évident, mais heureusement il existe plusieurs outils permettant de faciliter les choses.</p>
<div id="print" class="section level3">
<h3><span class="header-section-number">16.4.1</span> print()</h3>
<p>L’outil le plus simple, parfois décrié mais souvent efficace, est de rajouter un simple <code>print()</code> dans le code de notre fonction pour examiner le contenu d’un objet à un moment donné.</p>
<p>Dans l’exemple suivant, on a écrit une fonction <code>phrase_max()</code> qui prend en entrée une chaîne de caractères et une lettre. La fonction découpe la chaîne en phrases, et retourne la phrase qui comporte le plus de fois la lettre.</p>
<div class="sourceCode" id="cb843"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb843-1"><a href="16-boucles-if.html#cb843-1"></a>phrase_max &lt;-<span class="st"> </span><span class="cf">function</span>(str, lettre) {</span>
<span id="cb843-2"><a href="16-boucles-if.html#cb843-2"></a>    phrases &lt;-<span class="st"> </span><span class="kw">str_split</span>(str, <span class="st">&quot;.&quot;</span>, <span class="dt">simplify =</span> <span class="ot">TRUE</span>)</span>
<span id="cb843-3"><a href="16-boucles-if.html#cb843-3"></a>    n_lettre &lt;-<span class="st"> </span><span class="kw">str_detect</span>(phrases, lettre)</span>
<span id="cb843-4"><a href="16-boucles-if.html#cb843-4"></a>    phrases[n_lettre <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(n_lettre)]</span>
<span id="cb843-5"><a href="16-boucles-if.html#cb843-5"></a>}</span></code></pre></div>
<p>Du moins en théorie, car en pratique ça n’est pas tout à fait ça…</p>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="16-boucles-if.html#cb844-1"></a>texte &lt;-<span class="st"> &quot;Le chat dort. Le félin roupille. Le chat dort tout le temps.&quot;</span></span>
<span id="cb844-2"><a href="16-boucles-if.html#cb844-2"></a><span class="kw">phrase_max</span>(texte, <span class="st">&quot;t&quot;</span>)</span>
<span id="cb844-3"><a href="16-boucles-if.html#cb844-3"></a><span class="co">#&gt;  [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span>
<span id="cb844-4"><a href="16-boucles-if.html#cb844-4"></a><span class="co">#&gt; [26] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span>
<span id="cb844-5"><a href="16-boucles-if.html#cb844-5"></a><span class="co">#&gt; [51] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span></code></pre></div>
<p>Pour essayer de comprendre ce qui se passe, on va rajouter un <code>print()</code> qui va nous permettre d’afficher le contenu de <code>phrases</code> juste après le <code>str_split()</code>.</p>
<div class="sourceCode" id="cb845"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb845-1"><a href="16-boucles-if.html#cb845-1"></a>phrase_max &lt;-<span class="st"> </span><span class="cf">function</span>(str, lettre) {</span>
<span id="cb845-2"><a href="16-boucles-if.html#cb845-2"></a>    phrases &lt;-<span class="st"> </span><span class="kw">str_split</span>(str, <span class="st">&quot;.&quot;</span>, <span class="dt">simplify =</span> <span class="ot">TRUE</span>)</span>
<span id="cb845-3"><a href="16-boucles-if.html#cb845-3"></a>    <span class="kw">print</span>(phrases)</span>
<span id="cb845-4"><a href="16-boucles-if.html#cb845-4"></a>    n_lettre &lt;-<span class="st"> </span><span class="kw">str_detect</span>(phrases, lettre)</span>
<span id="cb845-5"><a href="16-boucles-if.html#cb845-5"></a>    phrases[n_lettre <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(n_lettre)]</span>
<span id="cb845-6"><a href="16-boucles-if.html#cb845-6"></a>}</span>
<span id="cb845-7"><a href="16-boucles-if.html#cb845-7"></a></span>
<span id="cb845-8"><a href="16-boucles-if.html#cb845-8"></a><span class="kw">phrase_max</span>(texte, <span class="st">&quot;t&quot;</span>)</span>
<span id="cb845-9"><a href="16-boucles-if.html#cb845-9"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]</span></span>
<span id="cb845-10"><a href="16-boucles-if.html#cb845-10"></a><span class="co">#&gt; [1,] &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;   &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;   </span></span>
<span id="cb845-11"><a href="16-boucles-if.html#cb845-11"></a><span class="co">#&gt;      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]</span></span>
<span id="cb845-12"><a href="16-boucles-if.html#cb845-12"></a><span class="co">#&gt; [1,] &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;   </span></span>
<span id="cb845-13"><a href="16-boucles-if.html#cb845-13"></a><span class="co">#&gt;      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]</span></span>
<span id="cb845-14"><a href="16-boucles-if.html#cb845-14"></a><span class="co">#&gt; [1,] &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;   </span></span>
<span id="cb845-15"><a href="16-boucles-if.html#cb845-15"></a><span class="co">#&gt;      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]</span></span>
<span id="cb845-16"><a href="16-boucles-if.html#cb845-16"></a><span class="co">#&gt; [1,] &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;   </span></span>
<span id="cb845-17"><a href="16-boucles-if.html#cb845-17"></a><span class="co">#&gt;      [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61]</span></span>
<span id="cb845-18"><a href="16-boucles-if.html#cb845-18"></a><span class="co">#&gt; [1,] &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;    &quot;&quot;</span></span>
<span id="cb845-19"><a href="16-boucles-if.html#cb845-19"></a><span class="co">#&gt;  [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span>
<span id="cb845-20"><a href="16-boucles-if.html#cb845-20"></a><span class="co">#&gt; [26] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span>
<span id="cb845-21"><a href="16-boucles-if.html#cb845-21"></a><span class="co">#&gt; [51] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</span></span></code></pre></div>
<p>Il y a donc un problème : plutôt que d’obtenir des phrases on n’obtient que des chaînes vides. Pourquoi ? Car on a oublié que l’argument <code>pattern</code> de <code>str_split()</code>, celui à qui on a donné la valeur <code>"."</code>, admet par défaut une expression régulière. Or dans une expression régulière, le <code>.</code> est un symbole spécial qui correspond à n’importe quel caractère.</p>
<p>On corrige donc le problème en entourant notre <code>pattern</code> de la fonction <code>fixed()</code> de <code>stringr</code>, qui permet de spécifier qu’on souhaite bien découper notre texte selon le caractère <code>"."</code>.</p>
<div class="sourceCode" id="cb846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb846-1"><a href="16-boucles-if.html#cb846-1"></a>phrase_max &lt;-<span class="st"> </span><span class="cf">function</span>(str, lettre) {</span>
<span id="cb846-2"><a href="16-boucles-if.html#cb846-2"></a>    phrases &lt;-<span class="st"> </span><span class="kw">str_split</span>(str, <span class="kw">fixed</span>(<span class="st">&quot;.&quot;</span>), <span class="dt">simplify =</span> <span class="ot">TRUE</span>)</span>
<span id="cb846-3"><a href="16-boucles-if.html#cb846-3"></a>    n_lettre &lt;-<span class="st"> </span><span class="kw">str_detect</span>(phrases, lettre)</span>
<span id="cb846-4"><a href="16-boucles-if.html#cb846-4"></a>    phrases[n_lettre <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(n_lettre)]</span>
<span id="cb846-5"><a href="16-boucles-if.html#cb846-5"></a>}</span></code></pre></div>
<p>On teste cette version corrigée.</p>
<div class="sourceCode" id="cb847"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb847-1"><a href="16-boucles-if.html#cb847-1"></a><span class="kw">phrase_max</span>(texte, <span class="st">&quot;t&quot;</span>)</span>
<span id="cb847-2"><a href="16-boucles-if.html#cb847-2"></a><span class="co">#&gt; [1] &quot;Le chat dort&quot;                &quot; Le chat dort tout le temps&quot;</span></span></code></pre></div>
<p>C’est un peu mieux, mais pas encore tout à fait ça puisque la fonction nous retourne plusieurs phrases et pas seulement celle qui comporte le plus de “t”…</p>
<p>On rajoute donc un <code>print()</code> pour voir ce que vaut le résultat du <code>str_detect()</code>.</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb848-1"><a href="16-boucles-if.html#cb848-1"></a>phrase_max &lt;-<span class="st"> </span><span class="cf">function</span>(str, lettre) {</span>
<span id="cb848-2"><a href="16-boucles-if.html#cb848-2"></a>    phrases &lt;-<span class="st"> </span><span class="kw">str_split</span>(str, <span class="kw">fixed</span>(<span class="st">&quot;.&quot;</span>), <span class="dt">simplify =</span> <span class="ot">TRUE</span>)</span>
<span id="cb848-3"><a href="16-boucles-if.html#cb848-3"></a>    n_lettre &lt;-<span class="st"> </span><span class="kw">str_detect</span>(phrases, lettre)</span>
<span id="cb848-4"><a href="16-boucles-if.html#cb848-4"></a>    <span class="kw">print</span>(n_lettre)</span>
<span id="cb848-5"><a href="16-boucles-if.html#cb848-5"></a>    phrases[n_lettre <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(n_lettre)]</span>
<span id="cb848-6"><a href="16-boucles-if.html#cb848-6"></a>}</span>
<span id="cb848-7"><a href="16-boucles-if.html#cb848-7"></a></span>
<span id="cb848-8"><a href="16-boucles-if.html#cb848-8"></a><span class="kw">phrase_max</span>(texte, <span class="st">&quot;t&quot;</span>)</span>
<span id="cb848-9"><a href="16-boucles-if.html#cb848-9"></a><span class="co">#&gt; [1]  TRUE FALSE  TRUE FALSE</span></span>
<span id="cb848-10"><a href="16-boucles-if.html#cb848-10"></a><span class="co">#&gt; [1] &quot;Le chat dort&quot;                &quot; Le chat dort tout le temps&quot;</span></span></code></pre></div>
<p>Ce qui nous permet de constater que <code>n_lettre</code> ne contient pas le nombre d’occurrences de “t”, mais juste une valeur logique indiquant si la phrase contient ou non un “t”. Pourquoi ? Tout simplement parce qu’on n’a pas utilisé la bonne fonction ! Il faut en effet remplacer <code>str_detect()</code> par <code>str_count()</code>.</p>
<div class="sourceCode" id="cb849"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb849-1"><a href="16-boucles-if.html#cb849-1"></a>phrase_max &lt;-<span class="st"> </span><span class="cf">function</span>(str, lettre) {</span>
<span id="cb849-2"><a href="16-boucles-if.html#cb849-2"></a>    phrases &lt;-<span class="st"> </span><span class="kw">str_split</span>(str, <span class="kw">fixed</span>(<span class="st">&quot;.&quot;</span>), <span class="dt">simplify =</span> <span class="ot">TRUE</span>)</span>
<span id="cb849-3"><a href="16-boucles-if.html#cb849-3"></a>    n_lettre &lt;-<span class="st"> </span><span class="kw">str_count</span>(phrases, lettre)</span>
<span id="cb849-4"><a href="16-boucles-if.html#cb849-4"></a>    phrases[n_lettre <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(n_lettre)]</span>
<span id="cb849-5"><a href="16-boucles-if.html#cb849-5"></a>}</span></code></pre></div>
<p>On teste cette nouvelle version :</p>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb850-1"><a href="16-boucles-if.html#cb850-1"></a><span class="kw">phrase_max</span>(texte, <span class="st">&quot;t&quot;</span>)</span>
<span id="cb850-2"><a href="16-boucles-if.html#cb850-2"></a><span class="co">#&gt; [1] &quot; Le chat dort tout le temps&quot;</span></span></code></pre></div>
<p>Cette fois ça semble fonctionner !</p>
</div>
<div id="localiser-une-erreur" class="section level3">
<h3><span class="header-section-number">16.4.2</span> Localiser une erreur</h3>
<p><code>print()</code> peut aussi être utile pour savoir à quel moment une erreur se produit.</p>
<p>Dans l’exemple suivant, on crée une fonction <code>prop_values()</code> qui prend en argument un tableau de données <code>df</code> et une proportion <code>prop</code> et retourne une liste comportant les modalités de variables qui apparaissent au moins dans la proportion correspondante.</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb851-1"><a href="16-boucles-if.html#cb851-1"></a>prop_values &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">prop =</span> <span class="fl">0.5</span>) {</span>
<span id="cb851-2"><a href="16-boucles-if.html#cb851-2"></a>    min_freq &lt;-<span class="st"> </span>prop <span class="op">*</span><span class="st"> </span><span class="kw">nrow</span>(df)</span>
<span id="cb851-3"><a href="16-boucles-if.html#cb851-3"></a>    res &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb851-4"><a href="16-boucles-if.html#cb851-4"></a>    <span class="cf">for</span> (var <span class="cf">in</span> <span class="kw">names</span>(df)) {</span>
<span id="cb851-5"><a href="16-boucles-if.html#cb851-5"></a>        freq &lt;-<span class="st"> </span><span class="kw">table</span>(df[[var]])</span>
<span id="cb851-6"><a href="16-boucles-if.html#cb851-6"></a>        freq &lt;-<span class="st"> </span>freq[freq <span class="op">&gt;=</span><span class="st"> </span>min_freq]</span>
<span id="cb851-7"><a href="16-boucles-if.html#cb851-7"></a>        <span class="cf">if</span> (<span class="kw">length</span>(freq) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb851-8"><a href="16-boucles-if.html#cb851-8"></a>            res[[var]] &lt;-<span class="st"> </span>freq</span>
<span id="cb851-9"><a href="16-boucles-if.html#cb851-9"></a>        }</span>
<span id="cb851-10"><a href="16-boucles-if.html#cb851-10"></a>    }</span>
<span id="cb851-11"><a href="16-boucles-if.html#cb851-11"></a>    res</span>
<span id="cb851-12"><a href="16-boucles-if.html#cb851-12"></a>}</span></code></pre></div>
<p>Si on applique <code>prop_values()</code> à <code>hdv2003</code> avec une valeur de <code>prop</code> à 0.75, on obtient toutes les modalités correspondant à au moins trois quart des observations.</p>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="16-boucles-if.html#cb852-1"></a><span class="kw">data</span>(hdv2003)</span>
<span id="cb852-2"><a href="16-boucles-if.html#cb852-2"></a><span class="kw">prop_values</span>(hdv2003, <span class="fl">0.75</span>)</span>
<span id="cb852-3"><a href="16-boucles-if.html#cb852-3"></a><span class="co">#&gt; $hard.rock</span></span>
<span id="cb852-4"><a href="16-boucles-if.html#cb852-4"></a><span class="co">#&gt;  Non </span></span>
<span id="cb852-5"><a href="16-boucles-if.html#cb852-5"></a><span class="co">#&gt; 1986 </span></span>
<span id="cb852-6"><a href="16-boucles-if.html#cb852-6"></a><span class="co">#&gt; </span></span>
<span id="cb852-7"><a href="16-boucles-if.html#cb852-7"></a><span class="co">#&gt; $lecture.bd</span></span>
<span id="cb852-8"><a href="16-boucles-if.html#cb852-8"></a><span class="co">#&gt;  Non </span></span>
<span id="cb852-9"><a href="16-boucles-if.html#cb852-9"></a><span class="co">#&gt; 1953 </span></span>
<span id="cb852-10"><a href="16-boucles-if.html#cb852-10"></a><span class="co">#&gt; </span></span>
<span id="cb852-11"><a href="16-boucles-if.html#cb852-11"></a><span class="co">#&gt; $peche.chasse</span></span>
<span id="cb852-12"><a href="16-boucles-if.html#cb852-12"></a><span class="co">#&gt;  Non </span></span>
<span id="cb852-13"><a href="16-boucles-if.html#cb852-13"></a><span class="co">#&gt; 1776</span></span></code></pre></div>
<p>Essayons maintenant d’appliquer <code>prop_values()</code> au jeu de données <code>starwars</code> de <code>dplyr</code>.</p>
<div class="sourceCode" id="cb853"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb853-1"><a href="16-boucles-if.html#cb853-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb853-2"><a href="16-boucles-if.html#cb853-2"></a><span class="kw">data</span>(starwars)</span>
<span id="cb853-3"><a href="16-boucles-if.html#cb853-3"></a><span class="kw">prop_values</span>(starwars, <span class="fl">0.75</span>)</span>
<span id="cb853-4"><a href="16-boucles-if.html#cb853-4"></a><span class="co">#&gt; Error in table(df[[var]]): all arguments must have the same length</span></span></code></pre></div>
<p>On obtient une erreur plus ou moins sybilline : apparemment une erreur se produit au moment de faire le tri à plat des valeurs avec <code>table(df[[var]])</code>. Mais comme ce tri à plat s’effectue dans une boucle, on ne sait pas quelle variable de <code>starwars</code> cause le problème.</p>
<p>On va donc rajouter comme première instruction de la boucle un <code>print(var)</code>.</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb854-1"><a href="16-boucles-if.html#cb854-1"></a>prop_values &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">prop =</span> <span class="fl">0.5</span>) {</span>
<span id="cb854-2"><a href="16-boucles-if.html#cb854-2"></a>    min_freq &lt;-<span class="st"> </span>prop <span class="op">*</span><span class="st"> </span><span class="kw">nrow</span>(df)</span>
<span id="cb854-3"><a href="16-boucles-if.html#cb854-3"></a>    res &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb854-4"><a href="16-boucles-if.html#cb854-4"></a>    <span class="cf">for</span> (var <span class="cf">in</span> <span class="kw">names</span>(df)) {</span>
<span id="cb854-5"><a href="16-boucles-if.html#cb854-5"></a>        <span class="kw">print</span>(var) <span class="co"># debug</span></span>
<span id="cb854-6"><a href="16-boucles-if.html#cb854-6"></a>        freq &lt;-<span class="st"> </span><span class="kw">table</span>(df[[var]])</span>
<span id="cb854-7"><a href="16-boucles-if.html#cb854-7"></a>        freq &lt;-<span class="st"> </span>freq[freq <span class="op">&gt;=</span><span class="st"> </span>min_freq]</span>
<span id="cb854-8"><a href="16-boucles-if.html#cb854-8"></a>        <span class="cf">if</span> (<span class="kw">length</span>(freq) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb854-9"><a href="16-boucles-if.html#cb854-9"></a>            res[[var]] &lt;-<span class="st"> </span>freq</span>
<span id="cb854-10"><a href="16-boucles-if.html#cb854-10"></a>        }</span>
<span id="cb854-11"><a href="16-boucles-if.html#cb854-11"></a>    }</span>
<span id="cb854-12"><a href="16-boucles-if.html#cb854-12"></a>    res</span>
<span id="cb854-13"><a href="16-boucles-if.html#cb854-13"></a>}</span>
<span id="cb854-14"><a href="16-boucles-if.html#cb854-14"></a></span>
<span id="cb854-15"><a href="16-boucles-if.html#cb854-15"></a><span class="kw">prop_values</span>(starwars, <span class="fl">0.75</span>)</span>
<span id="cb854-16"><a href="16-boucles-if.html#cb854-16"></a><span class="co">#&gt; [1] &quot;name&quot;</span></span>
<span id="cb854-17"><a href="16-boucles-if.html#cb854-17"></a><span class="co">#&gt; [1] &quot;height&quot;</span></span>
<span id="cb854-18"><a href="16-boucles-if.html#cb854-18"></a><span class="co">#&gt; [1] &quot;mass&quot;</span></span>
<span id="cb854-19"><a href="16-boucles-if.html#cb854-19"></a><span class="co">#&gt; [1] &quot;hair_color&quot;</span></span>
<span id="cb854-20"><a href="16-boucles-if.html#cb854-20"></a><span class="co">#&gt; [1] &quot;skin_color&quot;</span></span>
<span id="cb854-21"><a href="16-boucles-if.html#cb854-21"></a><span class="co">#&gt; [1] &quot;eye_color&quot;</span></span>
<span id="cb854-22"><a href="16-boucles-if.html#cb854-22"></a><span class="co">#&gt; [1] &quot;birth_year&quot;</span></span>
<span id="cb854-23"><a href="16-boucles-if.html#cb854-23"></a><span class="co">#&gt; [1] &quot;sex&quot;</span></span>
<span id="cb854-24"><a href="16-boucles-if.html#cb854-24"></a><span class="co">#&gt; [1] &quot;gender&quot;</span></span>
<span id="cb854-25"><a href="16-boucles-if.html#cb854-25"></a><span class="co">#&gt; [1] &quot;homeworld&quot;</span></span>
<span id="cb854-26"><a href="16-boucles-if.html#cb854-26"></a><span class="co">#&gt; [1] &quot;species&quot;</span></span>
<span id="cb854-27"><a href="16-boucles-if.html#cb854-27"></a><span class="co">#&gt; [1] &quot;films&quot;</span></span>
<span id="cb854-28"><a href="16-boucles-if.html#cb854-28"></a><span class="co">#&gt; Error in table(df[[var]]): all arguments must have the same length</span></span></code></pre></div>
<p>On voit que tout semble bien se passer pour les premières variables de notre tableau, et que l’erreur survient au moment de traiter la variable <code>films</code>. On regarde donc à quoi ressemble cette variable.</p>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb855-1"><a href="16-boucles-if.html#cb855-1"></a><span class="kw">head</span>(starwars<span class="op">$</span>films, <span class="dv">3</span>)</span>
<span id="cb855-2"><a href="16-boucles-if.html#cb855-2"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb855-3"><a href="16-boucles-if.html#cb855-3"></a><span class="co">#&gt; [1] &quot;The Empire Strikes Back&quot; &quot;Revenge of the Sith&quot;    </span></span>
<span id="cb855-4"><a href="16-boucles-if.html#cb855-4"></a><span class="co">#&gt; [3] &quot;Return of the Jedi&quot;      &quot;A New Hope&quot;             </span></span>
<span id="cb855-5"><a href="16-boucles-if.html#cb855-5"></a><span class="co">#&gt; [5] &quot;The Force Awakens&quot;      </span></span>
<span id="cb855-6"><a href="16-boucles-if.html#cb855-6"></a><span class="co">#&gt; </span></span>
<span id="cb855-7"><a href="16-boucles-if.html#cb855-7"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb855-8"><a href="16-boucles-if.html#cb855-8"></a><span class="co">#&gt; [1] &quot;The Empire Strikes Back&quot; &quot;Attack of the Clones&quot;   </span></span>
<span id="cb855-9"><a href="16-boucles-if.html#cb855-9"></a><span class="co">#&gt; [3] &quot;The Phantom Menace&quot;      &quot;Revenge of the Sith&quot;    </span></span>
<span id="cb855-10"><a href="16-boucles-if.html#cb855-10"></a><span class="co">#&gt; [5] &quot;Return of the Jedi&quot;      &quot;A New Hope&quot;             </span></span>
<span id="cb855-11"><a href="16-boucles-if.html#cb855-11"></a><span class="co">#&gt; </span></span>
<span id="cb855-12"><a href="16-boucles-if.html#cb855-12"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb855-13"><a href="16-boucles-if.html#cb855-13"></a><span class="co">#&gt; [1] &quot;The Empire Strikes Back&quot; &quot;Attack of the Clones&quot;   </span></span>
<span id="cb855-14"><a href="16-boucles-if.html#cb855-14"></a><span class="co">#&gt; [3] &quot;The Phantom Menace&quot;      &quot;Revenge of the Sith&quot;    </span></span>
<span id="cb855-15"><a href="16-boucles-if.html#cb855-15"></a><span class="co">#&gt; [5] &quot;Return of the Jedi&quot;      &quot;A New Hope&quot;             </span></span>
<span id="cb855-16"><a href="16-boucles-if.html#cb855-16"></a><span class="co">#&gt; [7] &quot;The Force Awakens&quot;</span></span></code></pre></div>
<p>Damn, cette variable n’est pas un vecteur atomique mais une liste ! Un tableau de données peut en effet contenir ce que l’on appelle des colonnes-listes. Comme ça n’est pas fréquent, on ne l’avait clairement pas prévu au moment de la création de la fonction.</p>
<p>On a désormais identifié le problème, on peut donc le corriger par exemple en ignorant les colonnes de type liste en utilisant <code>is.list()</code> et l’instruction <code>next</code>.</p>
<div class="sourceCode" id="cb856"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb856-1"><a href="16-boucles-if.html#cb856-1"></a>prop_values &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">prop =</span> <span class="fl">0.5</span>) {</span>
<span id="cb856-2"><a href="16-boucles-if.html#cb856-2"></a>    min_freq &lt;-<span class="st"> </span>prop <span class="op">*</span><span class="st"> </span><span class="kw">nrow</span>(df)</span>
<span id="cb856-3"><a href="16-boucles-if.html#cb856-3"></a>    res &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb856-4"><a href="16-boucles-if.html#cb856-4"></a>    <span class="cf">for</span> (var <span class="cf">in</span> <span class="kw">names</span>(df)) {</span>
<span id="cb856-5"><a href="16-boucles-if.html#cb856-5"></a>        <span class="cf">if</span> (<span class="kw">is.list</span>(df[[var]])) <span class="cf">next</span></span>
<span id="cb856-6"><a href="16-boucles-if.html#cb856-6"></a>        freq &lt;-<span class="st"> </span><span class="kw">table</span>(df[[var]])</span>
<span id="cb856-7"><a href="16-boucles-if.html#cb856-7"></a>        freq &lt;-<span class="st"> </span>freq[freq <span class="op">&gt;=</span><span class="st"> </span>min_freq]</span>
<span id="cb856-8"><a href="16-boucles-if.html#cb856-8"></a>        <span class="cf">if</span> (<span class="kw">length</span>(freq) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb856-9"><a href="16-boucles-if.html#cb856-9"></a>            res[[var]] &lt;-<span class="st"> </span>freq</span>
<span id="cb856-10"><a href="16-boucles-if.html#cb856-10"></a>        }</span>
<span id="cb856-11"><a href="16-boucles-if.html#cb856-11"></a>    }</span>
<span id="cb856-12"><a href="16-boucles-if.html#cb856-12"></a>    res</span>
<span id="cb856-13"><a href="16-boucles-if.html#cb856-13"></a>}</span>
<span id="cb856-14"><a href="16-boucles-if.html#cb856-14"></a></span>
<span id="cb856-15"><a href="16-boucles-if.html#cb856-15"></a><span class="kw">prop_values</span>(starwars, <span class="fl">0.75</span>)</span>
<span id="cb856-16"><a href="16-boucles-if.html#cb856-16"></a><span class="co">#&gt; $gender</span></span>
<span id="cb856-17"><a href="16-boucles-if.html#cb856-17"></a><span class="co">#&gt; masculine </span></span>
<span id="cb856-18"><a href="16-boucles-if.html#cb856-18"></a><span class="co">#&gt;        66</span></span></code></pre></div>
</div>
<div id="browser" class="section level3">
<h3><span class="header-section-number">16.4.3</span> browser()</h3>
<p>Il y a des alternatives plus efficaces à l’utilisation de <code>print()</code> pour identifier et comprendre les bugs. La plus utilisée est la fonction <code>browser()</code>. Celle-ci peut s’insérer à n’importe quel endroit du code, et lorsqu’elle est rencontrée par R celui-ci s’interrompt et affiche une invite de commande permettant notamment d’inspecter des objets.</p>
<p>On reprend l’exemple précédent en remplaçant le <code>print(var)</code> que nous avions inséré pour débugguer la fonction <code>prop_values</code> par un appel à <code>browser()</code>.</p>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb857-1"><a href="16-boucles-if.html#cb857-1"></a>prop_values &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">prop =</span> <span class="fl">0.5</span>) {</span>
<span id="cb857-2"><a href="16-boucles-if.html#cb857-2"></a>    min_freq &lt;-<span class="st"> </span>prop <span class="op">*</span><span class="st"> </span><span class="kw">nrow</span>(df)</span>
<span id="cb857-3"><a href="16-boucles-if.html#cb857-3"></a>    res &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb857-4"><a href="16-boucles-if.html#cb857-4"></a>    <span class="cf">for</span> (var <span class="cf">in</span> <span class="kw">names</span>(df)) {</span>
<span id="cb857-5"><a href="16-boucles-if.html#cb857-5"></a>        <span class="kw">browser</span>()</span>
<span id="cb857-6"><a href="16-boucles-if.html#cb857-6"></a>        freq &lt;-<span class="st"> </span><span class="kw">table</span>(df[[var]])</span>
<span id="cb857-7"><a href="16-boucles-if.html#cb857-7"></a>        freq &lt;-<span class="st"> </span>freq[freq <span class="op">&gt;=</span><span class="st"> </span>min_freq]</span>
<span id="cb857-8"><a href="16-boucles-if.html#cb857-8"></a>        <span class="cf">if</span> (<span class="kw">length</span>(freq) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb857-9"><a href="16-boucles-if.html#cb857-9"></a>            res[[var]] &lt;-<span class="st"> </span>freq</span>
<span id="cb857-10"><a href="16-boucles-if.html#cb857-10"></a>        }</span>
<span id="cb857-11"><a href="16-boucles-if.html#cb857-11"></a>    }</span>
<span id="cb857-12"><a href="16-boucles-if.html#cb857-12"></a>    res</span>
<span id="cb857-13"><a href="16-boucles-if.html#cb857-13"></a>}</span>
<span id="cb857-14"><a href="16-boucles-if.html#cb857-14"></a></span>
<span id="cb857-15"><a href="16-boucles-if.html#cb857-15"></a><span class="kw">prop_values</span>(starwars, <span class="fl">0.75</span>)</span></code></pre></div>
<p>Lorsqu’on lance ce code, R s’interrompt et affiche l’invite de commande suivant :</p>
<pre><code>Called from: prop_values(starwars, 0.75)

Browse[1]&gt;</code></pre>
<p>Cette invite de commande offre plusieurs possibilités. On peut lui indiquer du code R qui sera exécuté dans le contexte du moment de l’interruption. Notamment, si on indique un nom d’objet, on pourra voir sa valeur. Ainsi, si on tape <code>var</code>, R nous affiche la valeur actuelle de <code>var</code>, donc au moment de la première itération de la boucle.</p>
<pre><code>Browse[1]&gt; var                                         
[1] &quot;name&quot;</code></pre>
<p>On peut également fournir des commandes spécifiques : si on tape <code>n</code>, R va passer à l’instruction suivante puis s’interrompre à nouveau<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a>.</p>
<pre><code>Browse[1]&gt; n                                           
debug à #6 : freq &lt;- table(df[[var]])</code></pre>
<p>Si on tape <code>c</code>, R va relancer l’exécution jusqu’à la fin, ou jusqu’à la prochaine rencontre d’un <code>browser()</code>. Dans notre cas, cela signifie qu’on va continuer jusqu’au <code>browser()</code> de la deuxième itération de la boucle.</p>
<pre><code>Browse[2]&gt; c                                           
Called from: prop_values(starwars, 0.75)

Browse[1]&gt; var                                         
[1] &quot;height&quot;</code></pre>
<p>Si on souhaite sortir de cette invite de commande et tout interrompre, il suffit de taper <code>Q</code>.</p>
<p><code>browser()</code> est donc un peu plus complexe à utiliser que des <code>print()</code> ajoutés manuellement, mais c’est aussi un outil plus souple et plus puissant.</p>
<div class="rmdnote">
<p>
Cette section n’offre qu’un petit aperçu des possibilités de debugging. R propose d’autres fonctionnalités, et les environnements de développement comme RStudio ou Visual Studio Code proposent également leurs propres outils.
</p>
<p>
Pour plus d’informations on pourra se reporter aux ressources indiquées dans la section ci-dessous.
</p>
</div>
</div>
</div>
<div id="ressources-boucles" class="section level2">
<h2><span class="header-section-number">16.5</span> Ressources</h2>
<p>L’ouvrage <em>R for Data Science</em> (en anglais), accessible en ligne, contient <a href="https://r4ds.had.co.nz/iteration.html#for-loops">un chapitre sur les boucles for</a>, et <a href="https://r4ds.had.co.nz/functions.html#conditional-execution">un chapitre sur les blocs if / else</a>.</p>
<p>L’ouvrage <em>Advanced R</em> (également en anglais) aborde de manière approfondie <a href="https://adv-r.hadley.nz/control-flow.html">les tests et les boucles</a> et consacre un chapitre entier <a href="https://adv-r.hadley.nz/debugging.html">au debugging</a>.</p>
<p>Sur le blog de <a href="https://thinkr.fr/">ThinkR</a>, <a href="https://thinkr.fr/comment-faire-des-boucles-en-r-ou-pas/">un article détaillé sur l’utilisation des boucles</a> et les alternatives possibles.</p>
<p>Sur le <a href="https://privefl.github.io/blog/">blog de Florian Privé</a>, un <a href="https://privefl.github.io/blog/why-loops-are-slow-in-r/">billet approfondi sur les raisons pour lesquelles les boucles peuvent être lentes</a> et sur les cas où il est préférable de ne pas les utiliser.</p>
<p>Le site de RStudio propose une page entière détaillant ses <a href="https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio">fonctionnalités de debugging</a> (en anglais). Pour les utilisateurs de Visual Studio Code, on pourra se référer à l’extension <a href="https://github.com/ManuelHentschel/VSCode-R-Debugger">VSCode-R-Debugger</a>.</p>
</div>
<div id="exercices-9" class="section level2">
<h2><span class="header-section-number">16.6</span> Exercices</h2>
<div id="if-et-else" class="section level3">
<h3><span class="header-section-number">16.6.1</span> <code>if</code> et <code>else</code></h3>
<p><strong>Exercice 1.1</strong></p>
<p>Écrire une fonction <code>pile_ou_face</code> qui ne prend aucun argument en entrée et qui effectue les actions suivantes :</p>
<ul>
<li>tire un nombre au hasard entre 0 et 1 avec <code>runif(1)</code></li>
<li>si ce nombre est inférieur à 0.5, retourne “pile”</li>
<li>sinon, retourne “face”</li>
</ul>

<div class="solution-exo">
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="16-boucles-if.html#cb862-1"></a>pile_ou_face &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb862-2"><a href="16-boucles-if.html#cb862-2"></a>    alea &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>)</span>
<span id="cb862-3"><a href="16-boucles-if.html#cb862-3"></a>    <span class="cf">if</span> (alea <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.5</span>) {</span>
<span id="cb862-4"><a href="16-boucles-if.html#cb862-4"></a>        result &lt;-<span class="st"> &quot;pile&quot;</span></span>
<span id="cb862-5"><a href="16-boucles-if.html#cb862-5"></a>    } <span class="cf">else</span> {</span>
<span id="cb862-6"><a href="16-boucles-if.html#cb862-6"></a>        result &lt;-<span class="st"> &quot;face&quot;</span></span>
<span id="cb862-7"><a href="16-boucles-if.html#cb862-7"></a>    }</span>
<span id="cb862-8"><a href="16-boucles-if.html#cb862-8"></a>    result</span>
<span id="cb862-9"><a href="16-boucles-if.html#cb862-9"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.2</strong></p>
<p>Créer une fonction <code>moyenne_arrondie</code>, qui prend en argument un vecteur <code>x</code>, un argument <code>na.rm</code> avec une valeur par défaut à <code>TRUE</code>, et un argument facultatif <code>decimales</code>. La fonction doit effectuer les opérations suivantes :</p>
<ul>
<li>calculer la moyenne du vecteur en tenant compte de l’argument <code>na.rm</code> passé à la fonction</li>
<li>si <code>decimales</code> est défini, arrondir la moyenne au nombre de décimales correspondant avec la fonction <code>round()</code></li>
<li>retourner le résultat</li>
</ul>

<div class="solution-exo">
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="16-boucles-if.html#cb863-1"></a>moyenne_arrondie &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, <span class="dt">decimales =</span> <span class="ot">NULL</span>) {</span>
<span id="cb863-2"><a href="16-boucles-if.html#cb863-2"></a>    moyenne &lt;-<span class="st"> </span><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> na.rm)</span>
<span id="cb863-3"><a href="16-boucles-if.html#cb863-3"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(decimales)) {</span>
<span id="cb863-4"><a href="16-boucles-if.html#cb863-4"></a>        moyenne &lt;-<span class="st"> </span><span class="kw">round</span>(moyenne, decimales)</span>
<span id="cb863-5"><a href="16-boucles-if.html#cb863-5"></a>    }</span>
<span id="cb863-6"><a href="16-boucles-if.html#cb863-6"></a>    moyenne</span>
<span id="cb863-7"><a href="16-boucles-if.html#cb863-7"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.3</strong></p>
<p>Écrire une fonction <code>avertissement</code> qui prend deux arguments <code>pluie</code> et <code>parapluie</code>, avec comme valeurs <code>FALSE</code> par défaut, et qui effectue les opérations suivantes :</p>
<ul>
<li>si <code>pluie</code> vaut <code>TRUE</code> et <code>parapluie</code> vaut <code>FALSE</code>, affiche “mouillé”</li>
<li>si <code>pluie</code> vaut <code>TRUE</code> et <code>parapluie</code> vaut <code>TRUE</code>, affiche “bien vu”</li>
<li>si <code>pluie</code> vaut <code>FALSE</code>, affiche “RAS”</li>
</ul>

<div class="solution-exo">
<div class="sourceCode" id="cb864"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb864-1"><a href="16-boucles-if.html#cb864-1"></a>avertissement &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">pluie =</span> <span class="ot">FALSE</span>, <span class="dt">parapluie =</span> <span class="ot">FALSE</span>) {</span>
<span id="cb864-2"><a href="16-boucles-if.html#cb864-2"></a>    <span class="cf">if</span> (pluie <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span>parapluie) {</span>
<span id="cb864-3"><a href="16-boucles-if.html#cb864-3"></a>        <span class="kw">message</span>(<span class="st">&quot;mouillé&quot;</span>)</span>
<span id="cb864-4"><a href="16-boucles-if.html#cb864-4"></a>    }</span>
<span id="cb864-5"><a href="16-boucles-if.html#cb864-5"></a>    <span class="cf">if</span> (pluie <span class="op">&amp;&amp;</span><span class="st"> </span>parapluie) {</span>
<span id="cb864-6"><a href="16-boucles-if.html#cb864-6"></a>        <span class="kw">message</span>(<span class="st">&quot;bien vu&quot;</span>)</span>
<span id="cb864-7"><a href="16-boucles-if.html#cb864-7"></a>    }</span>
<span id="cb864-8"><a href="16-boucles-if.html#cb864-8"></a>    <span class="cf">if</span> (<span class="op">!</span>pluie) {</span>
<span id="cb864-9"><a href="16-boucles-if.html#cb864-9"></a>        <span class="kw">message</span>(<span class="st">&quot;RAS&quot;</span>)</span>
<span id="cb864-10"><a href="16-boucles-if.html#cb864-10"></a>    }</span>
<span id="cb864-11"><a href="16-boucles-if.html#cb864-11"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 1.4</strong></p>
<p>Écrire une fonction <code>meteo</code> qui prend un argument nommé <code>temperature</code> et effectue les actions suivantes :</p>
<ul>
<li>si <code>temperature</code> est inférieure à 0, affiche le message “ça caille”</li>
<li>si <code>temperature</code> est comprise entre 0 et 15, affiche le message “fais pas chaud”</li>
<li>si <code>temperature</code> est comprise entre 15 et 30, affiche le message “on est pas mal”</li>
<li>si <code>temperature</code> est supérieure à 30, affiche le message “tous à Miribel”</li>
</ul>

<div class="solution-exo">
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb865-1"><a href="16-boucles-if.html#cb865-1"></a>meteo &lt;-<span class="st"> </span><span class="cf">function</span>(temperature) {</span>
<span id="cb865-2"><a href="16-boucles-if.html#cb865-2"></a>    <span class="cf">if</span> (temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb865-3"><a href="16-boucles-if.html#cb865-3"></a>        <span class="kw">message</span>(<span class="st">&quot;ça caille&quot;</span>)</span>
<span id="cb865-4"><a href="16-boucles-if.html#cb865-4"></a>    } <span class="cf">else</span> <span class="cf">if</span> (temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">15</span>) {</span>
<span id="cb865-5"><a href="16-boucles-if.html#cb865-5"></a>        <span class="kw">message</span>(<span class="st">&quot;fais pas chaud&quot;</span>)</span>
<span id="cb865-6"><a href="16-boucles-if.html#cb865-6"></a>    } <span class="cf">else</span> <span class="cf">if</span> (temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</span>
<span id="cb865-7"><a href="16-boucles-if.html#cb865-7"></a>        <span class="kw">message</span>(<span class="st">&quot;on est pas mal&quot;</span>)</span>
<span id="cb865-8"><a href="16-boucles-if.html#cb865-8"></a>    } <span class="cf">else</span> {</span>
<span id="cb865-9"><a href="16-boucles-if.html#cb865-9"></a>        <span class="kw">message</span>(<span class="st">&quot;tous à Miribel&quot;</span>)</span>
<span id="cb865-10"><a href="16-boucles-if.html#cb865-10"></a>    }</span>
<span id="cb865-11"><a href="16-boucles-if.html#cb865-11"></a>}</span>
<span id="cb865-12"><a href="16-boucles-if.html#cb865-12"></a><span class="co"># Ou bien</span></span>
<span id="cb865-13"><a href="16-boucles-if.html#cb865-13"></a>meteo &lt;-<span class="st"> </span><span class="cf">function</span>(temperature) {</span>
<span id="cb865-14"><a href="16-boucles-if.html#cb865-14"></a>    <span class="cf">if</span> (temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb865-15"><a href="16-boucles-if.html#cb865-15"></a>        <span class="kw">message</span>(<span class="st">&quot;ça caille&quot;</span>)</span>
<span id="cb865-16"><a href="16-boucles-if.html#cb865-16"></a>    } </span>
<span id="cb865-17"><a href="16-boucles-if.html#cb865-17"></a>    <span class="cf">if</span> (temperature <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">15</span>) {</span>
<span id="cb865-18"><a href="16-boucles-if.html#cb865-18"></a>        <span class="kw">message</span>(<span class="st">&quot;fais pas chaud&quot;</span>)</span>
<span id="cb865-19"><a href="16-boucles-if.html#cb865-19"></a>    } </span>
<span id="cb865-20"><a href="16-boucles-if.html#cb865-20"></a>    <span class="cf">if</span> (temperature <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> <span class="op">&amp;&amp;</span><span class="st"> </span>temperature <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</span>
<span id="cb865-21"><a href="16-boucles-if.html#cb865-21"></a>        <span class="kw">message</span>(<span class="st">&quot;on est pas mal&quot;</span>)</span>
<span id="cb865-22"><a href="16-boucles-if.html#cb865-22"></a>    } </span>
<span id="cb865-23"><a href="16-boucles-if.html#cb865-23"></a>    <span class="cf">if</span> (temperature <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>) {</span>
<span id="cb865-24"><a href="16-boucles-if.html#cb865-24"></a>        <span class="kw">message</span>(<span class="st">&quot;tous à Mriribel&quot;</span>)</span>
<span id="cb865-25"><a href="16-boucles-if.html#cb865-25"></a>    }</span>
<span id="cb865-26"><a href="16-boucles-if.html#cb865-26"></a>}</span></code></pre></div>
</div>

</div>
<div id="contrôle-de-lexécution" class="section level3">
<h3><span class="header-section-number">16.6.2</span> Contrôle de l’exécution</h3>
<p><strong>Exercice 2.1</strong></p>
<p>Créer une fonction <code>etendue</code> qui renvoie la différence entre la plus grande et la plus petite valeur d’un vecteur.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="16-boucles-if.html#cb866-1"></a>etendue &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb866-2"><a href="16-boucles-if.html#cb866-2"></a>    <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</span>
<span id="cb866-3"><a href="16-boucles-if.html#cb866-3"></a>}</span></code></pre></div>
</div>

<p>Modifier la fonction pour qu’elle retourne <code>NA</code> si le vecteur passé en argument n’est pas numérique.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb867"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb867-1"><a href="16-boucles-if.html#cb867-1"></a>etendue &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb867-2"><a href="16-boucles-if.html#cb867-2"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.numeric</span>(x)) {</span>
<span id="cb867-3"><a href="16-boucles-if.html#cb867-3"></a>        <span class="kw">return</span>(<span class="ot">NA</span>)</span>
<span id="cb867-4"><a href="16-boucles-if.html#cb867-4"></a>    }</span>
<span id="cb867-5"><a href="16-boucles-if.html#cb867-5"></a>    <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</span>
<span id="cb867-6"><a href="16-boucles-if.html#cb867-6"></a>}</span></code></pre></div>
</div>

<p>Modifier à nouveau la fonction pour qu’elle affiche un avertissement avant de renvoyer la valeur <code>NA</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="16-boucles-if.html#cb868-1"></a>etendue &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb868-2"><a href="16-boucles-if.html#cb868-2"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.numeric</span>(x)) {</span>
<span id="cb868-3"><a href="16-boucles-if.html#cb868-3"></a>        <span class="kw">warning</span>(<span class="st">&quot;x doit être numérique&quot;</span>)</span>
<span id="cb868-4"><a href="16-boucles-if.html#cb868-4"></a>        <span class="kw">return</span>(<span class="ot">NA</span>)</span>
<span id="cb868-5"><a href="16-boucles-if.html#cb868-5"></a>    }</span>
<span id="cb868-6"><a href="16-boucles-if.html#cb868-6"></a>    <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</span>
<span id="cb868-7"><a href="16-boucles-if.html#cb868-7"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 2.2</strong></p>
<p>Créer une fonction <code>proportion</code> qui prend en argument un vecteur et retourne les valeurs de ce vecteur divisée par leur somme.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb869"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb869-1"><a href="16-boucles-if.html#cb869-1"></a>proportion &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb869-2"><a href="16-boucles-if.html#cb869-2"></a>    x <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(x)</span>
<span id="cb869-3"><a href="16-boucles-if.html#cb869-3"></a>}</span></code></pre></div>
</div>

<p>Essayer d’exécuter <code>proportion(c(-2, 1, 1))</code>. Pourquoi obtient-on ce résultat ?</p>

<div class="solution-exo">
<p>Comme la somme des éléments du vecteur vaut 0, lorsqu’on divise chaque élément par cette valeur on obtient l’infini (<code>Inf</code>), soit négatif soit positif selon le signe de l’élément divisé.</p>
</div>

<p>Modifier la fonction pour qu’elle retourne un message d’erreur si la somme des éléments du vecteur vaut 0.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="16-boucles-if.html#cb870-1"></a>proportion &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb870-2"><a href="16-boucles-if.html#cb870-2"></a>    <span class="cf">if</span> (<span class="kw">sum</span>(x) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb870-3"><a href="16-boucles-if.html#cb870-3"></a>        <span class="kw">stop</span>(<span class="st">&quot;la somme des éléments de x vaut zéro&quot;</span>)</span>
<span id="cb870-4"><a href="16-boucles-if.html#cb870-4"></a>    }</span>
<span id="cb870-5"><a href="16-boucles-if.html#cb870-5"></a>    x <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(x)</span>
<span id="cb870-6"><a href="16-boucles-if.html#cb870-6"></a>}</span></code></pre></div>
</div>

</div>
<div id="boucles" class="section level3">
<h3><span class="header-section-number">16.6.3</span> Boucles</h3>
<p><strong>Exercice 3.1</strong></p>
<p>Charger le jeu de données <code>hdv2003</code> de l’extension <code>questionr</code> avec :</p>
<div class="sourceCode" id="cb871"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb871-1"><a href="16-boucles-if.html#cb871-1"></a><span class="kw">library</span>(questionr)</span>
<span id="cb871-2"><a href="16-boucles-if.html#cb871-2"></a><span class="kw">data</span>(hdv2003)</span></code></pre></div>
<p>À l’aide d’une boucle <code>for</code>, parcourir les noms des variables de <code>hdv2003</code>. Si la variable en question est numérique, faire l’histogramme de la variable avec la fonction <code>hist()</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="16-boucles-if.html#cb872-1"></a><span class="cf">for</span> (name <span class="cf">in</span> <span class="kw">names</span>(hdv2003)) {</span>
<span id="cb872-2"><a href="16-boucles-if.html#cb872-2"></a>    variable &lt;-<span class="st"> </span>hdv2003[, name]</span>
<span id="cb872-3"><a href="16-boucles-if.html#cb872-3"></a>    <span class="cf">if</span> (<span class="kw">is.numeric</span>(variable)) {</span>
<span id="cb872-4"><a href="16-boucles-if.html#cb872-4"></a>        <span class="kw">hist</span>(variable)</span>
<span id="cb872-5"><a href="16-boucles-if.html#cb872-5"></a>    }</span>
<span id="cb872-6"><a href="16-boucles-if.html#cb872-6"></a>}</span></code></pre></div>
</div>

<p>Ajouter le nom de la variable comme titre du graphique en utilisant l’argument <code>main</code> de <code>hist()</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb873-1"><a href="16-boucles-if.html#cb873-1"></a><span class="cf">for</span> (name <span class="cf">in</span> <span class="kw">names</span>(hdv2003)) {</span>
<span id="cb873-2"><a href="16-boucles-if.html#cb873-2"></a>    variable &lt;-<span class="st"> </span>hdv2003[, name]</span>
<span id="cb873-3"><a href="16-boucles-if.html#cb873-3"></a>    <span class="cf">if</span> (<span class="kw">is.numeric</span>(variable)) {</span>
<span id="cb873-4"><a href="16-boucles-if.html#cb873-4"></a>        <span class="kw">hist</span>(variable, <span class="dt">main =</span> name)</span>
<span id="cb873-5"><a href="16-boucles-if.html#cb873-5"></a>    }</span>
<span id="cb873-6"><a href="16-boucles-if.html#cb873-6"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 3.2</strong></p>
<p>La fonction <code>readline()</code> permet de lire une chaîne de caractère saisie au clavier de la manière suivante :</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="16-boucles-if.html#cb874-1"></a>reponse &lt;-<span class="st"> </span><span class="kw">readline</span>(<span class="st">&quot;Quelle est votre réponse ?&quot;</span>)</span></code></pre></div>
<p>Écrire le code qui effectue les opérations suivantes :</p>
<ul>
<li>Afficher le message “Quel est le plus grand sociologue de tous les temps ?” et demander la réponse à l’utilisateur</li>
<li>Si la réponse saisie est “Tonton Michel”, afficher “Bingo !”</li>
<li>Sinon, afficher “Nope” et poser à nouveau la question</li>
</ul>

<div class="solution-exo">
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb875-1"><a href="16-boucles-if.html#cb875-1"></a>reponse &lt;-<span class="st"> &quot;&quot;</span></span>
<span id="cb875-2"><a href="16-boucles-if.html#cb875-2"></a><span class="cf">while</span> (reponse <span class="op">!=</span><span class="st"> &quot;Tonton Michel&quot;</span>) {</span>
<span id="cb875-3"><a href="16-boucles-if.html#cb875-3"></a>    reponse &lt;-<span class="st"> </span><span class="kw">readline</span>(<span class="st">&quot;Quel est le plus grand sociologue de tous les temps ?&quot;</span>)</span>
<span id="cb875-4"><a href="16-boucles-if.html#cb875-4"></a>    <span class="cf">if</span> (reponse <span class="op">==</span><span class="st"> &quot;Tonton Michel&quot;</span>) {</span>
<span id="cb875-5"><a href="16-boucles-if.html#cb875-5"></a>        <span class="kw">message</span>(<span class="st">&quot;Bingo !&quot;</span>)</span>
<span id="cb875-6"><a href="16-boucles-if.html#cb875-6"></a>    } <span class="cf">else</span> {</span>
<span id="cb875-7"><a href="16-boucles-if.html#cb875-7"></a>        <span class="kw">message</span>(<span class="st">&quot;Nope !&quot;</span>)</span>
<span id="cb875-8"><a href="16-boucles-if.html#cb875-8"></a>    }</span>
<span id="cb875-9"><a href="16-boucles-if.html#cb875-9"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 3.3</strong></p>
<p>À l’aide d’une boucle <code>for</code>, écrire une fonction <code>somme_positifs</code> qui prend en argument un vecteur et retourne la somme de tous les nombres positifs qu’il contient.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="16-boucles-if.html#cb876-1"></a>somme_positifs &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb876-2"><a href="16-boucles-if.html#cb876-2"></a>    somme &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb876-3"><a href="16-boucles-if.html#cb876-3"></a>    <span class="cf">for</span> (item <span class="cf">in</span> x) {</span>
<span id="cb876-4"><a href="16-boucles-if.html#cb876-4"></a>        <span class="cf">if</span> (item <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb876-5"><a href="16-boucles-if.html#cb876-5"></a>            somme &lt;-<span class="st"> </span>somme <span class="op">+</span><span class="st"> </span>item</span>
<span id="cb876-6"><a href="16-boucles-if.html#cb876-6"></a>        }</span>
<span id="cb876-7"><a href="16-boucles-if.html#cb876-7"></a>    }</span>
<span id="cb876-8"><a href="16-boucles-if.html#cb876-8"></a>    somme</span>
<span id="cb876-9"><a href="16-boucles-if.html#cb876-9"></a>}</span></code></pre></div>
</div>

<p>Réécrire cette fonction pour qu’elle retourne le même résultat mais sans utiliser de boucle.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb877"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb877-1"><a href="16-boucles-if.html#cb877-1"></a>somme_positifs &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb877-2"><a href="16-boucles-if.html#cb877-2"></a>    <span class="kw">sum</span>(x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>])</span>
<span id="cb877-3"><a href="16-boucles-if.html#cb877-3"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 3.4</strong></p>
<p>En utilisant une boucle <code>for</code>, créer une fonction <code>somme_premiers_positifs</code> qui prend en argument un vecteur et retourne la somme de tous les nombres positifs qu’il contient en partant du début du vecteur et en s’arrêtant au premier élément négatif (on pourra recopier et modifier la première fonction <code>somme_positifs</code> de l’exercice précédent).</p>

<div class="solution-exo">
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="16-boucles-if.html#cb878-1"></a>somme_premiers_positifs &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb878-2"><a href="16-boucles-if.html#cb878-2"></a>    somme &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb878-3"><a href="16-boucles-if.html#cb878-3"></a>    <span class="cf">for</span> (item <span class="cf">in</span> x) {</span>
<span id="cb878-4"><a href="16-boucles-if.html#cb878-4"></a>        <span class="cf">if</span> (item <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb878-5"><a href="16-boucles-if.html#cb878-5"></a>            <span class="cf">break</span></span>
<span id="cb878-6"><a href="16-boucles-if.html#cb878-6"></a>        }</span>
<span id="cb878-7"><a href="16-boucles-if.html#cb878-7"></a>        somme &lt;-<span class="st"> </span>somme <span class="op">+</span><span class="st"> </span>item</span>
<span id="cb878-8"><a href="16-boucles-if.html#cb878-8"></a>    }</span>
<span id="cb878-9"><a href="16-boucles-if.html#cb878-9"></a>    somme</span>
<span id="cb878-10"><a href="16-boucles-if.html#cb878-10"></a>}</span></code></pre></div>
</div>

<p><em>Facultatif :</em> réécrire la fonction pour qu’elle retourne le même résultat sans utiliser de boucle <code>for</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb879"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb879-1"><a href="16-boucles-if.html#cb879-1"></a>somme_premiers_positifs &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb879-2"><a href="16-boucles-if.html#cb879-2"></a>    negatifs &lt;-<span class="st"> </span><span class="kw">which</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb879-3"><a href="16-boucles-if.html#cb879-3"></a>    <span class="cf">if</span> (<span class="kw">length</span>(negatifs) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb879-4"><a href="16-boucles-if.html#cb879-4"></a>        <span class="kw">return</span>(<span class="kw">sum</span>(x))</span>
<span id="cb879-5"><a href="16-boucles-if.html#cb879-5"></a>    }</span>
<span id="cb879-6"><a href="16-boucles-if.html#cb879-6"></a>    premier_negatif &lt;-<span class="st"> </span><span class="kw">min</span>(negatifs)</span>
<span id="cb879-7"><a href="16-boucles-if.html#cb879-7"></a>    <span class="kw">sum</span>(<span class="kw">head</span>(x, premier_negatif <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</span>
<span id="cb879-8"><a href="16-boucles-if.html#cb879-8"></a>}</span></code></pre></div>
</div>

<p><strong>Exercice 3.5</strong></p>
<p>Soit la fonction <code>pile_ou_face</code> suivante, qui simule un jet de pièce :</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="16-boucles-if.html#cb880-1"></a>pile_ou_face &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb880-2"><a href="16-boucles-if.html#cb880-2"></a>    alea &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>)</span>
<span id="cb880-3"><a href="16-boucles-if.html#cb880-3"></a>    <span class="cf">if</span> (alea <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.5</span>) {</span>
<span id="cb880-4"><a href="16-boucles-if.html#cb880-4"></a>        result &lt;-<span class="st"> &quot;pile&quot;</span></span>
<span id="cb880-5"><a href="16-boucles-if.html#cb880-5"></a>    } <span class="cf">else</span> {</span>
<span id="cb880-6"><a href="16-boucles-if.html#cb880-6"></a>        result &lt;-<span class="st"> &quot;face&quot;</span></span>
<span id="cb880-7"><a href="16-boucles-if.html#cb880-7"></a>    }</span>
<span id="cb880-8"><a href="16-boucles-if.html#cb880-8"></a>    result</span>
<span id="cb880-9"><a href="16-boucles-if.html#cb880-9"></a>}</span></code></pre></div>
<p>Modifier cette fonction en utilisant une boucle <code>for</code> pour qu’elle accepte un argument <code>n</code> et retourne un vecteur comprenant le résultat de <code>n</code> tirages.</p>
<div class="sourceCode" id="cb881"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb881-1"><a href="16-boucles-if.html#cb881-1"></a><span class="kw">pile_ou_face</span>(<span class="dv">4</span>)</span>
<span id="cb881-2"><a href="16-boucles-if.html#cb881-2"></a><span class="co">#&gt; [1] &quot;pile&quot; &quot;face&quot; &quot;pile&quot; &quot;face&quot;</span></span></code></pre></div>

<div class="solution-exo">
<div class="sourceCode" id="cb882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb882-1"><a href="16-boucles-if.html#cb882-1"></a>pile_ou_face &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb882-2"><a href="16-boucles-if.html#cb882-2"></a>    tirages &lt;-<span class="st"> </span><span class="kw">character</span>()</span>
<span id="cb882-3"><a href="16-boucles-if.html#cb882-3"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(n)) {</span>
<span id="cb882-4"><a href="16-boucles-if.html#cb882-4"></a>        alea &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>)</span>
<span id="cb882-5"><a href="16-boucles-if.html#cb882-5"></a>        <span class="cf">if</span> (alea <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.5</span>) {</span>
<span id="cb882-6"><a href="16-boucles-if.html#cb882-6"></a>            tirages &lt;-<span class="st"> </span><span class="kw">c</span>(tirages, <span class="st">&quot;pile&quot;</span>)</span>
<span id="cb882-7"><a href="16-boucles-if.html#cb882-7"></a>        } <span class="cf">else</span> {</span>
<span id="cb882-8"><a href="16-boucles-if.html#cb882-8"></a>            tirages &lt;-<span class="st"> </span><span class="kw">c</span>(tirages, <span class="st">&quot;face&quot;</span>)</span>
<span id="cb882-9"><a href="16-boucles-if.html#cb882-9"></a>        }</span>
<span id="cb882-10"><a href="16-boucles-if.html#cb882-10"></a>    }</span>
<span id="cb882-11"><a href="16-boucles-if.html#cb882-11"></a>    tirages</span>
<span id="cb882-12"><a href="16-boucles-if.html#cb882-12"></a>}</span></code></pre></div>
</div>

<p>Réécrire la fonction pour qu’elle retourne le même résultat sans utiliser de boucle <code>for</code>.</p>

<div class="solution-exo">
<div class="sourceCode" id="cb883"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb883-1"><a href="16-boucles-if.html#cb883-1"></a>pile_ou_face &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb883-2"><a href="16-boucles-if.html#cb883-2"></a>    alea &lt;-<span class="st"> </span><span class="kw">runif</span>(n)</span>
<span id="cb883-3"><a href="16-boucles-if.html#cb883-3"></a>    result &lt;-<span class="st"> </span><span class="kw">ifelse</span>(alea <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.5</span>, <span class="st">&quot;pile&quot;</span>, <span class="st">&quot;face&quot;</span>)</span>
<span id="cb883-4"><a href="16-boucles-if.html#cb883-4"></a>    result</span>
<span id="cb883-5"><a href="16-boucles-if.html#cb883-5"></a>}</span>
<span id="cb883-6"><a href="16-boucles-if.html#cb883-6"></a><span class="co"># Ou bien, encore plus simple</span></span>
<span id="cb883-7"><a href="16-boucles-if.html#cb883-7"></a>pile_ou_face &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb883-8"><a href="16-boucles-if.html#cb883-8"></a>    <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;pile&quot;</span>, <span class="st">&quot;face&quot;</span>), <span class="dt">size =</span> n, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb883-9"><a href="16-boucles-if.html#cb883-9"></a>}</span></code></pre></div>
</div>


</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="31">
<li id="fn31"><p>En complément, on verra également dans la section <a href="18-purrr.html#purrr">18</a> d’autres fonctions tirées de l’extension <code>purrr</code> qui permettent d’appliquer une fonction en itérant sur les éléments de plusieurs objets.<a href="16-boucles-if.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p>L’intérêt de <code>seq_along(x)</code> est notamment qu’elle n’essaie pas d’exécuter le bloc de code si jamais <code>x</code> est de longueur nulle. <em>Cf.</em> des explications supplémentaires dans <a href="https://adv-r.hadley.nz/control-flow.html#common-pitfalls">Advanced R</a><a href="16-boucles-if.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p>Si on a un objet <code>n</code> dont on souhaite afficher le contenu, on doit faire <code>print(n)</code>.<a href="16-boucles-if.html#fnref33" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="15-structures-donnees.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="17-dplyr-avance.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/juba/tidyverse/blob/main/16-boucles-if.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction_au_tidyverse.epub", "introduction_au_tidyverse.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
