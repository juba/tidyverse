<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Partie 9 Recoder des variables | Introduction à R et au tidyverse</title>
  <meta name="description" content="Une introduction à R et aux extensions du tidyverse" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Partie 9 Recoder des variables | Introduction à R et au tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Une introduction à R et aux extensions du tidyverse" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Partie 9 Recoder des variables | Introduction à R et au tidyverse" />
  
  <meta name="twitter:description" content="Une introduction à R et aux extensions du tidyverse" />
  

<meta name="author" content="Julien Barnier" />


<meta name="date" content="2020-06-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="08-ggplot2.html"/>
<link rel="next" href="10-dplyr.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Introduction à R et au <em>tidyverse</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>À propos de ce document</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-presentation.html"><a href="01-presentation.html"><i class="fa fa-check"></i><b>1</b> Présentation</a><ul>
<li class="chapter" data-level="1.1" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-de-r"><i class="fa fa-check"></i><b>1.1</b> À propos de R</a></li>
<li class="chapter" data-level="1.2" data-path="01-presentation.html"><a href="01-presentation.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> À propos de RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-du-tidyverse"><i class="fa fa-check"></i><b>1.3</b> À propos du <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.4" data-path="01-presentation.html"><a href="01-presentation.html#structure-du-document"><i class="fa fa-check"></i><b>1.4</b> Structure du document</a></li>
<li class="chapter" data-level="1.5" data-path="01-presentation.html"><a href="01-presentation.html#prérequis"><i class="fa fa-check"></i><b>1.5</b> Prérequis</a></li>
</ul></li>
<li class="part"><span><b>I Introduction à R</b></span></li>
<li class="chapter" data-level="2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html"><i class="fa fa-check"></i><b>2</b> Prise en main</a><ul>
<li class="chapter" data-level="2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#la-console"><i class="fa fa-check"></i><b>2.1</b> La console</a><ul>
<li class="chapter" data-level="2.1.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#linvite-de-commandes"><i class="fa fa-check"></i><b>2.1.1</b> L’invite de commandes</a></li>
<li class="chapter" data-level="2.1.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#précisions-concernant-la-saisie-des-commandes"><i class="fa fa-check"></i><b>2.1.2</b> Précisions concernant la saisie des commandes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets"><i class="fa fa-check"></i><b>2.2</b> Objets</a><ul>
<li class="chapter" data-level="2.2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets-simples"><i class="fa fa-check"></i><b>2.2.1</b> Objets simples</a></li>
<li class="chapter" data-level="2.2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#vecteurs"><i class="fa fa-check"></i><b>2.2.2</b> Vecteurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#fonctions"><i class="fa fa-check"></i><b>2.3</b> Fonctions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#principe"><i class="fa fa-check"></i><b>2.3.1</b> Principe</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#arguments"><i class="fa fa-check"></i><b>2.3.2</b> Arguments</a></li>
<li class="chapter" data-level="2.3.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#aide-sur-une-fonction"><i class="fa fa-check"></i><b>2.3.3</b> Aide sur une fonction</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#regrouper-ses-commandes-dans-des-scripts"><i class="fa fa-check"></i><b>2.4</b> Regrouper ses commandes dans des scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#commentaires"><i class="fa fa-check"></i><b>2.4.1</b> Commentaires</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#packages"><i class="fa fa-check"></i><b>2.5</b> Installer et charger des extensions (<em>packages</em>)</a></li>
<li class="chapter" data-level="2.6" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#exercices"><i class="fa fa-check"></i><b>2.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-premier_travail.html"><a href="03-premier_travail.html"><i class="fa fa-check"></i><b>3</b> Premier travail avec des données</a><ul>
<li class="chapter" data-level="3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#jeu-de-données-dexemple"><i class="fa fa-check"></i><b>3.1</b> Jeu de données d’exemple</a></li>
<li class="chapter" data-level="3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#tableau-de-données-data-frame"><i class="fa fa-check"></i><b>3.2</b> Tableau de données (<em>data frame</em>)</a><ul>
<li class="chapter" data-level="3.2.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#structure-du-tableau"><i class="fa fa-check"></i><b>3.2.1</b> Structure du tableau</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#accéder-aux-variables-dun-tableau"><i class="fa fa-check"></i><b>3.2.2</b> Accéder aux variables d’un tableau</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#créer-une-nouvelle-variable"><i class="fa fa-check"></i><b>3.2.3</b> Créer une nouvelle variable</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyse-univariée"><i class="fa fa-check"></i><b>3.3</b> Analyse univariée</a><ul>
<li class="chapter" data-level="3.3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-quantitative"><i class="fa fa-check"></i><b>3.3.1</b> Analyser une variable quantitative</a></li>
<li class="chapter" data-level="3.3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-qualitative"><i class="fa fa-check"></i><b>3.3.2</b> Analyser une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="03-premier_travail.html"><a href="03-premier_travail.html#exercices-1"><i class="fa fa-check"></i><b>3.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-bivarie.html"><a href="04-bivarie.html"><i class="fa fa-check"></i><b>4</b> Analyse bivariée</a><ul>
<li class="chapter" data-level="4.1" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-qualitatives"><i class="fa fa-check"></i><b>4.1</b> Croisement de deux variables qualitatives</a><ul>
<li class="chapter" data-level="4.1.1" data-path="04-bivarie.html"><a href="04-bivarie.html#tableaux-croisés"><i class="fa fa-check"></i><b>4.1.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="4.1.2" data-path="04-bivarie.html"><a href="04-bivarie.html#test-du-χ"><i class="fa fa-check"></i><b>4.1.2</b> Test du χ²</a></li>
<li class="chapter" data-level="4.1.3" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-1"><i class="fa fa-check"></i><b>4.1.3</b> Représentation graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-dune-variable-quantitative-et-dune-variable-qualitative"><i class="fa fa-check"></i><b>4.2</b> Croisement d’une variable quantitative et d’une variable qualitative</a><ul>
<li class="chapter" data-level="4.2.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-2"><i class="fa fa-check"></i><b>4.2.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.2.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calculs-dindicateurs"><i class="fa fa-check"></i><b>4.2.2</b> Calculs d’indicateurs</a></li>
<li class="chapter" data-level="4.2.3" data-path="04-bivarie.html"><a href="04-bivarie.html#tests-statistiques"><i class="fa fa-check"></i><b>4.2.3</b> Tests statistiques</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-quantitatives"><i class="fa fa-check"></i><b>4.3</b> Croisement de deux variables quantitatives</a><ul>
<li class="chapter" data-level="4.3.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-3"><i class="fa fa-check"></i><b>4.3.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.3.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calcul-dindicateurs"><i class="fa fa-check"></i><b>4.3.2</b> Calcul d’indicateurs</a></li>
<li class="chapter" data-level="4.3.3" data-path="04-bivarie.html"><a href="04-bivarie.html#régression-linéaire"><i class="fa fa-check"></i><b>4.3.3</b> Régression linéaire</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04-bivarie.html"><a href="04-bivarie.html#exercices-2"><i class="fa fa-check"></i><b>4.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-organiser.html"><a href="05-organiser.html"><i class="fa fa-check"></i><b>5</b> Organiser ses scripts</a><ul>
<li class="chapter" data-level="5.1" data-path="05-organiser.html"><a href="05-organiser.html#projets"><i class="fa fa-check"></i><b>5.1</b> Les projets dans RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="05-organiser.html"><a href="05-organiser.html#créer-des-sections-dans-un-script"><i class="fa fa-check"></i><b>5.2</b> Créer des sections dans un script</a></li>
<li class="chapter" data-level="5.3" data-path="05-organiser.html"><a href="05-organiser.html#répartir-son-travail-entre-plusieurs-scripts"><i class="fa fa-check"></i><b>5.3</b> Répartir son travail entre plusieurs scripts</a></li>
<li class="chapter" data-level="5.4" data-path="05-organiser.html"><a href="05-organiser.html#désactiver-la-sauvegarde-de-lespace-de-travail"><i class="fa fa-check"></i><b>5.4</b> Désactiver la sauvegarde de l’espace de travail</a></li>
</ul></li>
<li class="part"><span><b>II Introduction au tidyverse</b></span></li>
<li class="chapter" data-level="6" data-path="06-tidyverse.html"><a href="06-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Le tidyverse</a><ul>
<li class="chapter" data-level="6.1" data-path="06-tidyverse.html"><a href="06-tidyverse.html#extensions"><i class="fa fa-check"></i><b>6.1</b> Extensions</a></li>
<li class="chapter" data-level="6.2" data-path="06-tidyverse.html"><a href="06-tidyverse.html#installation"><i class="fa fa-check"></i><b>6.2</b> Installation</a></li>
<li class="chapter" data-level="6.3" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tidydata"><i class="fa fa-check"></i><b>6.3</b> tidy data</a></li>
<li class="chapter" data-level="6.4" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>6.4</b> tibbles</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-import.html"><a href="07-import.html"><i class="fa fa-check"></i><b>7</b> Importer et exporter des données</a><ul>
<li class="chapter" data-level="7.1" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-textes"><i class="fa fa-check"></i><b>7.1</b> Import de fichiers textes</a><ul>
<li class="chapter" data-level="7.1.1" data-path="07-import.html"><a href="07-import.html#interface-interactive-dimport-de-fichiers"><i class="fa fa-check"></i><b>7.1.1</b> Interface interactive d’import de fichiers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-import.html"><a href="07-import.html#import-depuis-un-fichier-excel"><i class="fa fa-check"></i><b>7.2</b> Import depuis un fichier Excel</a></li>
<li class="chapter" data-level="7.3" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-sas-spss-et-stata"><i class="fa fa-check"></i><b>7.3</b> Import de fichiers SAS, SPSS et Stata</a></li>
<li class="chapter" data-level="7.4" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-dbase"><i class="fa fa-check"></i><b>7.4</b> Import de fichiers dBase</a></li>
<li class="chapter" data-level="7.5" data-path="07-import.html"><a href="07-import.html#connexion-à-des-bases-de-données"><i class="fa fa-check"></i><b>7.5</b> Connexion à des bases de données</a><ul>
<li class="chapter" data-level="7.5.1" data-path="07-import.html"><a href="07-import.html#interfaçage-via-lextension-dbi"><i class="fa fa-check"></i><b>7.5.1</b> Interfaçage via l’extension <code>DBI</code></a></li>
<li class="chapter" data-level="7.5.2" data-path="07-import.html"><a href="07-import.html#utilisation-de-dplyr-et-dbplyr"><i class="fa fa-check"></i><b>7.5.2</b> Utilisation de <code>dplyr</code> et <code>dbplyr</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="07-import.html"><a href="07-import.html#ressources"><i class="fa fa-check"></i><b>7.5.3</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="07-import.html"><a href="07-import.html#export-de-données"><i class="fa fa-check"></i><b>7.6</b> Export de données</a><ul>
<li class="chapter" data-level="7.6.1" data-path="07-import.html"><a href="07-import.html#export-de-tableaux-de-données"><i class="fa fa-check"></i><b>7.6.1</b> Export de tableaux de données</a></li>
<li class="chapter" data-level="7.6.2" data-path="07-import.html"><a href="07-import.html#sauvegarder-des-objets"><i class="fa fa-check"></i><b>7.6.2</b> Sauvegarder des objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-ggplot2.html"><a href="08-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Visualiser avec <code>ggplot2</code></a><ul>
<li class="chapter" data-level="8.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#préparation"><i class="fa fa-check"></i><b>8.1</b> Préparation</a></li>
<li class="chapter" data-level="8.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#initialisation"><i class="fa fa-check"></i><b>8.2</b> Initialisation</a></li>
<li class="chapter" data-level="8.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-geom"><i class="fa fa-check"></i><b>8.3</b> Exemples de <code>geom</code></a><ul>
<li class="chapter" data-level="8.3.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>8.3.1</b> <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_violin"><i class="fa fa-check"></i><b>8.3.2</b> <code>geom_violin</code></a></li>
<li class="chapter" data-level="8.3.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar"><i class="fa fa-check"></i><b>8.3.3</b> <code>geom_bar</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_text"><i class="fa fa-check"></i><b>8.3.4</b> <code>geom_text</code></a></li>
<li class="chapter" data-level="8.3.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_label"><i class="fa fa-check"></i><b>8.3.5</b> <code>geom_label</code></a></li>
<li class="chapter" data-level="8.3.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_density"><i class="fa fa-check"></i><b>8.3.6</b> <code>geom_density</code></a></li>
<li class="chapter" data-level="8.3.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_line"><i class="fa fa-check"></i><b>8.3.7</b> <code>geom_line</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#mappages"><i class="fa fa-check"></i><b>8.4</b> Mappages</a><ul>
<li class="chapter" data-level="8.4.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-mappages"><i class="fa fa-check"></i><b>8.4.1</b> Exemples de mappages</a></li>
<li class="chapter" data-level="8.4.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#aes-or-not-aes"><i class="fa fa-check"></i><b>8.4.2</b> <code>aes()</code> or not <code>aes()</code> ?</a></li>
<li class="chapter" data-level="8.4.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar-et-position"><i class="fa fa-check"></i><b>8.4.3</b> <code>geom_bar</code> et <code>position</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#représentation-de-plusieurs-geom"><i class="fa fa-check"></i><b>8.5</b> Représentation de plusieurs <code>geom</code></a><ul>
<li class="chapter" data-level="8.5.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#plusieurs-sources-de-données"><i class="fa fa-check"></i><b>8.5.1</b> Plusieurs sources de données</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#faceting"><i class="fa fa-check"></i><b>8.6</b> Faceting</a></li>
<li class="chapter" data-level="8.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scales"><i class="fa fa-check"></i><b>8.7</b> Scales</a><ul>
<li class="chapter" data-level="8.7.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_size"><i class="fa fa-check"></i><b>8.7.1</b> <code>scale_size</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_x-scale_y"><i class="fa fa-check"></i><b>8.7.2</b> <code>scale_x</code>, <code>scale_y</code></a></li>
<li class="chapter" data-level="8.7.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scalecolor"><i class="fa fa-check"></i><b>8.7.3</b> <code>scale_color</code>, <code>scale_fill</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="08-ggplot2.html"><a href="08-ggplot2.html#thèmes"><i class="fa fa-check"></i><b>8.8</b> Thèmes</a></li>
<li class="chapter" data-level="8.9" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ladd-in-esquisse"><i class="fa fa-check"></i><b>8.9</b> L’add-in <code>esquisse</code></a></li>
<li class="chapter" data-level="8.10" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ressources-1"><i class="fa fa-check"></i><b>8.10</b> Ressources</a></li>
<li class="chapter" data-level="8.11" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exercices-3"><i class="fa fa-check"></i><b>8.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-recodages.html"><a href="09-recodages.html"><i class="fa fa-check"></i><b>9</b> Recoder des variables</a><ul>
<li class="chapter" data-level="9.1" data-path="09-recodages.html"><a href="09-recodages.html#rappel-sur-les-variables-et-les-vecteurs"><i class="fa fa-check"></i><b>9.1</b> Rappel sur les variables et les vecteurs</a></li>
<li class="chapter" data-level="9.2" data-path="09-recodages.html"><a href="09-recodages.html#tests"><i class="fa fa-check"></i><b>9.2</b> Tests et comparaison</a></li>
<li class="chapter" data-level="9.3" data-path="09-recodages.html"><a href="09-recodages.html#recoder-une-variable-qualitative"><i class="fa fa-check"></i><b>9.3</b> Recoder une variable qualitative</a><ul>
<li class="chapter" data-level="9.3.1" data-path="09-recodages.html"><a href="09-recodages.html#facteurs-et-forcats"><i class="fa fa-check"></i><b>9.3.1</b> Facteurs et <code>forcats</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="09-recodages.html"><a href="09-recodages.html#modifier-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.2</b> Modifier les modalités d’une variable qualitative</a></li>
<li class="chapter" data-level="9.3.3" data-path="09-recodages.html"><a href="09-recodages.html#ordonner-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.3</b> Ordonner les modalités d’une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables"><i class="fa fa-check"></i><b>9.4</b> Combiner plusieurs variables</a><ul>
<li class="chapter" data-level="9.4.1" data-path="09-recodages.html"><a href="09-recodages.html#if_else"><i class="fa fa-check"></i><b>9.4.1</b> <code>if_else</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="09-recodages.html"><a href="09-recodages.html#case_when"><i class="fa fa-check"></i><b>9.4.2</b> <code>case_when</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique-en-classes"><i class="fa fa-check"></i><b>9.5</b> Découper une variable numérique en classes</a><ul>
<li class="chapter" data-level="9.5.1" data-path="09-recodages.html"><a href="09-recodages.html#interface-graphique"><i class="fa fa-check"></i><b>9.5.1</b> Interface graphique</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="09-recodages.html"><a href="09-recodages.html#exercices-4"><i class="fa fa-check"></i><b>9.6</b> Exercices</a><ul>
<li class="chapter" data-level="9.6.1" data-path="09-recodages.html"><a href="09-recodages.html#préparation-1"><i class="fa fa-check"></i><b>9.6.1</b> Préparation</a></li>
<li class="chapter" data-level="9.6.2" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs-et-tests"><i class="fa fa-check"></i><b>9.6.2</b> Vecteurs et tests</a></li>
<li class="chapter" data-level="9.6.3" data-path="09-recodages.html"><a href="09-recodages.html#recodages-de-variable-qualitative"><i class="fa fa-check"></i><b>9.6.3</b> Recodages de variable qualitative</a></li>
<li class="chapter" data-level="9.6.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables-1"><i class="fa fa-check"></i><b>9.6.4</b> Combiner plusieurs variables</a></li>
<li class="chapter" data-level="9.6.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique"><i class="fa fa-check"></i><b>9.6.5</b> Découper une variable numérique</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-dplyr.html"><a href="10-dplyr.html"><i class="fa fa-check"></i><b>10</b> Manipuler les données avec <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.1" data-path="10-dplyr.html"><a href="10-dplyr.html#préparation-2"><i class="fa fa-check"></i><b>10.1</b> Préparation</a></li>
<li class="chapter" data-level="10.2" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-dplyr"><i class="fa fa-check"></i><b>10.2</b> Les verbes de <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice"><i class="fa fa-check"></i><b>10.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="10-dplyr.html"><a href="10-dplyr.html#filter"><i class="fa fa-check"></i><b>10.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="10-dplyr.html"><a href="10-dplyr.html#select-et-rename"><i class="fa fa-check"></i><b>10.2.3</b> <code>select</code> et <code>rename</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="10-dplyr.html"><a href="10-dplyr.html#arrange"><i class="fa fa-check"></i><b>10.2.4</b> <code>arrange</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="10-dplyr.html"><a href="10-dplyr.html#mutate"><i class="fa fa-check"></i><b>10.2.5</b> <code>mutate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-dplyr.html"><a href="10-dplyr.html#pipe"><i class="fa fa-check"></i><b>10.3</b> Enchaîner les opérations avec le <em>pipe</em></a></li>
<li class="chapter" data-level="10.4" data-path="10-dplyr.html"><a href="10-dplyr.html#opérations-groupées"><i class="fa fa-check"></i><b>10.4</b> Opérations groupées</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by"><i class="fa fa-check"></i><b>10.4.1</b> <code>group_by</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="10-dplyr.html"><a href="10-dplyr.html#summarise-et-count"><i class="fa fa-check"></i><b>10.4.2</b> <code>summarise</code> et <code>count</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="10-dplyr.html"><a href="10-dplyr.html#grouper-selon-plusieurs-variables"><i class="fa fa-check"></i><b>10.4.3</b> Grouper selon plusieurs variables</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-dplyr.html"><a href="10-dplyr.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>10.5</b> Autres fonctions utiles</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_sample"><i class="fa fa-check"></i><b>10.5.1</b> <code>slice_sample</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_head-slice_tail-slice_min-slice_max"><i class="fa fa-check"></i><b>10.5.2</b> <code>slice_head</code>, <code>slice_tail</code>, <code>slice_min</code>, <code>slice_max</code></a></li>
<li class="chapter" data-level="10.5.3" data-path="10-dplyr.html"><a href="10-dplyr.html#lead-et-lag"><i class="fa fa-check"></i><b>10.5.3</b> <code>lead</code> et <code>lag</code></a></li>
<li class="chapter" data-level="10.5.4" data-path="10-dplyr.html"><a href="10-dplyr.html#distinct-et-n_distinct"><i class="fa fa-check"></i><b>10.5.4</b> <code>distinct</code> et <code>n_distinct</code></a></li>
<li class="chapter" data-level="10.5.5" data-path="10-dplyr.html"><a href="10-dplyr.html#relocate"><i class="fa fa-check"></i><b>10.5.5</b> <code>relocate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-dplyr.html"><a href="10-dplyr.html#tables-multiples"><i class="fa fa-check"></i><b>10.6</b> Tables multiples</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-dplyr.html"><a href="10-dplyr.html#concaténation-bind_rows-et-bind_cols"><i class="fa fa-check"></i><b>10.6.1</b> Concaténation : <code>bind_rows</code> et <code>bind_cols</code></a></li>
<li class="chapter" data-level="10.6.2" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures"><i class="fa fa-check"></i><b>10.6.2</b> Jointures</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-dplyr.html"><a href="10-dplyr.html#types-de-jointures"><i class="fa fa-check"></i><b>10.6.3</b> Types de jointures</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-dplyr.html"><a href="10-dplyr.html#ressources-2"><i class="fa fa-check"></i><b>10.7</b> Ressources</a></li>
<li class="chapter" data-level="10.8" data-path="10-dplyr.html"><a href="10-dplyr.html#exercices-5"><i class="fa fa-check"></i><b>10.8</b> Exercices</a><ul>
<li class="chapter" data-level="10.8.1" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-base-de-dplyr"><i class="fa fa-check"></i><b>10.8.1</b> Les verbes de base de <code>dplyr</code></a></li>
<li class="chapter" data-level="10.8.2" data-path="10-dplyr.html"><a href="10-dplyr.html#enchaîner-des-opérations"><i class="fa fa-check"></i><b>10.8.2</b> Enchaîner des opérations</a></li>
<li class="chapter" data-level="10.8.3" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by-et-summarise"><i class="fa fa-check"></i><b>10.8.3</b> <code>group_by</code> et <code>summarise</code></a></li>
<li class="chapter" data-level="10.8.4" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures-1"><i class="fa fa-check"></i><b>10.8.4</b> Jointures</a></li>
<li class="chapter" data-level="10.8.5" data-path="10-dplyr.html"><a href="10-dplyr.html#bonus"><i class="fa fa-check"></i><b>10.8.5</b> Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-stringr.html"><a href="11-stringr.html"><i class="fa fa-check"></i><b>11</b> Manipuler du texte avec <code>stringr</code></a><ul>
<li class="chapter" data-level="11.1" data-path="11-stringr.html"><a href="11-stringr.html#expressions-régulières"><i class="fa fa-check"></i><b>11.1</b> Expressions régulières</a></li>
<li class="chapter" data-level="11.2" data-path="11-stringr.html"><a href="11-stringr.html#concaténer-des-chaînes"><i class="fa fa-check"></i><b>11.2</b> Concaténer des chaînes</a></li>
<li class="chapter" data-level="11.3" data-path="11-stringr.html"><a href="11-stringr.html#convertir-en-majuscules-minuscules"><i class="fa fa-check"></i><b>11.3</b> Convertir en majuscules / minuscules</a></li>
<li class="chapter" data-level="11.4" data-path="11-stringr.html"><a href="11-stringr.html#découper-des-chaînes"><i class="fa fa-check"></i><b>11.4</b> Découper des chaînes</a></li>
<li class="chapter" data-level="11.5" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-sous-chaînes-par-position"><i class="fa fa-check"></i><b>11.5</b> Extraire des sous-chaînes par position</a></li>
<li class="chapter" data-level="11.6" data-path="11-stringr.html"><a href="11-stringr.html#détecter-des-motifs"><i class="fa fa-check"></i><b>11.6</b> Détecter des motifs</a></li>
<li class="chapter" data-level="11.7" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-motifs"><i class="fa fa-check"></i><b>11.7</b> Extraire des motifs</a></li>
<li class="chapter" data-level="11.8" data-path="11-stringr.html"><a href="11-stringr.html#remplacer-des-motifs"><i class="fa fa-check"></i><b>11.8</b> Remplacer des motifs</a></li>
<li class="chapter" data-level="11.9" data-path="11-stringr.html"><a href="11-stringr.html#modificateurs"><i class="fa fa-check"></i><b>11.9</b> Modificateurs de motifs</a></li>
<li class="chapter" data-level="11.10" data-path="11-stringr.html"><a href="11-stringr.html#ressources-3"><i class="fa fa-check"></i><b>11.10</b> Ressources</a></li>
<li class="chapter" data-level="11.11" data-path="11-stringr.html"><a href="11-stringr.html#exercices-6"><i class="fa fa-check"></i><b>11.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-tidyr.html"><a href="12-tidyr.html"><i class="fa fa-check"></i><b>12</b> Mettre en ordre avec <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.1" data-path="12-tidyr.html"><a href="12-tidyr.html#tidy-data"><i class="fa fa-check"></i><b>12.1</b> Tidy data</a></li>
<li class="chapter" data-level="12.2" data-path="12-tidyr.html"><a href="12-tidyr.html#trois-règles-pour-des-données-bien-rangées"><i class="fa fa-check"></i><b>12.2</b> Trois règles pour des données bien rangées</a></li>
<li class="chapter" data-level="12.3" data-path="12-tidyr.html"><a href="12-tidyr.html#les-verbes-de-tidyr"><i class="fa fa-check"></i><b>12.3</b> Les verbes de <code>tidyr</code></a><ul>
<li class="chapter" data-level="12.3.1" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_longer-transformer-des-colonnes-en-lignes"><i class="fa fa-check"></i><b>12.3.1</b> <code>pivot_longer</code> : transformer des colonnes en lignes</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_wider-transformer-des-lignes-en-colonnes"><i class="fa fa-check"></i><b>12.3.2</b> <code>pivot_wider</code> : transformer des lignes en colonnes</a></li>
<li class="chapter" data-level="12.3.3" data-path="12-tidyr.html"><a href="12-tidyr.html#separate"><i class="fa fa-check"></i><b>12.3.3</b> <code>separate</code> : séparer une colonne en plusieurs colonnes</a></li>
<li class="chapter" data-level="12.3.4" data-path="12-tidyr.html"><a href="12-tidyr.html#separate"><i class="fa fa-check"></i><b>12.3.4</b> <code>separate_rows</code> : séparer une colonne en plusieurs lignes</a></li>
<li class="chapter" data-level="12.3.5" data-path="12-tidyr.html"><a href="12-tidyr.html#unite-regrouper-plusieurs-colonnes-en-une-seule"><i class="fa fa-check"></i><b>12.3.5</b> <code>unite</code> : regrouper plusieurs colonnes en une seule</a></li>
<li class="chapter" data-level="12.3.6" data-path="12-tidyr.html"><a href="12-tidyr.html#extract"><i class="fa fa-check"></i><b>12.3.6</b> <code>extract</code> : créer de nouvelles colonnes à partir d’une colonne de texte</a></li>
<li class="chapter" data-level="12.3.7" data-path="12-tidyr.html"><a href="12-tidyr.html#complete-compléter-des-combinaisons-de-variables-manquantes"><i class="fa fa-check"></i><b>12.3.7</b> <code>complete</code> : compléter des combinaisons de variables manquantes</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="12-tidyr.html"><a href="12-tidyr.html#ressources-4"><i class="fa fa-check"></i><b>12.4</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Diffuser et publier avec <code>rmarkdown</code></a><ul>
<li class="chapter" data-level="13.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#créer-un-nouveau-document"><i class="fa fa-check"></i><b>13.1</b> Créer un nouveau document</a></li>
<li class="chapter" data-level="13.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#éléments-dun-document-r-markdown"><i class="fa fa-check"></i><b>13.2</b> Éléments d’un document R Markdown</a><ul>
<li class="chapter" data-level="13.2.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#en-tête-préambule"><i class="fa fa-check"></i><b>13.2.1</b> En-tête (préambule)</a></li>
<li class="chapter" data-level="13.2.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#texte-du-document"><i class="fa fa-check"></i><b>13.2.2</b> Texte du document</a></li>
<li class="chapter" data-level="13.2.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#blocs-de-code-r"><i class="fa fa-check"></i><b>13.2.3</b> Blocs de code R</a></li>
<li class="chapter" data-level="13.2.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#compiler-un-document-knit"><i class="fa fa-check"></i><b>13.2.4</b> Compiler un document (<em>Knit</em>)</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#personnaliser-le-document-généré"><i class="fa fa-check"></i><b>13.3</b> Personnaliser le document généré</a></li>
<li class="chapter" data-level="13.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-des-blocs-de-code-r"><i class="fa fa-check"></i><b>13.4</b> Options des blocs de code R</a><ul>
<li class="chapter" data-level="13.4.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#nom-du-bloc"><i class="fa fa-check"></i><b>13.4.1</b> Nom du bloc</a></li>
<li class="chapter" data-level="13.4.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options"><i class="fa fa-check"></i><b>13.4.2</b> Options</a></li>
<li class="chapter" data-level="13.4.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#modifier-les-options"><i class="fa fa-check"></i><b>13.4.3</b> Modifier les options</a></li>
<li class="chapter" data-level="13.4.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-globales"><i class="fa fa-check"></i><b>13.4.4</b> Options globales</a></li>
<li class="chapter" data-level="13.4.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#mise-en-cache-des-résultats"><i class="fa fa-check"></i><b>13.4.5</b> Mise en cache des résultats</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#rendu-des-tableaux"><i class="fa fa-check"></i><b>13.5</b> Rendu des tableaux</a><ul>
<li class="chapter" data-level="13.5.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-croisés-1"><i class="fa fa-check"></i><b>13.5.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="13.5.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-de-données-et-tris-à-plat"><i class="fa fa-check"></i><b>13.5.2</b> Tableaux de données et tris à plat</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates"><i class="fa fa-check"></i><b>13.6</b> Modèles de documents</a><ul>
<li class="chapter" data-level="13.6.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#slides"><i class="fa fa-check"></i><b>13.6.1</b> Slides</a></li>
<li class="chapter" data-level="13.6.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates-1"><i class="fa fa-check"></i><b>13.6.2</b> Templates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#ressources-5"><i class="fa fa-check"></i><b>13.7</b> Ressources</a></li>
</ul></li>
<li class="appendix"><span><b>Annexes</b></span></li>
<li class="chapter" data-level="A" data-path="14-ressources.html"><a href="14-ressources.html"><i class="fa fa-check"></i><b>A</b> Ressources</a><ul>
<li class="chapter" data-level="A.1" data-path="14-ressources.html"><a href="14-ressources.html#aide"><i class="fa fa-check"></i><b>A.1</b> Aide</a><ul>
<li class="chapter" data-level="A.1.1" data-path="14-ressources.html"><a href="14-ressources.html#aide-de-r-et-rstudio"><i class="fa fa-check"></i><b>A.1.1</b> Aide de R et RStudio</a></li>
<li class="chapter" data-level="A.1.2" data-path="14-ressources.html"><a href="14-ressources.html#aide-en-ligne"><i class="fa fa-check"></i><b>A.1.2</b> Aide en ligne</a></li>
<li class="chapter" data-level="A.1.3" data-path="14-ressources.html"><a href="14-ressources.html#antisèches"><i class="fa fa-check"></i><b>A.1.3</b> Antisèches</a></li>
<li class="chapter" data-level="A.1.4" data-path="14-ressources.html"><a href="14-ressources.html#où-poser-des-questions"><i class="fa fa-check"></i><b>A.1.4</b> Où poser des questions</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="14-ressources.html"><a href="14-ressources.html#ouvrages-blogs-moocs"><i class="fa fa-check"></i><b>A.2</b> Ouvrages, blogs, MOOCs…</a><ul>
<li class="chapter" data-level="A.2.1" data-path="14-ressources.html"><a href="14-ressources.html#francophones"><i class="fa fa-check"></i><b>A.2.1</b> Francophones</a></li>
<li class="chapter" data-level="A.2.2" data-path="14-ressources.html"><a href="14-ressources.html#anglophones"><i class="fa fa-check"></i><b>A.2.2</b> Anglophones</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="14-ressources.html"><a href="14-ressources.html#extensions-1"><i class="fa fa-check"></i><b>A.3</b> Extensions</a><ul>
<li class="chapter" data-level="A.3.1" data-path="14-ressources.html"><a href="14-ressources.html#où-trouver-des-extensions-intéressantes"><i class="fa fa-check"></i><b>A.3.1</b> Où trouver des extensions intéressantes ?</a></li>
<li class="chapter" data-level="A.3.2" data-path="14-ressources.html"><a href="14-ressources.html#lextension-questionr"><i class="fa fa-check"></i><b>A.3.2</b> L’extension <code>questionr</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction à R et au tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vectorfactor" class="section level1">
<h1><span class="header-section-number">Partie 9</span> Recoder des variables</h1>
<div id="rappel-sur-les-variables-et-les-vecteurs" class="section level2">
<h2><span class="header-section-number">9.1</span> Rappel sur les variables et les vecteurs</h2>
<p>Dans R, une variable, en général une colonne d’un tableau de données, est un objet de type <em>vecteur</em>. Un vecteur est un ensemble d’éléments, tous du même type.</p>
<p>On a vu qu’on peut construire un vecteur manuellement de différentes manières :</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1">couleur &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Rouge&quot;</span>, <span class="st">&quot;Vert&quot;</span>)</a>
<a class="sourceLine" id="cb366-2" data-line-number="2">nombres &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a></code></pre></div>
<p>Mais le plus souvent on manipule des vecteurs faisant partie d’une table importée dans R. Dans ce qui suit on va utiliser le jeu de données d’exemple <code>hdv2003</code> de l’extension <code>questionr</code>.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1"><span class="kw">library</span>(questionr)</a>
<a class="sourceLine" id="cb367-2" data-line-number="2"><span class="kw">data</span>(hdv2003)</a></code></pre></div>
<p>Quand on veut accéder à un vecteur d’un tableau de données, on peut utiliser l’opérateur <code>$</code> :</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1">hdv2003<span class="op">$</span>qualif</a></code></pre></div>
<p>On peut facilement créer de nouvelles variables (ou colonnes) dans un tableau de données en utilisant le <code>$</code> dans une assignation :</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1">hdv2003<span class="op">$</span>minutes.tv &lt;-<span class="st"> </span>hdv2003<span class="op">$</span>heures.tv <span class="op">*</span><span class="st"> </span><span class="dv">60</span></a></code></pre></div>
<p>Les vecteurs peuvent être de classes différentes, selon le type de données qu’ils contiennent.</p>
<p>On a ainsi des vecteurs de type <code>integer</code> ou <code>double</code>, qui contiennent respectivement des nombres entiers ou décimaux :</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1"><span class="kw">typeof</span>(hdv2003<span class="op">$</span>age)</a></code></pre></div>
<pre><code>[1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1"><span class="kw">typeof</span>(hdv2003<span class="op">$</span>heures.tv)</a></code></pre></div>
<pre><code>[1] &quot;double&quot;</code></pre>
<p>Des vecteurs de type <code>character</code>, qui contiennent des chaînes de caractères :</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb374-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Rouge&quot;</span>, <span class="st">&quot;Vert&quot;</span>)</a>
<a class="sourceLine" id="cb374-2" data-line-number="2"><span class="kw">typeof</span>(vec)</a></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<p>Et des vecteurs de type <code>logical</code>, qui ne peuvent contenir que les valeurs vraie (<code>TRUE</code>) ou fausse (<code>FALSE</code>).</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb376-2" data-line-number="2"><span class="kw">typeof</span>(vec)</a></code></pre></div>
<pre><code>[1] &quot;logical&quot;</code></pre>
<p>On peut convertir un vecteur d’un type en un autre en utilisant les fonctions <code>as.numeric</code>, <code>as.character</code> ou <code>as.logical</code>. Les valeurs qui n’ont pas pu être converties sont automatiquement transformées en <code>NA</code>.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb378-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2.35&quot;</span>, <span class="st">&quot;8.2e+03&quot;</span>, <span class="st">&quot;foo&quot;</span>)</a>
<a class="sourceLine" id="cb378-2" data-line-number="2"><span class="kw">as.numeric</span>(x)</a></code></pre></div>
<pre><code>Warning: NAs introduits lors de la conversion automatique</code></pre>
<pre><code>[1]    1.00    2.35 8200.00      NA</code></pre>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb381-2" data-line-number="2"><span class="kw">as.character</span>(y)</a></code></pre></div>
<pre><code>[1] &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</code></pre>
<p>On peut sélectionner certains éléments d’un vecteur à l’aide de l’opérateur <code>[]</code>. La manière la plus simple est d’indiquer la position des éléments qu’on veut sélectionner :</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Rouge&quot;</span>, <span class="st">&quot;Vert&quot;</span>)</a>
<a class="sourceLine" id="cb383-2" data-line-number="2">vec[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</a></code></pre></div>
<pre><code>[1] &quot;Jaune&quot; &quot;Rouge&quot;</code></pre>
<p>La sélection peut aussi être utilisée pour modifier certains éléments d’un vecteur, par exemple :</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Rouge&quot;</span>, <span class="st">&quot;Vert&quot;</span>)</a>
<a class="sourceLine" id="cb385-2" data-line-number="2">vec[<span class="dv">2</span>] &lt;-<span class="st"> &quot;Violet&quot;</span></a>
<a class="sourceLine" id="cb385-3" data-line-number="3">vec</a></code></pre></div>
<pre><code>[1] &quot;Jaune&quot;  &quot;Violet&quot; &quot;Rouge&quot;  &quot;Vert&quot;  </code></pre>
</div>
<div id="tests" class="section level2">
<h2><span class="header-section-number">9.2</span> Tests et comparaison</h2>
<p>Un test est une opération logique de comparaison qui renvoie vrai (<code>TRUE</code>) ou faux (<code>FALSE</code>) pour chacun des éléments d’un vecteur.</p>
<p>Parmi les opérateurs de comparaison disponibles, on trouve notamment :</p>
<ul>
<li><code>==</code> qui teste l’égalité</li>
<li><code>!=</code> qui teste la différence</li>
<li><code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> qui testent la supériorité ou l’infériorité</li>
<li><code>%in%</code> qui teste l’appartenance à un ensemble de valeurs</li>
</ul>
<p>Exemple le plus simple :</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1"><span class="dv">2</span> <span class="op">!=</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Exemple appliqué à un vecteur :</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb391-2" data-line-number="2">x <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span></a></code></pre></div>
<pre><code> [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>On peut combiner plusieurs tests avec les opérateurs logiques <em>et</em> (<code>&amp;</code>) et <em>ou</em> (<code>|</code>).
Ainsi, si on veut tester qu’une valeur est comprise entre 3 et 6 inclus, on peut faire :</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb393-1" data-line-number="1">x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">6</span></a></code></pre></div>
<pre><code> [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<p>Si on veut tester qu’une valeur est égale à “Bleu” ou à “Vert”, on peut faire :</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb395-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Rouge&quot;</span>, <span class="st">&quot;Vert&quot;</span>)</a>
<a class="sourceLine" id="cb395-2" data-line-number="2">vec <span class="op">==</span><span class="st"> &quot;Jaune&quot;</span> <span class="op">|</span><span class="st"> </span>vec <span class="op">==</span><span class="st"> &quot;Vert&quot;</span></a></code></pre></div>
<pre><code>[1]  TRUE  TRUE FALSE  TRUE</code></pre>
<p>À noter que dans ce cas, on peut utiliser l’opérateur <code>%in%</code><a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a>, qui teste si une valeur fait partie des éléments d’un vecteur :</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb397-1" data-line-number="1">vec <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Vert&quot;</span>)</a></code></pre></div>
<pre><code>[1]  TRUE  TRUE FALSE  TRUE</code></pre>
<div class="rmdimportant">
<p>
Attention, si on souhaite tester si une valeur <code>x</code> est inconnue (ou ‘manquante’), c’est-à-dire si elle est codée <code>NA</code> (<em>Not Available</em>), faire le test <code>x == NA</code> <em>ne donnera pas le résultat escompté</em>. En effet, fidèle à sa réputation de rigueur informaticienne, pour R <code>NA == NA</code> ne vaut pas <code>TRUE</code> mais… <code>NA</code> (on ne sait pas si une valeur inconnue est égale à une autre valeur inconnue).
</p>
<p>
Pour tester si une valeur est inconnue (<code>NA</code>), il faut utiliser la fonction dédiée <code>is.na</code> et faire <code>is.na(x)</code>.
</p>
<p>
Cependant, par convention, <code>NA %in% NA</code> vaut <code>TRUE</code>.
</p>
</div>
<p>Enfin, on peut inverser un test avec l’opérateur <em>non</em> (<code>!</code>) :</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb399-1" data-line-number="1"><span class="op">!</span>(vec <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jaune&quot;</span>, <span class="st">&quot;Vert&quot;</span>))</a></code></pre></div>
<pre><code>[1] FALSE FALSE  TRUE FALSE</code></pre>
<p>Les tests sont notamment utilisés par le verbe <code>filter</code> de <code>dplyr</code> (voir section <a href="10-dplyr.html#filter">10.2.2</a>) qui permet de sélectionner certaines lignes d’un tableau de données. On peut ainsi sélectionner les individus ayant entre 20 et 40 ans en filtrant sur la variable <code>age</code> :</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb401-1" data-line-number="1"><span class="kw">filter</span>(hdv2003, age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40</span>)</a></code></pre></div>
<p>Ou sélectionner les personnes ayant comme catégorie socio-professionnelle <code>Ouvrier specialise</code> ou <code>Ouvrier qualifie</code> en filtrant sur la variable <code>qualif</code> :</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb402-1" data-line-number="1"><span class="kw">filter</span>(hdv2003, qualif <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Ouvrier specialise&quot;</span>, <span class="st">&quot;Ouvrier qualifie&quot;</span>))</a></code></pre></div>
<p>On peut utiliser les tests pour sélectionner certains éléments d’un vecteur. Si on passe un test à l’opérateur de sélection <code>[]</code>, seuls les éléments pour lesquels ce test est vrai seront conservés :</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb403-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">14</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">18</span>)</a>
<a class="sourceLine" id="cb403-2" data-line-number="2">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>[1] 12 14 18</code></pre>
<p>Enfin, on peut aussi utiliser les tests et la sélection pour modifier les valeurs d’un vecteur. Ainsi, si on assigne une valeur à une sélection, les éléments pour lesquels le test est vrai sont remplacés par cette valeur :</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb405-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">8</span>, <span class="dv">14</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">18</span>)</a>
<a class="sourceLine" id="cb405-2" data-line-number="2">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb405-3" data-line-number="3">x</a></code></pre></div>
<pre><code>[1] 100   8 100   7   6 100</code></pre>
<p>En utilisant cette assignation via un test, on peut effectuer des recodages de variables. Soit le vecteur suivant :</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb407-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Femme&quot;</span>, <span class="st">&quot;Homme&quot;</span>, <span class="st">&quot;Femme&quot;</span>, <span class="st">&quot;Garçon&quot;</span>)</a></code></pre></div>
<p>Si on souhaite recoder la modalité “Garçon” en “Homme”, on peut utiliser la syntaxe suivante :</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb408-1" data-line-number="1">vec[vec <span class="op">==</span><span class="st"> &quot;Garçon&quot;</span>] &lt;-<span class="st"> &quot;Homme&quot;</span></a>
<a class="sourceLine" id="cb408-2" data-line-number="2">vec</a></code></pre></div>
<pre><code>[1] &quot;Femme&quot; &quot;Homme&quot; &quot;Femme&quot; &quot;Homme&quot;</code></pre>
<p>Cette synatxe est tout à fait valable et couramment utilisée, cependant dans la section suivante on va voir différentes fonctions qui facilitent ces opérations de recodage.</p>
</div>
<div id="recoder-une-variable-qualitative" class="section level2">
<h2><span class="header-section-number">9.3</span> Recoder une variable qualitative</h2>
<p>Pour rappel, on appelle variable qualitative une variable pouvant prendre un nombre limité de modalités (de valeurs possibles).</p>
<div id="facteurs-et-forcats" class="section level3">
<h3><span class="header-section-number">9.3.1</span> Facteurs et <code>forcats</code></h3>
<p>Dans R, les variables qualitatives peuvent être de deux types : ou bien des vecteurs de type <code>character</code> (des chaînes de caractères), ou bien des <code>factor</code> (facteurs). Si vous utilisez les fonctions des extensions du <em>tidyverse</em> comme <code>readr</code>, <code>readxl</code> ou <code>haven</code> pour importer vos données, vos variables qualitatives seront importées sous forme de <code>character</code>. Mais dans les autres cas elles se retrouveront souvent sous forme de <code>factor</code>. C’est le cas dans notre jeu de données d’exemple :</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb410-1" data-line-number="1"><span class="kw">class</span>(hdv2003<span class="op">$</span>qualif)</a></code></pre></div>
<pre><code>[1] &quot;factor&quot;</code></pre>
<p>Les facteurs sont un type de variable ne pouvant prendre qu’un nombre défini de modalités nommés <em>levels</em> :</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb412-1" data-line-number="1"><span class="kw">levels</span>(hdv2003<span class="op">$</span>qualif)</a></code></pre></div>
<pre><code>[1] &quot;Ouvrier specialise&quot;       &quot;Ouvrier qualifie&quot;        
[3] &quot;Technicien&quot;               &quot;Profession intermediaire&quot;
[5] &quot;Cadre&quot;                    &quot;Employe&quot;                 
[7] &quot;Autre&quot;                   </code></pre>
<p>Ceci complique les opérations de recodage car du coup l’opération suivante, qui tente de modifier une modalité de la variable, aboutit à un avertissement, et l’opération n’est pas effectuée :</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb414-1" data-line-number="1">hdv2003<span class="op">$</span>qualif[hdv2003<span class="op">$</span>qualif <span class="op">==</span><span class="st"> &quot;Ouvrier specialise&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span></a></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, hdv2003$qualif == &quot;Ouvrier specialise&quot;, :
invalid factor level, NA generated</code></pre>
<p><code>forcats</code> est une extension facilitant la manipulation des variables qualitatives, qu’elles soient sous forme de vecteurs <code>character</code> ou de facteurs. Elle fait partie du <em>tidyverse</em>, et est donc automatiquement chargée par :</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb416-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</div>
<div id="modifier-les-modalités-dune-variable-qualitative" class="section level3">
<h3><span class="header-section-number">9.3.2</span> Modifier les modalités d’une variable qualitative</h3>
<p>Une opération courante consiste à modifier les valeurs d’une variable qualitative, que ce soit pour avoir des intitulés plus courts ou plus clairs ou pour regrouper des modalités entre elles.</p>
<p>Il existe plusieurs possibilités pour effectuer ce type de recodage, mais ici on va utiliser la fonction <code>fct_recode</code> de l’extension <code>forcats</code>. Celle-ci prend en argument une liste de recodages sous la forme <code>&quot;Nouvelle valeur&quot; = &quot;Ancienne valeur&quot;</code>.</p>
<p>Un exemple :</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb417-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Poire&quot;</span>, <span class="st">&quot;Pomme&quot;</span>, <span class="st">&quot;Cerise&quot;</span>)</a>
<a class="sourceLine" id="cb417-2" data-line-number="2">f &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(f,</a>
<a class="sourceLine" id="cb417-3" data-line-number="3">           <span class="st">&quot;Fraise&quot;</span> =<span class="st"> &quot;Pomme&quot;</span>,</a>
<a class="sourceLine" id="cb417-4" data-line-number="4">           <span class="st">&quot;Ananas&quot;</span> =<span class="st"> &quot;Poire&quot;</span>)</a>
<a class="sourceLine" id="cb417-5" data-line-number="5">f</a></code></pre></div>
<pre><code>[1] Fraise Ananas Fraise Cerise
Levels: Cerise Ananas Fraise</code></pre>
<p>Autre exemple sur une “vraie” variable :</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb419-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif)</a></code></pre></div>
<pre><code>                           n    % val%
Ouvrier specialise         0  0.0  0.0
Ouvrier qualifie         292 14.6 20.1
Technicien                86  4.3  5.9
Profession intermediaire 160  8.0 11.0
Cadre                    260 13.0 17.9
Employe                  594 29.7 41.0
Autre                     58  2.9  4.0
NA                       550 27.5   NA</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb421-1" data-line-number="1">hdv2003<span class="op">$</span>qualif5 &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(hdv2003<span class="op">$</span>qualif,</a>
<a class="sourceLine" id="cb421-2" data-line-number="2">                             <span class="st">&quot;Ouvrier&quot;</span> =<span class="st"> &quot;Ouvrier specialise&quot;</span>,</a>
<a class="sourceLine" id="cb421-3" data-line-number="3">                             <span class="st">&quot;Ouvrier&quot;</span> =<span class="st"> &quot;Ouvrier qualifie&quot;</span>,</a>
<a class="sourceLine" id="cb421-4" data-line-number="4">                             <span class="st">&quot;Interm&quot;</span> =<span class="st"> &quot;Technicien&quot;</span>,</a>
<a class="sourceLine" id="cb421-5" data-line-number="5">                             <span class="st">&quot;Interm&quot;</span> =<span class="st"> &quot;Profession intermediaire&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb422-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif5)</a></code></pre></div>
<pre><code>          n    % val%
Ouvrier 292 14.6 20.1
Interm  246 12.3 17.0
Cadre   260 13.0 17.9
Employe 594 29.7 41.0
Autre    58  2.9  4.0
NA      550 27.5   NA</code></pre>
<p>Attention, les anciennes valeurs saisies doivent être exactement égales aux valeurs des modalités de la variable recodée : toute différence d’accent ou d’espace fera que ce recodage ne sera pas pris en compte. Dans ce cas, <code>forcats</code> affiche un avertissement nous indiquant qu’une valeur saisie n’a pas été trouvée dans les modalités de la variable :</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb424-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_test &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(hdv2003<span class="op">$</span>qualif,</a>
<a class="sourceLine" id="cb424-2" data-line-number="2">                                  <span class="st">&quot;Ouvrier&quot;</span> =<span class="st"> &quot;Ouvrier spécialisé&quot;</span>,</a>
<a class="sourceLine" id="cb424-3" data-line-number="3">                                  <span class="st">&quot;Ouvrier&quot;</span> =<span class="st"> &quot;Ouvrier qualifié&quot;</span>)</a></code></pre></div>
<pre><code>Warning: Unknown levels in `f`: Ouvrier spécialisé, Ouvrier qualifié</code></pre>
<p>Si on souhaite recoder une modalité de la variable en <code>NA</code>, il faut (contre intuitivement) lui assigner la valeur <code>NULL</code> :</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb426-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_rec &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(hdv2003<span class="op">$</span>qualif, <span class="dt">NULL =</span> <span class="st">&quot;Autre&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb427-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif_rec)</a></code></pre></div>
<pre><code>                           n    % val%
Ouvrier specialise         0  0.0  0.0
Ouvrier qualifie         292 14.6 21.0
Technicien                86  4.3  6.2
Profession intermediaire 160  8.0 11.5
Cadre                    260 13.0 18.7
Employe                  594 29.7 42.7
NA                       608 30.4   NA</code></pre>
<p>À l’inverse, si on souhaite recoder les <code>NA</code> d’une variable, on utilisera la fonction <code>fct_explicit_na</code>, qui convertit toutes les valeurs manquantes (<code>NA</code>) d’un facteur en une modalité spécifique :</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb429-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_rec &lt;-<span class="st"> </span><span class="kw">fct_explicit_na</span>(hdv2003<span class="op">$</span>qualif, <span class="dt">na_level =</span> <span class="st">&quot;(Manquant)&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb430-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif_rec)</a></code></pre></div>
<pre><code>                           n    % val%
Ouvrier specialise         0  0.0  0.0
Ouvrier qualifie         292 14.6 14.6
Technicien                86  4.3  4.3
Profession intermediaire 160  8.0  8.0
Cadre                    260 13.0 13.0
Employe                  594 29.7 29.7
Autre                     58  2.9  2.9
(Manquant)               550 27.5 27.5</code></pre>
<p>D’autres fonctions sont proposées par <code>forcats</code> pour faciliter certains recodage, comme <code>fct_collapse</code>, qui propose une autre syntaxe pratique quand on doit regrouper ensemble des modalités :</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb432-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_rec &lt;-<span class="st"> </span><span class="kw">fct_collapse</span>(hdv2003<span class="op">$</span>qualif,</a>
<a class="sourceLine" id="cb432-2" data-line-number="2">                                  <span class="st">&quot;Ouvrier&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Ouvrier specialise&quot;</span>, <span class="st">&quot;Ouvrier qualifie&quot;</span>),</a>
<a class="sourceLine" id="cb432-3" data-line-number="3">                                  <span class="st">&quot;Interm&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Technicien&quot;</span>, <span class="st">&quot;Profession intermediaire&quot;</span>))</a></code></pre></div>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb433-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif_rec)</a></code></pre></div>
<pre><code>          n    % val%
Ouvrier 292 14.6 20.1
Interm  246 12.3 17.0
Cadre   260 13.0 17.9
Employe 594 29.7 41.0
Autre    58  2.9  4.0
NA      550 27.5   NA</code></pre>
<p><code>fct_other</code>, qui regroupe une liste de modalités en une seule modalité “Other” :</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb435-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_rec &lt;-<span class="st"> </span><span class="kw">fct_other</span>(hdv2003<span class="op">$</span>qualif,</a>
<a class="sourceLine" id="cb435-2" data-line-number="2">                                <span class="dt">drop =</span> <span class="kw">c</span>(<span class="st">&quot;Ouvrier specialise&quot;</span>, <span class="st">&quot;Ouvrier qualifie&quot;</span>, </a>
<a class="sourceLine" id="cb435-3" data-line-number="3">                                         <span class="st">&quot;Cadre&quot;</span>, <span class="st">&quot;Autre&quot;</span>))</a></code></pre></div>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb436-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif_rec)</a></code></pre></div>
<pre><code>                           n    % val%
Technicien                86  4.3  5.9
Profession intermediaire 160  8.0 11.0
Employe                  594 29.7 41.0
Other                    610 30.5 42.1
NA                       550 27.5   NA</code></pre>
<p><code>fct_lump</code>, qui regroupe automatiquement les modalités les moins fréquentes en une seule modalité “Other” (avec possibilité d’indiquer des seuils de regroupement) :</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb438-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_rec &lt;-<span class="st"> </span><span class="kw">fct_lump</span>(hdv2003<span class="op">$</span>qualif)</a></code></pre></div>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb439-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif_rec)</a></code></pre></div>
<pre><code>                           n    % val%
Ouvrier qualifie         292 14.6 20.1
Profession intermediaire 160  8.0 11.0
Cadre                    260 13.0 17.9
Employe                  594 29.7 41.0
Other                    144  7.2  9.9
NA                       550 27.5   NA</code></pre>
<div id="irec" class="section level4">
<h4><span class="header-section-number">9.3.2.1</span> Interface graphique de recodage</h4>
<p>L’extension <code>questionr</code> propose une interface graphique facilitant le recodage des modalités d’une variable qualitative. L’objectif est de permettre à l’utilisateur de saisir les nouvelles valeurs dans un formulaire, et de générer ensuite le code R correspondant au recodage indiqué.</p>
<p>Pour utiliser cette interface, sous RStudio vous pouvez aller dans le menu <em>Addins</em> (présent dans la barre d’outils principale) puis choisir <em>Levels recoding</em>. Sinon, vous pouvez lancer dans la console la fonction <code>irec()</code> en lui passant comme paramètre la variable à recoder.</p>
<div class="figure">
<img src="resources/screenshots/irec.png" alt="Interface graphique de irec" />
<p class="caption">Interface graphique de <code>irec</code></p>
</div>
<p>L’interface se compose de trois onglets : l’onglet <em>Variable et paramètres</em> vous permet de sélectionner la variable à recoder, le nom de la nouvelle variable et d’autres paramètres, l’onglet <em>Recodages</em> vous permet de saisir les nouvelles valeurs des modalités, et l’onglet <em>Code et résultat</em> affiche le code R correspondant ainsi qu’un tableau permettant de vérifier les résultats.</p>
<p>Une fois votre recodage terminé, cliquez sur le bouton <em>Done</em> et le code R sera inséré dans votre script R ou affiché dans la console.</p>
<div class="rmdimportant">
<p>
<strong>Attention</strong>, cette interface est prévue pour ne pas modifier vos données. C’est donc à vous d’exécuter le code généré pour que le recodage soit réellement effectif.
</p>
</div>
</div>
</div>
<div id="ordonner-les-modalités-dune-variable-qualitative" class="section level3">
<h3><span class="header-section-number">9.3.3</span> Ordonner les modalités d’une variable qualitative</h3>
<p>L’avantage des facteurs (par rapport aux vecteurs de type <code>character</code>) est que leurs modalités peuvent être ordonnées, ce qui peut faciliter la lecture de tableaux ou graphiques.</p>
<p>On peut ordonner les modalités d’un facteur manuellement, par exemple avec la fonction <code>fct_relevel()</code> de l’extension <code>forcats</code> :</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb441-1" data-line-number="1">hdv2003<span class="op">$</span>qualif_rec &lt;-<span class="st"> </span><span class="kw">fct_relevel</span>(hdv2003<span class="op">$</span>qualif,</a>
<a class="sourceLine" id="cb441-2" data-line-number="2">                                  <span class="st">&quot;Cadre&quot;</span>, <span class="st">&quot;Profession intermediaire&quot;</span>, <span class="st">&quot;Technicien&quot;</span>, </a>
<a class="sourceLine" id="cb441-3" data-line-number="3">                                  <span class="st">&quot;Employe&quot;</span>, <span class="st">&quot;Ouvrier qualifie&quot;</span>, <span class="st">&quot;Ouvrier specialise&quot;</span>,</a>
<a class="sourceLine" id="cb441-4" data-line-number="4">                                  <span class="st">&quot;Autre&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb442-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>qualif_rec)</a></code></pre></div>
<pre><code>                           n    % val%
Cadre                    260 13.0 17.9
Profession intermediaire 160  8.0 11.0
Technicien                86  4.3  5.9
Employe                  594 29.7 41.0
Ouvrier qualifie         292 14.6 20.1
Ouvrier specialise         0  0.0  0.0
Autre                     58  2.9  4.0
NA                       550 27.5   NA</code></pre>
<p>Une autre possibilité est d’ordonner les modalités d’un facteur selon les valeurs d’une autre variable. Par exemple, si on représente le boxplot de la répartition de l’âge selon le statut d’occupation :</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb444-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb444-2" data-line-number="2"><span class="kw">ggplot</span>(hdv2003) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb444-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>occup, <span class="dt">y=</span>age))</a></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-362-1.svg" width="672" /></p>
<p>Le graphique pourrait être plus lisible si les modalités étaient triées par âge median croissant. Ceci est possible en utilisant <code>fct_reorder</code>. Celle-ci prend 3 arguments : le facteur à réordonner, la variable dont les valeurs doivent être utilisées pour ce réordonnancement, et enfin une fonction à appliquer à cette deuxième variable.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb445-1" data-line-number="1">hdv2003<span class="op">$</span>occup_age &lt;-<span class="st"> </span><span class="kw">fct_reorder</span>(hdv2003<span class="op">$</span>occup, hdv2003<span class="op">$</span>age, median)</a>
<a class="sourceLine" id="cb445-2" data-line-number="2"></a>
<a class="sourceLine" id="cb445-3" data-line-number="3"><span class="kw">ggplot</span>(hdv2003) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb445-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> occup_age, <span class="dt">y =</span> age))</a></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-363-1.svg" width="672" /></p>
<p>On peut aussi effectuer le réordonnancement directement dans l’appel à <code>ggplot2</code>, sans créer de nouvelle variable :</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb446-1" data-line-number="1"><span class="kw">ggplot</span>(hdv2003) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb446-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">fct_reorder</span>(occup, age, median), </a>
<a class="sourceLine" id="cb446-3" data-line-number="3">                   <span class="dt">y =</span> age))</a></code></pre></div>
<p>Lorsqu’on effectue un diagramme en barres avec <code>geom_bar</code>, on peut aussi réordonner les modalités selon leurs effectifs à l’aide de <code>fct_infreq</code> :</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb447-1" data-line-number="1"><span class="kw">ggplot</span>(hdv2003) <span class="op">+</span></a>
<a class="sourceLine" id="cb447-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">fct_infreq</span>(occup)))</a></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-365-1.svg" width="672" /></p>
<div id="iorder" class="section level4">
<h4><span class="header-section-number">9.3.3.1</span> Interface graphique</h4>
<p><code>questionr</code> propose une interface graphique afin de faciliter les opérations de réordonnancement manuel. Pour la lancer, sélectionner le menu <em>Addins</em> puis <em>Levels ordering</em>, ou exécuter la fonction <code>iorder()</code> en lui passant comme paramètre le facteur à réordonner.</p>
<div class="figure">
<img src="resources/screenshots/iorder.png" alt="Interface graphique de iorder" />
<p class="caption">Interface graphique de <code>iorder</code></p>
</div>
<p>Le fonctionnement de l’interface est similaire à celui de <a href="09-recodages.html#irec">l’interface de recodage</a>. Vous pouvez réordonner les modalités en les faisant glisser avec la souris, puis récupérer et exécuter le code R généré.</p>
</div>
</div>
</div>
<div id="combiner-plusieurs-variables" class="section level2">
<h2><span class="header-section-number">9.4</span> Combiner plusieurs variables</h2>
<p>Parfois, on veut créer une nouvelle variable en partant des valeurs d’une ou plusieurs autres variables. Dans ce cas on peut utiliser les fonctions <code>if_else</code> pour les cas les plus simples, ou <code>case_when</code> pour les cas plus complexes. Ces deux fonctions sont incluses dans l’extension <code>dplyr</code>, qu’il faut donc avoir chargé précédemment.</p>
<div id="if_else" class="section level3">
<h3><span class="header-section-number">9.4.1</span> <code>if_else</code></h3>
<p><code>if_else</code> prend trois arguments : un test, une valeur à renvoyer si le test est vrai, et une valeur à renvoyer si le test est faux.</p>
<p>Voici un exemple simple :</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb448-1" data-line-number="1">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">8</span>, <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb448-2" data-line-number="2"><span class="kw">if_else</span>(v <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;Supérieur à 10&quot;</span>, <span class="st">&quot;Inférieur à 10&quot;</span>)</a></code></pre></div>
<pre><code>[1] &quot;Supérieur à 10&quot; &quot;Supérieur à 10&quot; &quot;Inférieur à 10&quot; &quot;Supérieur à 10&quot;</code></pre>
<p>La fonction devient plus intéressante avec des tests combinant plusieurs variables. Par exemple, imaginons qu’on souhaite créer une nouvelle variable indiquant les hommes de plus de 60 ans :</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb450-1" data-line-number="1">hdv2003<span class="op">$</span>statut &lt;-<span class="st"> </span><span class="kw">if_else</span>(hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>,</a>
<a class="sourceLine" id="cb450-2" data-line-number="2">                          <span class="st">&quot;Homme de plus de 60 ans&quot;</span>,</a>
<a class="sourceLine" id="cb450-3" data-line-number="3">                          <span class="st">&quot;Autre&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb451-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>statut)</a></code></pre></div>
<pre><code>                           n    % val%
Autre                   1778 88.9 88.9
Homme de plus de 60 ans  222 11.1 11.1</code></pre>
</div>
<div id="case_when" class="section level3">
<h3><span class="header-section-number">9.4.2</span> <code>case_when</code></h3>
<p><code>case_when</code> est une génération du <code>if_else</code> qui permet d’indiquer plusieurs tests et leurs valeurs associées.</p>
<p>Imaginons qu’on souhaite créer une nouvelle variable permettant d’identifier les hommes de plus de 60 ans, les femmes de plus de 60 ans, et les autres. On peut utiliser la syntaxe suivante :</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb453-1" data-line-number="1">hdv2003<span class="op">$</span>statut &lt;-<span class="st"> </span><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb453-2" data-line-number="2">    hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">~</span><span class="st"> &quot;Homme de plus de 60 ans&quot;</span>,</a>
<a class="sourceLine" id="cb453-3" data-line-number="3">    hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Femme&quot;</span> <span class="op">~</span><span class="st"> &quot;Femme de plus de 60 ans&quot;</span>,</a>
<a class="sourceLine" id="cb453-4" data-line-number="4">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Autre&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb454-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>statut)</a></code></pre></div>
<pre><code>                           n    % val%
Autre                   1512 75.6 75.6
Femme de plus de 60 ans  266 13.3 13.3
Homme de plus de 60 ans  222 11.1 11.1</code></pre>
<p><code>case_when</code> prend en arguments une série d’instructions sous la forme <code>condition ~ valeur</code>. Il les exécute une par une, et dès qu’une <code>condition</code> est vraie, il renvoie la <code>valeur</code> associée.</p>
<p>La clause <code>TRUE ~ &quot;Autre&quot;</code> permet d’assigner une valeur à toutes les lignes pour lesquelles aucune des conditions précédentes n’est vraie.</p>
<div class="rmdimportant">
<p>
<strong>Attention :</strong> comme les conditions sont testées l’une après l’autre et que la valeur renvoyée est celle correspondant à la première condition vraie, l’ordre de ces conditions est très important. Il faut absolument aller du plus spécifique au plus général.
</p>
</div>
<p>Par exemple le recodage suivant ne fonctionne pas :</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb456-1" data-line-number="1">hdv2003<span class="op">$</span>statut &lt;-<span class="st"> </span><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb456-2" data-line-number="2">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">~</span><span class="st"> &quot;Homme&quot;</span>,</a>
<a class="sourceLine" id="cb456-3" data-line-number="3">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">~</span><span class="st"> &quot;Homme de plus de 60 ans&quot;</span>,</a>
<a class="sourceLine" id="cb456-4" data-line-number="4">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Autre&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb457-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>statut)</a></code></pre></div>
<pre><code>         n  % val%
Autre 1101 55   55
Homme  899 45   45</code></pre>
<p>Comme la condition <code>sexe == &quot;Homme&quot;</code> est plus générale que <code>sexe == &quot;Homme&quot; &amp; age &gt; 60</code>, cette deuxième condition n’est jamais testée ! On n’obtiendra jamais la valeur correspondante.</p>
<p>Pour que ce recodage fonctionne il faut donc changer l’ordre des conditions pour aller du plus spécifique au plus général :</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb459-1" data-line-number="1">hdv2003<span class="op">$</span>statut &lt;-<span class="st"> </span><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb459-2" data-line-number="2">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">~</span><span class="st"> &quot;Homme de plus de 60 ans&quot;</span>,</a>
<a class="sourceLine" id="cb459-3" data-line-number="3">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">~</span><span class="st"> &quot;Homme&quot;</span>,</a>
<a class="sourceLine" id="cb459-4" data-line-number="4">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Autre&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb460-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>statut)</a></code></pre></div>
<pre><code>                           n    % val%
Autre                   1101 55.0 55.0
Homme                    677 33.9 33.9
Homme de plus de 60 ans  222 11.1 11.1</code></pre>
</div>
</div>
<div id="découper-une-variable-numérique-en-classes" class="section level2">
<h2><span class="header-section-number">9.5</span> Découper une variable numérique en classes</h2>
<p>Une autre opération relativement courante consiste à découper une variable numérique en classes. Par exemple, on voudra transformer une variable <em>revenu</em> contenant le revenu mensuel en une variable qualitative avec des catégories <em>Moins de 500 euros</em>, <em>500-1000 euros</em>, etc.</p>
<p>On utilise pour cela la fonction <code>cut()</code> :</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb462-1" data-line-number="1">hdv2003<span class="op">$</span>agecl &lt;-<span class="st"> </span><span class="kw">cut</span>(hdv2003<span class="op">$</span>age, <span class="dt">breaks =</span> <span class="dv">5</span>)</a></code></pre></div>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb463-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>agecl)</a></code></pre></div>
<pre><code>              n    % val%
(17.9,33.8] 454 22.7 22.7
(33.8,49.6] 628 31.4 31.4
(49.6,65.4] 556 27.8 27.8
(65.4,81.2] 319 16.0 16.0
(81.2,97.1]  43  2.1  2.1</code></pre>
<p>Si on donne un nombre entier à l’argument <code>breaks</code>, un nombre correspondant de classes d’amplitudes égales sont automatiquement calculées. Il est souvent préférable cependant d’avoir des limites “rondes”, on peut alors spécifier ces dernières manuellement en passant un vecteur à <code>breaks</code> :</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb465-1" data-line-number="1">hdv2003<span class="op">$</span>agecl &lt;-<span class="st"> </span><span class="kw">cut</span>(hdv2003<span class="op">$</span>age, </a>
<a class="sourceLine" id="cb465-2" data-line-number="2">                     <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">25</span>, <span class="dv">35</span>, <span class="dv">45</span>, <span class="dv">55</span>, <span class="dv">65</span>, <span class="dv">97</span>), </a>
<a class="sourceLine" id="cb465-3" data-line-number="3">                     <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb466-1" data-line-number="1"><span class="kw">freq</span>(hdv2003<span class="op">$</span>agecl)</a></code></pre></div>
<pre><code>          n    % val%
[18,25] 191  9.6  9.6
(25,35] 338 16.9 16.9
(35,45] 390 19.5 19.5
(45,55] 414 20.7 20.7
(55,65] 305 15.2 15.2
(65,97] 362 18.1 18.1</code></pre>
<p>Ici on a été obligé d’ajouter l’argument <code>include.lowest = TRUE</code> car sinon la valeur 18 n’aurait pas été incluse, et on aurait eu des valeurs manquantes.</p>
<div id="interface-graphique" class="section level3">
<h3><span class="header-section-number">9.5.1</span> Interface graphique</h3>
<p>Comme l’utilisation des arguments de <code>cut</code> n’est pas toujours très intuitive, l’extension <code>questionr</code> propose une interface graphique facilitant cette opération de découpage en classes d’une variable numérique.</p>
<p>Pour lancer cette interface, sous RStudio ouvrir le menu <em>Addins</em> et sélectionner <em>Numeric range dividing</em>, ou exécuter la fonction <code>icut()</code> dans la console en lui passant comme argument la variable quantitative à découper.</p>
<div class="figure">
<img src="resources/screenshots/icut.png" alt="Interface graphique de icut" />
<p class="caption">Interface graphique de <code>icut</code></p>
</div>
<p>Vous pouvez alors choisir la variable à découper dans l’onglet <em>Variable et paramètres</em>, indiquer les
limites de vos classes ainsi que quelques options complémentaires dans l’onglet <em>Découpage en classes</em>, et vérifier le résultat dans l’onglet <em>Code et résultat</em>. Une fois le résultat satisfaisant, cliquez sur <em>Done</em> : si vous êtes sous RStudio le code généré sera directement inséré dans votre script actuel à l’emplacement du curseur. Sinon, ce code sera affiché dans la console et vous pourrez le copier/coller pour l’inclure dans votre script.</p>
<div class="rmdimportant">
<p>
<strong>Attention</strong>, cette interface est prévue pour ne pas modifier vos données. C’est donc à vous d’exécuter le code généré pour que le découpage soit réellement effectif.
</p>
</div>
</div>
</div>
<div id="exercices-4" class="section level2">
<h2><span class="header-section-number">9.6</span> Exercices</h2>
<div id="préparation-1" class="section level3">
<h3><span class="header-section-number">9.6.1</span> Préparation</h3>
<p>Pour la plupart de ces exercices, on a besoin des extensions <code>forcats</code> et <code>questionr</code>, et du jeu de données d’exemple <code>hdv2003</code>.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb468-1" data-line-number="1"><span class="kw">library</span>(forcats)</a>
<a class="sourceLine" id="cb468-2" data-line-number="2"><span class="kw">library</span>(questionr)</a>
<a class="sourceLine" id="cb468-3" data-line-number="3"><span class="kw">data</span>(hdv2003)</a></code></pre></div>
</div>
<div id="vecteurs-et-tests" class="section level3">
<h3><span class="header-section-number">9.6.2</span> Vecteurs et tests</h3>
<p><strong>Exercice 1.1</strong></p>
<p>Construire le vecteur suivant :</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb469-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;12&quot;</span>, <span class="st">&quot;3.5&quot;</span>, <span class="st">&quot;421&quot;</span>, <span class="st">&quot;2,4&quot;</span>)</a></code></pre></div>
<p>Et le convertir en vecteur numérique. Que remarquez-vous ?</p>

<div class="solution">
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb470-1" data-line-number="1"><span class="kw">as.numeric</span>(x)</a>
<a class="sourceLine" id="cb470-2" data-line-number="2"></a>
<a class="sourceLine" id="cb470-3" data-line-number="3"><span class="co">## Un nombre avec une virgule comme séparateur décimal</span></a>
<a class="sourceLine" id="cb470-4" data-line-number="4"><span class="co">## renvoie NA</span></a></code></pre></div>
</div>

<p><strong>Exercice 1.2</strong></p>
<p>Construire le vecteur suivant :</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb471-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="fl">15.5</span>, <span class="dv">14</span>, <span class="dv">12</span>, <span class="dv">8</span>)</a></code></pre></div>
<ul>
<li>Écrire le test qui indique si les éléments du vecteur sont strictement supérieurs à 15.</li>
<li>Utiliser ce test pour extraire du vecteur les éléments correspondants.</li>
</ul>

<div class="solution">
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb472-1" data-line-number="1">x <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb472-2" data-line-number="2">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span>]</a></code></pre></div>
</div>

<p><strong>Exercice 1.3</strong></p>
<p>Le code suivant génère un vecteur de 1000 nombres aléatoires compris entre 0 et 10 :</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb473-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">10</span>)</a></code></pre></div>
<p>Combien d’éléments de ce vecteur sont compris entre 2 et 4 ?</p>

<div class="solution">
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb474-1" data-line-number="1"><span class="co">## Possibilité 1</span></a>
<a class="sourceLine" id="cb474-2" data-line-number="2"><span class="kw">length</span>(x[x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>])</a>
<a class="sourceLine" id="cb474-3" data-line-number="3"><span class="co">## Possibilité 2</span></a>
<a class="sourceLine" id="cb474-4" data-line-number="4"><span class="kw">table</span>(x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>)</a></code></pre></div>
</div>

</div>
<div id="recodages-de-variable-qualitative" class="section level3">
<h3><span class="header-section-number">9.6.3</span> Recodages de variable qualitative</h3>
<p><strong>Exercice 2.1</strong></p>
<p>Construire un vecteur <code>f</code> à l’aide du code suivant :</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb475-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Fev&quot;</span>, <span class="st">&quot;Juil&quot;</span>)</a></code></pre></div>
<p>Recoder le vecteur à l’aide de la fonction <code>fct_recode</code> pour obtenir le résultat suivant :</p>
<pre><code>[1] Janvier Janvier Février Juillet
Levels: Février Janvier Juillet</code></pre>

<div class="solution">
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb477-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(f,</a>
<a class="sourceLine" id="cb477-2" data-line-number="2">          <span class="st">&quot;Janvier&quot;</span> =<span class="st"> &quot;Jan&quot;</span>,</a>
<a class="sourceLine" id="cb477-3" data-line-number="3">          <span class="st">&quot;Février&quot;</span> =<span class="st"> &quot;Fev&quot;</span>,</a>
<a class="sourceLine" id="cb477-4" data-line-number="4">          <span class="st">&quot;Juillet&quot;</span> =<span class="st"> &quot;Juil&quot;</span>)</a>
<a class="sourceLine" id="cb477-5" data-line-number="5">f</a></code></pre></div>
</div>

<p><strong>Exercice 2.2</strong></p>
<p>À l’aide de l’interface graphique de <code>questionr</code>, recoder la variable <code>relig</code> du jeu de données <code>hdv2003</code> pour obtenir le tri à plat suivant (il se peut que l’ordre des modalités dans le tri à plat soit différent) :</p>
<pre><code>                              n    % val%
Pratiquant                  708 35.4 35.4
Appartenance                760 38.0 38.0
Ni croyance ni appartenance 399 20.0 20.0
Rejet                        93  4.7  4.7
NSP                          40  2.0  2.0</code></pre>

<div class="solution">
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb479-1" data-line-number="1">hdv2003<span class="op">$</span>relig_rec &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(hdv2003<span class="op">$</span>relig,</a>
<a class="sourceLine" id="cb479-2" data-line-number="2">               <span class="st">&quot;Pratiquant&quot;</span> =<span class="st"> &quot;Pratiquant regulier&quot;</span>,</a>
<a class="sourceLine" id="cb479-3" data-line-number="3">               <span class="st">&quot;Pratiquant&quot;</span> =<span class="st"> &quot;Pratiquant occasionnel&quot;</span>,</a>
<a class="sourceLine" id="cb479-4" data-line-number="4">               <span class="st">&quot;Appartenance&quot;</span> =<span class="st"> &quot;Appartenance sans pratique&quot;</span>,</a>
<a class="sourceLine" id="cb479-5" data-line-number="5">               <span class="st">&quot;NSP&quot;</span> =<span class="st"> &quot;NSP ou NVPR&quot;</span>)</a>
<a class="sourceLine" id="cb479-6" data-line-number="6"></a>
<a class="sourceLine" id="cb479-7" data-line-number="7"><span class="kw">freq</span>(hdv2003<span class="op">$</span>relig_rec)</a></code></pre></div>
</div>

<p><strong>Exercice 2.3</strong></p>
<p>À l’aide de l’interface graphique de <code>questionr</code>, recoder la variable <code>nivetud</code> pour obtenir le tri à plat suivant (il se peut que l’ordre des modalités dans le tri à plat soit différent) :</p>
<pre><code>                                          n    % val%
N&#39;a jamais fait d&#39;etudes                 39  2.0  2.1
Études primaires                        427 21.3 22.6
1er cycle                               204 10.2 10.8
2eme cycle                              183  9.2  9.7
Enseignement technique ou professionnel 594 29.7 31.5
Enseignement superieur                  441 22.1 23.4
NA                                      112  5.6   NA</code></pre>

<div class="solution">
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb481-1" data-line-number="1">hdv2003<span class="op">$</span>nivetud_rec &lt;-<span class="st"> </span><span class="kw">fct_recode</span>(hdv2003<span class="op">$</span>nivetud,</a>
<a class="sourceLine" id="cb481-2" data-line-number="2">               <span class="st">&quot;Études primaires&quot;</span> =<span class="st"> &quot;A arrete ses etudes, avant la derniere annee d&#39;etudes primaires&quot;</span>,</a>
<a class="sourceLine" id="cb481-3" data-line-number="3">               <span class="st">&quot;Études primaires&quot;</span> =<span class="st"> &quot;Derniere annee d&#39;etudes primaires&quot;</span>,</a>
<a class="sourceLine" id="cb481-4" data-line-number="4">               <span class="st">&quot;Enseignement technique ou professionnel&quot;</span> =<span class="st"> &quot;Enseignement technique ou professionnel court&quot;</span>,</a>
<a class="sourceLine" id="cb481-5" data-line-number="5">               <span class="st">&quot;Enseignement technique ou professionnel&quot;</span> =<span class="st"> &quot;Enseignement technique ou professionnel long&quot;</span>,</a>
<a class="sourceLine" id="cb481-6" data-line-number="6">               <span class="st">&quot;Enseignement superieur&quot;</span> =<span class="st"> &quot;Enseignement superieur y compris technique superieur&quot;</span>)</a>
<a class="sourceLine" id="cb481-7" data-line-number="7"></a>
<a class="sourceLine" id="cb481-8" data-line-number="8"><span class="kw">freq</span>(hdv2003<span class="op">$</span>nivetud_rec)</a></code></pre></div>
</div>

<p>Toujours à l’aide de l’interface graphique, réordonner les modalités de cette variable recodée pour obtenir le tri à plat suivant :</p>
<pre><code>                                          n    % val%
Enseignement superieur                  441 22.1 23.4
Enseignement technique ou professionnel 594 29.7 31.5
2eme cycle                              183  9.2  9.7
1er cycle                               204 10.2 10.8
Études primaires                        427 21.3 22.6
N&#39;a jamais fait d&#39;etudes                 39  2.0  2.1
NA                                      112  5.6   NA</code></pre>

<div class="solution">
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb483-1" data-line-number="1">hdv2003<span class="op">$</span>nivetud_rec &lt;-<span class="st"> </span><span class="kw">factor</span>(hdv2003<span class="op">$</span>nivetud_rec, </a>
<a class="sourceLine" id="cb483-2" data-line-number="2">                              <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Enseignement superieur&quot;</span>, <span class="st">&quot;Enseignement technique ou professionnel&quot;</span>, <span class="st">&quot;2eme cycle&quot;</span>, <span class="st">&quot;1er cycle&quot;</span>, <span class="st">&quot;Études primaires&quot;</span>, <span class="st">&quot;N&#39;a jamais fait d&#39;etudes&quot;</span>))</a>
<a class="sourceLine" id="cb483-3" data-line-number="3"></a>
<a class="sourceLine" id="cb483-4" data-line-number="4"><span class="kw">freq</span>(hdv2003<span class="op">$</span>nivetud_rec)</a></code></pre></div>
</div>

<p><strong>Exercice 2.4</strong></p>
<p>À l’aide de la fonction <code>fct_reorder</code>, trier les modalités de la variable <code>relig</code> du jeu de données <code>hdv2003</code> selon leur âge médian.</p>
<p>Vérifier en générant le boxplot suivant :</p>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-405-1.svg" width="672" /></p>

<div class="solution">
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb484-1" data-line-number="1">hdv2003<span class="op">$</span>relig &lt;-<span class="st"> </span><span class="kw">fct_reorder</span>(hdv2003<span class="op">$</span>relig, hdv2003<span class="op">$</span>age, median)</a>
<a class="sourceLine" id="cb484-2" data-line-number="2"><span class="kw">ggplot</span>(hdv2003) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> relig, <span class="dt">y =</span> age))</a></code></pre></div>
</div>

</div>
<div id="combiner-plusieurs-variables-1" class="section level3">
<h3><span class="header-section-number">9.6.4</span> Combiner plusieurs variables</h3>
<p><strong>Exercice 3.1</strong></p>
<p>À l’aide de la fonction <code>if_else</code>, créer une nouvelle variable <code>cinema_bd</code> permettant d’identifier les personnes qui vont au cinéma et déclarent lire des bandes dessinées.</p>
<p>Vous devriez obtenir le tri à plat suivant pour cette nouvelle variable :</p>
<pre><code>                n    % val%
Autre        1971 98.6 98.6
Cinéma et BD   29  1.5  1.5</code></pre>

<div class="solution">
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb486-1" data-line-number="1">hdv2003<span class="op">$</span>cinema_bd &lt;-<span class="st"> </span><span class="kw">if_else</span>(</a>
<a class="sourceLine" id="cb486-2" data-line-number="2">  hdv2003<span class="op">$</span>cinema <span class="op">==</span><span class="st"> &quot;Oui&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>lecture.bd <span class="op">==</span><span class="st"> &quot;Oui&quot;</span>, </a>
<a class="sourceLine" id="cb486-3" data-line-number="3">  <span class="st">&quot;Cinéma et BD&quot;</span>, </a>
<a class="sourceLine" id="cb486-4" data-line-number="4">  <span class="st">&quot;Autre&quot;</span>)</a>
<a class="sourceLine" id="cb486-5" data-line-number="5"></a>
<a class="sourceLine" id="cb486-6" data-line-number="6"><span class="kw">freq</span>(hdv2003<span class="op">$</span>cinema_bd)</a></code></pre></div>
</div>

<p><strong>Exercice 3.2</strong></p>
<p>À l’aide de la fonction <code>case_when</code>, créer une nouvelle variable ayant les modalités suivantes :</p>
<ul>
<li>Homme ayant plus de 2 frères et soeurs</li>
<li>Femme ayant plus de 2 frères et soeurs</li>
<li>Autre</li>
</ul>
<p>Vous devriez obtenir le tri à plat suivant :</p>
<pre><code>                                          n    % val%
Autre                                  1001 50.0 50.0
Femme ayant plus de 2 frères et soeurs  546 27.3 27.3
Homme ayant plus de 2 frères et soeurs  453 22.7 22.7</code></pre>

<div class="solution">
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb488-1" data-line-number="1">hdv2003<span class="op">$</span>groupe &lt;-<span class="st"> </span><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb488-2" data-line-number="2">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>freres.soeurs <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> &quot;Homme ayant plus de 2 frères et soeurs&quot;</span>,</a>
<a class="sourceLine" id="cb488-3" data-line-number="3">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Femme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>freres.soeurs <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> &quot;Femme ayant plus de 2 frères et soeurs&quot;</span>,</a>
<a class="sourceLine" id="cb488-4" data-line-number="4">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Autre&quot;</span></a>
<a class="sourceLine" id="cb488-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb488-6" data-line-number="6"></a>
<a class="sourceLine" id="cb488-7" data-line-number="7"><span class="kw">freq</span>(hdv2003<span class="op">$</span>groupe)</a></code></pre></div>
</div>

<p><strong>Exercice 3.3</strong></p>
<p>À l’aide de la fonction <code>case_when</code>, créer une nouvelle variable ayant les modalités suivantes :</p>
<ul>
<li>Homme de plus de 30 ans</li>
<li>Homme de plus de 40 ans satisfait par son travail</li>
<li>Femme pratiquant le sport ou le bricolage</li>
<li>Autre</li>
</ul>
<p>Vous devriez obtenir le tri à plat suivant :</p>
<pre><code>                                                    n    % val%
Autre                                             714 35.7 35.7
Femme pratiquant le sport ou le bricolage         549 27.5 27.5
Homme de plus de 30 ans                           610 30.5 30.5
Homme de plus de 40 ans satisfait par son travail 127  6.3  6.3</code></pre>

<div class="solution">
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb490-1" data-line-number="1">hdv2003<span class="op">$</span>groupe &lt;-<span class="st"> </span><span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb490-2" data-line-number="2">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">40</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>trav.satisf <span class="op">==</span><span class="st"> &quot;Satisfaction&quot;</span> <span class="op">~</span><span class="st"> &quot;Homme de plus de 40 ans satisfait par son travail&quot;</span>,</a>
<a class="sourceLine" id="cb490-3" data-line-number="3">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Homme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>hdv2003<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> <span class="op">~</span><span class="st"> &quot;Homme de plus de 30 ans&quot;</span>,</a>
<a class="sourceLine" id="cb490-4" data-line-number="4">    hdv2003<span class="op">$</span>sexe <span class="op">==</span><span class="st"> &quot;Femme&quot;</span> <span class="op">&amp;</span><span class="st"> </span>(hdv2003<span class="op">$</span>sport <span class="op">==</span><span class="st"> &quot;Oui&quot;</span> <span class="op">|</span><span class="st"> </span>hdv2003<span class="op">$</span>bricol <span class="op">==</span><span class="st"> &quot;Oui&quot;</span>) <span class="op">~</span><span class="st"> &quot;Femme pratiquant le sport ou le bricolage&quot;</span>,</a>
<a class="sourceLine" id="cb490-5" data-line-number="5">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Autre&quot;</span></a>
<a class="sourceLine" id="cb490-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb490-7" data-line-number="7"></a>
<a class="sourceLine" id="cb490-8" data-line-number="8"><span class="kw">freq</span>(hdv2003<span class="op">$</span>groupe)</a></code></pre></div>
</div>

</div>
<div id="découper-une-variable-numérique" class="section level3">
<h3><span class="header-section-number">9.6.5</span> Découper une variable numérique</h3>
<p><strong>Exercice 4.1</strong></p>
<p>Dans le jeu de données <code>hdv2003</code>, découper la variable <code>heures.tv</code> en classes de manière à obtenir au final le tri à plat suivant :</p>
<pre><code>         n    % val%
[0,1]  684 34.2 34.3
(1,2]  535 26.8 26.8
(2,4]  594 29.7 29.8
(4,6]  138  6.9  6.9
(6,12]  44  2.2  2.2
NA       5  0.2   NA</code></pre>

<div class="solution">
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb492-1" data-line-number="1">hdv2003<span class="op">$</span>tv_cl &lt;-<span class="st"> </span><span class="kw">cut</span>(hdv2003<span class="op">$</span>heures.tv, </a>
<a class="sourceLine" id="cb492-2" data-line-number="2">                     <span class="dt">include.lowest=</span><span class="ot">TRUE</span>,  </a>
<a class="sourceLine" id="cb492-3" data-line-number="3">                     <span class="dt">right=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb492-4" data-line-number="4">                     <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">12</span>))</a>
<a class="sourceLine" id="cb492-5" data-line-number="5"><span class="kw">freq</span>(hdv2003<span class="op">$</span>tv_cl)</a></code></pre></div>
</div>


</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="15">
<li id="fn15"><p>Pour accéder à la page de documentation de fonctions comme <code>%in%</code>, on ne peut pas utiliser <code>?%in%</code>, qui renvoie une erreur. Vous pouvez faire <code>?&quot;%in%&quot;</code>, <code>help(&quot;%in%&quot;)</code> ou, dans ce cas, <code>?match</code>, car les deux fonctions sont documentées sur la même page d’aide.<a href="09-recodages.html#fnref15" class="footnote-back">↩</a></p></li>
</ol>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="08-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="10-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/juba/tidyverse/blob/master/09-recodages.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["introduction_au_tidyverse.pdf", "introduction_au_tidyverse.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
