<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Partie 14 Écrire ses propres fonctions | Introduction à R et au tidyverse</title>
  <meta name="description" content="Une introduction à R et aux extensions du tidyverse" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Partie 14 Écrire ses propres fonctions | Introduction à R et au tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Une introduction à R et aux extensions du tidyverse" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Partie 14 Écrire ses propres fonctions | Introduction à R et au tidyverse" />
  
  <meta name="twitter:description" content="Une introduction à R et aux extensions du tidyverse" />
  

<meta name="author" content="Julien Barnier" />


<meta name="date" content="2021-03-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="13-rmarkdown.html"/>
<link rel="next" href="15-programmer.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Introduction à R et au <em>tidyverse</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>À propos de ce document</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-presentation.html"><a href="01-presentation.html"><i class="fa fa-check"></i><b>1</b> Présentation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-de-r"><i class="fa fa-check"></i><b>1.1</b> À propos de R</a></li>
<li class="chapter" data-level="1.2" data-path="01-presentation.html"><a href="01-presentation.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> À propos de RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="01-presentation.html"><a href="01-presentation.html#à-propos-du-tidyverse"><i class="fa fa-check"></i><b>1.3</b> À propos du <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.4" data-path="01-presentation.html"><a href="01-presentation.html#structure-du-document"><i class="fa fa-check"></i><b>1.4</b> Structure du document</a></li>
<li class="chapter" data-level="1.5" data-path="01-presentation.html"><a href="01-presentation.html#prérequis"><i class="fa fa-check"></i><b>1.5</b> Prérequis</a></li>
</ul></li>
<li class="part"><span><b>I Introduction à R</b></span></li>
<li class="chapter" data-level="2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html"><i class="fa fa-check"></i><b>2</b> Prise en main</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#la-console"><i class="fa fa-check"></i><b>2.1</b> La console</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#linvite-de-commandes"><i class="fa fa-check"></i><b>2.1.1</b> L’invite de commandes</a></li>
<li class="chapter" data-level="2.1.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#précisions-concernant-la-saisie-des-commandes"><i class="fa fa-check"></i><b>2.1.2</b> Précisions concernant la saisie des commandes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets"><i class="fa fa-check"></i><b>2.2</b> Objets</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#objets-simples"><i class="fa fa-check"></i><b>2.2.1</b> Objets simples</a></li>
<li class="chapter" data-level="2.2.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#vecteurs"><i class="fa fa-check"></i><b>2.2.2</b> Vecteurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#fonctions"><i class="fa fa-check"></i><b>2.3</b> Fonctions</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#principe"><i class="fa fa-check"></i><b>2.3.1</b> Principe</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#arguments"><i class="fa fa-check"></i><b>2.3.2</b> Arguments</a></li>
<li class="chapter" data-level="2.3.3" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#aide-sur-une-fonction"><i class="fa fa-check"></i><b>2.3.3</b> Aide sur une fonction</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#regrouper-ses-commandes-dans-des-scripts"><i class="fa fa-check"></i><b>2.4</b> Regrouper ses commandes dans des scripts</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#commentaires"><i class="fa fa-check"></i><b>2.4.1</b> Commentaires</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#packages"><i class="fa fa-check"></i><b>2.5</b> Installer et charger des extensions (<em>packages</em>)</a></li>
<li class="chapter" data-level="2.6" data-path="02-prise_en_main.html"><a href="02-prise_en_main.html#exercices"><i class="fa fa-check"></i><b>2.6</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-premier_travail.html"><a href="03-premier_travail.html"><i class="fa fa-check"></i><b>3</b> Premier travail avec des données</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#jeu-de-données-dexemple"><i class="fa fa-check"></i><b>3.1</b> Jeu de données d’exemple</a></li>
<li class="chapter" data-level="3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#tableau-de-données-data-frame"><i class="fa fa-check"></i><b>3.2</b> Tableau de données (<em>data frame</em>)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#structure-du-tableau"><i class="fa fa-check"></i><b>3.2.1</b> Structure du tableau</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#accéder-aux-variables-dun-tableau"><i class="fa fa-check"></i><b>3.2.2</b> Accéder aux variables d’un tableau</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#créer-une-nouvelle-variable"><i class="fa fa-check"></i><b>3.2.3</b> Créer une nouvelle variable</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyse-univariée"><i class="fa fa-check"></i><b>3.3</b> Analyse univariée</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-quantitative"><i class="fa fa-check"></i><b>3.3.1</b> Analyser une variable quantitative</a></li>
<li class="chapter" data-level="3.3.2" data-path="03-premier_travail.html"><a href="03-premier_travail.html#analyser-une-variable-qualitative"><i class="fa fa-check"></i><b>3.3.2</b> Analyser une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="03-premier_travail.html"><a href="03-premier_travail.html#exercices-1"><i class="fa fa-check"></i><b>3.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-bivarie.html"><a href="04-bivarie.html"><i class="fa fa-check"></i><b>4</b> Analyse bivariée</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-qualitatives"><i class="fa fa-check"></i><b>4.1</b> Croisement de deux variables qualitatives</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="04-bivarie.html"><a href="04-bivarie.html#tableaux-croisés"><i class="fa fa-check"></i><b>4.1.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="4.1.2" data-path="04-bivarie.html"><a href="04-bivarie.html#test-du-χ²"><i class="fa fa-check"></i><b>4.1.2</b> Test du χ²</a></li>
<li class="chapter" data-level="4.1.3" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-1"><i class="fa fa-check"></i><b>4.1.3</b> Représentation graphique</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-dune-variable-quantitative-et-dune-variable-qualitative"><i class="fa fa-check"></i><b>4.2</b> Croisement d’une variable quantitative et d’une variable qualitative</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-2"><i class="fa fa-check"></i><b>4.2.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.2.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calculs-dindicateurs"><i class="fa fa-check"></i><b>4.2.2</b> Calculs d’indicateurs</a></li>
<li class="chapter" data-level="4.2.3" data-path="04-bivarie.html"><a href="04-bivarie.html#tests-statistiques"><i class="fa fa-check"></i><b>4.2.3</b> Tests statistiques</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-bivarie.html"><a href="04-bivarie.html#croisement-de-deux-variables-quantitatives"><i class="fa fa-check"></i><b>4.3</b> Croisement de deux variables quantitatives</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="04-bivarie.html"><a href="04-bivarie.html#représentation-graphique-3"><i class="fa fa-check"></i><b>4.3.1</b> Représentation graphique</a></li>
<li class="chapter" data-level="4.3.2" data-path="04-bivarie.html"><a href="04-bivarie.html#calcul-dindicateurs"><i class="fa fa-check"></i><b>4.3.2</b> Calcul d’indicateurs</a></li>
<li class="chapter" data-level="4.3.3" data-path="04-bivarie.html"><a href="04-bivarie.html#régression-linéaire"><i class="fa fa-check"></i><b>4.3.3</b> Régression linéaire</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04-bivarie.html"><a href="04-bivarie.html#exercices-2"><i class="fa fa-check"></i><b>4.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-organiser.html"><a href="05-organiser.html"><i class="fa fa-check"></i><b>5</b> Organiser ses scripts</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-organiser.html"><a href="05-organiser.html#projets"><i class="fa fa-check"></i><b>5.1</b> Les projets dans RStudio</a></li>
<li class="chapter" data-level="5.2" data-path="05-organiser.html"><a href="05-organiser.html#créer-des-sections-dans-un-script"><i class="fa fa-check"></i><b>5.2</b> Créer des sections dans un script</a></li>
<li class="chapter" data-level="5.3" data-path="05-organiser.html"><a href="05-organiser.html#répartir-son-travail-entre-plusieurs-scripts"><i class="fa fa-check"></i><b>5.3</b> Répartir son travail entre plusieurs scripts</a></li>
<li class="chapter" data-level="5.4" data-path="05-organiser.html"><a href="05-organiser.html#désactiver-la-sauvegarde-de-lespace-de-travail"><i class="fa fa-check"></i><b>5.4</b> Désactiver la sauvegarde de l’espace de travail</a></li>
</ul></li>
<li class="part"><span><b>II Introduction au tidyverse</b></span></li>
<li class="chapter" data-level="6" data-path="06-tidyverse.html"><a href="06-tidyverse.html"><i class="fa fa-check"></i><b>6</b> Le tidyverse</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-tidyverse.html"><a href="06-tidyverse.html#extensions"><i class="fa fa-check"></i><b>6.1</b> Extensions</a></li>
<li class="chapter" data-level="6.2" data-path="06-tidyverse.html"><a href="06-tidyverse.html#installation"><i class="fa fa-check"></i><b>6.2</b> Installation</a></li>
<li class="chapter" data-level="6.3" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tidydata"><i class="fa fa-check"></i><b>6.3</b> tidy data</a></li>
<li class="chapter" data-level="6.4" data-path="06-tidyverse.html"><a href="06-tidyverse.html#tibbles"><i class="fa fa-check"></i><b>6.4</b> tibbles</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-import.html"><a href="07-import.html"><i class="fa fa-check"></i><b>7</b> Importer et exporter des données</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-textes"><i class="fa fa-check"></i><b>7.1</b> Import de fichiers textes</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07-import.html"><a href="07-import.html#interface-interactive-dimport-de-fichiers"><i class="fa fa-check"></i><b>7.1.1</b> Interface interactive d’import de fichiers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-import.html"><a href="07-import.html#import-depuis-un-fichier-excel"><i class="fa fa-check"></i><b>7.2</b> Import depuis un fichier Excel</a></li>
<li class="chapter" data-level="7.3" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-sas-spss-et-stata"><i class="fa fa-check"></i><b>7.3</b> Import de fichiers SAS, SPSS et Stata</a></li>
<li class="chapter" data-level="7.4" data-path="07-import.html"><a href="07-import.html#import-de-fichiers-dbase"><i class="fa fa-check"></i><b>7.4</b> Import de fichiers dBase</a></li>
<li class="chapter" data-level="7.5" data-path="07-import.html"><a href="07-import.html#connexion-à-des-bases-de-données"><i class="fa fa-check"></i><b>7.5</b> Connexion à des bases de données</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="07-import.html"><a href="07-import.html#interfaçage-via-lextension-dbi"><i class="fa fa-check"></i><b>7.5.1</b> Interfaçage via l’extension <code>DBI</code></a></li>
<li class="chapter" data-level="7.5.2" data-path="07-import.html"><a href="07-import.html#utilisation-de-dplyr-et-dbplyr"><i class="fa fa-check"></i><b>7.5.2</b> Utilisation de <code>dplyr</code> et <code>dbplyr</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="07-import.html"><a href="07-import.html#ressources"><i class="fa fa-check"></i><b>7.5.3</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="07-import.html"><a href="07-import.html#export-de-données"><i class="fa fa-check"></i><b>7.6</b> Export de données</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="07-import.html"><a href="07-import.html#export-de-tableaux-de-données"><i class="fa fa-check"></i><b>7.6.1</b> Export de tableaux de données</a></li>
<li class="chapter" data-level="7.6.2" data-path="07-import.html"><a href="07-import.html#sauvegarder-des-objets"><i class="fa fa-check"></i><b>7.6.2</b> Sauvegarder des objets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-ggplot2.html"><a href="08-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Visualiser avec <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#préparation"><i class="fa fa-check"></i><b>8.1</b> Préparation</a></li>
<li class="chapter" data-level="8.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#initialisation"><i class="fa fa-check"></i><b>8.2</b> Initialisation</a></li>
<li class="chapter" data-level="8.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-geom"><i class="fa fa-check"></i><b>8.3</b> Exemples de <code>geom</code></a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_boxplot"><i class="fa fa-check"></i><b>8.3.1</b> <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_violin"><i class="fa fa-check"></i><b>8.3.2</b> <code>geom_violin</code></a></li>
<li class="chapter" data-level="8.3.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar"><i class="fa fa-check"></i><b>8.3.3</b> <code>geom_bar</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_text"><i class="fa fa-check"></i><b>8.3.4</b> <code>geom_text</code></a></li>
<li class="chapter" data-level="8.3.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_label"><i class="fa fa-check"></i><b>8.3.5</b> <code>geom_label</code></a></li>
<li class="chapter" data-level="8.3.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_density"><i class="fa fa-check"></i><b>8.3.6</b> <code>geom_density</code></a></li>
<li class="chapter" data-level="8.3.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_line"><i class="fa fa-check"></i><b>8.3.7</b> <code>geom_line</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="08-ggplot2.html"><a href="08-ggplot2.html#mappages"><i class="fa fa-check"></i><b>8.4</b> Mappages</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exemples-de-mappages"><i class="fa fa-check"></i><b>8.4.1</b> Exemples de mappages</a></li>
<li class="chapter" data-level="8.4.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#aes-or-not-aes"><i class="fa fa-check"></i><b>8.4.2</b> <code>aes()</code> or not <code>aes()</code> ?</a></li>
<li class="chapter" data-level="8.4.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#geom_bar-et-position"><i class="fa fa-check"></i><b>8.4.3</b> <code>geom_bar</code> et <code>position</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="08-ggplot2.html"><a href="08-ggplot2.html#représentation-de-plusieurs-geom"><i class="fa fa-check"></i><b>8.5</b> Représentation de plusieurs <code>geom</code></a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#plusieurs-sources-de-données"><i class="fa fa-check"></i><b>8.5.1</b> Plusieurs sources de données</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="08-ggplot2.html"><a href="08-ggplot2.html#faceting"><i class="fa fa-check"></i><b>8.6</b> Faceting</a></li>
<li class="chapter" data-level="8.7" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scales"><i class="fa fa-check"></i><b>8.7</b> Scales</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_size"><i class="fa fa-check"></i><b>8.7.1</b> <code>scale_size</code></a></li>
<li class="chapter" data-level="8.7.2" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scale_x-scale_y"><i class="fa fa-check"></i><b>8.7.2</b> <code>scale_x</code>, <code>scale_y</code></a></li>
<li class="chapter" data-level="8.7.3" data-path="08-ggplot2.html"><a href="08-ggplot2.html#scalecolor"><i class="fa fa-check"></i><b>8.7.3</b> <code>scale_color</code>, <code>scale_fill</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="08-ggplot2.html"><a href="08-ggplot2.html#thèmes"><i class="fa fa-check"></i><b>8.8</b> Thèmes</a></li>
<li class="chapter" data-level="8.9" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ladd-in-esquisse"><i class="fa fa-check"></i><b>8.9</b> L’add-in <code>esquisse</code></a></li>
<li class="chapter" data-level="8.10" data-path="08-ggplot2.html"><a href="08-ggplot2.html#ressources-1"><i class="fa fa-check"></i><b>8.10</b> Ressources</a></li>
<li class="chapter" data-level="8.11" data-path="08-ggplot2.html"><a href="08-ggplot2.html#exercices-3"><i class="fa fa-check"></i><b>8.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-recodages.html"><a href="09-recodages.html"><i class="fa fa-check"></i><b>9</b> Recoder des variables</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-recodages.html"><a href="09-recodages.html#rappel-sur-les-variables-et-les-vecteurs"><i class="fa fa-check"></i><b>9.1</b> Rappel sur les variables et les vecteurs</a></li>
<li class="chapter" data-level="9.2" data-path="09-recodages.html"><a href="09-recodages.html#tests"><i class="fa fa-check"></i><b>9.2</b> Tests et comparaison</a></li>
<li class="chapter" data-level="9.3" data-path="09-recodages.html"><a href="09-recodages.html#recoder-une-variable-qualitative"><i class="fa fa-check"></i><b>9.3</b> Recoder une variable qualitative</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="09-recodages.html"><a href="09-recodages.html#facteurs-et-forcats"><i class="fa fa-check"></i><b>9.3.1</b> Facteurs et <code>forcats</code></a></li>
<li class="chapter" data-level="9.3.2" data-path="09-recodages.html"><a href="09-recodages.html#modifier-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.2</b> Modifier les modalités d’une variable qualitative</a></li>
<li class="chapter" data-level="9.3.3" data-path="09-recodages.html"><a href="09-recodages.html#ordonner-les-modalités-dune-variable-qualitative"><i class="fa fa-check"></i><b>9.3.3</b> Ordonner les modalités d’une variable qualitative</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables"><i class="fa fa-check"></i><b>9.4</b> Combiner plusieurs variables</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="09-recodages.html"><a href="09-recodages.html#if_else"><i class="fa fa-check"></i><b>9.4.1</b> <code>if_else</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="09-recodages.html"><a href="09-recodages.html#case_when"><i class="fa fa-check"></i><b>9.4.2</b> <code>case_when</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique-en-classes"><i class="fa fa-check"></i><b>9.5</b> Découper une variable numérique en classes</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="09-recodages.html"><a href="09-recodages.html#interface-graphique"><i class="fa fa-check"></i><b>9.5.1</b> Interface graphique</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="09-recodages.html"><a href="09-recodages.html#exercices-4"><i class="fa fa-check"></i><b>9.6</b> Exercices</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="09-recodages.html"><a href="09-recodages.html#préparation-1"><i class="fa fa-check"></i><b>9.6.1</b> Préparation</a></li>
<li class="chapter" data-level="9.6.2" data-path="09-recodages.html"><a href="09-recodages.html#vecteurs-et-tests"><i class="fa fa-check"></i><b>9.6.2</b> Vecteurs et tests</a></li>
<li class="chapter" data-level="9.6.3" data-path="09-recodages.html"><a href="09-recodages.html#recodages-de-variable-qualitative"><i class="fa fa-check"></i><b>9.6.3</b> Recodages de variable qualitative</a></li>
<li class="chapter" data-level="9.6.4" data-path="09-recodages.html"><a href="09-recodages.html#combiner-plusieurs-variables-1"><i class="fa fa-check"></i><b>9.6.4</b> Combiner plusieurs variables</a></li>
<li class="chapter" data-level="9.6.5" data-path="09-recodages.html"><a href="09-recodages.html#découper-une-variable-numérique"><i class="fa fa-check"></i><b>9.6.5</b> Découper une variable numérique</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-dplyr.html"><a href="10-dplyr.html"><i class="fa fa-check"></i><b>10</b> Manipuler les données avec <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-dplyr.html"><a href="10-dplyr.html#préparation-2"><i class="fa fa-check"></i><b>10.1</b> Préparation</a></li>
<li class="chapter" data-level="10.2" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-dplyr"><i class="fa fa-check"></i><b>10.2</b> Les verbes de <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice"><i class="fa fa-check"></i><b>10.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="10-dplyr.html"><a href="10-dplyr.html#filter"><i class="fa fa-check"></i><b>10.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="10.2.3" data-path="10-dplyr.html"><a href="10-dplyr.html#select-et-rename"><i class="fa fa-check"></i><b>10.2.3</b> <code>select</code> et <code>rename</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="10-dplyr.html"><a href="10-dplyr.html#arrange"><i class="fa fa-check"></i><b>10.2.4</b> <code>arrange</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="10-dplyr.html"><a href="10-dplyr.html#mutate"><i class="fa fa-check"></i><b>10.2.5</b> <code>mutate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-dplyr.html"><a href="10-dplyr.html#pipe"><i class="fa fa-check"></i><b>10.3</b> Enchaîner les opérations avec le <em>pipe</em></a></li>
<li class="chapter" data-level="10.4" data-path="10-dplyr.html"><a href="10-dplyr.html#opérations-groupées"><i class="fa fa-check"></i><b>10.4</b> Opérations groupées</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by"><i class="fa fa-check"></i><b>10.4.1</b> <code>group_by</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="10-dplyr.html"><a href="10-dplyr.html#summarise-et-count"><i class="fa fa-check"></i><b>10.4.2</b> <code>summarise</code> et <code>count</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="10-dplyr.html"><a href="10-dplyr.html#grouper-selon-plusieurs-variables"><i class="fa fa-check"></i><b>10.4.3</b> Grouper selon plusieurs variables</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-dplyr.html"><a href="10-dplyr.html#autres-fonctions-utiles"><i class="fa fa-check"></i><b>10.5</b> Autres fonctions utiles</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_sample"><i class="fa fa-check"></i><b>10.5.1</b> <code>slice_sample</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="10-dplyr.html"><a href="10-dplyr.html#slice_head-slice_tail-slice_min-slice_max"><i class="fa fa-check"></i><b>10.5.2</b> <code>slice_head</code>, <code>slice_tail</code>, <code>slice_min</code>, <code>slice_max</code></a></li>
<li class="chapter" data-level="10.5.3" data-path="10-dplyr.html"><a href="10-dplyr.html#lead-et-lag"><i class="fa fa-check"></i><b>10.5.3</b> <code>lead</code> et <code>lag</code></a></li>
<li class="chapter" data-level="10.5.4" data-path="10-dplyr.html"><a href="10-dplyr.html#distinct-et-n_distinct"><i class="fa fa-check"></i><b>10.5.4</b> <code>distinct</code> et <code>n_distinct</code></a></li>
<li class="chapter" data-level="10.5.5" data-path="10-dplyr.html"><a href="10-dplyr.html#relocate"><i class="fa fa-check"></i><b>10.5.5</b> <code>relocate</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-dplyr.html"><a href="10-dplyr.html#tables-multiples"><i class="fa fa-check"></i><b>10.6</b> Tables multiples</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="10-dplyr.html"><a href="10-dplyr.html#concaténation-bind_rows-et-bind_cols"><i class="fa fa-check"></i><b>10.6.1</b> Concaténation : <code>bind_rows</code> et <code>bind_cols</code></a></li>
<li class="chapter" data-level="10.6.2" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures"><i class="fa fa-check"></i><b>10.6.2</b> Jointures</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-dplyr.html"><a href="10-dplyr.html#types-de-jointures"><i class="fa fa-check"></i><b>10.6.3</b> Types de jointures</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-dplyr.html"><a href="10-dplyr.html#ressources-2"><i class="fa fa-check"></i><b>10.7</b> Ressources</a></li>
<li class="chapter" data-level="10.8" data-path="10-dplyr.html"><a href="10-dplyr.html#exercices-5"><i class="fa fa-check"></i><b>10.8</b> Exercices</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="10-dplyr.html"><a href="10-dplyr.html#les-verbes-de-base-de-dplyr"><i class="fa fa-check"></i><b>10.8.1</b> Les verbes de base de <code>dplyr</code></a></li>
<li class="chapter" data-level="10.8.2" data-path="10-dplyr.html"><a href="10-dplyr.html#enchaîner-des-opérations"><i class="fa fa-check"></i><b>10.8.2</b> Enchaîner des opérations</a></li>
<li class="chapter" data-level="10.8.3" data-path="10-dplyr.html"><a href="10-dplyr.html#group_by-et-summarise"><i class="fa fa-check"></i><b>10.8.3</b> <code>group_by</code> et <code>summarise</code></a></li>
<li class="chapter" data-level="10.8.4" data-path="10-dplyr.html"><a href="10-dplyr.html#jointures-1"><i class="fa fa-check"></i><b>10.8.4</b> Jointures</a></li>
<li class="chapter" data-level="10.8.5" data-path="10-dplyr.html"><a href="10-dplyr.html#bonus"><i class="fa fa-check"></i><b>10.8.5</b> Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-stringr.html"><a href="11-stringr.html"><i class="fa fa-check"></i><b>11</b> Manipuler du texte avec <code>stringr</code></a>
<ul>
<li class="chapter" data-level="11.1" data-path="11-stringr.html"><a href="11-stringr.html#expressions-régulières"><i class="fa fa-check"></i><b>11.1</b> Expressions régulières</a></li>
<li class="chapter" data-level="11.2" data-path="11-stringr.html"><a href="11-stringr.html#concaténer-des-chaînes"><i class="fa fa-check"></i><b>11.2</b> Concaténer des chaînes</a></li>
<li class="chapter" data-level="11.3" data-path="11-stringr.html"><a href="11-stringr.html#convertir-en-majuscules-minuscules"><i class="fa fa-check"></i><b>11.3</b> Convertir en majuscules / minuscules</a></li>
<li class="chapter" data-level="11.4" data-path="11-stringr.html"><a href="11-stringr.html#découper-des-chaînes"><i class="fa fa-check"></i><b>11.4</b> Découper des chaînes</a></li>
<li class="chapter" data-level="11.5" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-sous-chaînes-par-position"><i class="fa fa-check"></i><b>11.5</b> Extraire des sous-chaînes par position</a></li>
<li class="chapter" data-level="11.6" data-path="11-stringr.html"><a href="11-stringr.html#détecter-des-motifs"><i class="fa fa-check"></i><b>11.6</b> Détecter des motifs</a></li>
<li class="chapter" data-level="11.7" data-path="11-stringr.html"><a href="11-stringr.html#extraire-des-motifs"><i class="fa fa-check"></i><b>11.7</b> Extraire des motifs</a></li>
<li class="chapter" data-level="11.8" data-path="11-stringr.html"><a href="11-stringr.html#remplacer-des-motifs"><i class="fa fa-check"></i><b>11.8</b> Remplacer des motifs</a></li>
<li class="chapter" data-level="11.9" data-path="11-stringr.html"><a href="11-stringr.html#modificateurs"><i class="fa fa-check"></i><b>11.9</b> Modificateurs de motifs</a></li>
<li class="chapter" data-level="11.10" data-path="11-stringr.html"><a href="11-stringr.html#ressources-3"><i class="fa fa-check"></i><b>11.10</b> Ressources</a></li>
<li class="chapter" data-level="11.11" data-path="11-stringr.html"><a href="11-stringr.html#exercices-6"><i class="fa fa-check"></i><b>11.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-tidyr.html"><a href="12-tidyr.html"><i class="fa fa-check"></i><b>12</b> Mettre en ordre avec <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="12-tidyr.html"><a href="12-tidyr.html#tidy-data"><i class="fa fa-check"></i><b>12.1</b> Tidy data</a></li>
<li class="chapter" data-level="12.2" data-path="12-tidyr.html"><a href="12-tidyr.html#trois-règles-pour-des-données-bien-rangées"><i class="fa fa-check"></i><b>12.2</b> Trois règles pour des données bien rangées</a></li>
<li class="chapter" data-level="12.3" data-path="12-tidyr.html"><a href="12-tidyr.html#les-verbes-de-tidyr"><i class="fa fa-check"></i><b>12.3</b> Les verbes de <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_longer-transformer-des-colonnes-en-lignes"><i class="fa fa-check"></i><b>12.3.1</b> <code>pivot_longer</code> : transformer des colonnes en lignes</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-tidyr.html"><a href="12-tidyr.html#pivot_wider-transformer-des-lignes-en-colonnes"><i class="fa fa-check"></i><b>12.3.2</b> <code>pivot_wider</code> : transformer des lignes en colonnes</a></li>
<li class="chapter" data-level="12.3.3" data-path="12-tidyr.html"><a href="12-tidyr.html#separate"><i class="fa fa-check"></i><b>12.3.3</b> <code>separate</code> : séparer une colonne en plusieurs colonnes</a></li>
<li class="chapter" data-level="12.3.4" data-path="12-tidyr.html"><a href="12-tidyr.html#separate-rows"><i class="fa fa-check"></i><b>12.3.4</b> <code>separate_rows</code> : séparer une colonne en plusieurs lignes</a></li>
<li class="chapter" data-level="12.3.5" data-path="12-tidyr.html"><a href="12-tidyr.html#unite-regrouper-plusieurs-colonnes-en-une-seule"><i class="fa fa-check"></i><b>12.3.5</b> <code>unite</code> : regrouper plusieurs colonnes en une seule</a></li>
<li class="chapter" data-level="12.3.6" data-path="12-tidyr.html"><a href="12-tidyr.html#extract"><i class="fa fa-check"></i><b>12.3.6</b> <code>extract</code> : créer de nouvelles colonnes à partir d’une colonne de texte</a></li>
<li class="chapter" data-level="12.3.7" data-path="12-tidyr.html"><a href="12-tidyr.html#complete-compléter-des-combinaisons-de-variables-manquantes"><i class="fa fa-check"></i><b>12.3.7</b> <code>complete</code> : compléter des combinaisons de variables manquantes</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="12-tidyr.html"><a href="12-tidyr.html#ressources-4"><i class="fa fa-check"></i><b>12.4</b> Ressources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Diffuser et publier avec <code>rmarkdown</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#créer-un-nouveau-document"><i class="fa fa-check"></i><b>13.1</b> Créer un nouveau document</a></li>
<li class="chapter" data-level="13.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#éléments-dun-document-r-markdown"><i class="fa fa-check"></i><b>13.2</b> Éléments d’un document R Markdown</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#en-tête-préambule"><i class="fa fa-check"></i><b>13.2.1</b> En-tête (préambule)</a></li>
<li class="chapter" data-level="13.2.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#texte-du-document"><i class="fa fa-check"></i><b>13.2.2</b> Texte du document</a></li>
<li class="chapter" data-level="13.2.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#blocs-de-code-r"><i class="fa fa-check"></i><b>13.2.3</b> Blocs de code R</a></li>
<li class="chapter" data-level="13.2.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#compiler-un-document-knit"><i class="fa fa-check"></i><b>13.2.4</b> Compiler un document (<em>Knit</em>)</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#personnaliser-le-document-généré"><i class="fa fa-check"></i><b>13.3</b> Personnaliser le document généré</a></li>
<li class="chapter" data-level="13.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-des-blocs-de-code-r"><i class="fa fa-check"></i><b>13.4</b> Options des blocs de code R</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#nom-du-bloc"><i class="fa fa-check"></i><b>13.4.1</b> Nom du bloc</a></li>
<li class="chapter" data-level="13.4.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options"><i class="fa fa-check"></i><b>13.4.2</b> Options</a></li>
<li class="chapter" data-level="13.4.3" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#modifier-les-options"><i class="fa fa-check"></i><b>13.4.3</b> Modifier les options</a></li>
<li class="chapter" data-level="13.4.4" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#options-globales"><i class="fa fa-check"></i><b>13.4.4</b> Options globales</a></li>
<li class="chapter" data-level="13.4.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#mise-en-cache-des-résultats"><i class="fa fa-check"></i><b>13.4.5</b> Mise en cache des résultats</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#rendu-des-tableaux"><i class="fa fa-check"></i><b>13.5</b> Rendu des tableaux</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-croisés-1"><i class="fa fa-check"></i><b>13.5.1</b> Tableaux croisés</a></li>
<li class="chapter" data-level="13.5.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#tableaux-de-données-et-tris-à-plat"><i class="fa fa-check"></i><b>13.5.2</b> Tableaux de données et tris à plat</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates"><i class="fa fa-check"></i><b>13.6</b> Modèles de documents</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#slides"><i class="fa fa-check"></i><b>13.6.1</b> Slides</a></li>
<li class="chapter" data-level="13.6.2" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#templates-1"><i class="fa fa-check"></i><b>13.6.2</b> Templates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="13-rmarkdown.html"><a href="13-rmarkdown.html#ressources-5"><i class="fa fa-check"></i><b>13.7</b> Ressources</a></li>
</ul></li>
<li class="part"><span><b>III Aller plus loin</b></span></li>
<li class="chapter" data-level="14" data-path="14-fonctions.html"><a href="14-fonctions.html"><i class="fa fa-check"></i><b>14</b> Écrire ses propres fonctions</a>
<ul>
<li class="chapter" data-level="14.1" data-path="14-fonctions.html"><a href="14-fonctions.html#structure-dune-fonction"><i class="fa fa-check"></i><b>14.1</b> Structure d’une fonction</a></li>
<li class="chapter" data-level="14.2" data-path="14-fonctions.html"><a href="14-fonctions.html#exemples-de-fonctions"><i class="fa fa-check"></i><b>14.2</b> Exemples de fonctions</a></li>
<li class="chapter" data-level="14.3" data-path="14-fonctions.html"><a href="14-fonctions.html#utilité-des-fonctions"><i class="fa fa-check"></i><b>14.3</b> Utilité des fonctions</a></li>
<li class="chapter" data-level="14.4" data-path="14-fonctions.html"><a href="14-fonctions.html#arguments-dune-fonction"><i class="fa fa-check"></i><b>14.4</b> Arguments d’une fonction</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="14-fonctions.html"><a href="14-fonctions.html#définition-des-arguments"><i class="fa fa-check"></i><b>14.4.1</b> Définition des arguments</a></li>
<li class="chapter" data-level="14.4.2" data-path="14-fonctions.html"><a href="14-fonctions.html#valeurs-par-défaut"><i class="fa fa-check"></i><b>14.4.2</b> Valeurs par défaut</a></li>
<li class="chapter" data-level="14.4.3" data-path="14-fonctions.html"><a href="14-fonctions.html#largument-..."><i class="fa fa-check"></i><b>14.4.3</b> L’argument <code>...</code></a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="14-fonctions.html"><a href="14-fonctions.html#résultat-dune-fonction"><i class="fa fa-check"></i><b>14.5</b> Résultat d’une fonction</a></li>
<li class="chapter" data-level="14.6" data-path="14-fonctions.html"><a href="14-fonctions.html#afficher-des-messages-depuis-une-fonction"><i class="fa fa-check"></i><b>14.6</b> Afficher des messages depuis une fonction</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="14-fonctions.html"><a href="14-fonctions.html#print-et-message"><i class="fa fa-check"></i><b>14.6.1</b> <code>print</code> et <code>message</code></a></li>
<li class="chapter" data-level="14.6.2" data-path="14-fonctions.html"><a href="14-fonctions.html#warning-et-error"><i class="fa fa-check"></i><b>14.6.2</b> <code>warning</code> et <code>error</code></a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="14-fonctions.html"><a href="14-fonctions.html#portée-des-variables"><i class="fa fa-check"></i><b>14.7</b> Portée des variables</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="14-fonctions.html"><a href="14-fonctions.html#une-fonction-peut-accéder-à-un-objet-extérieur"><i class="fa fa-check"></i><b>14.7.1</b> Une fonction peut accéder à un objet extérieur</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="14-fonctions.html"><a href="14-fonctions.html#les-fonctions-sont-des-objets-comme-les-autres"><i class="fa fa-check"></i><b>14.8</b> Les fonctions sont des objets comme les autres</a></li>
<li class="chapter" data-level="14.9" data-path="14-fonctions.html"><a href="14-fonctions.html#fonctions-anonymes"><i class="fa fa-check"></i><b>14.9</b> Fonctions anonymes</a></li>
<li class="chapter" data-level="14.10" data-path="14-fonctions.html"><a href="14-fonctions.html#ressources-6"><i class="fa fa-check"></i><b>14.10</b> Ressources</a></li>
<li class="chapter" data-level="14.11" data-path="14-fonctions.html"><a href="14-fonctions.html#exercices-7"><i class="fa fa-check"></i><b>14.11</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-programmer.html"><a href="15-programmer.html"><i class="fa fa-check"></i><b>15</b> Programmer avec R</a>
<ul>
<li class="chapter" data-level="15.0.1" data-path="15-programmer.html"><a href="15-programmer.html#listes"><i class="fa fa-check"></i><b>15.0.1</b> Liste</a></li>
<li class="chapter" data-level="15.1" data-path="16-dplyr-avance.html"><a href="16-dplyr-avance.html"><i class="fa fa-check"></i><b>15.1</b> <code>dplyr</code> avancé</a></li>
<li class="chapter" data-level="15.2" data-path="17-purrr.html"><a href="17-purrr.html"><i class="fa fa-check"></i><b>15.2</b> Itérer avec <code>purrr</code></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="18-targets.html"><a href="18-targets.html"><i class="fa fa-check"></i><b>16</b> Organiser ses traitements avec <code>targets</code></a>
<ul>
<li class="chapter" data-level="16.1" data-path="18-targets.html"><a href="18-targets.html#ressources-7"><i class="fa fa-check"></i><b>16.1</b> Ressources</a></li>
</ul></li>
<li class="appendix"><span><b>Annexes</b></span></li>
<li class="chapter" data-level="A" data-path="20-ressources.html"><a href="20-ressources.html"><i class="fa fa-check"></i><b>A</b> Ressources</a>
<ul>
<li class="chapter" data-level="A.1" data-path="20-ressources.html"><a href="20-ressources.html#aide"><i class="fa fa-check"></i><b>A.1</b> Aide</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="20-ressources.html"><a href="20-ressources.html#aide-de-r-et-rstudio"><i class="fa fa-check"></i><b>A.1.1</b> Aide de R et RStudio</a></li>
<li class="chapter" data-level="A.1.2" data-path="20-ressources.html"><a href="20-ressources.html#aide-en-ligne"><i class="fa fa-check"></i><b>A.1.2</b> Aide en ligne</a></li>
<li class="chapter" data-level="A.1.3" data-path="20-ressources.html"><a href="20-ressources.html#antisèches"><i class="fa fa-check"></i><b>A.1.3</b> Antisèches</a></li>
<li class="chapter" data-level="A.1.4" data-path="20-ressources.html"><a href="20-ressources.html#où-poser-des-questions"><i class="fa fa-check"></i><b>A.1.4</b> Où poser des questions</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="20-ressources.html"><a href="20-ressources.html#ouvrages-blogs-moocs"><i class="fa fa-check"></i><b>A.2</b> Ouvrages, blogs, MOOCs…</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="20-ressources.html"><a href="20-ressources.html#francophones"><i class="fa fa-check"></i><b>A.2.1</b> Francophones</a></li>
<li class="chapter" data-level="A.2.2" data-path="20-ressources.html"><a href="20-ressources.html#anglophones"><i class="fa fa-check"></i><b>A.2.2</b> Anglophones</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="20-ressources.html"><a href="20-ressources.html#extensions-1"><i class="fa fa-check"></i><b>A.3</b> Extensions</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="20-ressources.html"><a href="20-ressources.html#où-trouver-des-extensions-intéressantes"><i class="fa fa-check"></i><b>A.3.1</b> Où trouver des extensions intéressantes ?</a></li>
<li class="chapter" data-level="A.3.2" data-path="20-ressources.html"><a href="20-ressources.html#lextension-questionr"><i class="fa fa-check"></i><b>A.3.2</b> L’extension <code>questionr</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction à R et au tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="écrire-ses-propres-fonctions" class="section level1" number="14">
<h1><span class="header-section-number">Partie 14</span> Écrire ses propres fonctions</h1>
<div id="structure-dune-fonction" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Structure d’une fonction</h2>
<p>Nous avons vu lors de l’introduction à R que le langage repose sur deux grands concept : les <em>objets</em> et les <em>fonctions</em>. Pour reprendre une citation de John Chambers, en R, tout ce qui existe est un objet, et tout ce qui se passe est une fonction.</p>
<p>Le principe d’une fonction est de prendre en entrée un ou plusieurs arguments (ou paramètres), d’effectuer un certain nombre d’actions et de renvoyer un résultat :</p>
<p><img src="figures/schema_fonction.svg" /></p>
<p>Nous avons déjà rencontré et utilisé un grand nombre de fonctions, certaines assez simples (<code>mean</code>, <code>max</code>…) et d’autres beaucoup plus complexes (<code>ggplot</code>, <code>group_by</code>…). R, comme tout langage de programmation, offre la possibilité de créer et d’utiliser ses propres fonctions.</p>
<p>Voici un exemple de fonction très simple, quoi que d’une utilité douteuse, puisqu’elle se contente d’ajouter 2 à un nombre :</p>
<div class="sourceCode" id="cb858"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb858-1"><a href="14-fonctions.html#cb858-1" aria-hidden="true" tabindex="-1"></a>ajoute2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb858-2"><a href="14-fonctions.html#cb858-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb858-3"><a href="14-fonctions.html#cb858-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb858-4"><a href="14-fonctions.html#cb858-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>En exécutant ce code, on crée une nouvelle fonction nommée <code>ajoute2</code>, que l’on peut directement utiliser dans un script ou dans la console :</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb859-1"><a href="14-fonctions.html#cb859-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ajoute2</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<p>Essayons de décomposer pas à pas la structure de cette première fonction.</p>
<p>D’abord, une fonction est créée en utilisant l’instruction <code>function</code>. Celle-ci est suivie d’une paire de parenthèses et d’une paire d’accolades.</p>
<div class="sourceCode" id="cb861"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb861-1"><a href="14-fonctions.html#cb861-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>() {</span>
<span id="cb861-2"><a href="14-fonctions.html#cb861-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb861-3"><a href="14-fonctions.html#cb861-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Dans les parenthèses, on indique les arguments de la fonction, ceux qui devront être indiqués quand nous l’appellerons. Ici notre fonction ne prend qu’un seul argument, que nous avons décidé de nommer <code>x</code> :</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="14-fonctions.html#cb862-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(x) {</span>
<span id="cb862-2"><a href="14-fonctions.html#cb862-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb862-3"><a href="14-fonctions.html#cb862-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Les accolades comprennent une série d’instructions R qui constituent le <em>corps</em> de notre fonction. C’est ce code qui sera exécuté quand notre fonction est appelée. On peut utiliser dans le corps de la fonction les arguments qui lui sont passés. Ici, la première ligne utilise la valeur de l’argument <code>x</code>, lui ajoute 2 et stocke le résultat dans un nouvel objet <code>res</code> :</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="14-fonctions.html#cb863-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(x) {</span>
<span id="cb863-2"><a href="14-fonctions.html#cb863-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb863-3"><a href="14-fonctions.html#cb863-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Pour qu’elle soit utile, notre fonction doit renvoyer le résultat qu’elle a calculé précédemment. Ceci se fait via l’instruction <code>return</code> à qui on passe la valeur à retourner à l’utilisateur :</p>
<div class="sourceCode" id="cb864"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb864-1"><a href="14-fonctions.html#cb864-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(x) {</span>
<span id="cb864-2"><a href="14-fonctions.html#cb864-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb864-3"><a href="14-fonctions.html#cb864-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb864-4"><a href="14-fonctions.html#cb864-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Enfin, pour que notre fonction puisse être appelée et utilisée, nous devons lui donner un nom, ou plus précisément la stocker dans un objet :</p>
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb865-1"><a href="14-fonctions.html#cb865-1" aria-hidden="true" tabindex="-1"></a>ajoute2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb865-2"><a href="14-fonctions.html#cb865-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb865-3"><a href="14-fonctions.html#cb865-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb865-4"><a href="14-fonctions.html#cb865-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="rmdnote">
<p>
Les fonctions étant des objets comme les autres, elles suivent les mêmes contraintes pour leur nom : on a donc droit aux lettres, chiffres, point et tiret bas.
</p>
</div>
<p>Avec le code précédent, on a donc créé un nouvel objet <code>ajoute2</code> de type <code>function</code>. Cette nouvelle fonction prend un seul argument <code>x</code>, calcule la valeur <code>x + 2</code> et retourne ce résultat. On l’utilise en tapant son nom suivi de la valeur de ses arguments entre parenthèses, par exemple :</p>
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="14-fonctions.html#cb866-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ajoute2</span>(<span class="dv">41</span>)</span></code></pre></div>
<pre><code>[1] 43</code></pre>
<p>Ou encore :</p>
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="14-fonctions.html#cb868-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb868-2"><a href="14-fonctions.html#cb868-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">ajoute2</span>(y)</span>
<span id="cb868-3"><a href="14-fonctions.html#cb868-3" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>[1] 7</code></pre>
<p>À noter que notre fonction marche aussi si on lui passe un vecteur en argument :</p>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="14-fonctions.html#cb870-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb870-2"><a href="14-fonctions.html#cb870-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ajoute2</span>(vec)</span></code></pre></div>
<pre><code>[1] 3 4 5 6 7</code></pre>
<p>Si on récapitule, une fonction se définit donc de la manière suivante :</p>
<p><img src="figures/structure_fonction.svg" /></p>
<p>À noter qu’une fonction peut évidemment prendre plusieurs arguments. Dans ce cas on liste les arguments dans les parenthèses en les séparant par des virgules :</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="14-fonctions.html#cb872-1" aria-hidden="true" tabindex="-1"></a>somme <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb872-2"><a href="14-fonctions.html#cb872-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb872-3"><a href="14-fonctions.html#cb872-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb873-1"><a href="14-fonctions.html#cb873-1" aria-hidden="true" tabindex="-1"></a><span class="fu">somme</span>(<span class="dv">3</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>[1] 8</code></pre>
</div>
<div id="exemples-de-fonctions" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Exemples de fonctions</h2>
<p>Prenons un autre exemple : par défaut on sait que la fonction <code>table</code> retourne le tri à plat en effectifs d’une variable qualitative. On pourrait dès lors créer notre propre fonction qui renvoie plutôt le tri à plat en pourcentages. Voici une manière de le faire :</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb875-1"><a href="14-fonctions.html#cb875-1" aria-hidden="true" tabindex="-1"></a>prop_tab <span class="ot">&lt;-</span> <span class="cf">function</span>(v) {</span>
<span id="cb875-2"><a href="14-fonctions.html#cb875-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(v)</span>
<span id="cb875-3"><a href="14-fonctions.html#cb875-3" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> tri <span class="sc">/</span> <span class="fu">sum</span>(tri) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb875-4"><a href="14-fonctions.html#cb875-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tri)</span>
<span id="cb875-5"><a href="14-fonctions.html#cb875-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Notre fonction prend en entrée un argument nomme <code>v</code>, en l’occurrence un vecteur représentant une variable qualitative. On commence par faire le tri à plat de ce vecteur avec <code>table</code>, puis on calcule la répartition en pourcentages en divisant ce tri à plat par l’effectif total (<code>sum(tri)</code>) et en multipliant par 100.</p>
<p>Testons sur une variable de <code>hdv2003</code> :</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="14-fonctions.html#cb876-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb876-2"><a href="14-fonctions.html#cb876-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(hdv2003)</span>
<span id="cb876-3"><a href="14-fonctions.html#cb876-3" aria-hidden="true" tabindex="-1"></a><span class="fu">prop_tab</span>(hdv2003<span class="sc">$</span>qualif)</span></code></pre></div>
<pre><code>v
      Ouvrier specialise         Ouvrier qualifie 
               12.280702                17.664852 
              Technicien Profession intermediaire 
                5.202662                 9.679371 
                   Cadre                  Employe 
               15.728978                35.934664 
                   Autre 
                3.508772 </code></pre>
<p>Ça fonctionne, mais l’affichage d’un grand nombre de chiffres après la virgule peut nuire à la lisibilité du résultat. On pourrait donc améliorer notre fonction en arrondissant le résultat avec la fonction <code>round()</code> avant de le retourner :</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="14-fonctions.html#cb878-1" aria-hidden="true" tabindex="-1"></a>prop_tab <span class="ot">&lt;-</span> <span class="cf">function</span>(v) {</span>
<span id="cb878-2"><a href="14-fonctions.html#cb878-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(v)</span>
<span id="cb878-3"><a href="14-fonctions.html#cb878-3" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> tri <span class="sc">/</span> <span class="fu">sum</span>(tri) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb878-4"><a href="14-fonctions.html#cb878-4" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">round</span>(tri, <span class="dv">2</span>)</span>
<span id="cb878-5"><a href="14-fonctions.html#cb878-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tri)</span>
<span id="cb878-6"><a href="14-fonctions.html#cb878-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb878-7"><a href="14-fonctions.html#cb878-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb878-8"><a href="14-fonctions.html#cb878-8" aria-hidden="true" tabindex="-1"></a><span class="fu">prop_tab</span>(hdv2003<span class="sc">$</span>qualif)</span></code></pre></div>
<pre><code>v
      Ouvrier specialise         Ouvrier qualifie 
                   12.28                    17.66 
              Technicien Profession intermediaire 
                    5.20                     9.68 
                   Cadre                  Employe 
                   15.73                    35.93 
                   Autre 
                    3.51 </code></pre>
<div class="rmdnote">
<p>
Quand on modifie une fonction existante, il faut exécuter à nouveau le code correspondant à sa définition pour la “mettre à jour”. Ici, si on ne le fait pas l’objet <code>prop_tab</code> contiendra toujours l’ancienne définition.
</p>
</div>
<p>Ça marche ! Cela dit, limiter à 2 chiffres après la virgule ne convient pas forcément dans tous les cas. L’idéal serait d’offrir la possibilité à l’utilisateur de la fonction de choisir lui-même la précision de l’affichage. Comment ? Tout simplement en ajoutant un deuxième argument à la fonction, que nous nommerons <code>decimales</code>, et en utilisant cet argument à la place du 2 dans l’appel à <code>round()</code> :</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="14-fonctions.html#cb880-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb880-2"><a href="14-fonctions.html#cb880-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flair)</span></code></pre></div>
<p>Désormais, notre fonction s’utilise en lui indiquant deux arguments :</p>
<div class="sourceCode" id="cb881"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb881-1"><a href="14-fonctions.html#cb881-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop_tab</span>(hdv2003<span class="sc">$</span>qualif, <span class="at">decimales =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>v
      Ouvrier specialise         Ouvrier qualifie 
                    12.3                     17.7 
              Technicien Profession intermediaire 
                     5.2                      9.7 
                   Cadre                  Employe 
                    15.7                     35.9 
                   Autre 
                     3.5 </code></pre>
<p>Enfin, dernier exemple, parfois une fonction n’a pas pour objectif de renvoyer un résultat mais d’accomplir une action, comme générer un graphique<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>. Dans ce cas la fonction peut ne pas inclure d’instruction <code>return()</code>.</p>
<p>Par exemple la fonction suivante prend en argument un vecteur et génère un diagramme en barres du tri à plat de cette variable (en modifiant la présentation au passage) :</p>
<div class="sourceCode" id="cb883"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb883-1"><a href="14-fonctions.html#cb883-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb883-2"><a href="14-fonctions.html#cb883-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(var)</span>
<span id="cb883-3"><a href="14-fonctions.html#cb883-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(tri, <span class="at">col =</span> <span class="st">&quot;skyblue&quot;</span>, <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb883-4"><a href="14-fonctions.html#cb883-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb883-5"><a href="14-fonctions.html#cb883-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb883-6"><a href="14-fonctions.html#cb883-6" aria-hidden="true" tabindex="-1"></a><span class="fu">my_barplot</span>(hdv2003<span class="sc">$</span>clso)</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-698-1.svg" width="672" /></p>
</div>
<div id="utilité-des-fonctions" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Utilité des fonctions</h2>
<p>Une question légitime est de se demander dans quels cas il est utile de créer une fonction.</p>
<p>Une règle assez courante consiste à dire que dès qu’on a répété le même code plus de deux fois, il est préférable d’en faire une fonction. Celles-ci ont en effet comme avantage d’éviter la duplication du code.</p>
<p>Imaginons que vous avez récupéré un jeu de données avec toute une série de variables ayant les modalités <code>"1"</code> et <code>"2"</code> qui correspondent aux réponses <code>"Oui"</code> et <code>"Non"</code> à des questions.</p>
<p>On crée un <em>data frame</em> fictif comportant quatre variables de ce type :</p>
<div class="sourceCode" id="cb884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb884-1"><a href="14-fonctions.html#cb884-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb884-2"><a href="14-fonctions.html#cb884-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">q1 =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>),</span>
<span id="cb884-3"><a href="14-fonctions.html#cb884-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">q2 =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>),</span>
<span id="cb884-4"><a href="14-fonctions.html#cb884-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">q3 =</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;1&quot;</span>),</span>
<span id="cb884-5"><a href="14-fonctions.html#cb884-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">q4 =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;1&quot;</span>)</span>
<span id="cb884-6"><a href="14-fonctions.html#cb884-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb884-7"><a href="14-fonctions.html#cb884-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb884-8"><a href="14-fonctions.html#cb884-8" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code># A tibble: 4 x 4
  q1    q2    q3    q4   
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 1     1     2     1    
2 1     2     2     2    
3 2     2     1     1    
4 1     2     1     1    </code></pre>
<p>On sait qu’on peut facilement <a href="09-recodages.html#recoder-une-variable-qualitative">recoder l’une de ces variables</a> à l’aide de la fonction <code>fct_recode</code> de l’extension <code>forcats</code> :</p>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb886-1"><a href="14-fonctions.html#cb886-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q1 <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(df<span class="sc">$</span>q1,</span>
<span id="cb886-2"><a href="14-fonctions.html#cb886-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Oui&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb886-3"><a href="14-fonctions.html#cb886-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Non&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb886-4"><a href="14-fonctions.html#cb886-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>On peut donc être tenté de dupliquer ce code autant de fois qu’on a de questions à recoder :</p>
<div class="sourceCode" id="cb887"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb887-1"><a href="14-fonctions.html#cb887-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q1 <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(df<span class="sc">$</span>q1,</span>
<span id="cb887-2"><a href="14-fonctions.html#cb887-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Oui&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb887-3"><a href="14-fonctions.html#cb887-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Non&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb887-4"><a href="14-fonctions.html#cb887-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb887-5"><a href="14-fonctions.html#cb887-5" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q2 <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(df<span class="sc">$</span>q2,</span>
<span id="cb887-6"><a href="14-fonctions.html#cb887-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Oui&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb887-7"><a href="14-fonctions.html#cb887-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Non&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb887-8"><a href="14-fonctions.html#cb887-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb887-9"><a href="14-fonctions.html#cb887-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q3 <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(df<span class="sc">$</span>q3,</span>
<span id="cb887-10"><a href="14-fonctions.html#cb887-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Oui&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb887-11"><a href="14-fonctions.html#cb887-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Non&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb887-12"><a href="14-fonctions.html#cb887-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb887-13"><a href="14-fonctions.html#cb887-13" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q4 <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(df<span class="sc">$</span>q4,</span>
<span id="cb887-14"><a href="14-fonctions.html#cb887-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Oui&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb887-15"><a href="14-fonctions.html#cb887-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Non&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb887-16"><a href="14-fonctions.html#cb887-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Il est toutefois plus judicieux de créer une fonction spécifique pour ce recodage :</p>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb888-1"><a href="14-fonctions.html#cb888-1" aria-hidden="true" tabindex="-1"></a>recode_oui_non <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb888-2"><a href="14-fonctions.html#cb888-2" aria-hidden="true" tabindex="-1"></a>  new_var <span class="ot">&lt;-</span> <span class="fu">fct_recode</span>(var,</span>
<span id="cb888-3"><a href="14-fonctions.html#cb888-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Oui&quot;</span> <span class="ot">=</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb888-4"><a href="14-fonctions.html#cb888-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Non&quot;</span> <span class="ot">=</span> <span class="st">&quot;2&quot;</span></span>
<span id="cb888-5"><a href="14-fonctions.html#cb888-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb888-6"><a href="14-fonctions.html#cb888-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(new_var)</span>
<span id="cb888-7"><a href="14-fonctions.html#cb888-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Il est alors très simple d’appliquer ce recodage à plusieurs variables :</p>
<div class="sourceCode" id="cb889"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb889-1"><a href="14-fonctions.html#cb889-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q1 <span class="ot">&lt;-</span> <span class="fu">recode_oui_non</span>(df<span class="sc">$</span>q1)</span>
<span id="cb889-2"><a href="14-fonctions.html#cb889-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q2 <span class="ot">&lt;-</span> <span class="fu">recode_oui_non</span>(df<span class="sc">$</span>q2)</span>
<span id="cb889-3"><a href="14-fonctions.html#cb889-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q3 <span class="ot">&lt;-</span> <span class="fu">recode_oui_non</span>(df<span class="sc">$</span>q3)</span>
<span id="cb889-4"><a href="14-fonctions.html#cb889-4" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>q4 <span class="ot">&lt;-</span> <span class="fu">recode_oui_non</span>(df<span class="sc">$</span>q4)</span></code></pre></div>
<p>Autre avantage, si nous réalisons que nous avons commis une erreur et qu’en fait le code <code>"1"</code> correspondait à <code>"Non"</code> et le code <code>"2"</code> à <code>"Oui"</code>, on n’a pas besoin de modifier tous les endroits où l’on a copié/collé notre recodage, mais seulement la définition de la fonction.</p>
<p>Les avantages de procéder ainsi sont donc multiples :</p>
<ul>
<li>créer une fonction évite la répétition du code et le rend moins long et plus lisible, surtout si on donne à notre fonction un nom explicite permettant de comprendre immédiatement ce qu’elle fait.</li>
<li>créer une fonction évite les erreurs de copier/coller du code.</li>
<li>une fonction permet de mettre à jour plus facilement son code : si on se rend compte d’une erreur ou si on souhaite améliorer son fonctionnement, on n’a qu’un seul endroit à modifier.</li>
<li>enfin, créer des fonctions permet potentiellement de rendre son code réutilisable d’un script à l’autre ou même d’un projet à l’autre. Voire, à terme, de les regrouper dans un <em>package</em> pour soi-même ou pour diffusion à d’autres utilisateurs de R.</li>
</ul>
</div>
<div id="arguments-dune-fonction" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Arguments d’une fonction</h2>
<div id="définition-des-arguments" class="section level3" number="14.4.1">
<h3><span class="header-section-number">14.4.1</span> Définition des arguments</h3>
<p>Les arguments d’une fonction sont tout ce qu’on fournit “en entrée” à cette dernière, et qui vont soit lui fournir des données, soit modifier son comportement. La liste des arguments acceptés par une fonction est donnée lors de l’appel de <code>function</code> :</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb890-1"><a href="14-fonctions.html#cb890-1" aria-hidden="true" tabindex="-1"></a>ma_fonction <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, arg3) {</span>
<span id="cb890-2"><a href="14-fonctions.html#cb890-2" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb890-3"><a href="14-fonctions.html#cb890-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Lors de l’appel de la fonction, on peut lui passer les arguments <em>par position</em> :</p>
<div class="sourceCode" id="cb891"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb891-1"><a href="14-fonctions.html#cb891-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ma_fonction</span>(x, <span class="dv">12</span>, <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Dans ce cas, <code>arg1</code> vaudra <code>x</code>, <code>arg2</code> vaudra <code>12</code> et <code>arg3</code> vaudra <code>TRUE</code>.</p>
<p>On peut aussi passer les arguments <em>par nom</em> :</p>
<div class="sourceCode" id="cb892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb892-1"><a href="14-fonctions.html#cb892-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ma_fonction</span>(<span class="at">arg1 =</span> x, <span class="at">arg2 =</span> <span class="dv">12</span>, <span class="at">arg3 =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Quand on passe les arguments par nom, on peut les indiquer dans l’ordre que l’on souhaite :</p>
<div class="sourceCode" id="cb893"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb893-1"><a href="14-fonctions.html#cb893-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ma_fonction</span>(<span class="at">arg1 =</span> x, <span class="at">arg3 =</span> <span class="cn">TRUE</span>, <span class="at">arg2 =</span> <span class="dv">12</span>)</span></code></pre></div>
<p>Et on peut évidemment mélanger passage par position et passage par nom :</p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="14-fonctions.html#cb894-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ma_fonction</span>(x, <span class="dv">12</span>, <span class="at">arg3 =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Le plus souvent, les premiers arguments acceptés par une fonction sont les données sur lesquelles elle va travailler, tandis que les arguments suivants sont des paramètres qui vont modifier son comportement. Par exemple, <code>median</code> accepte comme premier argument <code>x</code>, un vecteur, puis un argument <code>na.rm</code> qui va changer sa manière de calculer la médiane des valeurs de <code>x</code>.</p>
<p>En général on appelle la fonction en passant les paramètres correspondant aux données par position, et les autres en les nommant. C’est ainsi qu’on ne fait ni <code>median(x = tailles, na.rm = TRUE)</code> ni <code>median(tailles, TRUE)</code>, mais plutôt <code>median(tailles, na.rm = TRUE)</code>.</p>
<p>En ce qui concerne le nom des arguments eux-mêmes, en général ceux correspondant aux données transmises à une fonction peuvent avoir des noms relativement génériques (<code>x</code>, <code>y</code>, <code>v</code> pour un vecteur, <code>data</code> ou <code>df</code> pour un data.frame…). Les autres doivent par contre avoir des noms à la fois courts et explicites : par exemple plutôt <code>decimales</code> que <code>nd</code> ou <code>nombre_de_decimales</code>.</p>
</div>
<div id="valeurs-par-défaut" class="section level3" number="14.4.2">
<h3><span class="header-section-number">14.4.2</span> Valeurs par défaut</h3>
<p>Au moment de la définition de la fonction, on peut indiquer une valeur par défaut qui sera prise par l’argument si l’utilisateur de la fonction n’en fournit pas.</p>
<p>Si on reprend la fonction <code>prop_tab</code> déjà définie plus haut :</p>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb895-1"><a href="14-fonctions.html#cb895-1" aria-hidden="true" tabindex="-1"></a>prop_tab <span class="ot">&lt;-</span> <span class="cf">function</span>(v, decimales) {</span>
<span id="cb895-2"><a href="14-fonctions.html#cb895-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(v)</span>
<span id="cb895-3"><a href="14-fonctions.html#cb895-3" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> tri <span class="sc">/</span> <span class="fu">sum</span>(tri) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb895-4"><a href="14-fonctions.html#cb895-4" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">round</span>(tri, decimales)</span>
<span id="cb895-5"><a href="14-fonctions.html#cb895-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tri)</span>
<span id="cb895-6"><a href="14-fonctions.html#cb895-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>On peut indiquer une valeur par défaut de l’argument <code>decimales</code> (qui indique le nombre de chiffres à conserver après la virgule) de la manière suivante :</p>
<div class="sourceCode" id="cb896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb896-1"><a href="14-fonctions.html#cb896-1" aria-hidden="true" tabindex="-1"></a>prop_tab <span class="ot">&lt;-</span> <span class="cf">function</span>(v, <span class="at">decimales =</span> <span class="dv">1</span>) {</span>
<span id="cb896-2"><a href="14-fonctions.html#cb896-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(v)</span>
<span id="cb896-3"><a href="14-fonctions.html#cb896-3" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> tri <span class="sc">/</span> <span class="fu">sum</span>(tri) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb896-4"><a href="14-fonctions.html#cb896-4" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">round</span>(tri, decimales)</span>
<span id="cb896-5"><a href="14-fonctions.html#cb896-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tri)</span>
<span id="cb896-6"><a href="14-fonctions.html#cb896-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Si on appelle <code>prop_tab</code> en lui passant uniquement le vecteur <code>v</code>, on voit que <code>decimales</code> vaut bien 1 :</p>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb897-1"><a href="14-fonctions.html#cb897-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop_tab</span>(hdv2003<span class="sc">$</span>qualif)</span></code></pre></div>
<pre><code>v
      Ouvrier specialise         Ouvrier qualifie 
                    12.3                     17.7 
              Technicien Profession intermediaire 
                     5.2                      9.7 
                   Cadre                  Employe 
                    15.7                     35.9 
                   Autre 
                     3.5 </code></pre>
</div>
<div id="largument-..." class="section level3" number="14.4.3">
<h3><span class="header-section-number">14.4.3</span> L’argument <code>...</code></h3>
<p>Une fonction peut prendre un argument spécial, nommé <code>...</code> :</p>
<div class="sourceCode" id="cb899"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb899-1"><a href="14-fonctions.html#cb899-1" aria-hidden="true" tabindex="-1"></a>ma_fonction <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">correct =</span> <span class="cn">TRUE</span>, ...) {</span>
<span id="cb899-2"><a href="14-fonctions.html#cb899-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb899-3"><a href="14-fonctions.html#cb899-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Cet argument spécial “capture” tous les arguments présents et qui n’ont pas été définis avec la fonction. Par exemple, si on appelle la fonction précédente avec :</p>
<div class="sourceCode" id="cb900"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb900-1"><a href="14-fonctions.html#cb900-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ma_fonction</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">correct =</span> <span class="cn">FALSE</span>, <span class="at">title =</span> <span class="st">&quot;Titre&quot;</span>, <span class="at">size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>NULL</code></pre>
<p>Alors <code>...</code> contiendra les arguments <code>title</code> et <code>size</code> et leurs valeurs.</p>
<p>En général <code>...</code> est utilisé pour passer ces arguments à d’autres fonctions. Reprenons notre fonction <code>my_barplot</code> définie précédemment :</p>
<div class="sourceCode" id="cb902"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb902-1"><a href="14-fonctions.html#cb902-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb902-2"><a href="14-fonctions.html#cb902-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(var)</span>
<span id="cb902-3"><a href="14-fonctions.html#cb902-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(tri, <span class="at">col =</span> <span class="st">&quot;skyblue&quot;</span>, <span class="at">border =</span> <span class="cn">NA</span>)</span>
<span id="cb902-4"><a href="14-fonctions.html#cb902-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>On pourrait permettre à l’utilisateur de personnaliser les couleurs des barres et de leurs bordures en ajoutant des arguments supplémentaires :</p>
<div class="sourceCode" id="cb903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb903-1"><a href="14-fonctions.html#cb903-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="ot">&lt;-</span> <span class="cf">function</span>(var, <span class="at">col =</span> <span class="st">&quot;skyblue&quot;</span>, <span class="at">border =</span> <span class="cn">NA</span>) {</span>
<span id="cb903-2"><a href="14-fonctions.html#cb903-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(var)</span>
<span id="cb903-3"><a href="14-fonctions.html#cb903-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(tri, <span class="at">col =</span> col, <span class="at">border =</span> border)</span>
<span id="cb903-4"><a href="14-fonctions.html#cb903-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Mais si on veut aussi permettre de personnaliser d’autres arguments de <code>barplot</code> comme <code>main</code>, <code>xlab</code>, <code>xlim</code>, etc., il faudrait rajouter autant d’arguments supplémentaires à notre fonction, ce qui deviendrait vite ingérable. Une solution est de “capturer” tous les arguments supplémentaires avec <code>...</code> et de les passer directement à <code>barplot</code>, de cette manière :</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="14-fonctions.html#cb904-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="ot">&lt;-</span> <span class="cf">function</span>(var, ...) {</span>
<span id="cb904-2"><a href="14-fonctions.html#cb904-2" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">table</span>(var)</span>
<span id="cb904-3"><a href="14-fonctions.html#cb904-3" aria-hidden="true" tabindex="-1"></a>  tri <span class="ot">&lt;-</span> <span class="fu">sort</span>(tri)</span>
<span id="cb904-4"><a href="14-fonctions.html#cb904-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(tri, ...)</span>
<span id="cb904-5"><a href="14-fonctions.html#cb904-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ce qui permet d’appeler notre fonction avec tous les arguments possibles de <code>barplot</code>, par exemple :</p>
<div class="sourceCode" id="cb905"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb905-1"><a href="14-fonctions.html#cb905-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_barplot</span>(hdv2003<span class="sc">$</span>clso, <span class="at">col =</span> <span class="st">&quot;yellowgreen&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Croyez-vous en l&#39;existence des classes sociales ?&quot;</span>)</span></code></pre></div>
<p><img src="introduction_au_tidyverse_files/figure-html/unnamed-chunk-717-1.svg" width="672" /></p>
</div>
</div>
<div id="résultat-dune-fonction" class="section level2" number="14.5">
<h2><span class="header-section-number">14.5</span> Résultat d’une fonction</h2>
<p>On l’a vu, l’objectif d’une fonction est en général de renvoyer un résultat. Lors de la définition d’une fonction, le résultat peut être retourné en utilisant la fonction <code>return</code> :</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="14-fonctions.html#cb906-1" aria-hidden="true" tabindex="-1"></a>ajoute2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb906-2"><a href="14-fonctions.html#cb906-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb906-3"><a href="14-fonctions.html#cb906-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb906-4"><a href="14-fonctions.html#cb906-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>En réalité, l’utilisation de <code>return</code> n’est pas obligatoire : une fonction retourne automatiquement le résultat de la dernière instruction qu’elle exécute. On aurait donc pu écrire :</p>
<div class="sourceCode" id="cb907"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb907-1"><a href="14-fonctions.html#cb907-1" aria-hidden="true" tabindex="-1"></a>ajoute2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb907-2"><a href="14-fonctions.html#cb907-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb907-3"><a href="14-fonctions.html#cb907-3" aria-hidden="true" tabindex="-1"></a>  res</span>
<span id="cb907-4"><a href="14-fonctions.html#cb907-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ou même, encore mieux et plus lisible :</p>
<div class="sourceCode" id="cb908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb908-1"><a href="14-fonctions.html#cb908-1" aria-hidden="true" tabindex="-1"></a>ajoute2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb908-2"><a href="14-fonctions.html#cb908-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb908-3"><a href="14-fonctions.html#cb908-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>À noter que lorsque R rencontre une instruction <code>return</code> dans une fonction, il interrompt immédiatement son exécution et “sort” de la fonction en renvoyant le résultat.</p>
<p>Ainsi, dans la fonction suivante :</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb909-1"><a href="14-fonctions.html#cb909-1" aria-hidden="true" tabindex="-1"></a>ajoute2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb909-2"><a href="14-fonctions.html#cb909-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb909-3"><a href="14-fonctions.html#cb909-3" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">*</span> <span class="dv">5</span></span>
<span id="cb909-4"><a href="14-fonctions.html#cb909-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>L’instruction <code>x * 5</code> ne sera jamais exécutée car R “sort” de la fonction dès qu’il tombe sur le <code>return</code> de la ligne précédente.</p>
<p>Corrolaire de ce comportement, on ne peut utiliser plusieurs <code>return</code> pour renvoyer plusieurs résultats depuis une seule fonction. Est-ce à dire qu’une fonction R ne pourrait renvoyer qu’une seule valeur ? Non, car si elle ne peut retourner qu’un seul objet, celui-ci peut être complexe et comporter plusieurs valeurs.</p>
<p>Par exemple, on pourrait créer une fonction <code>summary</code> “personnalisée” qui ne retournerait que la moyenne et l’écart-type d’un vecteur numérique. Pour cela, on pourrait renvoyer un vecteur comportant ces deux valeurs :</p>
<div class="sourceCode" id="cb910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb910-1"><a href="14-fonctions.html#cb910-1" aria-hidden="true" tabindex="-1"></a>resume <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb910-2"><a href="14-fonctions.html#cb910-2" aria-hidden="true" tabindex="-1"></a>  moyenne <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb910-3"><a href="14-fonctions.html#cb910-3" aria-hidden="true" tabindex="-1"></a>  ecart_type <span class="ot">&lt;-</span> <span class="fu">sd</span>(x)</span>
<span id="cb910-4"><a href="14-fonctions.html#cb910-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(moyenne, ecart_type)</span>
<span id="cb910-5"><a href="14-fonctions.html#cb910-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb911-1"><a href="14-fonctions.html#cb911-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resume</span>(hdv2003<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>$moy
[1] 48.157

$et
[1] 16.94181</code></pre>
<p>Mais dans ce cas de figure il est recommandé de retourner plutôt une liste nommée<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>, de cette manière :</p>
<div class="sourceCode" id="cb913"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb913-1"><a href="14-fonctions.html#cb913-1" aria-hidden="true" tabindex="-1"></a>resume <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb913-2"><a href="14-fonctions.html#cb913-2" aria-hidden="true" tabindex="-1"></a>  moyenne <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb913-3"><a href="14-fonctions.html#cb913-3" aria-hidden="true" tabindex="-1"></a>  ecart_type <span class="ot">&lt;-</span> <span class="fu">sd</span>(x)</span>
<span id="cb913-4"><a href="14-fonctions.html#cb913-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">moy =</span> moyenne, <span class="at">et =</span> ecart_type)</span>
<span id="cb913-5"><a href="14-fonctions.html#cb913-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb914"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb914-1"><a href="14-fonctions.html#cb914-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resume</span>(hdv2003<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>$moy
[1] 48.157

$et
[1] 16.94181</code></pre>
<p>On a du coup un affichage un peu plus lisible, et surtout on peut accéder aux valeurs renvoyées via leur nom :</p>
<div class="sourceCode" id="cb916"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb916-1"><a href="14-fonctions.html#cb916-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">resume</span>(hdv2003<span class="sc">$</span>age)</span>
<span id="cb916-2"><a href="14-fonctions.html#cb916-2" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>moy</span></code></pre></div>
<pre><code>[1] 48.157</code></pre>
</div>
<div id="afficher-des-messages-depuis-une-fonction" class="section level2" number="14.6">
<h2><span class="header-section-number">14.6</span> Afficher des messages depuis une fonction</h2>
<p>Une fonctionnalité utile quand on crée une fonction et d’afficher des messages dans la console pendant son exécution, que ce soit pour présenter des résultats ou informer du déroulement des opérations.</p>
<div id="print-et-message" class="section level3" number="14.6.1">
<h3><span class="header-section-number">14.6.1</span> <code>print</code> et <code>message</code></h3>
<p>La fonction <code>print</code> peut être utile</p>
</div>
<div id="warning-et-error" class="section level3" number="14.6.2">
<h3><span class="header-section-number">14.6.2</span> <code>warning</code> et <code>error</code></h3>
<p>message()
print()
warning() et stop()</p>
</div>
</div>
<div id="portée-des-variables" class="section level2" number="14.7">
<h2><span class="header-section-number">14.7</span> Portée des variables</h2>
<p>Un point délicat mais important quand on commence à créer ses propres fonctions concerne la <em>portée des variables</em>, c’est-à-dire la façon dont les objets créés dans une fonction et en-dehors “cohabitent”. C’est une question assez complexe, mais seules quelques grandes règles sont réellement utiles au départ.</p>
<div id="une-fonction-peut-accéder-à-un-objet-extérieur" class="section level3" number="14.7.1">
<h3><span class="header-section-number">14.7.1</span> Une fonction peut accéder à un objet extérieur</h3>
<p>Si on fait appel dans une fonction à un objet qui n’existe pas et n’a pas été passé comme argument, on obtient évidemment une erreur :</p>
<div class="sourceCode" id="cb918"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb918-1"><a href="14-fonctions.html#cb918-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb918-2"><a href="14-fonctions.html#cb918-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> ajout</span>
<span id="cb918-3"><a href="14-fonctions.html#cb918-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb918-4"><a href="14-fonctions.html#cb918-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb918-5"><a href="14-fonctions.html#cb918-5" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<p>On peut évidemment créer cet objet dans notre fonction avant de l’utiliser :</p>
<div class="sourceCode" id="cb920"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb920-1"><a href="14-fonctions.html#cb920-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb920-2"><a href="14-fonctions.html#cb920-2" aria-hidden="true" tabindex="-1"></a>  ajout <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb920-3"><a href="14-fonctions.html#cb920-3" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> ajout</span>
<span id="cb920-4"><a href="14-fonctions.html#cb920-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb920-5"><a href="14-fonctions.html#cb920-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-6"><a href="14-fonctions.html#cb920-6" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] 4</code></pre>
<p>Mais on peut aussi accéder depuis une fonction à un objet qui existe dans notre environnement au moment où la fonction a été appelée :</p>
<div class="sourceCode" id="cb922"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb922-1"><a href="14-fonctions.html#cb922-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb922-2"><a href="14-fonctions.html#cb922-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> ajout</span>
<span id="cb922-3"><a href="14-fonctions.html#cb922-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb922-4"><a href="14-fonctions.html#cb922-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-5"><a href="14-fonctions.html#cb922-5" aria-hidden="true" tabindex="-1"></a>ajout <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb922-6"><a href="14-fonctions.html#cb922-6" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<p>Dans cet exemple, au moment de l’exécution de <code>f</code>, comme <code>ajout</code> n’existe pas au sein de la fonction (il n’a pas été passé comme argument ni défini dans le corps de la fonction), R va chercher dans l’environnement global, celui dans lequel la fonction a été appelée. Comme il trouve un objet <code>ajout</code>, il utilise sa valeur au moment de l’appel de la fonction.</p>
<p>Que se passe-t-il si un objet avec le même nom existe à la fois dans la fonction et dans notre environnement ? Dans ce cas R privilégie l’objet créé dans la fonction :</p>
<div class="sourceCode" id="cb924"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb924-1"><a href="14-fonctions.html#cb924-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb924-2"><a href="14-fonctions.html#cb924-2" aria-hidden="true" tabindex="-1"></a>  ajout <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb924-3"><a href="14-fonctions.html#cb924-3" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> ajout</span>
<span id="cb924-4"><a href="14-fonctions.html#cb924-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb924-5"><a href="14-fonctions.html#cb924-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-6"><a href="14-fonctions.html#cb924-6" aria-hidden="true" tabindex="-1"></a>ajout <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb924-7"><a href="14-fonctions.html#cb924-7" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] 12</code></pre>
<p>Cette règle s’applique également pour les arguments passés à la fonction :</p>
<div class="sourceCode" id="cb926"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb926-1"><a href="14-fonctions.html#cb926-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ajout) {</span>
<span id="cb926-2"><a href="14-fonctions.html#cb926-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> ajout</span>
<span id="cb926-3"><a href="14-fonctions.html#cb926-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb926-4"><a href="14-fonctions.html#cb926-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-5"><a href="14-fonctions.html#cb926-5" aria-hidden="true" tabindex="-1"></a>ajout <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb926-6"><a href="14-fonctions.html#cb926-6" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">2</span>, <span class="dv">20</span>)</span></code></pre></div>
<pre><code>[1] 22</code></pre>
<p>En définitive, les objets créés dans notre session et qui existent dans notre environnement (tel que visible dans l’onglet <em>Environment</em> de RStudio) sont appelés des variables “globales” : elles existent également et sont accessible pour les fonctions appelées depuis cet environnement. Les objets créés lors de la définition d’une fonction sont des à l’inverse des variables “locales” : elles n’existent qu’à l’intérieur de la fonction et pour la durée de son exécution. Si deux objets du même nom existent, les objets locaux sont prioritaires par rapport aux objets globaux.</p>
<p>Une conséquence de cette règle est qu’il n’est pas possible de modifier un objet de notre environnement global depuis une fonction<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a> :</p>
<div class="sourceCode" id="cb928"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb928-1"><a href="14-fonctions.html#cb928-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb928-2"><a href="14-fonctions.html#cb928-2" aria-hidden="true" tabindex="-1"></a>  ajout <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb928-3"><a href="14-fonctions.html#cb928-3" aria-hidden="true" tabindex="-1"></a>  ajout</span>
<span id="cb928-4"><a href="14-fonctions.html#cb928-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb928-5"><a href="14-fonctions.html#cb928-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb928-6"><a href="14-fonctions.html#cb928-6" aria-hidden="true" tabindex="-1"></a>ajout <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb928-7"><a href="14-fonctions.html#cb928-7" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>()</span></code></pre></div>
<pre><code>[1] 10</code></pre>
<div class="sourceCode" id="cb930"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb930-1"><a href="14-fonctions.html#cb930-1" aria-hidden="true" tabindex="-1"></a>ajout</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<p>Ici on voit que même si pendant l’exécution de la fonction <code>ajout</code> vaut bien 10 (puisque c’est la valeur qu’elle retourne), dès qu’on n’est plus dans la fonction <code>ajout</code> vaut toujours sa valeur de départ, c’est-à-dire 3. Dans ce cas, au moment de l’instruction <code>ajout &lt;- 10</code> de notre fonction, R crée un objet local qui vaut bien 10, mais qui est distinct de l’objet global dont la valeur est 3. Cet objet local n’existe que le temps de l’exécution de la fonction.</p>
</div>
</div>
<div id="les-fonctions-sont-des-objets-comme-les-autres" class="section level2" number="14.8">
<h2><span class="header-section-number">14.8</span> Les fonctions sont des objets comme les autres</h2>
<p>Si on donne juste le nom on affiche le contenu</p>
</div>
<div id="fonctions-anonymes" class="section level2" number="14.9">
<h2><span class="header-section-number">14.9</span> Fonctions anonymes</h2>
<p>Exemple avec tapply</p>
</div>
<div id="ressources-6" class="section level2" number="14.10">
<h2><span class="header-section-number">14.10</span> Ressources</h2>
<ul>
<li>r4ds</li>
<li>adv r
<a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Writing-your-own-functions" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Writing-your-own-functions</a></li>
</ul>
</div>
<div id="exercices-7" class="section level2" number="14.11">
<h2><span class="header-section-number">14.11</span> Exercices</h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="26">
<li id="fn26"><p>Les actions “visibles” dans notre session R accomplies par une fonction en-dehors du résultat renvoyé sont appelés des “effets de bord”<a href="14-fonctions.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>Les listes seront abordées un peu plus en détail dans la partie <a href="15-programmer.html#listes">15.0.1</a><a href="14-fonctions.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>En fait c’est possible avec l’opérateur <code>&lt;&lt;-</code>, mais c’est fortement déconseillé dans la très grande majorité des cas.<a href="14-fonctions.html#fnref28" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="13-rmarkdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="15-programmer.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/juba/tidyverse/blob/master/14-fonctions.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
