<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.250">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction à R et au tidyverse - 13&nbsp; Diffuser et publier avec rmarkdown</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./14-fonctions.html" rel="next">
<link href="./12-tidyr.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/quarto-contrib/bookup_fonts_gwf-0.0/fonts-embed.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer"
  }
}</script>


<link rel="stylesheet" href="css/tidyverse.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-tidyverse.html">Introduction au tidyverse</a></li><li class="breadcrumb-item"><a href="./13-rmarkdown.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Diffuser et publier avec <code>rmarkdown</code></span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction à R et au tidyverse</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/juba/tidyverse/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./introduction_au_tidyverse.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./introduction_au_tidyverse.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Basculer en mode lecteur">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">À propos de ce document</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-presentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Présentation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Introduction à R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-prise_en_main.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Prise en main</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-premier_travail.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Premier travail avec des données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-bivarie.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Analyse bivariée</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-organiser.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Organiser ses scripts</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Introduction au tidyverse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Le tidyverse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importer et exporter des données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualiser avec <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-recodages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Recoder des variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Manipuler les données avec <code>dplyr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-stringr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Manipuler du texte avec <code>stringr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-tidyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Mettre en ordre avec <code>tidyr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-rmarkdown.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Diffuser et publier avec <code>rmarkdown</code></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Aller plus loin</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-fonctions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Écrire ses propres fonctions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-dplyr-avance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title"><code>dplyr</code> avancé</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-structures-donnees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Structures de données</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-if-boucles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Exécution conditionnelle et boucles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-purrr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Itérer avec <code>purrr</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-programmer-tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Programmer avec le <em>tidyverse</em></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-debuggage-performance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Débuggage et performance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-targets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Organiser un projet avec <code>targets</code></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Annexes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Basculer la section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-ressources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Ressources</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#créer-un-nouveau-document" id="toc-créer-un-nouveau-document" class="nav-link active" data-scroll-target="#créer-un-nouveau-document"><span class="header-section-number">13.1</span> Créer un nouveau document</a></li>
  <li><a href="#éléments-dun-document-r-markdown" id="toc-éléments-dun-document-r-markdown" class="nav-link" data-scroll-target="#éléments-dun-document-r-markdown"><span class="header-section-number">13.2</span> Éléments d’un document R Markdown</a>
  <ul class="collapse">
  <li><a href="#en-tête-préambule" id="toc-en-tête-préambule" class="nav-link" data-scroll-target="#en-tête-préambule"><span class="header-section-number">13.2.1</span> En-tête (préambule)</a></li>
  <li><a href="#texte-du-document" id="toc-texte-du-document" class="nav-link" data-scroll-target="#texte-du-document"><span class="header-section-number">13.2.2</span> Texte du document</a></li>
  <li><a href="#blocs-de-code-r" id="toc-blocs-de-code-r" class="nav-link" data-scroll-target="#blocs-de-code-r"><span class="header-section-number">13.2.3</span> Blocs de code R</a></li>
  <li><a href="#compiler-un-document-knit" id="toc-compiler-un-document-knit" class="nav-link" data-scroll-target="#compiler-un-document-knit"><span class="header-section-number">13.2.4</span> Compiler un document (<em>Knit</em>)</a></li>
  </ul></li>
  <li><a href="#personnaliser-le-document-généré" id="toc-personnaliser-le-document-généré" class="nav-link" data-scroll-target="#personnaliser-le-document-généré"><span class="header-section-number">13.3</span> Personnaliser le document généré</a></li>
  <li><a href="#options-des-blocs-de-code-r" id="toc-options-des-blocs-de-code-r" class="nav-link" data-scroll-target="#options-des-blocs-de-code-r"><span class="header-section-number">13.4</span> Options des blocs de code R</a>
  <ul class="collapse">
  <li><a href="#nom-du-bloc" id="toc-nom-du-bloc" class="nav-link" data-scroll-target="#nom-du-bloc"><span class="header-section-number">13.4.1</span> Nom du bloc</a></li>
  <li><a href="#options" id="toc-options" class="nav-link" data-scroll-target="#options"><span class="header-section-number">13.4.2</span> Options</a></li>
  <li><a href="#modifier-les-options" id="toc-modifier-les-options" class="nav-link" data-scroll-target="#modifier-les-options"><span class="header-section-number">13.4.3</span> Modifier les options</a></li>
  <li><a href="#options-globales" id="toc-options-globales" class="nav-link" data-scroll-target="#options-globales"><span class="header-section-number">13.4.4</span> Options globales</a></li>
  <li><a href="#mise-en-cache-des-résultats" id="toc-mise-en-cache-des-résultats" class="nav-link" data-scroll-target="#mise-en-cache-des-résultats"><span class="header-section-number">13.4.5</span> Mise en cache des résultats</a></li>
  </ul></li>
  <li><a href="#rendu-des-tableaux" id="toc-rendu-des-tableaux" class="nav-link" data-scroll-target="#rendu-des-tableaux"><span class="header-section-number">13.5</span> Rendu des tableaux</a>
  <ul class="collapse">
  <li><a href="#tableaux-croisés" id="toc-tableaux-croisés" class="nav-link" data-scroll-target="#tableaux-croisés"><span class="header-section-number">13.5.1</span> Tableaux croisés</a></li>
  <li><a href="#tableaux-de-données-et-tris-à-plat" id="toc-tableaux-de-données-et-tris-à-plat" class="nav-link" data-scroll-target="#tableaux-de-données-et-tris-à-plat"><span class="header-section-number">13.5.2</span> Tableaux de données et tris à plat</a></li>
  </ul></li>
  <li><a href="#sec-templates" id="toc-sec-templates" class="nav-link" data-scroll-target="#sec-templates"><span class="header-section-number">13.6</span> Modèles de documents</a>
  <ul class="collapse">
  <li><a href="#slides" id="toc-slides" class="nav-link" data-scroll-target="#slides"><span class="header-section-number">13.6.1</span> Slides</a></li>
  <li><a href="#templates" id="toc-templates" class="nav-link" data-scroll-target="#templates"><span class="header-section-number">13.6.2</span> Templates</a></li>
  </ul></li>
  <li><a href="#ressources" id="toc-ressources" class="nav-link" data-scroll-target="#ressources"><span class="header-section-number">13.7</span> Ressources</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/juba/tidyverse/edit/main/13-rmarkdown.qmd" class="toc-action">Modifier cette page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Diffuser et publier avec <code>rmarkdown</code></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>L’extension <code>rmarkdown</code> permet de générer des documents de manière dynamique en mélangeant texte mis en forme et résultats produits par du code R. Les documents générés peuvent être au format HTML, PDF, Word, et bien d’autres<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. C’est donc un outil très pratique pour l’exportation, la communication et la diffusion de résultats d’analyse.</p>
<p><code>rmarkdown</code> ne fait pas partie du <em>tidyverse</em>, mais elle est installée et chargée par défaut par RStudio<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>Voici un exemple de document R Markdown minimal&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-2_4ac1845089c98bf8cffc6c30eccac5c5">
<pre><code>---
title: "Test R Markdown"
---


*R Markdown* permet de mélanger :

- du texte libre mis en forme
- des blocs de code R

Les blocs de code sont exécutés et leur résultat affiché, par exemple :

```{r}
mean(mtcars$mpg)
```

## Graphiques

On peut également inclure des graphiques :

```{r}
plot(mtcars$hp, mtcars$mpg)
```</code></pre>
</div>
<p>Ce document peut être “compilé” sous différents formats. Lors de cette étape, le texte est mis en forme, les blocs de code sont exécutés, leur résultat ajouté au document, et le tout est transformé dans un des différents formats possibles.</p>
<p>Voici le rendu du document précédent au format HTML&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rmd_minimal_html.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Rendu HTML</figcaption><p></p>
</figure>
</div>
<p>Le rendu du même document au format PDF&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rmd_minimal_pdf.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Rendu PDF</figcaption><p></p>
</figure>
</div>
<p>Et le rendu au format <code>docx</code>&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rmd_minimal_word.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Rendu docx</figcaption><p></p>
</figure>
</div>
<p>Les avantages de ce système sont nombreux&nbsp;:</p>
<ul>
<li>le code et ses résultats ne sont pas séparés des commentaires qui leur sont associés</li>
<li>le document final est reproductible</li>
<li>le document peut être très facilement régénéré et mis à jour, par exemple si les données source ont été modifiées.</li>
</ul>
<section id="créer-un-nouveau-document" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="créer-un-nouveau-document"><span class="header-section-number">13.1</span> Créer un nouveau document</h2>
<p>Un document R Markdown est un simple fichier texte enregistré avec l’extension <code>.Rmd</code>.</p>
<p>Sous RStudio, on peut créer un nouveau document en allant dans le menu <em>File</em> puis en choisissant <em>New file</em> puis <em>R Markdown…</em>. La boîte de dialogue suivante s’affiche&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_new_rmarkdown.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Création d’un document R Markdown</figcaption><p></p>
</figure>
</div>
<p>On peut indiquer le titre, l’auteur du document ainsi que le format de sortie par défaut (il est possible de modifier facilement ces éléments par la suite). Plutôt qu’un document classique, on verra <a href="#sec-templates"><span>Section&nbsp;13.6</span></a> qu’on peut aussi choisir de créer une présentation sous forme de slides (entrée <em>Presentation</em>) ou de créer un document à partir d’un modèle (Entrée <em>From Template</em>).</p>
<p>Un fichier comportant un contenu d’exemple s’affiche alors. Vous pouvez l’enregistrer où vous le souhaitez avec une extension <code>.Rmd</code>.</p>
</section>
<section id="éléments-dun-document-r-markdown" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="éléments-dun-document-r-markdown"><span class="header-section-number">13.2</span> Éléments d’un document R Markdown</h2>
<p>Un document R Markdown est donc un fichier texte qui ressemble à quelque chose comme ça&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-3_ad25a4241e5acf14508cdfb4c8bed220">
<pre><code>---
title: "Titre"
author: "Prénom Nom"
date: "10 avril 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

Ceci est un document RMarkdown, qui mélange :

- du texte balisé selon la syntaxe Markdown
- des bouts de code R qui seront exécutés

Le code R se présente de la manière suivante :

```{r}
summary(cars)
```

## Graphiques

On peut aussi inclure des graphiques, par exemple :

```{r}
plot(pressure)
```</code></pre>
</div>
<p>On va décomposer les différents éléments constitutifs de ce document.</p>
<section id="en-tête-préambule" class="level3" data-number="13.2.1">
<h3 data-number="13.2.1" class="anchored" data-anchor-id="en-tête-préambule"><span class="header-section-number">13.2.1</span> En-tête (préambule)</h3>
<p>La première partie du document est son <em>en-tête</em>. Il se situe en tout début de document, et est délimité par trois tirets (<code>---</code>) avant et après&nbsp;:</p>
<pre><code>---
title: "Titre"
author: "Prénom Nom"
date: "10 avril 2017"
output: html_document
---</code></pre>
<p>Cet en-tête contient les métadonnées du document, comme son titre, son auteur, sa date, plus tout un tas d’options possibles qui vont permettre de configurer ou personnaliser l’ensemble du document et son rendu. Ici, par exemple, la ligne <code>output: html_document</code> indique que le document généré doit être au format HTML.</p>
</section>
<section id="texte-du-document" class="level3" data-number="13.2.2">
<h3 data-number="13.2.2" class="anchored" data-anchor-id="texte-du-document"><span class="header-section-number">13.2.2</span> Texte du document</h3>
<p>Le corps du document est constitué de texte qui suit la syntaxe <em>Markdown</em>. Un fichier Markdown est un fichier texte contenant un balisage léger qui permet de définir des niveaux de titres ou de mettre en forme le texte. Par exemple, le texte suivant&nbsp;:</p>
<pre><code>Ceci est du texte avec *de l'italique* et **du gras**.

On peut définir des listes à puces&nbsp;:

- premier élément
- deuxième élément</code></pre>
<p>Génèrera le texte mis en forme suivant&nbsp;:</p>
<blockquote class="blockquote">
<p>Ceci est du texte avec de l’<em>italique</em> et du <strong>gras</strong>.</p>
<p>On peut définir des listes à puces&nbsp;:</p>
<ul>
<li>premier élément</li>
<li>deuxième élément</li>
</ul>
</blockquote>
<p>On voit que des mots placés entre des astérisques sont mis en italique, des lignes qui commencent par un tiret sont transformés en liste à puce, etc.</p>
<p>On peut définir des titres de différents niveaux en faisant débuter une ligne par un ou plusieurs <code>#</code>&nbsp;:</p>
<pre><code># Titre de niveau 1

## Titre de niveau 2

### Titre de niveau 3</code></pre>
<p>Quand des titres ont été définis, si vous cliquez sur l’icône <em>Show document outline</em> totalement à droite de la barre d’outils associée au fichier R Markdown, une table des matières générée automatiquement à partir des titres s’affiche et vous permet de naviguer facilement dans le document&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_rmd_toc.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Table des matières dynamique</figcaption><p></p>
</figure>
</div>
<p>La syntaxe Markdown permet d’autres mises en forme, comme la possibilité d’insérer des liens ou des images. Par exemple, le code suivant&nbsp;:</p>
<pre><code>[Exemple de lien](https://example.com)</code></pre>
<p>Donnera le lien suivant&nbsp;:</p>
<blockquote class="blockquote">
<p><a href="https://example.com">Exemple de lien</a></p>
</blockquote>
<p>Dans RStudio, le menu <em>Help</em> puis <em>Markdown quick reference</em> donne un aperçu plus complet de la syntaxe.</p>
</section>
<section id="blocs-de-code-r" class="level3" data-number="13.2.3">
<h3 data-number="13.2.3" class="anchored" data-anchor-id="blocs-de-code-r"><span class="header-section-number">13.2.3</span> Blocs de code R</h3>
<p>En plus du texte libre au format Markdown, un document R Markdown contient, comme son nom l’indique, du code R. Celui-ci est inclus dans des blocs (<em>chunks</em>) délimités par la syntaxe suivante&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-4_780c2f7fbc7c0455420c785d0132c543">
<pre><code>```{r}
x &lt;- 1:5
```</code></pre>
</div>
<p>Comme cette suite de caractères n’est pas très simple à saisir, vous pouvez utiliser le menu <em>Insert</em> de RStudio et choisir <em>R</em><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, ou utiliser le raccourci clavier <code>Ctrl+Alt+i</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_insert_chunk.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Menu d’insertion d’un bloc de code</figcaption><p></p>
</figure>
</div>
<p>Dans RStudio les blocs de code R sont en général affichés avec une couleur de fond légèrement différente pour les distinguer du reste du document.</p>
<p>Quand votre curseur se trouve dans un bloc, vous pouvez saisir le code R que vous souhaitez, l’exécuter, utiliser l’autocomplétion, exactement comme si vous vous trouviez dans un script R. Vous pouvez également exécuter l’ensemble du code contenu dans un bloc à l’aide du raccourci clavier <code>Ctrl+Maj+Entrée</code>.</p>
<p>Dans RStudio, par défaut, les résultats d’un bloc de code (texte, tableau ou graphique) s’affichent directement <em>dans</em> la fenêtre d’édition du document, permettant de les visualiser facilement et de les conserver le temps de la session <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<p>Lorsque le document est “compilé” au format HTML, PDF ou docx, chaque bloc est exécuté tour à tour, et le résultat inclus dans le document final, qu’il s’agisse de texte, d’un tableau ou d’un graphique. Les blocs sont liés entre eux, dans le sens où les données importées ou calculées dans un bloc sont accessibles aux blocs suivants. On peut donc aussi voir un document R Markdown comme un script R dans lequel on aurait intercalé du texte libre au format Markdown.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>À noter qu’avant chaque compilation, une nouvelle session R est lancée, ne contenant aucun objet. Les premiers blocs de code d’un document sont donc souvent utilisés pour importer des données, exécuter des recodages, etc.</p>
</div>
</div>
</section>
<section id="compiler-un-document-knit" class="level3" data-number="13.2.4">
<h3 data-number="13.2.4" class="anchored" data-anchor-id="compiler-un-document-knit"><span class="header-section-number">13.2.4</span> Compiler un document (<em>Knit</em>)</h3>
<p>On peut à tout moment compiler, ou plutôt “tricoter” (<em>Knit</em>), un document R Markdown pour obtenir et visualiser le document généré. Pour cela, il suffit de cliquer sur le bouton <em>Knit</em> et de choisir le format de sortie voulu&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_knit_menu.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Menu <em>Knit</em></figcaption><p></p>
</figure>
</div>
<p>Vous pouvez aussi utiliser le raccourci <code>Ctrl+Maj+K</code> pour compiler le document dans le dernier format utilisé.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Avertissement
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour la génération du format PDF, vous devez avoir une installation fonctionnelle de <code>LaTeX</code> sur votre système.</p>
<p>Si ça n’est pas le cas, l’extension <code>tinytex</code> de Yihui Xie vise à faciliter l’installation d’une distribution <code>LaTeX</code> minimale quel que soit le système d’exploitation de votre machine. Pour l’utiliser il vous faut d’abord installer l’extension avec <code>install.packages('tinytex')</code>, puis lancer la commande suivante dans la console (prévoir un téléchargement d’environ 200Mo)&nbsp;:</p>
<p><code>tinytex::install_tinytex()</code></p>
<p>Plus d’informations sur <a href="https://yihui.name/tinytex/">le site de tinytex</a>.</p>
</div>
</div>
<p>Un onglet <em>R Markdown</em> s’ouvre dans la même zone que l’onglet <em>Console</em> et indique la progression de la compilation, ainsi que les messages d’erreur éventuels. Si tout se passe bien, Le document devrait s’afficher soit dans une fenêtre <em>Viewer</em> de RStudio (pour la sortie HTML), soit dans le logiciel par défaut de votre ordinateur.</p>
</section>
</section>
<section id="personnaliser-le-document-généré" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="personnaliser-le-document-généré"><span class="header-section-number">13.3</span> Personnaliser le document généré</h2>
<p>La personnalisation du document généré se fait en modifiant des options dans le préambule du document. RStudio propose néanmoins une petite interface graphique permettant de changer ces options plus facilement. Pour cela, cliquez sur l’icône en forme d’engrenage à droite du bouton <em>Knit</em> et choisissez <em>Output Options…</em></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_rmd_output_options.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Options de sortie R Markdown</figcaption><p></p>
</figure>
</div>
<p>Une boîte de dialogue s’affiche vous permettant de sélectionner le format de sortie souhaité et, selon le format, différentes options&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_rmd_output_dialog.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Dialogue d’options de sortie R Markdown</figcaption><p></p>
</figure>
</div>
<p>Pour le format HTML par exemple, l’onglet <em>General</em> vous permet de spécifier si vous voulez une table des matières, sa profondeur, les thèmes à appliquer pour le document et la coloration syntaxique des blocs R, etc. L’onglet <em>Figures</em> vous permet de changer les dimensions par défaut des graphiques générés.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Une option très intéressante pour les fichiers HTML, accessible via l’onglet <em>Advanced</em>, est l’entrée <em>Create standalone HTML document</em>. Si elle est cochée (ce qui est le cas par défaut), le document HTML généré contiendra en un seul fichier le code HTML mais aussi les images et toutes les autres ressources nécessaires à son affichage. Ceci permet de générer des fichiers (parfois assez volumineux) que vous pouvez transférer très facilement à quelqu’un par mail ou en le mettant en ligne quelque part. Si la case n’est pas cochée, les images et autres ressources sont placées dans un dossier à part.</p>
</div>
</div>
<p>Lorsque vous changez des options, RStudio va en fait modifier le préambule de votre document. Ainsi, si vous choisissez d’afficher une table des matières et de modifier le thème de coloration syntaxique, votre en-tête va devenir quelque chose comme&nbsp;:</p>
<pre><code>---
title: "Test R Markdown"
output:
   html_document: 
     highlight: kate
     toc: yes
---</code></pre>
<p>Vous pouvez modifier les options directement en éditant le préambule.</p>
<p>À noter qu’il est possible de spécifier des options différentes selon les formats, par exemple&nbsp;:</p>
<pre><code>---
title: "Test R Markdown"
output:
  html_document: 
    highlight: kate
    toc: yes
  pdf_document: 
    fig_caption: yes
    highlight: kate
---</code></pre>
<p>La liste complète des options possibles est présente sur <a href="http://rmarkdown.rstudio.com/formats.html">le site de la documentation officielle</a> (très complet et bien fait) et sur l’antisèche et le guide de référence, accessibles depuis RStudio via le menu <em>Help</em> puis <em>Cheatsheets</em>.</p>
</section>
<section id="options-des-blocs-de-code-r" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="options-des-blocs-de-code-r"><span class="header-section-number">13.4</span> Options des blocs de code R</h2>
<p>Il est également possible de passer des options à chaque bloc de code R pour modifier son comportement.</p>
<p>On rappelle qu’on bloc de code se présente de la manière suivante&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-5_9cbba683d88ddd47cbb15a7c39868cfe">
<pre><code>```{r}
x &lt;- 1:5
```</code></pre>
</div>
<p>Les options d’un bloc de code sont à placer à l’intérieur des accolades <code>{r}</code>.</p>
<section id="nom-du-bloc" class="level3" data-number="13.4.1">
<h3 data-number="13.4.1" class="anchored" data-anchor-id="nom-du-bloc"><span class="header-section-number">13.4.1</span> Nom du bloc</h3>
<p>La première possibilité est de donner un <em>nom</em> au bloc. Celui-ci est indiqué directement après le <code>r</code>&nbsp;:</p>
<p><code>{r nom_du_bloc}</code></p>
<p>Il n’est pas obligatoire de nommer un bloc, mais cela peut être utile en cas d’erreur à la compilation, pour identifier le bloc ayant causé le problème. Attention, on ne peut pas avoir deux blocs avec le même nom.</p>
</section>
<section id="options" class="level3" data-number="13.4.2">
<h3 data-number="13.4.2" class="anchored" data-anchor-id="options"><span class="header-section-number">13.4.2</span> Options</h3>
<p>En plus d’un nom, on peut passer à un bloc une série d’options sous la forme <code>option = valeur</code>. Voici un exemple de bloc avec un nom et des options&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-6_74d69d75312526e1d7255927548981d3">
<pre><code>```{r mon_bloc, echo = FALSE, warning = TRUE}
x &lt;- 1:5
```</code></pre>
</div>
<p>Et un exemple de bloc non nommé avec des options&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-7_e7544d37eb0d87eb865d01e387d5d59e">
<pre><code>```{r echo = FALSE, warning = FALSE}
x &lt;- 1:5
```</code></pre>
</div>
<p>Une des options utiles est l’option <code>echo</code>. Par défaut <code>echo</code> vaut <code>TRUE</code>, et le bloc de code R est inséré dans le document généré, de cette manière&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-8_1753297f517909f7170b07f29c556701">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mais si on positionne l’option <code>echo=FALSE</code>, alors le code R n’est plus inséré dans le document, et seul le résultat est visible&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-9_43a72bdcd99fa2cb4126af5cc51d58a7">
<pre><code>#&gt; [1] 1 2 3 4 5</code></pre>
</div>
<p>Voici une liste de quelques unes des options disponibles&nbsp;:</p>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 22%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Valeurs</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>echo</td>
<td>TRUE/FALSE</td>
<td>Afficher ou non le code R dans le document</td>
</tr>
<tr class="even">
<td>eval</td>
<td>TRUE/FALSE</td>
<td>Exécuter ou non le code R à la compilation</td>
</tr>
<tr class="odd">
<td>include</td>
<td>TRUE/FALSE</td>
<td>Inclure ou non le code R et ses résultats dans le document</td>
</tr>
<tr class="even">
<td>results</td>
<td>“hide”/“asis”/“markup”/“hold”</td>
<td>Type de résultats renvoyés par le bloc de code</td>
</tr>
<tr class="odd">
<td>warning</td>
<td>TRUE/FALSE</td>
<td>Afficher ou non les avertissements générés par le bloc</td>
</tr>
<tr class="even">
<td>message</td>
<td>TRUE/FALSE</td>
<td>Afficher ou non les messages générés par le bloc</td>
</tr>
</tbody>
</table>
<p>Il existe de nombreuses autres options décrites notamment dans <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">guide de référence R Markdown</a> (PDF en anglais).</p>
</section>
<section id="modifier-les-options" class="level3" data-number="13.4.3">
<h3 data-number="13.4.3" class="anchored" data-anchor-id="modifier-les-options"><span class="header-section-number">13.4.3</span> Modifier les options</h3>
<p>Il est possible de modifier les options manuellement en éditant l’en-tête du bloc de code, mais on peut aussi utiliser une petite interface graphique proposée par RStudio. Pour cela, il suffit de cliquer sur l’icône d’engrenage située à droite sur la ligne de l’en-tête de chaque bloc&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_chunk_options.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Menu d’options de bloc de code</figcaption><p></p>
</figure>
</div>
<p>Vous pouvez ensuite modifier les options les plus courantes, et cliquer sur <em>Apply</em> pour les appliquer.</p>
</section>
<section id="options-globales" class="level3" data-number="13.4.4">
<h3 data-number="13.4.4" class="anchored" data-anchor-id="options-globales"><span class="header-section-number">13.4.4</span> Options globales</h3>
<p>On peut vouloir appliquer une option à l’ensemble des blocs d’un document. Par exemple, on peut souhaiter par défaut ne pas afficher le code R de chaque bloc dans le document final.</p>
<p>On peut positionner une option globalement en utilisant la fonction <code>knitr::opts_chunk$set()</code>. Par exemple, insérer <code>knitr::opts_chunk$set(echo = FALSE)</code> dans un bloc de code positionnera l’option <code>echo = FALSE</code> par défaut pour tous les blocs suivants.</p>
<p>En général, on place toutes ces modifications globales dans un bloc spécial nommé <code>setup</code> et qui est le premier bloc du document&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-10_6ce8f3971a329d2963a905a6f4c8df96">
<pre><code>```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```</code></pre>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Par défaut RStudio exécute systématiquement le contenu du bloc <code>setup</code> avant d’exécuter celui d’un autre bloc.</p>
</div>
</div>
<p>Contrairement aux autres blocs de code, quand on utilise dans RStudio le menu des paramètres du bloc <code>setup</code> pour modifier ses options, celles-ci modifient non pas les options de ce bloc mais les options globales, en mettant à jour l’appel de la fonction <code>knitr::opts_chunk$set()</code>.</p>
</section>
<section id="mise-en-cache-des-résultats" class="level3" data-number="13.4.5">
<h3 data-number="13.4.5" class="anchored" data-anchor-id="mise-en-cache-des-résultats"><span class="header-section-number">13.4.5</span> Mise en cache des résultats</h3>
<p>Compiler un document R Markdown peut être long, car il faut à chaque fois exécuter l’ensemble des blocs de code R qui le constituent.</p>
<p>Pour accélérer cette opération, R Markdown utilise un système de <em>mise en cache</em>&nbsp;: les résultats de chaque bloc sont enregistrés dans un fichier et à la prochaine compilation, si le code et les options du bloc n’ont pas été modifiés, c’est le contenu du fichier de cache qui est utilisé, ce qui évite d’exécuter le code R.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>On peut activer ou désactiver la mise en cache des résultats pour chaque bloc de code avec l’option <code>cache = TRUE</code> ou <code>cache = FALSE</code>, et on peut aussi désactiver totalement la mise en cache pour le document en ajoutant <code>knitr::opts_chunk$set(cache = FALSE)</code> dans le premier bloc <em>setup</em>.</p>
</div>
</div>
<p>Ce système de cache peut poser problème par exemple si les données source changent&nbsp;: dans ce cas les résultats de certains blocs peuvent ne pas être mis à jour s’ils sont présents en cache. Dans ce cas, on peut vider le cache du document, ce qui forcera un recalcul de tous les blocs de code à la prochaine compilation. Pour cela, vous pouvez ouvrir le menu <em>Knit</em> et choisir <em>Clear Knitr Cache…</em>&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_knit_menu.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Menu <em>Knit</em></figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="rendu-des-tableaux" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="rendu-des-tableaux"><span class="header-section-number">13.5</span> Rendu des tableaux</h2>
<section id="tableaux-croisés" class="level3" data-number="13.5.1">
<h3 data-number="13.5.1" class="anchored" data-anchor-id="tableaux-croisés"><span class="header-section-number">13.5.1</span> Tableaux croisés</h3>
<p>Par défaut, les tableaux issus de la fonction <code>table</code> sont affichés comme ils apparaissent dans la console de R, en texte brut&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-11_b6f86a6bfc1f0c22ca2852aa06e6d598">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(hdv2003)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">lprop</span>(<span class="fu">table</span>(hdv2003<span class="sc">$</span>qualif, hdv2003<span class="sc">$</span>sexe))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>tab</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                           </span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                            Homme Femme Total</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Ouvrier specialise        47.3  52.7 100.0</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Ouvrier qualifie          78.4  21.6 100.0</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Technicien                76.7  23.3 100.0</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Profession intermediaire  55.0  45.0 100.0</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Cadre                     55.8  44.2 100.0</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Employe                   16.2  83.8 100.0</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Autre                     36.2  63.8 100.0</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   All                       44.8  55.2 100.0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On peut améliorer leur présentation en utilisant la fonction <code>kable</code> de l’extension <code>knitr</code>. Celle-ci fournit un formatage adapté en fonction du format de sortie. On aura donc des tableaux “propres” que ce soit en HTML, PDF ou aux formats traitements de texte&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-12_f17020c1400dbc6851ade0ae2ca621cd">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tab)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Homme</th>
<th style="text-align: right;">Femme</th>
<th style="text-align: right;">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ouvrier specialise</td>
<td style="text-align: right;">47.29064</td>
<td style="text-align: right;">52.70936</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ouvrier qualifie</td>
<td style="text-align: right;">78.42466</td>
<td style="text-align: right;">21.57534</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Technicien</td>
<td style="text-align: right;">76.74419</td>
<td style="text-align: right;">23.25581</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">Profession intermediaire</td>
<td style="text-align: right;">55.00000</td>
<td style="text-align: right;">45.00000</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadre</td>
<td style="text-align: right;">55.76923</td>
<td style="text-align: right;">44.23077</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">Employe</td>
<td style="text-align: right;">16.16162</td>
<td style="text-align: right;">83.83838</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Autre</td>
<td style="text-align: right;">36.20690</td>
<td style="text-align: right;">63.79310</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">All</td>
<td style="text-align: right;">44.82759</td>
<td style="text-align: right;">55.17241</td>
<td style="text-align: right;">100</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Différents arguments permettent de modifier la sortie de <code>kable</code>. <code>digits</code>, par exemple, permet de spécifier le nombre de chiffres significatifs à afficher dans les colonnes de nombres&nbsp;:</p>
<div class="cell" data-hash="13-rmarkdown_cache/html/unnamed-chunk-13_33aded40a6096663a08f5d250eba0efb">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tab, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Homme</th>
<th style="text-align: right;">Femme</th>
<th style="text-align: right;">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ouvrier specialise</td>
<td style="text-align: right;">47.3</td>
<td style="text-align: right;">52.7</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ouvrier qualifie</td>
<td style="text-align: right;">78.4</td>
<td style="text-align: right;">21.6</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Technicien</td>
<td style="text-align: right;">76.7</td>
<td style="text-align: right;">23.3</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">Profession intermediaire</td>
<td style="text-align: right;">55.0</td>
<td style="text-align: right;">45.0</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadre</td>
<td style="text-align: right;">55.8</td>
<td style="text-align: right;">44.2</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">Employe</td>
<td style="text-align: right;">16.2</td>
<td style="text-align: right;">83.8</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Autre</td>
<td style="text-align: right;">36.2</td>
<td style="text-align: right;">63.8</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">All</td>
<td style="text-align: right;">44.8</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">100</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="tableaux-de-données-et-tris-à-plat" class="level3" data-number="13.5.2">
<h3 data-number="13.5.2" class="anchored" data-anchor-id="tableaux-de-données-et-tris-à-plat"><span class="header-section-number">13.5.2</span> Tableaux de données et tris à plat</h3>
<p>En ce qui concerne les tableaux de données (tibble ou <em>data frame</em>), l’affichage HTML par défaut se contente d’un affichage texte comme dans la console, très peu lisible dès que le tableau dépasse une certaine taille.</p>
<p>Une alternative est d’utiliser la fonction <code>paged_table</code>, qui affiche une représentation HTML paginée du tableau&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rmarkdown_paged_table.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Rendu d’une table par <code>paged_table</code></figcaption><p></p>
</figure>
</div>
<p>Une alternative est d’utiliser <code>kable</code>, comme précédemment pour les tableaux croisés, ou encore la fonction <code>datatable</code> de l’extension <code>DT</code>, qui propose encore davantage d’interactivité&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rmarkdown_datatable.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Rendu d’une table par <code>DT::datatable</code></figcaption><p></p>
</figure>
</div>
<p>Dans tous les cas il est déconseillé d’afficher de cette manière un tableau de données de très grandes dimensions, car le fichier HTML résultant contiendrait l’ensemble des données et serait donc très volumineux.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>On peut définir un mode d’affichage par défaut pour tous les tableaux de données en modifiant les <em>Output options</em> du format HTML (onglet <em>General</em>, <em>Print dataframes as</em>), ou en modifiant manuellement l’option <code>df_print</code> de l’entrée <code>html_document</code> dans le préambule.</p>
<p>À noter que les tableaux issus de la fonction <code>freq</code> de <code>questionr</code> s’affichent comme des tableaux de données (et non comme des tableaux croisés).</p>
</div>
</div>
</section>
</section>
<section id="sec-templates" class="level2" data-number="13.6">
<h2 data-number="13.6" class="anchored" data-anchor-id="sec-templates"><span class="header-section-number">13.6</span> Modèles de documents</h2>
<p>On a vu ici la production de documents “classiques”, mais R Markdown permet de créer bien d’autres choses.</p>
<p>Le site de documentation de l’extension propose <a href="http://rmarkdown.rstudio.com/gallery.html">une galerie</a> des différentes sorties possibles. On peut ainsi créer des slides, des sites Web ou même des livres entiers, comme le présent document.</p>
<section id="slides" class="level3" data-number="13.6.1">
<h3 data-number="13.6.1" class="anchored" data-anchor-id="slides"><span class="header-section-number">13.6.1</span> Slides</h3>
<p>Un usage intéressant est la création de diaporamas pour des présentations sous forme de slides. Le principe reste toujours le même&nbsp;: on mélange texte au format Markdown et code R, et R Markdown transforme le tout en présentations au format HTML ou PDF. En général les différents slides sont séparés au niveau de certains niveaux de titre.</p>
<p>Certains modèles de slides sont inclus avec R Markdown, notamment&nbsp;:</p>
<ul>
<li><code>ioslides</code> et <code>Slidy</code> pour des présentations HTML</li>
<li><code>beamer</code> pour des présentations en PDF via <code>LaTeX</code></li>
</ul>
<p>Quand vous créez un nouveau document dans RStudio, ces modèles sont accessibles via l’entrée <em>Presentation</em>&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_rmd_presentation.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Créer une présentation R Markdown</figcaption><p></p>
</figure>
</div>
<p>D’autres extensions, qui doivent être installées séparément, permettent aussi des diaporamas dans des formats variés. On citera notamment&nbsp;:</p>
<ul>
<li><a href="https://slides.yihui.name/xaringan/%20pour">xaringan</a> pour des présentations HTML basées sur <a href="https://remarkjs.com/">remark.js</a></li>
<li><a href="https://github.com/rstudio/revealjs">revealjs</a> pour des présentations HTML basées sur <a href="http://lab.hakim.se/reveal-js/#/">reveal.js</a></li>
<li><a href="https://github.com/mangothecat/rmdshower">rmdshower</a> pour des diaporamas HTML basés sur <a href="https://github.com/shower/shower">shower</a></li>
</ul>
<p>Une fois l’extension installée, elle propose en général un <em>template</em> de départ lorsqu’on crée un nouveau document dans RStudio. Ceux-ci sont accessibles depuis l’entrée <em>From Template</em>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_rmd_templates.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Créer une présentation à partir d’un template</figcaption><p></p>
</figure>
</div>
</section>
<section id="templates" class="level3" data-number="13.6.2">
<h3 data-number="13.6.2" class="anchored" data-anchor-id="templates"><span class="header-section-number">13.6.2</span> Templates</h3>
<p>Il existe également différents <em>templates</em> permettant de changer le format et la présentation des documents générés. Une liste de ces formats et leur documentation associée est accessible depuis la page <a href="http://rmarkdown.rstudio.com/formats.html">formats</a> de la documentation.</p>
<p>On notera notamment&nbsp;:</p>
<ul>
<li>le format <a href="https://rstudio.github.io/distill/">Distill</a>, adapté à des publications scientifiques ou techniques sur le Web</li>
<li>le format <a href="http://rmarkdown.rstudio.com/tufte_handout_format.html">Tufte Handouts</a> qui permet de produire des documents PDF ou HTML dans un format proche de celui utilisé par Edward Tufte pour certaines de ses publications</li>
<li><a href="https://github.com/rstudio/rticles">rticles</a>, package qui propose des templates LaTeX pour plusieurs revues scientifiques</li>
</ul>
<p>Enfin, l’extension <a href="https://github.com/juba/rmdformats">rmdformats</a> propose plusieurs modèles HTML adaptés notamment pour des documents longs&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/rmdformats_templates/readthedown.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Modèle <code>readthedown</code></figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/rmdformats_templates/downcute.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Modèle <code>downcute</code></figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/rmdformats_templates/robobook.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Modèle <code>robobook</code></figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/rmdformats_templates/material.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Modèle <code>material</code></figcaption><p></p>
</figure>
</div>
<p>Là encore, la plupart du temps, ces modèles de documents proposent un <em>template</em> de départ lorsqu’on crée un nouveau document dans RStudio (entrée <em>From Template</em>)&nbsp;:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/screenshots/rstudio_rmd_templates.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Créer un document à partir d’un template</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="ressources" class="level2" data-number="13.7">
<h2 data-number="13.7" class="anchored" data-anchor-id="ressources"><span class="header-section-number">13.7</span> Ressources</h2>
<p>Les ressources suivantes sont toutes en anglais…</p>
<p>L’ouvrage <em>R for data science</em>, accessible en ligne, contient <a href="http://r4ds.had.co.nz/r-markdown.html">un chapitre dédié à R Markdown</a>.</p>
<p>Le <a href="http://rmarkdown.rstudio.com/">site officiel de l’extension</a> contient une documentation très complète, tant pour les débutants que pour un usage avancé.</p>
<p>Enfin, l’aide de RStudio (menu <em>Help</em> puis <em>Cheatsheets</em>) permet d’accéder à deux documents de synthèse&nbsp;: une “antisèche” synthétique (<em>R Markdown Cheat Sheet</em>) et un “guide de référence” plus complet (<em>R Markdown Reference Guide</em>).</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>On peut citer les formats <code>odt</code>, <code>rtf</code>, Markdown, etc.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Si vous n’utilisez pas ce dernier, l’extension peut être installée à part avec <code>install.packages("rmarkdown")</code> et chargée explicitement avec <code>library(rmarkdown)</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Il est possible d’inclure dans un document R Markdown des blocs de code d’autres langages<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Ce comportement peut être modifié en cliquant sur l’icône d’engrenage de la barre d’outils et en choisissant <em>Chunk Output in Console</em><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./12-tidyr.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Mettre en ordre avec <code>tidyr</code></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./14-fonctions.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Écrire ses propres fonctions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script src="js/tidyverse.js"></script>



</body></html>